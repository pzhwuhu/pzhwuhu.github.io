<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="light"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar_1.jpg"><link rel="icon" href="/img/avatar_1.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="pzhwuhu"><meta name="keywords" content=""><meta name="description" content="这是我复习《UNIX系统》这门课程时记录的一些笔记 ，希望能对你有所帮助😊             Shell编程一、Shell编程的意义 将命令组合成实用工具  示例：创建显示目录的脚本123456# lsdir脚本内容ls -l | sed -n &#x27;&#x2F;^d&#x2F;p&#x27; # 使用方式chmod +x lsdir.&#x2F;lsdir   快速编写实用软件  示例"><meta property="og:type" content="article"><meta property="og:title" content="UNIX系统复习-4"><meta property="og:url" content="http://pzhwuhu.github.io/2025/05/31/UNIX_Review_4/index.html"><meta property="og:site_name" content="鹏哥"><meta property="og:description" content="这是我复习《UNIX系统》这门课程时记录的一些笔记 ，希望能对你有所帮助😊             Shell编程一、Shell编程的意义 将命令组合成实用工具  示例：创建显示目录的脚本123456# lsdir脚本内容ls -l | sed -n &#x27;&#x2F;^d&#x2F;p&#x27; # 使用方式chmod +x lsdir.&#x2F;lsdir   快速编写实用软件  示例"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://pzhwuhu.github.io/myimg/%E5%8D%83%E4%B8%8E%E5%8D%83%E5%AF%BB.jpg"><meta property="article:published_time" content="2025-05-31T04:17:11.000Z"><meta property="article:modified_time" content="2025-05-31T04:17:25.401Z"><meta property="article:author" content="pzhwuhu"><meta property="article:tag" content="Linux"><meta property="article:tag" content="UNIX"><meta property="article:tag" content="复习"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="http://pzhwuhu.github.io/myimg/%E5%8D%83%E4%B8%8E%E5%8D%83%E5%AF%BB.jpg"><title>UNIX系统复习-4 - 鹏哥</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom_dark_mode.css"><link rel="stylesheet" href="/css/scroll_animation.css"><link rel="stylesheet" href="/css/mac.css"><link rel="stylesheet" href="/css/loading.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/gradient.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"pzhwuhu.github.io",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!1,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:{key:null},google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"cp3oK6SJdvk7QCx0TiMpNSdI-gzGzoHsz",app_key:"B9u5rSWtXwzrQl56fuCE0o9M",server_url:"https://cp3ok6sj.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>if(!Fluid.ctx.dnt){var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?[object Object]";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}</script><meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="header-inner" style="height:90vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>身如芥子，心藏须弥</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url('/myimg/%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%976.png') no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="UNIX系统复习-4"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> pzhwuhu </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-05-31 12:17" pubdate>2025年5月31日 中午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 37 分钟 </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> 次</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Linux" id="heading-edc9f0a5a5d57797bf68e37364743831" role="tab" data-toggle="collapse" href="#collapse-edc9f0a5a5d57797bf68e37364743831" aria-expanded="true">Linux <span class="list-group-count">(6)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-edc9f0a5a5d57797bf68e37364743831" role="tabpanel" aria-labelledby="heading-edc9f0a5a5d57797bf68e37364743831"><div class="category-post-list"><a href="/2025/05/27/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/" title="UNIX系统复习-1" class="list-group-item list-group-item-action"><span class="category-post">UNIX系统复习-1</span> </a><a href="/2025/05/30/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/" title="UNIX系统复习-2" class="list-group-item list-group-item-action"><span class="category-post">UNIX系统复习-2</span> </a><a href="/2025/05/31/UNIX_Review_3/" title="UNIX系统复习-3" class="list-group-item list-group-item-action"><span class="category-post">UNIX系统复习-3</span> </a><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/" title="UNIX系统复习-3" class="list-group-item list-group-item-action"><span class="category-post">UNIX系统复习-3</span> </a><a href="/2025/05/31/UNIX_Review_4/" title="UNIX系统复习-4" class="list-group-item list-group-item-action active"><span class="category-post">UNIX系统复习-4</span> </a><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/" title="UNIX系统复习-4" class="list-group-item list-group-item-action"><span class="category-post">UNIX系统复习-4</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">UNIX系统复习-4</h1><div class="markdown-body"><div class="note note-info"><p>这是我复习《UNIX系统》这门课程时记录的一些笔记 ，希望能对你有所帮助😊</p></div><h1 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h1><h2 id="一、Shell编程的意义"><a href="#一、Shell编程的意义" class="headerlink" title="一、Shell编程的意义"></a>一、Shell编程的意义</h2><ol><li><p><strong>将命令组合成实用工具</strong></p><ul><li>示例：创建显示目录的脚本<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># lsdir脚本内容</span><br><span class="hljs-built_in">ls</span> -l | sed -n <span class="hljs-string">&#x27;/^d/p&#x27;</span><br> <br><span class="hljs-comment"># 使用方式</span><br><span class="hljs-built_in">chmod</span> +x lsdir<br>./lsdir<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>快速编写实用软件</strong></p><ul><li>示例：带行号的文件查看器<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># mycat脚本内容</span><br>awk <span class="hljs-string">&#x27;&#123;print NR, &quot;: &quot;, $0&#125;&#x27;</span> <span class="hljs-variable">$1</span><br> <br><span class="hljs-comment"># 使用方式</span><br><span class="hljs-built_in">chmod</span> +x mycat<br>./mycat filename<br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="二、位置参数"><a href="#二、位置参数" class="headerlink" title="二、位置参数"></a>二、位置参数</h2><ol><li><p><strong>基本位置参数</strong></p><ul><li><code>$0</code>：脚本名称</li><li><code>$1</code>, <code>$2</code>, …：第1、2个参数等</li><li><code>$#</code>：参数个数</li><li><code>$*</code>：所有参数集合</li></ul></li><li><p><strong>参数重置与移动</strong></p><ul><li>使用<code>set</code>重置参数：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> new1 new2  <span class="hljs-comment"># 重置$1为new1，$2为new2</span><br></code></pre></td></tr></table></figure></li><li>使用<code>shift</code>移动参数：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">shift</span>    <span class="hljs-comment"># 左移1位，丢弃$1</span><br><span class="hljs-built_in">shift</span> 2  <span class="hljs-comment"># 左移2位</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="三、Shell命令行结构"><a href="#三、Shell命令行结构" class="headerlink" title="三、Shell命令行结构"></a>三、Shell命令行结构</h2><ol><li><p><strong>命令组合</strong></p><ul><li>顺序执行：<code>cmd1; cmd2</code></li><li>管道：<code>cmd1 | cmd2</code></li><li>后台执行：<code>cmd &amp;</code></li></ul></li><li><p><strong>命令分组</strong></p><ul><li>子shell执行：<code>(cmd1; cmd2)</code></li><li>当前shell执行：<code>&#123; cmd1; cmd2; &#125;</code></li></ul></li></ol><h2 id="四、命令行模式与元字符"><a href="#四、命令行模式与元字符" class="headerlink" title="四、命令行模式与元字符"></a>四、命令行模式与元字符</h2><table><thead><tr><th>元字符</th><th>功能描述</th></tr></thead><tbody><tr><td><code>&gt;</code></td><td>输出重定向</td></tr><tr><td><code>&gt;&gt;</code></td><td>追加输出</td></tr><tr><td><code>&lt;</code></td><td>输入重定向</td></tr><tr><td><code>|</code></td><td>管道</td></tr><tr><td><code>*</code></td><td>通配符</td></tr><tr><td><code>?</code></td><td>单字符匹配</td></tr><tr><td><code>[a-z]</code></td><td>字符范围匹配</td></tr><tr><td><code>;</code></td><td>命令分隔符</td></tr><tr><td><code>&amp;</code></td><td>后台执行</td></tr><tr><td><code>`</code></td><td>命令替换</td></tr><tr><td><code>$()</code></td><td>命令替换(推荐)</td></tr><tr><td><code>#</code></td><td>注释</td></tr></tbody></table><h2 id="五、引号使用"><a href="#五、引号使用" class="headerlink" title="五、引号使用"></a>五、引号使用</h2><ol><li><p><strong>单引号</strong>：完全原样输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;$USER `date`&#x27;</span>  <span class="hljs-comment"># 输出: $USER `date`</span><br></code></pre></td></tr></table></figure></li><li><p><strong>双引号</strong>：允许变量和命令替换</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> `date`&quot;</span>  <span class="hljs-comment"># 输出当前用户和日期</span><br></code></pre></td></tr></table></figure></li><li><p><strong>反引号</strong>：命令替换(已过时，推荐使用$())</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is `date`&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is <span class="hljs-subst">$(date)</span>&quot;</span>  <span class="hljs-comment"># 推荐写法</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="六、重定向"><a href="#六、重定向" class="headerlink" title="六、重定向"></a>六、重定向</h2><ol><li><p><strong>标准重定向</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd &gt; file    <span class="hljs-comment"># 输出重定向</span><br>cmd &gt;&gt; file   <span class="hljs-comment"># 追加输出</span><br>cmd &lt; file    <span class="hljs-comment"># 输入重定向</span><br></code></pre></td></tr></table></figure></li><li><p><strong>错误重定向</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd 2&gt; error.log          <span class="hljs-comment"># 错误输出到文件</span><br>cmd &gt; output.log 2&gt;&amp;1     <span class="hljs-comment"># 标准和错误都输出到文件</span><br>cmd &amp;&gt; all_output.log     <span class="hljs-comment"># 同上(更简洁)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>Here Document</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">多行文本</span><br><span class="hljs-string">可以直接输入</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="七、Shell程序结构"><a href="#七、Shell程序结构" class="headerlink" title="七、Shell程序结构"></a>七、Shell程序结构</h2><ol><li><strong>基本结构</strong>：命令序列</li><li><strong>主要命令类型</strong>：<ul><li>普通命令</li><li>赋值命令</li><li>运算命令</li><li>流程控制(if&#x2F;case&#x2F;for&#x2F;while)</li></ul></li></ol><h2 id="八、流程控制"><a href="#八、流程控制" class="headerlink" title="八、流程控制"></a>八、流程控制</h2><ol><li><p><strong>if语句</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">elif</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">else</span><br>  commands<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>case语句</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">case</span> <span class="hljs-variable">$var</span> <span class="hljs-keyword">in</span><br>  pattern1) commands ;;<br>  pattern2) commands ;;<br>  *) default commands ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure></li><li><p><strong>for循环</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 形式1</span><br><span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br> <br><span class="hljs-comment"># 形式2(C风格)</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)); <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>while循环</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>until循环</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">until</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="九、test命令与条件判断"><a href="#九、test命令与条件判断" class="headerlink" title="九、test命令与条件判断"></a>九、test命令与条件判断</h2><p>test</p><ol><li><p><strong>文件测试</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -e file ]    <span class="hljs-comment"># 文件存在</span><br>[ -f file ]    <span class="hljs-comment"># 是普通文件</span><br>[ -d file ]    <span class="hljs-comment"># 是目录</span><br>[ -s file ]    <span class="hljs-comment"># 文件非空</span><br></code></pre></td></tr></table></figure></li><li><p><strong>字符串测试</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># 字符串为空</span><br>[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># 字符串非空</span><br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> = <span class="hljs-string">&quot;<span class="hljs-variable">$b</span>&quot;</span> ] <span class="hljs-comment"># 字符串相等</span><br></code></pre></td></tr></table></figure></li><li><p><strong>数值比较</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ <span class="hljs-variable">$a</span> -eq <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># 等于</span><br>[ <span class="hljs-variable">$a</span> -ne <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># 不等于</span><br>[ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># 大于</span><br>[ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># 小于</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="十、Shell内部变量"><a href="#十、Shell内部变量" class="headerlink" title="十、Shell内部变量"></a>十、Shell内部变量</h2><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td><code>$?</code></td><td>上条命令退出状态</td></tr><tr><td><code>$$</code></td><td>当前shell的PID</td></tr><tr><td><code>$!</code></td><td>最后后台进程PID</td></tr><tr><td><code>$#</code></td><td>参数个数</td></tr><tr><td><code>$@</code></td><td>所有参数(保留引号)</td></tr><tr><td><code>$*</code></td><td>所有参数(不保留引号)</td></tr><tr><td><code>$_</code></td><td>上条命令的最后一个参数</td></tr></tbody></table><h2 id="十一、实用示例"><a href="#十一、实用示例" class="headerlink" title="十一、实用示例"></a>十一、实用示例</h2><ol><li><p><strong>查找命令路径(mywhich)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$#</span> <span class="hljs-keyword">in</span><br>  0) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> cmd&quot;</span>; <span class="hljs-built_in">exit</span> 1 ;;<br><span class="hljs-keyword">esac</span><br> <br>IFS=:<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">dir</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">$PATH</span>; <span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> [ -x <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-built_in">exit</span> 0<br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>: not found&quot;</span><br><span class="hljs-built_in">exit</span> 1<br></code></pre></td></tr></table></figure></li><li><p><strong>倒序显示参数</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-variable">$#</span>; i&gt;<span class="hljs-number">0</span>; i--)); <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;!i&#125;</span>  <span class="hljs-comment"># 间接引用</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="十二、Shell编程优缺点"><a href="#十二、Shell编程优缺点" class="headerlink" title="十二、Shell编程优缺点"></a>十二、Shell编程优缺点</h2><p><strong>优点</strong>：</p><ul><li>快速组合现有命令</li><li>无需编译，修改方便</li><li>适合系统管理任务</li></ul><p><strong>缺点</strong>：</p><ul><li>执行效率较低</li><li>复杂逻辑可读性差</li><li>可移植性受限</li></ul><h2 id="最佳实践建议"><a href="#最佳实践建议" class="headerlink" title="最佳实践建议"></a>最佳实践建议</h2><ol><li>总在第一行指定解释器：<code>#!/bin/bash</code></li><li>使用<code>$()</code>代替反引号进行命令替换</li><li>变量引用加双引号：<code>&quot;$var&quot;</code></li><li>使用<code>[[ ]]</code>代替<code>[ ]</code>进行条件测试(更强大)</li><li>为脚本添加帮助信息和错误处理</li><li>复杂脚本考虑使用Python等更强大的语言</li></ol><p>通过掌握这些核心知识，您可以编写出高效、可靠的Shell脚本，完成各种系统管理和自动化任务。</p><h1 id="C语言开发环境"><a href="#C语言开发环境" class="headerlink" title="C语言开发环境"></a>C语言开发环境</h1><h2 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h2><ol><li><p><strong>C语言与UNIX的关系</strong></p><ul><li>1973年由Dennis Ritchie发明，用于重写UNIX系统</li><li>成为UNIX系统的”自然”语言</li><li>1988年IEEE推出POSIX标准，统一了C语言头文件</li></ul></li><li><p><strong>C语言优势</strong></p><ul><li>高效性：直接操作硬件</li><li>可移植性：POSIX标准确保跨平台兼容性</li><li>广泛应用：系统编程、嵌入式开发首选语言</li></ul></li></ol><h2 id="二、C程序实例分析"><a href="#二、C程序实例分析" class="headerlink" title="二、C程序实例分析"></a>二、C程序实例分析</h2><h3 id="1-基本结构"><a href="#1-基本结构" class="headerlink" title="1. 基本结构"></a>1. 基本结构</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* 注释：传统第一个C程序 */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span>  <span class="hljs-comment">// 预编译指令：包含标准I/O头文件</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span> &#123;  <span class="hljs-comment">// 主函数，程序入口</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World!\n&quot;</span>);      <span class="hljs-comment">// 输出语句</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;                      <span class="hljs-comment">// 返回值(0表示成功)</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-关键语法解析"><a href="#2-关键语法解析" class="headerlink" title="2. 关键语法解析"></a>2. 关键语法解析</h3><ol><li><p><strong>注释</strong></p><ul><li><code>/* ... */</code>：多行注释</li><li><code>//</code>：单行注释(C99标准)</li></ul></li><li><p><strong>预编译指令</strong></p><ul><li><code>#include &lt;头文件&gt;</code>：从系统路径(&#x2F;usr&#x2F;include)加载</li><li><code>#include &quot;头文件&quot;</code>：从当前目录加载</li></ul></li><li><p><strong>主函数</strong></p><ul><li>必须的入口函数</li><li>参数：<ul><li><code>argc</code>：参数个数</li><li><code>argv[]</code>：参数数组(argv[0]为程序名)</li></ul></li><li>返回值：<ul><li>0表示成功</li><li>非0表示错误(便于Shell脚本判断)</li></ul></li></ul></li></ol><h2 id="三、C编译过程"><a href="#三、C编译过程" class="headerlink" title="三、C编译过程"></a>三、C编译过程</h2><h3 id="1-四个阶段"><a href="#1-四个阶段" class="headerlink" title="1. 四个阶段"></a>1. 四个阶段</h3><ol><li><p><strong>预处理</strong></p><ul><li>处理<code>#include</code>、<code>#define</code>等指令</li><li>生成<code>.i</code>文件</li></ul></li><li><p><strong>编译</strong></p><ul><li>词法&#x2F;语法分析</li><li>生成汇编代码(.s文件)</li></ul></li><li><p><strong>汇编</strong></p><ul><li>将汇编代码转为机器码</li><li>生成目标文件(.o)</li></ul></li><li><p><strong>链接</strong></p><ul><li>合并多个目标文件</li><li>生成可执行程序</li></ul></li></ol><h3 id="2-常用GCC命令"><a href="#2-常用GCC命令" class="headerlink" title="2. 常用GCC命令"></a>2. 常用GCC命令</h3><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>gcc hello.c</code></td><td>生成a.out</td></tr><tr><td><code>gcc -o hello hello.c</code></td><td>指定输出文件名</td></tr><tr><td><code>gcc -c file.c</code></td><td>仅编译生成.o文件</td></tr><tr><td><code>gcc -g program.c</code></td><td>加入调试信息</td></tr></tbody></table><h2 id="四、调试工具GDB"><a href="#四、调试工具GDB" class="headerlink" title="四、调试工具GDB"></a>四、调试工具GDB</h2><h3 id="1-核心功能"><a href="#1-核心功能" class="headerlink" title="1. 核心功能"></a>1. 核心功能</h3><ul><li>设置断点</li><li>单步执行</li><li>查看变量值</li><li>修改程序状态</li></ul><h3 id="2-常用命令"><a href="#2-常用命令" class="headerlink" title="2. 常用命令"></a>2. 常用命令</h3><table><thead><tr><th>命令</th><th>功能</th></tr></thead><tbody><tr><td><code>gdb ./a.out</code></td><td>启动调试</td></tr><tr><td><code>break main</code></td><td>在main函数设断点</td></tr><tr><td><code>run</code></td><td>运行程序</td></tr><tr><td><code>print x</code></td><td>查看变量x的值</td></tr><tr><td><code>next</code></td><td>单步执行(不进入函数)</td></tr><tr><td><code>quit</code></td><td>退出GDB</td></tr></tbody></table><h2 id="五、工程管理工具Make"><a href="#五、工程管理工具Make" class="headerlink" title="五、工程管理工具Make"></a>五、工程管理工具Make</h2><h3 id="1-Makefile规则"><a href="#1-Makefile规则" class="headerlink" title="1. Makefile规则"></a>1. Makefile规则</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">目标文件: 依赖文件1 依赖文件2 ...</span><br>    &lt;tab&gt;命令1<br>    &lt;tab&gt;命令2<br></code></pre></td></tr></table></figure><h3 id="2-示例"><a href="#2-示例" class="headerlink" title="2. 示例"></a>2. 示例</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">app: main.o utils.o</span><br>    gcc -o app main.o utils.o<br><br><span class="hljs-section">main.o: main.c</span><br>    gcc -c main.c<br><br><span class="hljs-section">utils.o: utils.c</span><br>    gcc -c utils.c<br><br><span class="hljs-section">clean:</span><br>    rm -f *.o app<br><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: clean</span><br></code></pre></td></tr></table></figure><h3 id="3-重要概念"><a href="#3-重要概念" class="headerlink" title="3. 重要概念"></a>3. 重要概念</h3><ol><li><p><strong>变量</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile">OBJS = main.o utils.o<br><span class="hljs-section">app: <span class="hljs-variable">$(OBJS)</span></span><br>    gcc -o app <span class="hljs-variable">$(OBJS)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>隐含规则</strong></p><ul><li>自动推导依赖关系</li><li>如<code>.o</code>文件自动从<code>.c</code>文件生成</li></ul></li><li><p><strong>伪目标</strong></p><ul><li>用于非编译任务(如clean)</li><li>需用<code>.PHONY</code>声明</li></ul></li></ol><h2 id="六、标准C函数"><a href="#六、标准C函数" class="headerlink" title="六、标准C函数"></a>六、标准C函数</h2><h3 id="1-系统调用-vs-库函数"><a href="#1-系统调用-vs-库函数" class="headerlink" title="1. 系统调用 vs 库函数"></a>1. 系统调用 vs 库函数</h3><table><thead><tr><th>特性</th><th>系统调用</th><th>库函数</th></tr></thead><tbody><tr><td>提供者</td><td>操作系统内核</td><td>编程语言</td></tr><tr><td>功能</td><td>基础接口</td><td>高级封装</td></tr><tr><td>示例</td><td>write()</td><td>printf()</td></tr><tr><td>可替换性</td><td>不可替换</td><td>可替换</td></tr></tbody></table><h3 id="2-UNIX体系结构"><a href="#2-UNIX体系结构" class="headerlink" title="2. UNIX体系结构"></a>2. UNIX体系结构</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">应用程序 → 库函数 → 系统调用 → 内核<br></code></pre></td></tr></table></figure><h3 id="3-标准化"><a href="#3-标准化" class="headerlink" title="3. 标准化"></a>3. 标准化</h3><ol><li><p><strong>ISO C</strong></p><ul><li>C90(1989)、C99(1999)</li><li>定义24个标准头文件</li></ul></li><li><p><strong>POSIX</strong></p><ul><li>增强UNIX系统可移植性</li><li>定义26个必需头文件</li></ul></li><li><p><strong>SUS</strong></p><ul><li>单一UNIX规范</li><li>扩展POSIX功能</li></ul></li></ol><h1 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h1><h2 id="一、文件I-O（文件操作）"><a href="#一、文件I-O（文件操作）" class="headerlink" title="一、文件I&#x2F;O（文件操作）"></a><strong>一、文件I&#x2F;O（文件操作）</strong></h2><h3 id="1-文件描述符（File-Descriptor-fd）"><a href="#1-文件描述符（File-Descriptor-fd）" class="headerlink" title="1. 文件描述符（File Descriptor, fd）"></a><strong>1. 文件描述符（File Descriptor, fd）</strong></h3><ul><li><strong>定义</strong>：非负整数，用于标识进程打开的文件。</li><li><strong>默认文件描述符</strong>：<ul><li><code>0</code>：标准输入（<code>STdin_FILENO</code>，键盘输入）。</li><li><code>1</code>：标准输出（<code>STDOUT_FILENO</code>，屏幕输出）。</li><li><code>2</code>：标准错误（<code>STDERR_FILENO</code>，屏幕错误输出）。</li></ul></li></ul><h4 id="示例：读取标准输入并写入标准输出"><a href="#示例：读取标准输入并写入标准输出" class="headerlink" title="示例：读取标准输入并写入标准输出"></a><strong>示例：读取标准输入并写入标准输出</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];<br>    <span class="hljs-type">ssize_t</span> n = read(STDIN_FILENO, buf, <span class="hljs-keyword">sizeof</span>(buf));  <span class="hljs-comment">// 从键盘读取</span><br>    write(STDOUT_FILENO, buf, n);                      <span class="hljs-comment">// 输出到屏幕</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>解释</strong>：</p><ul><li><code>read(fd, buf, size)</code>：从 <code>fd</code> 读取最多 <code>size</code> 字节到 <code>buf</code>，返回实际读取字节数。</li><li><code>write(fd, buf, size)</code>：将 <code>buf</code> 的 <code>size</code> 字节写入 <code>fd</code>。</li></ul><hr><h3 id="2-open-和-creat"><a href="#2-open-和-creat" class="headerlink" title="2. open() 和 creat()"></a><strong>2. <code>open()</code> 和 <code>creat()</code></strong></h3><h4 id="open-函数"><a href="#open-函数" class="headerlink" title="open() 函数"></a><strong><code>open()</code> 函数</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">open</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-type">int</span> flags, <span class="hljs-type">mode_t</span> mode)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>flags</code>**：<ul><li><code>O_RDONLY</code>：只读。</li><li><code>O_WRONLY</code>：只写。</li><li><code>O_RDWR</code>：读写。</li><li><code>O_CREAT</code>：文件不存在时创建。</li><li><code>O_TRUNC</code>：若文件存在，清空内容。</li><li><code>O_APPEND</code>：追加写入（避免并发问题）。</li></ul></li></ul><h4 id="示例：打开-创建文件"><a href="#示例：打开-创建文件" class="headerlink" title="示例：打开&#x2F;创建文件"></a><strong>示例：打开&#x2F;创建文件</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    write(fd, <span class="hljs-string">&quot;Hello, World!\n&quot;</span>, <span class="hljs-number">14</span>);<br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>解释</strong>：</p><ul><li><code>O_CREAT | O_TRUNC</code>：若文件不存在则创建，若存在则清空。</li><li><code>0644</code>：文件权限（<code>rw-r--r--</code>）。</li></ul><hr><h3 id="3-lseek-：移动文件指针"><a href="#3-lseek-：移动文件指针" class="headerlink" title="3. lseek()：移动文件指针"></a><strong>3. <code>lseek()</code>：移动文件指针</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">off_t</span> <span class="hljs-title function_">lseek</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">off_t</span> offset, <span class="hljs-type">int</span> whence)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>whence</code>**：<ul><li><code>SEEK_SET</code>：从文件开头计算偏移。</li><li><code>SEEK_CUR</code>：从当前位置计算偏移。</li><li><code>SEEK_END</code>：从文件末尾计算偏移。</li></ul></li></ul><h4 id="示例：读取文件第-10-字节"><a href="#示例：读取文件第-10-字节" class="headerlink" title="示例：读取文件第 10 字节"></a><strong>示例：读取文件第 10 字节</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_RDONLY);<br>    lseek(fd, <span class="hljs-number">10</span>, SEEK_SET);  <span class="hljs-comment">// 移动到第 10 字节</span><br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1</span>];<br>    read(fd, buf, <span class="hljs-number">1</span>);         <span class="hljs-comment">// 读取 1 字节</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="4-dup2-：文件描述符重定向"><a href="#4-dup2-：文件描述符重定向" class="headerlink" title="4. dup2()：文件描述符重定向"></a><strong>4. <code>dup2()</code>：文件描述符重定向</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dup2</span><span class="hljs-params">(<span class="hljs-type">int</span> oldfd, <span class="hljs-type">int</span> newfd)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>作用</strong>：让 <code>newfd</code> 指向 <code>oldfd</code> 的文件。</li></ul><h4 id="示例：将标准输出重定向到文件"><a href="#示例：将标准输出重定向到文件" class="headerlink" title="示例：将标准输出重定向到文件"></a><strong>示例：将标准输出重定向到文件</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;output.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    dup2(fd, STDOUT_FILENO);  <span class="hljs-comment">// 标准输出指向文件</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This goes to output.txt!\n&quot;</span>);  <span class="hljs-comment">// 写入文件而非屏幕</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="文件属性及目录"><a href="#文件属性及目录" class="headerlink" title="文件属性及目录"></a>文件属性及目录</h2><h3 id="一、文件属性（struct-stat）"><a href="#一、文件属性（struct-stat）" class="headerlink" title="一、文件属性（struct stat）"></a><strong>一、文件属性（<code>struct stat</code>）</strong></h3><h3 id="1-属性结构体"><a href="#1-属性结构体" class="headerlink" title="1. 属性结构体"></a><strong>1. 属性结构体</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> &#123;</span><br>    <span class="hljs-type">mode_t</span>  st_mode;   <span class="hljs-comment">// 文件类型和权限（核心字段）</span><br>    <span class="hljs-type">ino_t</span>   st_ino;    <span class="hljs-comment">// inode 号（唯一标识文件）</span><br>    <span class="hljs-type">dev_t</span>   st_dev;    <span class="hljs-comment">// 文件所在设备的 ID</span><br>    <span class="hljs-type">dev_t</span>   st_rdev;   <span class="hljs-comment">// 设备文件的设备号（仅特殊文件有效）</span><br>    <span class="hljs-type">nlink_t</span> st_nlink;  <span class="hljs-comment">// 硬链接计数</span><br>    <span class="hljs-type">uid_t</span>   st_uid;    <span class="hljs-comment">// 所有者用户 ID</span><br>    <span class="hljs-type">gid_t</span>   st_gid;    <span class="hljs-comment">// 所有者组 ID</span><br>    <span class="hljs-type">off_t</span>   st_size;   <span class="hljs-comment">// 文件大小（字节）</span><br>    <span class="hljs-type">time_t</span>  st_atime;  <span class="hljs-comment">// 最后访问时间</span><br>    <span class="hljs-type">time_t</span>  st_mtime;  <span class="hljs-comment">// 最后修改内容时间</span><br>    <span class="hljs-type">time_t</span>  st_ctime;  <span class="hljs-comment">// 最后修改属性时间（如权限）</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="2-获取文件属性"><a href="#2-获取文件属性" class="headerlink" title="2. 获取文件属性"></a><strong>2. 获取文件属性</strong></h3><ul><li>**<code>stat()</code>**：通过路径获取属性。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">stat</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li><li>**<code>fstat()</code>**：通过文件描述符获取属性。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">fstat</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li></ul><h4 id="示例：打印文件大小"><a href="#示例：打印文件大小" class="headerlink" title="示例：打印文件大小"></a><strong>示例：打印文件大小</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> <span class="hljs-title">buf</span>;</span><br>    stat(<span class="hljs-string">&quot;test.txt&quot;</span>, &amp;buf);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File size: %ld bytes\n&quot;</span>, buf.st_size);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="二、文件类型与权限"><a href="#二、文件类型与权限" class="headerlink" title="二、文件类型与权限"></a><strong>二、文件类型与权限</strong></h3><h3 id="1-文件类型判断宏"><a href="#1-文件类型判断宏" class="headerlink" title="1. 文件类型判断宏"></a><strong>1. 文件类型判断宏</strong></h3><table><thead><tr><th><strong>宏</strong></th><th><strong>文件类型</strong></th></tr></thead><tbody><tr><td><code>S_ISREG(mode)</code></td><td>普通文件（如 <code>.txt</code>）</td></tr><tr><td><code>S_ISDIR(mode)</code></td><td>目录</td></tr><tr><td><code>S_ISCHR(mode)</code></td><td>字符设备（如 <code>/dev/tty</code>）</td></tr><tr><td><code>S_ISBLK(mode)</code></td><td>块设备（如 <code>/dev/sda</code>）</td></tr><tr><td><code>S_ISFIFO(mode)</code></td><td>管道（FIFO）</td></tr><tr><td><code>S_ISLNK(mode)</code></td><td>符号链接</td></tr><tr><td><code>S_ISSOCK(mode)</code></td><td>套接字</td></tr></tbody></table><h4 id="示例：判断文件类型"><a href="#示例：判断文件类型" class="headerlink" title="示例：判断文件类型"></a><strong>示例：判断文件类型</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (S_ISREG(buf.st_mode)) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This is a regular file.\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-文件权限"><a href="#2-文件权限" class="headerlink" title="2. 文件权限"></a><strong>2. 文件权限</strong></h3><ul><li><strong>9 个权限位</strong>：<ul><li><strong>用户</strong>：<code>S_IRUSR</code>（读）、<code>S_IWUSR</code>（写）、<code>S_IXUSR</code>（执行）。</li><li><strong>组</strong>：<code>S_IRGRP</code>、<code>S_IWGRP</code>、<code>S_IXGRP</code>。</li><li><strong>其他</strong>：<code>S_IROTH</code>、<code>S_IWOTH</code>、<code>S_IXOTH</code>。</li></ul></li><li><strong>特殊权限位</strong>：<ul><li><code>S_ISUID</code>：执行时设置有效用户 ID（如 <code>passwd</code>）。</li><li><code>S_ISGID</code>：执行时设置有效组 ID。</li><li><code>S_ISVTX</code>：粘滞位（目录下文件仅所有者可删）。</li></ul></li></ul><h4 id="修改权限"><a href="#修改权限" class="headerlink" title="修改权限"></a><strong>修改权限</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chmod(<span class="hljs-string">&quot;file.txt&quot;</span>, <span class="hljs-number">0644</span>);  <span class="hljs-comment">// rw-r--r--</span><br>fchmod(fd, <span class="hljs-number">0755</span>);         <span class="hljs-comment">// rwxr-xr-x</span><br></code></pre></td></tr></table></figure><hr><h3 id="三、文件操作"><a href="#三、文件操作" class="headerlink" title="三、文件操作"></a><strong>三、文件操作</strong></h3><h3 id="1-创建新文件"><a href="#1-创建新文件" class="headerlink" title="1. 创建新文件"></a><strong>1. 创建新文件</strong></h3><ul><li><strong>权限计算</strong>：<code>实际权限 = mode &amp; ~umask</code><br>（<code>umask</code> 默认为 <code>022</code>，屏蔽组和其他的写权限）</li><li><strong>示例</strong>：<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">umask(<span class="hljs-number">002</span>);                    <span class="hljs-comment">// 设置 umask</span><br><span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;new.txt&quot;</span>, O_CREAT | O_WRONLY, <span class="hljs-number">0666</span>); <span class="hljs-comment">// 实际权限：664</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-硬链接与删除"><a href="#2-硬链接与删除" class="headerlink" title="2. 硬链接与删除"></a><strong>2. 硬链接与删除</strong></h3><ul><li>**<code>link()</code>**：创建硬链接（增加 <code>st_nlink</code>）。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">link(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// new.txt 指向 old.txt</span><br></code></pre></td></tr></table></figure></li><li>**<code>unlink()</code>**：删除链接（<code>st_nlink--</code>，若为 0 则删除文件）。<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">unlink(<span class="hljs-string">&quot;file.txt&quot;</span>);  <span class="hljs-comment">// 删除文件（需无进程打开）</span><br></code></pre></td></tr></table></figure></li><li>**<code>remove()</code>**：等价于 <code>unlink()</code>（文件）或 <code>rmdir()</code>（目录）。</li></ul><h3 id="3-重命名"><a href="#3-重命名" class="headerlink" title="3. 重命名"></a><strong>3. 重命名</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">rename(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// 原子操作</span><br></code></pre></td></tr></table></figure><hr><h3 id="四、目录操作"><a href="#四、目录操作" class="headerlink" title="四、目录操作"></a><strong>四、目录操作</strong></h3><h3 id="1-创建与删除目录"><a href="#1-创建与删除目录" class="headerlink" title="1. 创建与删除目录"></a><strong>1. 创建与删除目录</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">mkdir(<span class="hljs-string">&quot;mydir&quot;</span>, <span class="hljs-number">0755</span>);  <span class="hljs-comment">// 创建目录</span><br>rmdir(<span class="hljs-string">&quot;mydir&quot;</span>);        <span class="hljs-comment">// 删除空目录</span><br></code></pre></td></tr></table></figure><h3 id="2-读取目录内容"><a href="#2-读取目录内容" class="headerlink" title="2. 读取目录内容"></a><strong>2. 读取目录内容</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dirent.h&gt;</span></span><br>DIR *dp = opendir(<span class="hljs-string">&quot;.&quot;</span>);                <span class="hljs-comment">// 打开目录</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dirent</span> *<span class="hljs-title">dir</span> =</span> readdir(dp);      <span class="hljs-comment">// 读取条目</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File: %s\n&quot;</span>, dir-&gt;d_name);     <span class="hljs-comment">// 打印文件名</span><br>closedir(dp);                          <span class="hljs-comment">// 关闭目录</span><br></code></pre></td></tr></table></figure><h4 id="struct-dirent-关键字段"><a href="#struct-dirent-关键字段" class="headerlink" title="struct dirent 关键字段"></a><strong><code>struct dirent</code> 关键字段</strong></h4><ul><li><code>d_name</code>：文件名。</li><li><code>d_type</code>：文件类型（如 <code>DT_REG</code> 普通文件）。</li></ul><hr><h3 id="五、工作目录管理"><a href="#五、工作目录管理" class="headerlink" title="五、工作目录管理"></a><strong>五、工作目录管理</strong></h3><h4 id="1-改变工作目录"><a href="#1-改变工作目录" class="headerlink" title="1. 改变工作目录"></a><strong>1. 改变工作目录</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chdir(<span class="hljs-string">&quot;/tmp&quot;</span>);       <span class="hljs-comment">// 切换到 /tmp</span><br>fchdir(dir_fd);      <span class="hljs-comment">// 通过文件描述符切换</span><br></code></pre></td></tr></table></figure><h4 id="2-获取当前目录"><a href="#2-获取当前目录" class="headerlink" title="2. 获取当前目录"></a><strong>2. 获取当前目录</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> cwd[<span class="hljs-number">1024</span>];<br>getcwd(cwd, <span class="hljs-keyword">sizeof</span>(cwd));  <span class="hljs-comment">// 类似 pwd 命令</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;CWD: %s\n&quot;</span>, cwd);<br></code></pre></td></tr></table></figure><hr><h3 id="六、总结表"><a href="#六、总结表" class="headerlink" title="六、总结表"></a><strong>六、总结表</strong></h3><table><thead><tr><th><strong>功能</strong></th><th><strong>函数&#x2F;宏</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td><strong>获取属性</strong></td><td><code>stat()</code>, <code>fstat()</code></td><td>填充 <code>struct stat</code></td></tr><tr><td><strong>文件类型判断</strong></td><td><code>S_ISREG()</code>, <code>S_ISDIR()</code></td><td>检查 <code>st_mode</code></td></tr><tr><td><strong>修改权限</strong></td><td><code>chmod()</code>, <code>fchmod()</code></td><td>设置 <code>rwx</code> 权限</td></tr><tr><td><strong>创建文件</strong></td><td><code>open()</code> with <code>O_CREAT</code></td><td>受 <code>umask</code> 影响</td></tr><tr><td><strong>硬链接操作</strong></td><td><code>link()</code>, <code>unlink()</code></td><td>修改 <code>st_nlink</code></td></tr><tr><td><strong>目录操作</strong></td><td><code>mkdir()</code>, <code>opendir()</code></td><td>创建&#x2F;遍历目录</td></tr><tr><td><strong>工作目录</strong></td><td><code>chdir()</code>, <code>getcwd()</code></td><td>类似 <code>cd</code> 和 <code>pwd</code></td></tr></tbody></table><hr><h3 id="关键点"><a href="#关键点" class="headerlink" title="关键点"></a><strong>关键点</strong></h3><ol><li><strong><code>st_mode</code> 是核心字段</strong>：包含文件类型和权限。</li><li><strong>权限计算</strong>：<code>实际权限 = mode &amp; ~umask</code>。</li><li><strong>硬链接 vs 符号链接</strong>：<ul><li>硬链接：同一文件，共享 inode。</li><li>符号链接：独立文件，存储目标路径。</li></ul></li><li><strong>目录操作</strong>：只有内核可写目录，用户通过 <code>opendir/readdir</code> 读取。</li></ol><p><strong>建议</strong>：结合 <code>ls -l</code> 命令和 <code>stat</code> 命令验证文件属性。</p><h2 id="二、进程控制"><a href="#二、进程控制" class="headerlink" title="二、进程控制"></a><strong>二、进程控制</strong></h2><h3 id="1-fork-：创建子进程"><a href="#1-fork-：创建子进程" class="headerlink" title="1. fork()：创建子进程"></a><strong>1. <code>fork()</code>：创建子进程</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">fork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>返回值</strong>：<ul><li><code>&gt;0</code>：父进程，返回子进程 PID。</li><li><code>=0</code>：子进程。</li><li><code>-1</code>：出错。</li></ul></li></ul><h4 id="示例：父子进程执行不同任务"><a href="#示例：父子进程执行不同任务" class="headerlink" title="示例：父子进程执行不同任务"></a><strong>示例：父子进程执行不同任务</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process (PID=%d)\n&quot;</span>, getpid());<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process (PID=%d), child PID=%d\n&quot;</span>, getpid(), pid);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        perror(<span class="hljs-string">&quot;fork failed&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>输出</strong>：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Parent process (<span class="hljs-attribute">PID</span>=1234), child <span class="hljs-attribute">PID</span>=1235<br>Child process (<span class="hljs-attribute">PID</span>=1235)<br></code></pre></td></tr></table></figure><hr><h3 id="2-exec-：替换进程映像"><a href="#2-exec-：替换进程映像" class="headerlink" title="2. exec()：替换进程映像"></a><strong>2. <code>exec()</code>：替换进程映像</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">execl</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *path, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *arg0, ..., (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>作用</strong>：用新程序替换当前进程（如 <code>ls</code>、<code>gcc</code>）。</li></ul><h4 id="示例：子进程执行-ls-l"><a href="#示例：子进程执行-ls-l" class="headerlink" title="示例：子进程执行 ls -l"></a><strong>示例：子进程执行 <code>ls -l</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// 替换为 ls -l</span><br>        perror(<span class="hljs-string">&quot;exec failed&quot;</span>);  <span class="hljs-comment">// 若 exec 失败才会执行</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// 等待子进程结束</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="exec-函数族对比表"><a href="#exec-函数族对比表" class="headerlink" title="exec 函数族对比表"></a><strong><code>exec</code> 函数族对比表</strong></h3><p>以下是 UNIX&#x2F;Linux 中 <code>exec</code> 系列函数的详细对比，包括参数、使用场景和区别：</p><table><thead><tr><th><strong>函数</strong></th><th><strong>参数形式</strong></th><th><strong>环境变量</strong></th><th><strong>查找路径</strong></th><th><strong>典型用途</strong></th></tr></thead><tbody><tr><td><strong><code>execl</code></strong></td><td><code>execl(&quot;路径&quot;, &quot;arg0&quot;, &quot;arg1&quot;, ..., (char *)0)</code></td><td>继承当前</td><td>需完整路径</td><td>已知可执行文件路径，参数列表固定</td></tr><tr><td><strong><code>execv</code></strong></td><td><code>execv(&quot;路径&quot;, char *argv[])</code> （<code>argv</code> 需以 <code>NULL</code> 结尾）</td><td>继承当前</td><td>需完整路径</td><td>参数列表动态（如数组）</td></tr><tr><td><strong><code>execle</code></strong></td><td><code>execle(&quot;路径&quot;, &quot;arg0&quot;, ..., (char *)0, char *envp[])</code></td><td>自定义</td><td>需完整路径</td><td>需指定环境变量</td></tr><tr><td><strong><code>execve</code></strong></td><td><code>execve(&quot;路径&quot;, char *argv[], char *envp[])</code> （<code>argv</code> 和 <code>envp</code> 需以 <code>NULL</code> 结尾）</td><td>自定义</td><td>需完整路径</td><td>系统调用，最底层实现</td></tr><tr><td><strong><code>execlp</code></strong></td><td><code>execlp(&quot;文件名&quot;, &quot;arg0&quot;, ..., (char *)0)</code></td><td>继承当前</td><td>从 <code>PATH</code> 查找</td><td>直接使用文件名（如 <code>ls</code>）</td></tr><tr><td><strong><code>execvp</code></strong></td><td><code>execvp(&quot;文件名&quot;, char *argv[])</code> （<code>argv</code> 需以 <code>NULL</code> 结尾）</td><td>继承当前</td><td>从 <code>PATH</code> 查找</td><td>动态参数 + <code>PATH</code> 查找</td></tr></tbody></table><hr><h3 id="关键区别"><a href="#关键区别" class="headerlink" title="关键区别"></a><strong>关键区别</strong></h3><ol><li><p><strong>参数传递方式</strong>：</p><ul><li><strong><code>l</code> 后缀</strong>（如 <code>execl</code>）：参数以<strong>可变参数列表</strong>（<code>arg0, arg1, ..., NULL</code>）传递。</li><li><strong><code>v</code> 后缀</strong>（如 <code>execv</code>）：参数以<strong>指针数组</strong>（<code>argv[]</code>）传递，数组必须以 <code>NULL</code> 结尾。</li></ul></li><li><p><strong>环境变量</strong>：</p><ul><li><strong><code>e</code> 后缀</strong>（如 <code>execle</code>）：可<strong>自定义环境变量</strong>（通过 <code>envp[]</code> 数组）。</li><li>无 <code>e</code> 后缀：继承当前进程的环境变量。</li></ul></li><li><p><strong>路径查找</strong>：</p><ul><li><strong><code>p</code> 后缀</strong>（如 <code>execlp</code>）：自动从 <code>PATH</code> 环境变量查找可执行文件。</li><li>无 <code>p</code> 后缀：必须提供完整路径（如 <code>/bin/ls</code>）。</li></ul></li><li><p><strong>底层实现</strong>：</p><ul><li><strong><code>execve</code></strong> 是唯一的<strong>系统调用</strong>，其他函数均为库函数（最终调用 <code>execve</code>）。</li></ul></li></ol><hr><h3 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a><strong>示例代码</strong></h3><h4 id="1-execl（固定参数-完整路径）"><a href="#1-execl（固定参数-完整路径）" class="headerlink" title="1. execl（固定参数 + 完整路径）"></a>1. <strong><code>execl</code>（固定参数 + 完整路径）</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// 执行 `ls -l`</span><br></code></pre></td></tr></table></figure><h4 id="2-execv（动态参数-完整路径）"><a href="#2-execv（动态参数-完整路径）" class="headerlink" title="2. execv（动态参数 + 完整路径）"></a>2. <strong><code>execv</code>（动态参数 + 完整路径）</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execv(<span class="hljs-string">&quot;/bin/ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><h4 id="3-execle（自定义环境变量）"><a href="#3-execle（自定义环境变量）" class="headerlink" title="3. execle（自定义环境变量）"></a>3. <strong><code>execle</code>（自定义环境变量）</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *env[] = &#123;<span class="hljs-string">&quot;PATH=/usr/bin&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execle(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>, env);<br></code></pre></td></tr></table></figure><h4 id="4-execlp（自动查找-PATH）"><a href="#4-execlp（自动查找-PATH）" class="headerlink" title="4. execlp（自动查找 PATH）"></a>4. <strong><code>execlp</code>（自动查找 <code>PATH</code>）</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execlp(<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// 无需写 `/bin/ls`</span><br></code></pre></td></tr></table></figure><h4 id="5-execvp（动态参数-自动查找）"><a href="#5-execvp（动态参数-自动查找）" class="headerlink" title="5. execvp（动态参数 + 自动查找）"></a>5. <strong><code>execvp</code>（动态参数 + 自动查找）</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execvp(<span class="hljs-string">&quot;ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><hr><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h3><ul><li><strong>需要完整路径</strong> → 用 <code>execl</code>、<code>execv</code>、<code>execle</code>、<code>execve</code>。</li><li><strong>需要 <code>PATH</code> 查找</strong> → 用 <code>execlp</code>、<code>execvp</code>。</li><li><strong>动态参数</strong> → 用 <code>execv</code>、<code>execvp</code>、<code>execve</code>。</li><li><strong>自定义环境变量</strong> → 用 <code>execle</code>、<code>execve</code>。</li></ul><p><strong>注意</strong>：所有 <code>exec</code> 函数成功时<strong>不返回</strong>，失败时返回 <code>-1</code> 并设置 <code>errno</code>。</p><hr><h3 id="3-wait-：回收子进程"><a href="#3-wait-：回收子进程" class="headerlink" title="3. wait()：回收子进程"></a><strong>3. <code>wait()</code>：回收子进程</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">wait</span><span class="hljs-params">(<span class="hljs-type">int</span> *status)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>作用</strong>：父进程等待子进程结束，避免僵尸进程。</li></ul><h4 id="示例：父进程等待子进程"><a href="#示例：父进程等待子进程" class="headerlink" title="示例：父进程等待子进程"></a><strong>示例：父进程等待子进程</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process\n&quot;</span>);<br>        sleep(<span class="hljs-number">2</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// 等待子进程结束</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process: child finished\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="三、进程间通信（IPC）"><a href="#三、进程间通信（IPC）" class="headerlink" title="三、进程间通信（IPC）"></a><strong>三、进程间通信（IPC）</strong></h2><h3 id="1-管道（pipe）"><a href="#1-管道（pipe）" class="headerlink" title="1. 管道（pipe）"></a><strong>1. 管道（<code>pipe</code>）</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">pipe</span><span class="hljs-params">(<span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>])</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>fd[0]</code>**：读端。</li><li>**<code>fd[1]</code>**：写端。</li></ul><h4 id="示例：父子进程通信"><a href="#示例：父子进程通信" class="headerlink" title="示例：父子进程通信"></a><strong>示例：父子进程通信</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br>    pipe(fd);  <span class="hljs-comment">// 创建管道</span><br><br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// 子进程关闭读端</span><br>        write(fd[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;Hello, parent!&quot;</span>, <span class="hljs-number">14</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">1</span>]);  <span class="hljs-comment">// 父进程关闭写端</span><br>        <span class="hljs-type">char</span> buf[<span class="hljs-number">20</span>];<br>        read(fd[<span class="hljs-number">0</span>], buf, <span class="hljs-keyword">sizeof</span>(buf));<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent received: %s\n&quot;</span>, buf);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>输出</strong>：</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">Parent received: Hello, parent!<br></code></pre></td></tr></table></figure><ul><li><strong>再给一个例子，好好理解</strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    pipe(fd);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d  %d\n&quot;</span>, fd[<span class="hljs-number">0</span>], fd[<span class="hljs-number">1</span>]);<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">1</span>]);<br>        dup2(fd[<span class="hljs-number">0</span>], <span class="hljs-number">0</span>);<br>        execlp(<span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello world!\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">0</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;before dup2\n&quot;</span>);<br>        dup2(fd[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;after dup2\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;lalalala this line shouldn&#x27;t be print\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">3</span>  <span class="hljs-number">4</span><br><span class="hljs-attribute">before</span> dup2<br><span class="hljs-attribute">2</span><br></code></pre></td></tr></table></figure><hr><h2 id="四、信号（Signal）"><a href="#四、信号（Signal）" class="headerlink" title="四、信号（Signal）"></a><strong>四、信号（Signal）</strong></h2><h3 id="1-signal-：注册信号处理函数"><a href="#1-signal-：注册信号处理函数" class="headerlink" title="1. signal()：注册信号处理函数"></a><strong>1. <code>signal()</code>：注册信号处理函数</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-type">void</span> (*signal(<span class="hljs-type">int</span> sig, <span class="hljs-type">void</span> (*handler)(<span class="hljs-type">int</span>)))(<span class="hljs-type">int</span>);<br></code></pre></td></tr></table></figure><ul><li><strong>常见信号</strong>：<ul><li><code>SIGINT</code>（<code>Ctrl+C</code>）。</li><li><code>SIGKILL</code>（强制终止）。</li><li><code>SIGALRM</code>（定时器）。</li></ul></li></ul><h4 id="示例：捕获-Ctrl-C"><a href="#示例：捕获-Ctrl-C" class="headerlink" title="示例：捕获 Ctrl+C"></a><strong>示例：捕获 <code>Ctrl+C</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">handler</span><span class="hljs-params">(<span class="hljs-type">int</span> sig)</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nReceived SIGINT (Ctrl+C)\n&quot;</span>);<br>    _exit(<span class="hljs-number">1</span>);  <span class="hljs-comment">// 退出程序</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    signal(SIGINT, handler);  <span class="hljs-comment">// 注册信号处理函数</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Running...\n&quot;</span>);<br>        sleep(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>运行</strong>：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br>^C<br>Received SIGINT (Ctrl+C)<br></code></pre></td></tr></table></figure><hr><h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a><strong>总结</strong></h2><table><thead><tr><th><strong>主题</strong></th><th><strong>关键函数</strong></th><th><strong>用途</strong></th></tr></thead><tbody><tr><td><strong>文件I&#x2F;O</strong></td><td><code>open</code>, <code>read</code>, <code>write</code>, <code>lseek</code>, <code>dup2</code></td><td>文件操作、重定向</td></tr><tr><td><strong>进程控制</strong></td><td><code>fork</code>, <code>exec</code>, <code>wait</code></td><td>创建进程、执行程序</td></tr><tr><td><strong>IPC</strong></td><td><code>pipe</code>, <code>mkfifo</code></td><td>进程间通信</td></tr><tr><td><strong>信号</strong></td><td><code>signal</code>, <code>kill</code>, <code>alarm</code></td><td>异步事件处理</td></tr></tbody></table><p><strong>建议</strong>：</p><ul><li>结合代码示例动手实验，加深理解。</li><li>使用 <code>strace</code> 观察系统调用执行过程（如 <code>strace ./a.out</code>）。</li></ul></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Linux/" class="category-chain-item">Linux</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux/" class="print-no-link">#Linux</a> <a href="/tags/UNIX/" class="print-no-link">#UNIX</a> <a href="/tags/%E5%A4%8D%E4%B9%A0/" class="print-no-link">#复习</a></div></div><div class="license-box my-3"><div class="license-title"><div>UNIX系统复习-4</div><div>http://pzhwuhu.github.io/2025/05/31/UNIX_Review_4/</div></div><div class="license-meta"><div class="license-meta-item"><div>本文作者</div><div>pzhwuhu</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2025年5月31日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2025年5月31日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-cc-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-cc-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-cc-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2025/06/15/BUAA-OO-Unit4/" title="BUAA-OO-Unit4"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">BUAA-OO-Unit4</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/" title="UNIX系统复习-4"><span class="hidden-mobile">UNIX系统复习-4</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script>Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"cp3oK6SJdvk7QCx0TiMpNSdI-gzGzoHsz",appKey:"B9u5rSWtXwzrQl56fuCE0o9M",path:"window.location.pathname",placeholder:"留下你的足迹吧，超多emoji可用噢，qq邮箱自动获取头像",avatar:"robohash",meta:["nick","mail","link"],requiredFields:["nick"],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"",emojiCDN:"https://valine-emoji.bili33.top/",emojiMaps:{bilibilitv2:"bilibilitv/[tv_doge].png",bilibilitv3:"bilibilitv/[tv_亲亲].png",bilibilitv4:"bilibilitv/[tv_偷笑].png",bilibilitv5:"bilibilitv/[tv_再见].png",bilibilitv6:"bilibilitv/[tv_冷漠].png",bilibilitv7:"bilibilitv/[tv_发怒].png",bilibilitv8:"bilibilitv/[tv_发财].png",bilibilitv9:"bilibilitv/[tv_可爱].png",bilibilitv10:"bilibilitv/[tv_吐血].png",bilibilitv11:"bilibilitv/[tv_呆].png",bilibilitv12:"bilibilitv/[tv_呕吐].png",bilibilitv13:"bilibilitv/[tv_困].png",bilibilitv14:"bilibilitv/[tv_坏笑].png",bilibilitv15:"bilibilitv/[tv_大佬].png",bilibilitv16:"bilibilitv/[tv_大哭].png",bilibilitv17:"bilibilitv/[tv_委屈].png",bilibilitv18:"bilibilitv/[tv_害羞].png",bilibilitv19:"bilibilitv/[tv_尴尬].png",bilibilitv20:"bilibilitv/[tv_微笑].png",bilibilitv21:"bilibilitv/[tv_思考].png",bilibilitv22:"bilibilitv/[tv_惊吓].png",bilibilitv23:"bilibilitv/[tv_打脸].png",bilibilitv24:"bilibilitv/[tv_抓狂].png",bilibilitv25:"bilibilitv/[tv_抠鼻].png",bilibilitv26:"bilibilitv/[tv_斜眼笑].png",bilibilitv27:"bilibilitv/[tv_无奈].png",bilibilitv28:"bilibilitv/[tv_晕].png",bilibilitv29:"bilibilitv/[tv_流汗].png",bilibilitv30:"bilibilitv/[tv_流泪].png",bilibilitv31:"bilibilitv/[tv_流鼻血].png",bilibilitv32:"bilibilitv/[tv_点赞].png",bilibilitv33:"bilibilitv/[tv_生气].png",bilibilitv34:"bilibilitv/[tv_生病].png",bilibilitv35:"bilibilitv/[tv_疑问].png",bilibilitv36:"bilibilitv/[tv_白眼].png",bilibilitv37:"bilibilitv/[tv_皱眉].png",bilibilitv38:"bilibilitv/[tv_目瞪口呆].png",bilibilitv39:"bilibilitv/[tv_睡着].png",bilibilitv40:"bilibilitv/[tv_笑哭].png",bilibilitv41:"bilibilitv/[tv_腼腆].png",bilibilitv42:"bilibilitv/[tv_色].png",bilibilitv43:"bilibilitv/[tv_调侃].png",bilibilitv44:"bilibilitv/[tv_调皮].png",bilibilitv45:"bilibilitv/[tv_鄙视].png",bilibilitv46:"bilibilitv/[tv_闭嘴].png",bilibilitv47:"bilibilitv/[tv_难过].png",bilibilitv48:"bilibilitv/[tv_馋].png",bilibilitv49:"bilibilitv/[tv_鬼脸].png",bilibilitv50:"bilibilitv/[tv_黑人问号].png",bilibilitv51:"bilibilitv/[tv_鼓掌].png",bilibili22332:"bilibili2233/[2233娘_卖萌].png",bilibili22333:"bilibili2233/[2233娘_吃惊].png",bilibili22334:"bilibili2233/[2233娘_吐魂].png",bilibili22335:"bilibili2233/[2233娘_喝水].png",bilibili22336:"bilibili2233/[2233娘_困惑].png",bilibili22337:"bilibili2233/[2233娘_大哭].png",bilibili22338:"bilibili2233/[2233娘_大笑].png",bilibili22339:"bilibili2233/[2233娘_委屈].png",bilibili223310:"bilibili2233/[2233娘_怒].png",bilibili223311:"bilibili2233/[2233娘_无言].png",bilibili223312:"bilibili2233/[2233娘_汗].png",bilibili223313:"bilibili2233/[2233娘_疑问].png",bilibili223314:"bilibili2233/[2233娘_第一].png",bilibili223315:"bilibili2233/[2233娘_耶].png",bilibili223316:"bilibili2233/[2233娘_郁闷].png","Tieba-New2":"Tieba-New/image_emoticon.png","Tieba-New3":"Tieba-New/image_emoticon10.png","Tieba-New4":"Tieba-New/image_emoticon100.png","Tieba-New14":"Tieba-New/image_emoticon11.png","Tieba-New31":"Tieba-New/image_emoticon13.png","Tieba-New32":"Tieba-New/image_emoticon14.png","Tieba-New33":"Tieba-New/image_emoticon15.png","Tieba-New34":"Tieba-New/image_emoticon16.png","Tieba-New35":"Tieba-New/image_emoticon17.png","Tieba-New36":"Tieba-New/image_emoticon18.png","Tieba-New37":"Tieba-New/image_emoticon19.png","Tieba-New38":"Tieba-New/image_emoticon2.png","Tieba-New39":"Tieba-New/image_emoticon20.png","Tieba-New40":"Tieba-New/image_emoticon21.png","Tieba-New41":"Tieba-New/image_emoticon22.png","Tieba-New42":"Tieba-New/image_emoticon23.png","Tieba-New43":"Tieba-New/image_emoticon24.png","Tieba-New44":"Tieba-New/image_emoticon25.png","Tieba-New45":"Tieba-New/image_emoticon26.png","Tieba-New46":"Tieba-New/image_emoticon27.png","Tieba-New47":"Tieba-New/image_emoticon28.png","Tieba-New48":"Tieba-New/image_emoticon29.png","Tieba-New49":"Tieba-New/image_emoticon3.png","Tieba-New50":"Tieba-New/image_emoticon30.png","Tieba-New51":"Tieba-New/image_emoticon31.png","Tieba-New52":"Tieba-New/image_emoticon32.png","Tieba-New53":"Tieba-New/image_emoticon33.png","Tieba-New54":"Tieba-New/image_emoticon34.png","Tieba-New55":"Tieba-New/image_emoticon35.png","Tieba-New56":"Tieba-New/image_emoticon36.png","Tieba-New57":"Tieba-New/image_emoticon37.png","Tieba-New58":"Tieba-New/image_emoticon38.png","Tieba-New59":"Tieba-New/image_emoticon39.png","Tieba-New60":"Tieba-New/image_emoticon4.png","Tieba-New61":"Tieba-New/image_emoticon40.png","Tieba-New62":"Tieba-New/image_emoticon41.png","Tieba-New63":"Tieba-New/image_emoticon42.png","Tieba-New64":"Tieba-New/image_emoticon43.png","Tieba-New65":"Tieba-New/image_emoticon44.png","Tieba-New66":"Tieba-New/image_emoticon45.png","Tieba-New67":"Tieba-New/image_emoticon46.png","Tieba-New68":"Tieba-New/image_emoticon47.png","Tieba-New69":"Tieba-New/image_emoticon48.png","Tieba-New70":"Tieba-New/image_emoticon49.png","Tieba-New71":"Tieba-New/image_emoticon5.png","Tieba-New72":"Tieba-New/image_emoticon50.png","Tieba-New73":"Tieba-New/image_emoticon6.png","Tieba-New74":"Tieba-New/image_emoticon66.png","Tieba-New75":"Tieba-New/image_emoticon67.png","Tieba-New76":"Tieba-New/image_emoticon68.png","Tieba-New77":"Tieba-New/image_emoticon69.png","Tieba-New78":"Tieba-New/image_emoticon7.png","Tieba-New79":"Tieba-New/image_emoticon70.png","Tieba-New80":"Tieba-New/image_emoticon71.png","Tieba-New81":"Tieba-New/image_emoticon72.png","Tieba-New82":"Tieba-New/image_emoticon73.png","Tieba-New83":"Tieba-New/image_emoticon74.png","Tieba-New84":"Tieba-New/image_emoticon75.png","Tieba-New85":"Tieba-New/image_emoticon76.png","Tieba-New86":"Tieba-New/image_emoticon77.png","Tieba-New87":"Tieba-New/image_emoticon78.png","Tieba-New88":"Tieba-New/image_emoticon79.png","Tieba-New89":"Tieba-New/image_emoticon8.png","Tieba-New90":"Tieba-New/image_emoticon80.png","Tieba-New91":"Tieba-New/image_emoticon81.png","Tieba-New92":"Tieba-New/image_emoticon82.png","Tieba-New93":"Tieba-New/image_emoticon83.png","Tieba-New94":"Tieba-New/image_emoticon84.png","Tieba-New95":"Tieba-New/image_emoticon85.png","Tieba-New96":"Tieba-New/image_emoticon86.png","Tieba-New97":"Tieba-New/image_emoticon87.png","Tieba-New98":"Tieba-New/image_emoticon88.png","Tieba-New99":"Tieba-New/image_emoticon89.png","Tieba-New100":"Tieba-New/image_emoticon9.png","Tieba-New101":"Tieba-New/image_emoticon90.png","Tieba-New102":"Tieba-New/image_emoticon91.png","Tieba-New103":"Tieba-New/image_emoticon92.png","Tieba-New104":"Tieba-New/image_emoticon93.png","Tieba-New105":"Tieba-New/image_emoticon94.png","Tieba-New106":"Tieba-New/image_emoticon95.png","Tieba-New107":"Tieba-New/image_emoticon96.png","Tieba-New108":"Tieba-New/image_emoticon97.png","Tieba-New109":"Tieba-New/image_emoticon98.png","Tieba-New110":"Tieba-New/image_emoticon99.png",weibo2:"weibo/d_aoteman.png",weibo15:"weibo/d_doge.png",weibo16:"weibo/d_erha.png",weibo40:"weibo/d_miao.png",weibo49:"weibo/d_shenshou.png",weibo65:"weibo/d_xiongmao.png",weibo74:"weibo/d_zhutou.png",weibo75:"weibo/d_zuiyou.png",weibo76:"weibo/emoji_0x1f31f.png",weibo77:"weibo/emoji_0x1f349.png",weibo78:"weibo/emoji_0x1f357.png",weibo79:"weibo/emoji_0x1f384.png",weibo80:"weibo/emoji_0x1f44f.png",weibo81:"weibo/emoji_0x1f47b.png",weibo82:"weibo/emoji_0x1f47f.png",weibo83:"weibo/emoji_0x1f48a.png",weibo84:"weibo/emoji_0x1f4a3.png",weibo85:"weibo/emoji_0x1f4a9.png",weibo86:"weibo/emoji_0x1f631.png",weibo87:"weibo/emoji_0x1f643.png",weibo88:"weibo/emoji_0x1f645.png",weibo89:"weibo/emoji_0x1f648.png",weibo90:"weibo/emoji_0x1f649.png",weibo91:"weibo/emoji_0x1f64a.png",weibo92:"weibo/emoji_0x1f64b.png",weibo93:"weibo/emoji_0x1f64f.png",weibo94:"weibo/emoji_0x1f913.png",weibo95:"weibo/emoji_0x1f917.png",weibo96:"weibo/emoji_0x26a1.png",weibo97:"weibo/h_buyao.png",weibo98:"weibo/h_good.png",weibo99:"weibo/h_haha.png",weibo100:"weibo/h_jiayou.png",weibo101:"weibo/h_lai.png",weibo102:"weibo/h_ok.png",weibo103:"weibo/h_quantou.png",weibo105:"weibo/h_woshou.png",weibo106:"weibo/h_ye.png",weibo107:"weibo/h_zan.png",weibo108:"weibo/h_zuoyi.png","HONKAI3-Star1":"HONKAI3-Star/1.gif","HONKAI3-Star2":"HONKAI3-Star/10.gif","HONKAI3-Star3":"HONKAI3-Star/11.gif","HONKAI3-Star4":"HONKAI3-Star/12.gif","HONKAI3-Star5":"HONKAI3-Star/13.gif","HONKAI3-Star6":"HONKAI3-Star/14.gif","HONKAI3-Star7":"HONKAI3-Star/15.gif","HONKAI3-Star8":"HONKAI3-Star/16.gif","HONKAI3-Star9":"HONKAI3-Star/2.gif","HONKAI3-Star10":"HONKAI3-Star/3.gif","HONKAI3-Star11":"HONKAI3-Star/4.gif","HONKAI3-Star12":"HONKAI3-Star/5.gif","HONKAI3-Star13":"HONKAI3-Star/6.gif","HONKAI3-Star14":"HONKAI3-Star/7.gif","HONKAI3-Star15":"HONKAI3-Star/8.gif","HONKAI3-Star16":"HONKAI3-Star/9.gif","HONKAI3-Daily1":"HONKAI3-Daily/1.gif","HONKAI3-Daily2":"HONKAI3-Daily/10.gif","HONKAI3-Daily3":"HONKAI3-Daily/11.gif","HONKAI3-Daily4":"HONKAI3-Daily/12.gif","HONKAI3-Daily5":"HONKAI3-Daily/13.gif","HONKAI3-Daily6":"HONKAI3-Daily/14.gif","HONKAI3-Daily7":"HONKAI3-Daily/15.gif","HONKAI3-Daily8":"HONKAI3-Daily/16.gif","HONKAI3-Daily9":"HONKAI3-Daily/2.gif","HONKAI3-Daily10":"HONKAI3-Daily/3.gif","HONKAI3-Daily11":"HONKAI3-Daily/4.gif","HONKAI3-Daily12":"HONKAI3-Daily/5.gif","HONKAI3-Daily13":"HONKAI3-Daily/6.gif","HONKAI3-Daily14":"HONKAI3-Daily/7.gif","HONKAI3-Daily15":"HONKAI3-Daily/8.gif","HONKAI3-Daily16":"HONKAI3-Daily/9.gif","Tsuri-me-ju_mimi1":"Tsuri-me-ju_mimi/10753776_key@2x.png","Tsuri-me-ju_mimi2":"Tsuri-me-ju_mimi/10753777_key@2x.png","Tsuri-me-ju_mimi3":"Tsuri-me-ju_mimi/10753778_key@2x.png","Tsuri-me-ju_mimi12":"Tsuri-me-ju_mimi/10753787_key@2x.png","Tsuri-me-ju_mimi13":"Tsuri-me-ju_mimi/10753788_key@2x.png","Tsuri-me-ju_mimi14":"Tsuri-me-ju_mimi/10753789_key@2x.png","Tsuri-me-ju_mimi15":"Tsuri-me-ju_mimi/10753790_key@2x.png","Tsuri-me-ju_mimi16":"Tsuri-me-ju_mimi/10753791_key@2x.png","Tsuri-me-ju_mimi36":"Tsuri-me-ju_mimi/10753811_key@2x.png","Tsuri-me-ju_mimi37":"Tsuri-me-ju_mimi/10753812_key@2x.png","Tsuri-me-ju_mimi38":"Tsuri-me-ju_mimi/10753813_key@2x.png","Tsuri-me-ju_mimi40":"Tsuri-me-ju_mimi/10753815_key@2x.png"},enableQQ:!0,avatar_cdn:"https://cravatar.cn/avatar/",visitor:!0},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vemoji",(()=>{const i=document.createElement("style");i.innerHTML="\n            #valine .vemoji {\n              width: 40px !important;  /* 根据需要调整宽度 */\n              height: 40px !important; /* 根据需要调整高度 */\n            }\n          ",document.head.appendChild(i)})),Fluid.utils.waitElementVisible("#valine .vcontent",(()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)}))}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div style="font-size:.85rem"><span id="timeDate">载入天数...</span> <span id="times">载入时分秒...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">总访问量 <span id="leancloud-site-pv"></span> 次 </span><span id="leancloud-site-uv-container" style="display:none">总访客数 <span id="leancloud-site-uv"></span> 人</span></div><span>64k</span></div></footer><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script>window.MathJax?(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise()):window.MathJax={tex:{inlineMath:{"[+]":[["$","$"]]}},loader:{load:["ui/lazy"]},options:{renderActions:{insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach((t=>{let e=t.parentNode;"li"===e.nodeName.toLowerCase()&&e.parentNode.classList.add("has-jax")}))},"",!1]}}},Fluid.events.registerRefreshCallback((function(){"MathJax"in window&&MathJax.startup.document&&"function"==typeof MathJax.startup.document.state&&(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise())}))</script><script src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/DynamicRibbon.min.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/star.min.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/love.min.js"></script><script src="//cdn.jsdelivr.net/npm/highlight.js@11.5.1/styles/monokai.min.css.js"></script><script src="/js/scrollAnimation.js"></script><script src="/js/loading.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>