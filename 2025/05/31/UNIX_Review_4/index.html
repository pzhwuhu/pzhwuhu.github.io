<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="light"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/avatar_1.jpg"><link rel="icon" href="/img/avatar_1.jpg"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="theme-color" content="#2f4154"><meta name="author" content="pzhwuhu"><meta name="keywords" content=""><meta name="description" content="è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š             Shellç¼–ç¨‹ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰ å°†å‘½ä»¤ç»„åˆæˆå®ç”¨å·¥å…·  ç¤ºä¾‹ï¼šåˆ›å»ºæ˜¾ç¤ºç›®å½•çš„è„šæœ¬123456# lsdirè„šæœ¬å†…å®¹ls -l | sed -n &#x27;&#x2F;^d&#x2F;p&#x27; # ä½¿ç”¨æ–¹å¼chmod +x lsdir.&#x2F;lsdir   å¿«é€Ÿç¼–å†™å®ç”¨è½¯ä»¶  ç¤ºä¾‹"><meta property="og:type" content="article"><meta property="og:title" content="UNIXç³»ç»Ÿå¤ä¹ -4"><meta property="og:url" content="http://pzhwuhu.github.io/2025/05/31/UNIX_Review_4/index.html"><meta property="og:site_name" content="é¹å“¥"><meta property="og:description" content="è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š             Shellç¼–ç¨‹ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰ å°†å‘½ä»¤ç»„åˆæˆå®ç”¨å·¥å…·  ç¤ºä¾‹ï¼šåˆ›å»ºæ˜¾ç¤ºç›®å½•çš„è„šæœ¬123456# lsdirè„šæœ¬å†…å®¹ls -l | sed -n &#x27;&#x2F;^d&#x2F;p&#x27; # ä½¿ç”¨æ–¹å¼chmod +x lsdir.&#x2F;lsdir   å¿«é€Ÿç¼–å†™å®ç”¨è½¯ä»¶  ç¤ºä¾‹"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://pzhwuhu.github.io/myimg/%E5%8D%83%E4%B8%8E%E5%8D%83%E5%AF%BB.jpg"><meta property="article:published_time" content="2025-05-31T04:17:11.000Z"><meta property="article:modified_time" content="2025-05-31T04:17:25.401Z"><meta property="article:author" content="pzhwuhu"><meta property="article:tag" content="Linux"><meta property="article:tag" content="UNIX"><meta property="article:tag" content="å¤ä¹ "><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="http://pzhwuhu.github.io/myimg/%E5%8D%83%E4%B8%8E%E5%8D%83%E5%AF%BB.jpg"><title>UNIXç³»ç»Ÿå¤ä¹ -4 - é¹å“¥</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css"><link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><link rel="stylesheet" href="/css/custom_dark_mode.css"><link rel="stylesheet" href="/css/scroll_animation.css"><link rel="stylesheet" href="/css/mac.css"><link rel="stylesheet" href="/css/loading.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/gradient.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"pzhwuhu.github.io",root:"/",version:"1.9.8",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!1,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:{key:null},google:{measurement_id:null},tencent:{sid:null,cid:null},leancloud:{app_id:"cp3oK6SJdvk7QCx0TiMpNSdI-gzGzoHsz",app_key:"B9u5rSWtXwzrQl56fuCE0o9M",server_url:"https://cp3ok6sj.lc-cn-n1-shared.com",path:"window.location.pathname",ignore_local:!1},umami:{src:null,website_id:null,domains:null,start_time:"2024-01-01T00:00:00.000Z",token:null,api_server:null}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>if(!Fluid.ctx.dnt){var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?[object Object]";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}</script><meta name="generator" content="Hexo 7.3.0"></head><body><header><div class="header-inner" style="height:90vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>èº«å¦‚èŠ¥å­ï¼Œå¿ƒè—é¡»å¼¥</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>é¦–é¡µ</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>å½’æ¡£</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>åˆ†ç±»</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>æ ‡ç­¾</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>å…³äº</span></a></li><li class="nav-item"><a class="nav-link" href="/links/" target="_self"><i class="iconfont icon-link-fill"></i> <span>å‹é“¾</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url('/myimg/%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%976.png') no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="UNIXç³»ç»Ÿå¤ä¹ -4"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> pzhwuhu </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2025-05-31 12:17" pubdate>2025å¹´5æœˆ31æ—¥ ä¸­åˆ</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.3k å­— </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 37 åˆ†é’Ÿ </span><span id="leancloud-page-views-container" class="post-meta" style="display:none"><i class="iconfont icon-eye" aria-hidden="true"></i> <span id="leancloud-page-views"></span> æ¬¡</span></div></div><div class="scroll-down-bar"><i class="iconfont icon-arrowdown"></i></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Linux" id="heading-edc9f0a5a5d57797bf68e37364743831" role="tab" data-toggle="collapse" href="#collapse-edc9f0a5a5d57797bf68e37364743831" aria-expanded="true">Linux <span class="list-group-count">(6)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-edc9f0a5a5d57797bf68e37364743831" role="tabpanel" aria-labelledby="heading-edc9f0a5a5d57797bf68e37364743831"><div class="category-post-list"><a href="/2025/05/27/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/" title="UNIXç³»ç»Ÿå¤ä¹ -1" class="list-group-item list-group-item-action"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -1</span> </a><a href="/2025/05/30/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/" title="UNIXç³»ç»Ÿå¤ä¹ -2" class="list-group-item list-group-item-action"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -2</span> </a><a href="/2025/05/31/UNIX_Review_3/" title="UNIXç³»ç»Ÿå¤ä¹ -3" class="list-group-item list-group-item-action"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -3</span> </a><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/" title="UNIXç³»ç»Ÿå¤ä¹ -3" class="list-group-item list-group-item-action"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -3</span> </a><a href="/2025/05/31/UNIX_Review_4/" title="UNIXç³»ç»Ÿå¤ä¹ -4" class="list-group-item list-group-item-action active"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -4</span> </a><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/" title="UNIXç³»ç»Ÿå¤ä¹ -4" class="list-group-item list-group-item-action"><span class="category-post">UNIXç³»ç»Ÿå¤ä¹ -4</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">UNIXç³»ç»Ÿå¤ä¹ -4</h1><div class="markdown-body"><div class="note note-info"><p>è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p></div><h1 id="Shellç¼–ç¨‹"><a href="#Shellç¼–ç¨‹" class="headerlink" title="Shellç¼–ç¨‹"></a>Shellç¼–ç¨‹</h1><h2 id="ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰"><a href="#ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰" class="headerlink" title="ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰"></a>ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰</h2><ol><li><p><strong>å°†å‘½ä»¤ç»„åˆæˆå®ç”¨å·¥å…·</strong></p><ul><li>ç¤ºä¾‹ï¼šåˆ›å»ºæ˜¾ç¤ºç›®å½•çš„è„šæœ¬<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># lsdirè„šæœ¬å†…å®¹</span><br><span class="hljs-built_in">ls</span> -l | sed -n <span class="hljs-string">&#x27;/^d/p&#x27;</span><br> <br><span class="hljs-comment"># ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-built_in">chmod</span> +x lsdir<br>./lsdir<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>å¿«é€Ÿç¼–å†™å®ç”¨è½¯ä»¶</strong></p><ul><li>ç¤ºä¾‹ï¼šå¸¦è¡Œå·çš„æ–‡ä»¶æŸ¥çœ‹å™¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># mycatè„šæœ¬å†…å®¹</span><br>awk <span class="hljs-string">&#x27;&#123;print NR, &quot;: &quot;, $0&#125;&#x27;</span> <span class="hljs-variable">$1</span><br> <br><span class="hljs-comment"># ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-built_in">chmod</span> +x mycat<br>./mycat filename<br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="äºŒã€ä½ç½®å‚æ•°"><a href="#äºŒã€ä½ç½®å‚æ•°" class="headerlink" title="äºŒã€ä½ç½®å‚æ•°"></a>äºŒã€ä½ç½®å‚æ•°</h2><ol><li><p><strong>åŸºæœ¬ä½ç½®å‚æ•°</strong></p><ul><li><code>$0</code>ï¼šè„šæœ¬åç§°</li><li><code>$1</code>, <code>$2</code>, â€¦ï¼šç¬¬1ã€2ä¸ªå‚æ•°ç­‰</li><li><code>$#</code>ï¼šå‚æ•°ä¸ªæ•°</li><li><code>$*</code>ï¼šæ‰€æœ‰å‚æ•°é›†åˆ</li></ul></li><li><p><strong>å‚æ•°é‡ç½®ä¸ç§»åŠ¨</strong></p><ul><li>ä½¿ç”¨<code>set</code>é‡ç½®å‚æ•°ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> new1 new2  <span class="hljs-comment"># é‡ç½®$1ä¸ºnew1ï¼Œ$2ä¸ºnew2</span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨<code>shift</code>ç§»åŠ¨å‚æ•°ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">shift</span>    <span class="hljs-comment"># å·¦ç§»1ä½ï¼Œä¸¢å¼ƒ$1</span><br><span class="hljs-built_in">shift</span> 2  <span class="hljs-comment"># å·¦ç§»2ä½</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„"><a href="#ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„" class="headerlink" title="ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„"></a>ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„</h2><ol><li><p><strong>å‘½ä»¤ç»„åˆ</strong></p><ul><li>é¡ºåºæ‰§è¡Œï¼š<code>cmd1; cmd2</code></li><li>ç®¡é“ï¼š<code>cmd1 | cmd2</code></li><li>åå°æ‰§è¡Œï¼š<code>cmd &amp;</code></li></ul></li><li><p><strong>å‘½ä»¤åˆ†ç»„</strong></p><ul><li>å­shellæ‰§è¡Œï¼š<code>(cmd1; cmd2)</code></li><li>å½“å‰shellæ‰§è¡Œï¼š<code>&#123; cmd1; cmd2; &#125;</code></li></ul></li></ol><h2 id="å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦"><a href="#å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦" class="headerlink" title="å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦"></a>å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦</h2><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td><code>&gt;</code></td><td>è¾“å‡ºé‡å®šå‘</td></tr><tr><td><code>&gt;&gt;</code></td><td>è¿½åŠ è¾“å‡º</td></tr><tr><td><code>&lt;</code></td><td>è¾“å…¥é‡å®šå‘</td></tr><tr><td><code>|</code></td><td>ç®¡é“</td></tr><tr><td><code>*</code></td><td>é€šé…ç¬¦</td></tr><tr><td><code>?</code></td><td>å•å­—ç¬¦åŒ¹é…</td></tr><tr><td><code>[a-z]</code></td><td>å­—ç¬¦èŒƒå›´åŒ¹é…</td></tr><tr><td><code>;</code></td><td>å‘½ä»¤åˆ†éš”ç¬¦</td></tr><tr><td><code>&amp;</code></td><td>åå°æ‰§è¡Œ</td></tr><tr><td><code>`</code></td><td>å‘½ä»¤æ›¿æ¢</td></tr><tr><td><code>$()</code></td><td>å‘½ä»¤æ›¿æ¢(æ¨è)</td></tr><tr><td><code>#</code></td><td>æ³¨é‡Š</td></tr></tbody></table><h2 id="äº”ã€å¼•å·ä½¿ç”¨"><a href="#äº”ã€å¼•å·ä½¿ç”¨" class="headerlink" title="äº”ã€å¼•å·ä½¿ç”¨"></a>äº”ã€å¼•å·ä½¿ç”¨</h2><ol><li><p><strong>å•å¼•å·</strong>ï¼šå®Œå…¨åŸæ ·è¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;$USER `date`&#x27;</span>  <span class="hljs-comment"># è¾“å‡º: $USER `date`</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åŒå¼•å·</strong>ï¼šå…è®¸å˜é‡å’Œå‘½ä»¤æ›¿æ¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> `date`&quot;</span>  <span class="hljs-comment"># è¾“å‡ºå½“å‰ç”¨æˆ·å’Œæ—¥æœŸ</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åå¼•å·</strong>ï¼šå‘½ä»¤æ›¿æ¢(å·²è¿‡æ—¶ï¼Œæ¨èä½¿ç”¨$())</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is `date`&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is <span class="hljs-subst">$(date)</span>&quot;</span>  <span class="hljs-comment"># æ¨èå†™æ³•</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="å…­ã€é‡å®šå‘"><a href="#å…­ã€é‡å®šå‘" class="headerlink" title="å…­ã€é‡å®šå‘"></a>å…­ã€é‡å®šå‘</h2><ol><li><p><strong>æ ‡å‡†é‡å®šå‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd &gt; file    <span class="hljs-comment"># è¾“å‡ºé‡å®šå‘</span><br>cmd &gt;&gt; file   <span class="hljs-comment"># è¿½åŠ è¾“å‡º</span><br>cmd &lt; file    <span class="hljs-comment"># è¾“å…¥é‡å®šå‘</span><br></code></pre></td></tr></table></figure></li><li><p><strong>é”™è¯¯é‡å®šå‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd 2&gt; error.log          <span class="hljs-comment"># é”™è¯¯è¾“å‡ºåˆ°æ–‡ä»¶</span><br>cmd &gt; output.log 2&gt;&amp;1     <span class="hljs-comment"># æ ‡å‡†å’Œé”™è¯¯éƒ½è¾“å‡ºåˆ°æ–‡ä»¶</span><br>cmd &amp;&gt; all_output.log     <span class="hljs-comment"># åŒä¸Š(æ›´ç®€æ´)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>Here Document</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">å¤šè¡Œæ–‡æœ¬</span><br><span class="hljs-string">å¯ä»¥ç›´æ¥è¾“å…¥</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="ä¸ƒã€Shellç¨‹åºç»“æ„"><a href="#ä¸ƒã€Shellç¨‹åºç»“æ„" class="headerlink" title="ä¸ƒã€Shellç¨‹åºç»“æ„"></a>ä¸ƒã€Shellç¨‹åºç»“æ„</h2><ol><li><strong>åŸºæœ¬ç»“æ„</strong>ï¼šå‘½ä»¤åºåˆ—</li><li><strong>ä¸»è¦å‘½ä»¤ç±»å‹</strong>ï¼š<ul><li>æ™®é€šå‘½ä»¤</li><li>èµ‹å€¼å‘½ä»¤</li><li>è¿ç®—å‘½ä»¤</li><li>æµç¨‹æ§åˆ¶(if&#x2F;case&#x2F;for&#x2F;while)</li></ul></li></ol><h2 id="å…«ã€æµç¨‹æ§åˆ¶"><a href="#å…«ã€æµç¨‹æ§åˆ¶" class="headerlink" title="å…«ã€æµç¨‹æ§åˆ¶"></a>å…«ã€æµç¨‹æ§åˆ¶</h2><ol><li><p><strong>ifè¯­å¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">elif</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">else</span><br>  commands<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>caseè¯­å¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">case</span> <span class="hljs-variable">$var</span> <span class="hljs-keyword">in</span><br>  pattern1) commands ;;<br>  pattern2) commands ;;<br>  *) default commands ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure></li><li><p><strong>forå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å½¢å¼1</span><br><span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br> <br><span class="hljs-comment"># å½¢å¼2(Cé£æ ¼)</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)); <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>whileå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>untilå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">until</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­"><a href="#ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­" class="headerlink" title="ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­"></a>ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­</h2><p>test</p><ol><li><p><strong>æ–‡ä»¶æµ‹è¯•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -e file ]    <span class="hljs-comment"># æ–‡ä»¶å­˜åœ¨</span><br>[ -f file ]    <span class="hljs-comment"># æ˜¯æ™®é€šæ–‡ä»¶</span><br>[ -d file ]    <span class="hljs-comment"># æ˜¯ç›®å½•</span><br>[ -s file ]    <span class="hljs-comment"># æ–‡ä»¶éç©º</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å­—ç¬¦ä¸²æµ‹è¯•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># å­—ç¬¦ä¸²ä¸ºç©º</span><br>[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># å­—ç¬¦ä¸²éç©º</span><br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> = <span class="hljs-string">&quot;<span class="hljs-variable">$b</span>&quot;</span> ] <span class="hljs-comment"># å­—ç¬¦ä¸²ç›¸ç­‰</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ•°å€¼æ¯”è¾ƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ <span class="hljs-variable">$a</span> -eq <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># ç­‰äº</span><br>[ <span class="hljs-variable">$a</span> -ne <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># ä¸ç­‰äº</span><br>[ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># å¤§äº</span><br>[ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># å°äº</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="åã€Shellå†…éƒ¨å˜é‡"><a href="#åã€Shellå†…éƒ¨å˜é‡" class="headerlink" title="åã€Shellå†…éƒ¨å˜é‡"></a>åã€Shellå†…éƒ¨å˜é‡</h2><table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>$?</code></td><td>ä¸Šæ¡å‘½ä»¤é€€å‡ºçŠ¶æ€</td></tr><tr><td><code>$$</code></td><td>å½“å‰shellçš„PID</td></tr><tr><td><code>$!</code></td><td>æœ€ååå°è¿›ç¨‹PID</td></tr><tr><td><code>$#</code></td><td>å‚æ•°ä¸ªæ•°</td></tr><tr><td><code>$@</code></td><td>æ‰€æœ‰å‚æ•°(ä¿ç•™å¼•å·)</td></tr><tr><td><code>$*</code></td><td>æ‰€æœ‰å‚æ•°(ä¸ä¿ç•™å¼•å·)</td></tr><tr><td><code>$_</code></td><td>ä¸Šæ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</td></tr></tbody></table><h2 id="åä¸€ã€å®ç”¨ç¤ºä¾‹"><a href="#åä¸€ã€å®ç”¨ç¤ºä¾‹" class="headerlink" title="åä¸€ã€å®ç”¨ç¤ºä¾‹"></a>åä¸€ã€å®ç”¨ç¤ºä¾‹</h2><ol><li><p><strong>æŸ¥æ‰¾å‘½ä»¤è·¯å¾„(mywhich)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$#</span> <span class="hljs-keyword">in</span><br>  0) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> cmd&quot;</span>; <span class="hljs-built_in">exit</span> 1 ;;<br><span class="hljs-keyword">esac</span><br> <br>IFS=:<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">dir</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">$PATH</span>; <span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> [ -x <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-built_in">exit</span> 0<br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>: not found&quot;</span><br><span class="hljs-built_in">exit</span> 1<br></code></pre></td></tr></table></figure></li><li><p><strong>å€’åºæ˜¾ç¤ºå‚æ•°</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-variable">$#</span>; i&gt;<span class="hljs-number">0</span>; i--)); <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;!i&#125;</span>  <span class="hljs-comment"># é—´æ¥å¼•ç”¨</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹"><a href="#åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹" class="headerlink" title="åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹"></a>åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>å¿«é€Ÿç»„åˆç°æœ‰å‘½ä»¤</li><li>æ— éœ€ç¼–è¯‘ï¼Œä¿®æ”¹æ–¹ä¾¿</li><li>é€‚åˆç³»ç»Ÿç®¡ç†ä»»åŠ¡</li></ul><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>æ‰§è¡Œæ•ˆç‡è¾ƒä½</li><li>å¤æ‚é€»è¾‘å¯è¯»æ€§å·®</li><li>å¯ç§»æ¤æ€§å—é™</li></ul><h2 id="æœ€ä½³å®è·µå»ºè®®"><a href="#æœ€ä½³å®è·µå»ºè®®" class="headerlink" title="æœ€ä½³å®è·µå»ºè®®"></a>æœ€ä½³å®è·µå»ºè®®</h2><ol><li>æ€»åœ¨ç¬¬ä¸€è¡ŒæŒ‡å®šè§£é‡Šå™¨ï¼š<code>#!/bin/bash</code></li><li>ä½¿ç”¨<code>$()</code>ä»£æ›¿åå¼•å·è¿›è¡Œå‘½ä»¤æ›¿æ¢</li><li>å˜é‡å¼•ç”¨åŠ åŒå¼•å·ï¼š<code>&quot;$var&quot;</code></li><li>ä½¿ç”¨<code>[[ ]]</code>ä»£æ›¿<code>[ ]</code>è¿›è¡Œæ¡ä»¶æµ‹è¯•(æ›´å¼ºå¤§)</li><li>ä¸ºè„šæœ¬æ·»åŠ å¸®åŠ©ä¿¡æ¯å’Œé”™è¯¯å¤„ç†</li><li>å¤æ‚è„šæœ¬è€ƒè™‘ä½¿ç”¨Pythonç­‰æ›´å¼ºå¤§çš„è¯­è¨€</li></ol><p>é€šè¿‡æŒæ¡è¿™äº›æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‚¨å¯ä»¥ç¼–å†™å‡ºé«˜æ•ˆã€å¯é çš„Shellè„šæœ¬ï¼Œå®Œæˆå„ç§ç³»ç»Ÿç®¡ç†å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p><h1 id="Cè¯­è¨€å¼€å‘ç¯å¢ƒ"><a href="#Cè¯­è¨€å¼€å‘ç¯å¢ƒ" class="headerlink" title="Cè¯­è¨€å¼€å‘ç¯å¢ƒ"></a>Cè¯­è¨€å¼€å‘ç¯å¢ƒ</h1><h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><ol><li><p><strong>Cè¯­è¨€ä¸UNIXçš„å…³ç³»</strong></p><ul><li>1973å¹´ç”±Dennis Ritchieå‘æ˜ï¼Œç”¨äºé‡å†™UNIXç³»ç»Ÿ</li><li>æˆä¸ºUNIXç³»ç»Ÿçš„â€è‡ªç„¶â€è¯­è¨€</li><li>1988å¹´IEEEæ¨å‡ºPOSIXæ ‡å‡†ï¼Œç»Ÿä¸€äº†Cè¯­è¨€å¤´æ–‡ä»¶</li></ul></li><li><p><strong>Cè¯­è¨€ä¼˜åŠ¿</strong></p><ul><li>é«˜æ•ˆæ€§ï¼šç›´æ¥æ“ä½œç¡¬ä»¶</li><li>å¯ç§»æ¤æ€§ï¼šPOSIXæ ‡å‡†ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§</li><li>å¹¿æ³›åº”ç”¨ï¼šç³»ç»Ÿç¼–ç¨‹ã€åµŒå…¥å¼å¼€å‘é¦–é€‰è¯­è¨€</li></ul></li></ol><h2 id="äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ"><a href="#äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ" class="headerlink" title="äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ"></a>äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ</h2><h3 id="1-åŸºæœ¬ç»“æ„"><a href="#1-åŸºæœ¬ç»“æ„" class="headerlink" title="1. åŸºæœ¬ç»“æ„"></a>1. åŸºæœ¬ç»“æ„</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* æ³¨é‡Šï¼šä¼ ç»Ÿç¬¬ä¸€ä¸ªCç¨‹åº */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span>  <span class="hljs-comment">// é¢„ç¼–è¯‘æŒ‡ä»¤ï¼šåŒ…å«æ ‡å‡†I/Oå¤´æ–‡ä»¶</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span> &#123;  <span class="hljs-comment">// ä¸»å‡½æ•°ï¼Œç¨‹åºå…¥å£</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World!\n&quot;</span>);      <span class="hljs-comment">// è¾“å‡ºè¯­å¥</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;                      <span class="hljs-comment">// è¿”å›å€¼(0è¡¨ç¤ºæˆåŠŸ)</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-å…³é”®è¯­æ³•è§£æ"><a href="#2-å…³é”®è¯­æ³•è§£æ" class="headerlink" title="2. å…³é”®è¯­æ³•è§£æ"></a>2. å…³é”®è¯­æ³•è§£æ</h3><ol><li><p><strong>æ³¨é‡Š</strong></p><ul><li><code>/* ... */</code>ï¼šå¤šè¡Œæ³¨é‡Š</li><li><code>//</code>ï¼šå•è¡Œæ³¨é‡Š(C99æ ‡å‡†)</li></ul></li><li><p><strong>é¢„ç¼–è¯‘æŒ‡ä»¤</strong></p><ul><li><code>#include &lt;å¤´æ–‡ä»¶&gt;</code>ï¼šä»ç³»ç»Ÿè·¯å¾„(&#x2F;usr&#x2F;include)åŠ è½½</li><li><code>#include &quot;å¤´æ–‡ä»¶&quot;</code>ï¼šä»å½“å‰ç›®å½•åŠ è½½</li></ul></li><li><p><strong>ä¸»å‡½æ•°</strong></p><ul><li>å¿…é¡»çš„å…¥å£å‡½æ•°</li><li>å‚æ•°ï¼š<ul><li><code>argc</code>ï¼šå‚æ•°ä¸ªæ•°</li><li><code>argv[]</code>ï¼šå‚æ•°æ•°ç»„(argv[0]ä¸ºç¨‹åºå)</li></ul></li><li>è¿”å›å€¼ï¼š<ul><li>0è¡¨ç¤ºæˆåŠŸ</li><li>é0è¡¨ç¤ºé”™è¯¯(ä¾¿äºShellè„šæœ¬åˆ¤æ–­)</li></ul></li></ul></li></ol><h2 id="ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹"><a href="#ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹"></a>ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹</h2><h3 id="1-å››ä¸ªé˜¶æ®µ"><a href="#1-å››ä¸ªé˜¶æ®µ" class="headerlink" title="1. å››ä¸ªé˜¶æ®µ"></a>1. å››ä¸ªé˜¶æ®µ</h3><ol><li><p><strong>é¢„å¤„ç†</strong></p><ul><li>å¤„ç†<code>#include</code>ã€<code>#define</code>ç­‰æŒ‡ä»¤</li><li>ç”Ÿæˆ<code>.i</code>æ–‡ä»¶</li></ul></li><li><p><strong>ç¼–è¯‘</strong></p><ul><li>è¯æ³•&#x2F;è¯­æ³•åˆ†æ</li><li>ç”Ÿæˆæ±‡ç¼–ä»£ç (.sæ–‡ä»¶)</li></ul></li><li><p><strong>æ±‡ç¼–</strong></p><ul><li>å°†æ±‡ç¼–ä»£ç è½¬ä¸ºæœºå™¨ç </li><li>ç”Ÿæˆç›®æ ‡æ–‡ä»¶(.o)</li></ul></li><li><p><strong>é“¾æ¥</strong></p><ul><li>åˆå¹¶å¤šä¸ªç›®æ ‡æ–‡ä»¶</li><li>ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº</li></ul></li></ol><h3 id="2-å¸¸ç”¨GCCå‘½ä»¤"><a href="#2-å¸¸ç”¨GCCå‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨GCCå‘½ä»¤"></a>2. å¸¸ç”¨GCCå‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>gcc hello.c</code></td><td>ç”Ÿæˆa.out</td></tr><tr><td><code>gcc -o hello hello.c</code></td><td>æŒ‡å®šè¾“å‡ºæ–‡ä»¶å</td></tr><tr><td><code>gcc -c file.c</code></td><td>ä»…ç¼–è¯‘ç”Ÿæˆ.oæ–‡ä»¶</td></tr><tr><td><code>gcc -g program.c</code></td><td>åŠ å…¥è°ƒè¯•ä¿¡æ¯</td></tr></tbody></table><h2 id="å››ã€è°ƒè¯•å·¥å…·GDB"><a href="#å››ã€è°ƒè¯•å·¥å…·GDB" class="headerlink" title="å››ã€è°ƒè¯•å·¥å…·GDB"></a>å››ã€è°ƒè¯•å·¥å…·GDB</h2><h3 id="1-æ ¸å¿ƒåŠŸèƒ½"><a href="#1-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="1. æ ¸å¿ƒåŠŸèƒ½"></a>1. æ ¸å¿ƒåŠŸèƒ½</h3><ul><li>è®¾ç½®æ–­ç‚¹</li><li>å•æ­¥æ‰§è¡Œ</li><li>æŸ¥çœ‹å˜é‡å€¼</li><li>ä¿®æ”¹ç¨‹åºçŠ¶æ€</li></ul><h3 id="2-å¸¸ç”¨å‘½ä»¤"><a href="#2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨å‘½ä»¤"></a>2. å¸¸ç”¨å‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>gdb ./a.out</code></td><td>å¯åŠ¨è°ƒè¯•</td></tr><tr><td><code>break main</code></td><td>åœ¨mainå‡½æ•°è®¾æ–­ç‚¹</td></tr><tr><td><code>run</code></td><td>è¿è¡Œç¨‹åº</td></tr><tr><td><code>print x</code></td><td>æŸ¥çœ‹å˜é‡xçš„å€¼</td></tr><tr><td><code>next</code></td><td>å•æ­¥æ‰§è¡Œ(ä¸è¿›å…¥å‡½æ•°)</td></tr><tr><td><code>quit</code></td><td>é€€å‡ºGDB</td></tr></tbody></table><h2 id="äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make"><a href="#äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make" class="headerlink" title="äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make"></a>äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make</h2><h3 id="1-Makefileè§„åˆ™"><a href="#1-Makefileè§„åˆ™" class="headerlink" title="1. Makefileè§„åˆ™"></a>1. Makefileè§„åˆ™</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ç›®æ ‡æ–‡ä»¶: ä¾èµ–æ–‡ä»¶1 ä¾èµ–æ–‡ä»¶2 ...</span><br>    &lt;tab&gt;å‘½ä»¤1<br>    &lt;tab&gt;å‘½ä»¤2<br></code></pre></td></tr></table></figure><h3 id="2-ç¤ºä¾‹"><a href="#2-ç¤ºä¾‹" class="headerlink" title="2. ç¤ºä¾‹"></a>2. ç¤ºä¾‹</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">app: main.o utils.o</span><br>    gcc -o app main.o utils.o<br><br><span class="hljs-section">main.o: main.c</span><br>    gcc -c main.c<br><br><span class="hljs-section">utils.o: utils.c</span><br>    gcc -c utils.c<br><br><span class="hljs-section">clean:</span><br>    rm -f *.o app<br><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: clean</span><br></code></pre></td></tr></table></figure><h3 id="3-é‡è¦æ¦‚å¿µ"><a href="#3-é‡è¦æ¦‚å¿µ" class="headerlink" title="3. é‡è¦æ¦‚å¿µ"></a>3. é‡è¦æ¦‚å¿µ</h3><ol><li><p><strong>å˜é‡</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile">OBJS = main.o utils.o<br><span class="hljs-section">app: <span class="hljs-variable">$(OBJS)</span></span><br>    gcc -o app <span class="hljs-variable">$(OBJS)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>éšå«è§„åˆ™</strong></p><ul><li>è‡ªåŠ¨æ¨å¯¼ä¾èµ–å…³ç³»</li><li>å¦‚<code>.o</code>æ–‡ä»¶è‡ªåŠ¨ä»<code>.c</code>æ–‡ä»¶ç”Ÿæˆ</li></ul></li><li><p><strong>ä¼ªç›®æ ‡</strong></p><ul><li>ç”¨äºéç¼–è¯‘ä»»åŠ¡(å¦‚clean)</li><li>éœ€ç”¨<code>.PHONY</code>å£°æ˜</li></ul></li></ol><h2 id="å…­ã€æ ‡å‡†Cå‡½æ•°"><a href="#å…­ã€æ ‡å‡†Cå‡½æ•°" class="headerlink" title="å…­ã€æ ‡å‡†Cå‡½æ•°"></a>å…­ã€æ ‡å‡†Cå‡½æ•°</h2><h3 id="1-ç³»ç»Ÿè°ƒç”¨-vs-åº“å‡½æ•°"><a href="#1-ç³»ç»Ÿè°ƒç”¨-vs-åº“å‡½æ•°" class="headerlink" title="1. ç³»ç»Ÿè°ƒç”¨ vs åº“å‡½æ•°"></a>1. ç³»ç»Ÿè°ƒç”¨ vs åº“å‡½æ•°</h3><table><thead><tr><th>ç‰¹æ€§</th><th>ç³»ç»Ÿè°ƒç”¨</th><th>åº“å‡½æ•°</th></tr></thead><tbody><tr><td>æä¾›è€…</td><td>æ“ä½œç³»ç»Ÿå†…æ ¸</td><td>ç¼–ç¨‹è¯­è¨€</td></tr><tr><td>åŠŸèƒ½</td><td>åŸºç¡€æ¥å£</td><td>é«˜çº§å°è£…</td></tr><tr><td>ç¤ºä¾‹</td><td>write()</td><td>printf()</td></tr><tr><td>å¯æ›¿æ¢æ€§</td><td>ä¸å¯æ›¿æ¢</td><td>å¯æ›¿æ¢</td></tr></tbody></table><h3 id="2-UNIXä½“ç³»ç»“æ„"><a href="#2-UNIXä½“ç³»ç»“æ„" class="headerlink" title="2. UNIXä½“ç³»ç»“æ„"></a>2. UNIXä½“ç³»ç»“æ„</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">åº”ç”¨ç¨‹åº â†’ åº“å‡½æ•° â†’ ç³»ç»Ÿè°ƒç”¨ â†’ å†…æ ¸<br></code></pre></td></tr></table></figure><h3 id="3-æ ‡å‡†åŒ–"><a href="#3-æ ‡å‡†åŒ–" class="headerlink" title="3. æ ‡å‡†åŒ–"></a>3. æ ‡å‡†åŒ–</h3><ol><li><p><strong>ISO C</strong></p><ul><li>C90(1989)ã€C99(1999)</li><li>å®šä¹‰24ä¸ªæ ‡å‡†å¤´æ–‡ä»¶</li></ul></li><li><p><strong>POSIX</strong></p><ul><li>å¢å¼ºUNIXç³»ç»Ÿå¯ç§»æ¤æ€§</li><li>å®šä¹‰26ä¸ªå¿…éœ€å¤´æ–‡ä»¶</li></ul></li><li><p><strong>SUS</strong></p><ul><li>å•ä¸€UNIXè§„èŒƒ</li><li>æ‰©å±•POSIXåŠŸèƒ½</li></ul></li></ol><h1 id="ç³»ç»Ÿè°ƒç”¨"><a href="#ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨"></a>ç³»ç»Ÿè°ƒç”¨</h1><h2 id="ä¸€ã€æ–‡ä»¶I-Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰"><a href="#ä¸€ã€æ–‡ä»¶I-Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰" class="headerlink" title="ä¸€ã€æ–‡ä»¶I&#x2F;Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰"></a><strong>ä¸€ã€æ–‡ä»¶I&#x2F;Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰</strong></h2><h3 id="1-æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile-Descriptor-fdï¼‰"><a href="#1-æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile-Descriptor-fdï¼‰" class="headerlink" title="1. æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptor, fdï¼‰"></a><strong>1. æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptor, fdï¼‰</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šéè´Ÿæ•´æ•°ï¼Œç”¨äºæ ‡è¯†è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ã€‚</li><li><strong>é»˜è®¤æ–‡ä»¶æè¿°ç¬¦</strong>ï¼š<ul><li><code>0</code>ï¼šæ ‡å‡†è¾“å…¥ï¼ˆ<code>STdin_FILENO</code>ï¼Œé”®ç›˜è¾“å…¥ï¼‰ã€‚</li><li><code>1</code>ï¼šæ ‡å‡†è¾“å‡ºï¼ˆ<code>STDOUT_FILENO</code>ï¼Œå±å¹•è¾“å‡ºï¼‰ã€‚</li><li><code>2</code>ï¼šæ ‡å‡†é”™è¯¯ï¼ˆ<code>STDERR_FILENO</code>ï¼Œå±å¹•é”™è¯¯è¾“å‡ºï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º"><a href="#ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º" class="headerlink" title="ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º"></a><strong>ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];<br>    <span class="hljs-type">ssize_t</span> n = read(STDIN_FILENO, buf, <span class="hljs-keyword">sizeof</span>(buf));  <span class="hljs-comment">// ä»é”®ç›˜è¯»å–</span><br>    write(STDOUT_FILENO, buf, n);                      <span class="hljs-comment">// è¾“å‡ºåˆ°å±å¹•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>read(fd, buf, size)</code>ï¼šä» <code>fd</code> è¯»å–æœ€å¤š <code>size</code> å­—èŠ‚åˆ° <code>buf</code>ï¼Œè¿”å›å®é™…è¯»å–å­—èŠ‚æ•°ã€‚</li><li><code>write(fd, buf, size)</code>ï¼šå°† <code>buf</code> çš„ <code>size</code> å­—èŠ‚å†™å…¥ <code>fd</code>ã€‚</li></ul><hr><h3 id="2-open-å’Œ-creat"><a href="#2-open-å’Œ-creat" class="headerlink" title="2. open() å’Œ creat()"></a><strong>2. <code>open()</code> å’Œ <code>creat()</code></strong></h3><h4 id="open-å‡½æ•°"><a href="#open-å‡½æ•°" class="headerlink" title="open() å‡½æ•°"></a><strong><code>open()</code> å‡½æ•°</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">open</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-type">int</span> flags, <span class="hljs-type">mode_t</span> mode)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>flags</code>**ï¼š<ul><li><code>O_RDONLY</code>ï¼šåªè¯»ã€‚</li><li><code>O_WRONLY</code>ï¼šåªå†™ã€‚</li><li><code>O_RDWR</code>ï¼šè¯»å†™ã€‚</li><li><code>O_CREAT</code>ï¼šæ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ›å»ºã€‚</li><li><code>O_TRUNC</code>ï¼šè‹¥æ–‡ä»¶å­˜åœ¨ï¼Œæ¸…ç©ºå†…å®¹ã€‚</li><li><code>O_APPEND</code>ï¼šè¿½åŠ å†™å…¥ï¼ˆé¿å…å¹¶å‘é—®é¢˜ï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šæ‰“å¼€-åˆ›å»ºæ–‡ä»¶"><a href="#ç¤ºä¾‹ï¼šæ‰“å¼€-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹ï¼šæ‰“å¼€&#x2F;åˆ›å»ºæ–‡ä»¶"></a><strong>ç¤ºä¾‹ï¼šæ‰“å¼€&#x2F;åˆ›å»ºæ–‡ä»¶</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    write(fd, <span class="hljs-string">&quot;Hello, World!\n&quot;</span>, <span class="hljs-number">14</span>);<br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>O_CREAT | O_TRUNC</code>ï¼šè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œè‹¥å­˜åœ¨åˆ™æ¸…ç©ºã€‚</li><li><code>0644</code>ï¼šæ–‡ä»¶æƒé™ï¼ˆ<code>rw-r--r--</code>ï¼‰ã€‚</li></ul><hr><h3 id="3-lseek-ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ"><a href="#3-lseek-ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ" class="headerlink" title="3. lseek()ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ"></a><strong>3. <code>lseek()</code>ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">off_t</span> <span class="hljs-title function_">lseek</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">off_t</span> offset, <span class="hljs-type">int</span> whence)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>whence</code>**ï¼š<ul><li><code>SEEK_SET</code>ï¼šä»æ–‡ä»¶å¼€å¤´è®¡ç®—åç§»ã€‚</li><li><code>SEEK_CUR</code>ï¼šä»å½“å‰ä½ç½®è®¡ç®—åç§»ã€‚</li><li><code>SEEK_END</code>ï¼šä»æ–‡ä»¶æœ«å°¾è®¡ç®—åç§»ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬-10-å­—èŠ‚"><a href="#ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬-10-å­—èŠ‚" class="headerlink" title="ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬ 10 å­—èŠ‚"></a><strong>ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬ 10 å­—èŠ‚</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_RDONLY);<br>    lseek(fd, <span class="hljs-number">10</span>, SEEK_SET);  <span class="hljs-comment">// ç§»åŠ¨åˆ°ç¬¬ 10 å­—èŠ‚</span><br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1</span>];<br>    read(fd, buf, <span class="hljs-number">1</span>);         <span class="hljs-comment">// è¯»å– 1 å­—èŠ‚</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="4-dup2-ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘"><a href="#4-dup2-ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘" class="headerlink" title="4. dup2()ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘"></a><strong>4. <code>dup2()</code>ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dup2</span><span class="hljs-params">(<span class="hljs-type">int</span> oldfd, <span class="hljs-type">int</span> newfd)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šè®© <code>newfd</code> æŒ‡å‘ <code>oldfd</code> çš„æ–‡ä»¶ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶"><a href="#ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶"></a><strong>ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;output.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    dup2(fd, STDOUT_FILENO);  <span class="hljs-comment">// æ ‡å‡†è¾“å‡ºæŒ‡å‘æ–‡ä»¶</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This goes to output.txt!\n&quot;</span>);  <span class="hljs-comment">// å†™å…¥æ–‡ä»¶è€Œéå±å¹•</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="æ–‡ä»¶å±æ€§åŠç›®å½•"><a href="#æ–‡ä»¶å±æ€§åŠç›®å½•" class="headerlink" title="æ–‡ä»¶å±æ€§åŠç›®å½•"></a>æ–‡ä»¶å±æ€§åŠç›®å½•</h2><h3 id="ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct-statï¼‰"><a href="#ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct-statï¼‰" class="headerlink" title="ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct statï¼‰"></a><strong>ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆ<code>struct stat</code>ï¼‰</strong></h3><h3 id="1-å±æ€§ç»“æ„ä½“"><a href="#1-å±æ€§ç»“æ„ä½“" class="headerlink" title="1. å±æ€§ç»“æ„ä½“"></a><strong>1. å±æ€§ç»“æ„ä½“</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> &#123;</span><br>    <span class="hljs-type">mode_t</span>  st_mode;   <span class="hljs-comment">// æ–‡ä»¶ç±»å‹å’Œæƒé™ï¼ˆæ ¸å¿ƒå­—æ®µï¼‰</span><br>    <span class="hljs-type">ino_t</span>   st_ino;    <span class="hljs-comment">// inode å·ï¼ˆå”¯ä¸€æ ‡è¯†æ–‡ä»¶ï¼‰</span><br>    <span class="hljs-type">dev_t</span>   st_dev;    <span class="hljs-comment">// æ–‡ä»¶æ‰€åœ¨è®¾å¤‡çš„ ID</span><br>    <span class="hljs-type">dev_t</span>   st_rdev;   <span class="hljs-comment">// è®¾å¤‡æ–‡ä»¶çš„è®¾å¤‡å·ï¼ˆä»…ç‰¹æ®Šæ–‡ä»¶æœ‰æ•ˆï¼‰</span><br>    <span class="hljs-type">nlink_t</span> st_nlink;  <span class="hljs-comment">// ç¡¬é“¾æ¥è®¡æ•°</span><br>    <span class="hljs-type">uid_t</span>   st_uid;    <span class="hljs-comment">// æ‰€æœ‰è€…ç”¨æˆ· ID</span><br>    <span class="hljs-type">gid_t</span>   st_gid;    <span class="hljs-comment">// æ‰€æœ‰è€…ç»„ ID</span><br>    <span class="hljs-type">off_t</span>   st_size;   <span class="hljs-comment">// æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span><br>    <span class="hljs-type">time_t</span>  st_atime;  <span class="hljs-comment">// æœ€åè®¿é—®æ—¶é—´</span><br>    <span class="hljs-type">time_t</span>  st_mtime;  <span class="hljs-comment">// æœ€åä¿®æ”¹å†…å®¹æ—¶é—´</span><br>    <span class="hljs-type">time_t</span>  st_ctime;  <span class="hljs-comment">// æœ€åä¿®æ”¹å±æ€§æ—¶é—´ï¼ˆå¦‚æƒé™ï¼‰</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="2-è·å–æ–‡ä»¶å±æ€§"><a href="#2-è·å–æ–‡ä»¶å±æ€§" class="headerlink" title="2. è·å–æ–‡ä»¶å±æ€§"></a><strong>2. è·å–æ–‡ä»¶å±æ€§</strong></h3><ul><li>**<code>stat()</code>**ï¼šé€šè¿‡è·¯å¾„è·å–å±æ€§ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">stat</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li><li>**<code>fstat()</code>**ï¼šé€šè¿‡æ–‡ä»¶æè¿°ç¬¦è·å–å±æ€§ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">fstat</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li></ul><h4 id="ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°"><a href="#ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°" class="headerlink" title="ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°"></a><strong>ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> <span class="hljs-title">buf</span>;</span><br>    stat(<span class="hljs-string">&quot;test.txt&quot;</span>, &amp;buf);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File size: %ld bytes\n&quot;</span>, buf.st_size);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™"><a href="#äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™" class="headerlink" title="äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™"></a><strong>äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™</strong></h3><h3 id="1-æ–‡ä»¶ç±»å‹åˆ¤æ–­å®"><a href="#1-æ–‡ä»¶ç±»å‹åˆ¤æ–­å®" class="headerlink" title="1. æ–‡ä»¶ç±»å‹åˆ¤æ–­å®"></a><strong>1. æ–‡ä»¶ç±»å‹åˆ¤æ–­å®</strong></h3><table><thead><tr><th><strong>å®</strong></th><th><strong>æ–‡ä»¶ç±»å‹</strong></th></tr></thead><tbody><tr><td><code>S_ISREG(mode)</code></td><td>æ™®é€šæ–‡ä»¶ï¼ˆå¦‚ <code>.txt</code>ï¼‰</td></tr><tr><td><code>S_ISDIR(mode)</code></td><td>ç›®å½•</td></tr><tr><td><code>S_ISCHR(mode)</code></td><td>å­—ç¬¦è®¾å¤‡ï¼ˆå¦‚ <code>/dev/tty</code>ï¼‰</td></tr><tr><td><code>S_ISBLK(mode)</code></td><td>å—è®¾å¤‡ï¼ˆå¦‚ <code>/dev/sda</code>ï¼‰</td></tr><tr><td><code>S_ISFIFO(mode)</code></td><td>ç®¡é“ï¼ˆFIFOï¼‰</td></tr><tr><td><code>S_ISLNK(mode)</code></td><td>ç¬¦å·é“¾æ¥</td></tr><tr><td><code>S_ISSOCK(mode)</code></td><td>å¥—æ¥å­—</td></tr></tbody></table><h4 id="ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹"><a href="#ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹" class="headerlink" title="ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹"></a><strong>ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (S_ISREG(buf.st_mode)) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This is a regular file.\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-æ–‡ä»¶æƒé™"><a href="#2-æ–‡ä»¶æƒé™" class="headerlink" title="2. æ–‡ä»¶æƒé™"></a><strong>2. æ–‡ä»¶æƒé™</strong></h3><ul><li><strong>9 ä¸ªæƒé™ä½</strong>ï¼š<ul><li><strong>ç”¨æˆ·</strong>ï¼š<code>S_IRUSR</code>ï¼ˆè¯»ï¼‰ã€<code>S_IWUSR</code>ï¼ˆå†™ï¼‰ã€<code>S_IXUSR</code>ï¼ˆæ‰§è¡Œï¼‰ã€‚</li><li><strong>ç»„</strong>ï¼š<code>S_IRGRP</code>ã€<code>S_IWGRP</code>ã€<code>S_IXGRP</code>ã€‚</li><li><strong>å…¶ä»–</strong>ï¼š<code>S_IROTH</code>ã€<code>S_IWOTH</code>ã€<code>S_IXOTH</code>ã€‚</li></ul></li><li><strong>ç‰¹æ®Šæƒé™ä½</strong>ï¼š<ul><li><code>S_ISUID</code>ï¼šæ‰§è¡Œæ—¶è®¾ç½®æœ‰æ•ˆç”¨æˆ· IDï¼ˆå¦‚ <code>passwd</code>ï¼‰ã€‚</li><li><code>S_ISGID</code>ï¼šæ‰§è¡Œæ—¶è®¾ç½®æœ‰æ•ˆç»„ IDã€‚</li><li><code>S_ISVTX</code>ï¼šç²˜æ»ä½ï¼ˆç›®å½•ä¸‹æ–‡ä»¶ä»…æ‰€æœ‰è€…å¯åˆ ï¼‰ã€‚</li></ul></li></ul><h4 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a><strong>ä¿®æ”¹æƒé™</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chmod(<span class="hljs-string">&quot;file.txt&quot;</span>, <span class="hljs-number">0644</span>);  <span class="hljs-comment">// rw-r--r--</span><br>fchmod(fd, <span class="hljs-number">0755</span>);         <span class="hljs-comment">// rwxr-xr-x</span><br></code></pre></td></tr></table></figure><hr><h3 id="ä¸‰ã€æ–‡ä»¶æ“ä½œ"><a href="#ä¸‰ã€æ–‡ä»¶æ“ä½œ" class="headerlink" title="ä¸‰ã€æ–‡ä»¶æ“ä½œ"></a><strong>ä¸‰ã€æ–‡ä»¶æ“ä½œ</strong></h3><h3 id="1-åˆ›å»ºæ–°æ–‡ä»¶"><a href="#1-åˆ›å»ºæ–°æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºæ–°æ–‡ä»¶"></a><strong>1. åˆ›å»ºæ–°æ–‡ä»¶</strong></h3><ul><li><strong>æƒé™è®¡ç®—</strong>ï¼š<code>å®é™…æƒé™ = mode &amp; ~umask</code><br>ï¼ˆ<code>umask</code> é»˜è®¤ä¸º <code>022</code>ï¼Œå±è”½ç»„å’Œå…¶ä»–çš„å†™æƒé™ï¼‰</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">umask(<span class="hljs-number">002</span>);                    <span class="hljs-comment">// è®¾ç½® umask</span><br><span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;new.txt&quot;</span>, O_CREAT | O_WRONLY, <span class="hljs-number">0666</span>); <span class="hljs-comment">// å®é™…æƒé™ï¼š664</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-ç¡¬é“¾æ¥ä¸åˆ é™¤"><a href="#2-ç¡¬é“¾æ¥ä¸åˆ é™¤" class="headerlink" title="2. ç¡¬é“¾æ¥ä¸åˆ é™¤"></a><strong>2. ç¡¬é“¾æ¥ä¸åˆ é™¤</strong></h3><ul><li>**<code>link()</code>**ï¼šåˆ›å»ºç¡¬é“¾æ¥ï¼ˆå¢åŠ  <code>st_nlink</code>ï¼‰ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">link(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// new.txt æŒ‡å‘ old.txt</span><br></code></pre></td></tr></table></figure></li><li>**<code>unlink()</code>**ï¼šåˆ é™¤é“¾æ¥ï¼ˆ<code>st_nlink--</code>ï¼Œè‹¥ä¸º 0 åˆ™åˆ é™¤æ–‡ä»¶ï¼‰ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">unlink(<span class="hljs-string">&quot;file.txt&quot;</span>);  <span class="hljs-comment">// åˆ é™¤æ–‡ä»¶ï¼ˆéœ€æ— è¿›ç¨‹æ‰“å¼€ï¼‰</span><br></code></pre></td></tr></table></figure></li><li>**<code>remove()</code>**ï¼šç­‰ä»·äº <code>unlink()</code>ï¼ˆæ–‡ä»¶ï¼‰æˆ– <code>rmdir()</code>ï¼ˆç›®å½•ï¼‰ã€‚</li></ul><h3 id="3-é‡å‘½å"><a href="#3-é‡å‘½å" class="headerlink" title="3. é‡å‘½å"></a><strong>3. é‡å‘½å</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">rename(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// åŸå­æ“ä½œ</span><br></code></pre></td></tr></table></figure><hr><h3 id="å››ã€ç›®å½•æ“ä½œ"><a href="#å››ã€ç›®å½•æ“ä½œ" class="headerlink" title="å››ã€ç›®å½•æ“ä½œ"></a><strong>å››ã€ç›®å½•æ“ä½œ</strong></h3><h3 id="1-åˆ›å»ºä¸åˆ é™¤ç›®å½•"><a href="#1-åˆ›å»ºä¸åˆ é™¤ç›®å½•" class="headerlink" title="1. åˆ›å»ºä¸åˆ é™¤ç›®å½•"></a><strong>1. åˆ›å»ºä¸åˆ é™¤ç›®å½•</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">mkdir(<span class="hljs-string">&quot;mydir&quot;</span>, <span class="hljs-number">0755</span>);  <span class="hljs-comment">// åˆ›å»ºç›®å½•</span><br>rmdir(<span class="hljs-string">&quot;mydir&quot;</span>);        <span class="hljs-comment">// åˆ é™¤ç©ºç›®å½•</span><br></code></pre></td></tr></table></figure><h3 id="2-è¯»å–ç›®å½•å†…å®¹"><a href="#2-è¯»å–ç›®å½•å†…å®¹" class="headerlink" title="2. è¯»å–ç›®å½•å†…å®¹"></a><strong>2. è¯»å–ç›®å½•å†…å®¹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dirent.h&gt;</span></span><br>DIR *dp = opendir(<span class="hljs-string">&quot;.&quot;</span>);                <span class="hljs-comment">// æ‰“å¼€ç›®å½•</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dirent</span> *<span class="hljs-title">dir</span> =</span> readdir(dp);      <span class="hljs-comment">// è¯»å–æ¡ç›®</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File: %s\n&quot;</span>, dir-&gt;d_name);     <span class="hljs-comment">// æ‰“å°æ–‡ä»¶å</span><br>closedir(dp);                          <span class="hljs-comment">// å…³é—­ç›®å½•</span><br></code></pre></td></tr></table></figure><h4 id="struct-dirent-å…³é”®å­—æ®µ"><a href="#struct-dirent-å…³é”®å­—æ®µ" class="headerlink" title="struct dirent å…³é”®å­—æ®µ"></a><strong><code>struct dirent</code> å…³é”®å­—æ®µ</strong></h4><ul><li><code>d_name</code>ï¼šæ–‡ä»¶åã€‚</li><li><code>d_type</code>ï¼šæ–‡ä»¶ç±»å‹ï¼ˆå¦‚ <code>DT_REG</code> æ™®é€šæ–‡ä»¶ï¼‰ã€‚</li></ul><hr><h3 id="äº”ã€å·¥ä½œç›®å½•ç®¡ç†"><a href="#äº”ã€å·¥ä½œç›®å½•ç®¡ç†" class="headerlink" title="äº”ã€å·¥ä½œç›®å½•ç®¡ç†"></a><strong>äº”ã€å·¥ä½œç›®å½•ç®¡ç†</strong></h3><h4 id="1-æ”¹å˜å·¥ä½œç›®å½•"><a href="#1-æ”¹å˜å·¥ä½œç›®å½•" class="headerlink" title="1. æ”¹å˜å·¥ä½œç›®å½•"></a><strong>1. æ”¹å˜å·¥ä½œç›®å½•</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chdir(<span class="hljs-string">&quot;/tmp&quot;</span>);       <span class="hljs-comment">// åˆ‡æ¢åˆ° /tmp</span><br>fchdir(dir_fd);      <span class="hljs-comment">// é€šè¿‡æ–‡ä»¶æè¿°ç¬¦åˆ‡æ¢</span><br></code></pre></td></tr></table></figure><h4 id="2-è·å–å½“å‰ç›®å½•"><a href="#2-è·å–å½“å‰ç›®å½•" class="headerlink" title="2. è·å–å½“å‰ç›®å½•"></a><strong>2. è·å–å½“å‰ç›®å½•</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> cwd[<span class="hljs-number">1024</span>];<br>getcwd(cwd, <span class="hljs-keyword">sizeof</span>(cwd));  <span class="hljs-comment">// ç±»ä¼¼ pwd å‘½ä»¤</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;CWD: %s\n&quot;</span>, cwd);<br></code></pre></td></tr></table></figure><hr><h3 id="å…­ã€æ€»ç»“è¡¨"><a href="#å…­ã€æ€»ç»“è¡¨" class="headerlink" title="å…­ã€æ€»ç»“è¡¨"></a><strong>å…­ã€æ€»ç»“è¡¨</strong></h3><table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>å‡½æ•°&#x2F;å®</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>è·å–å±æ€§</strong></td><td><code>stat()</code>, <code>fstat()</code></td><td>å¡«å…… <code>struct stat</code></td></tr><tr><td><strong>æ–‡ä»¶ç±»å‹åˆ¤æ–­</strong></td><td><code>S_ISREG()</code>, <code>S_ISDIR()</code></td><td>æ£€æŸ¥ <code>st_mode</code></td></tr><tr><td><strong>ä¿®æ”¹æƒé™</strong></td><td><code>chmod()</code>, <code>fchmod()</code></td><td>è®¾ç½® <code>rwx</code> æƒé™</td></tr><tr><td><strong>åˆ›å»ºæ–‡ä»¶</strong></td><td><code>open()</code> with <code>O_CREAT</code></td><td>å— <code>umask</code> å½±å“</td></tr><tr><td><strong>ç¡¬é“¾æ¥æ“ä½œ</strong></td><td><code>link()</code>, <code>unlink()</code></td><td>ä¿®æ”¹ <code>st_nlink</code></td></tr><tr><td><strong>ç›®å½•æ“ä½œ</strong></td><td><code>mkdir()</code>, <code>opendir()</code></td><td>åˆ›å»º&#x2F;éå†ç›®å½•</td></tr><tr><td><strong>å·¥ä½œç›®å½•</strong></td><td><code>chdir()</code>, <code>getcwd()</code></td><td>ç±»ä¼¼ <code>cd</code> å’Œ <code>pwd</code></td></tr></tbody></table><hr><h3 id="å…³é”®ç‚¹"><a href="#å…³é”®ç‚¹" class="headerlink" title="å…³é”®ç‚¹"></a><strong>å…³é”®ç‚¹</strong></h3><ol><li><strong><code>st_mode</code> æ˜¯æ ¸å¿ƒå­—æ®µ</strong>ï¼šåŒ…å«æ–‡ä»¶ç±»å‹å’Œæƒé™ã€‚</li><li><strong>æƒé™è®¡ç®—</strong>ï¼š<code>å®é™…æƒé™ = mode &amp; ~umask</code>ã€‚</li><li><strong>ç¡¬é“¾æ¥ vs ç¬¦å·é“¾æ¥</strong>ï¼š<ul><li>ç¡¬é“¾æ¥ï¼šåŒä¸€æ–‡ä»¶ï¼Œå…±äº« inodeã€‚</li><li>ç¬¦å·é“¾æ¥ï¼šç‹¬ç«‹æ–‡ä»¶ï¼Œå­˜å‚¨ç›®æ ‡è·¯å¾„ã€‚</li></ul></li><li><strong>ç›®å½•æ“ä½œ</strong>ï¼šåªæœ‰å†…æ ¸å¯å†™ç›®å½•ï¼Œç”¨æˆ·é€šè¿‡ <code>opendir/readdir</code> è¯»å–ã€‚</li></ol><p><strong>å»ºè®®</strong>ï¼šç»“åˆ <code>ls -l</code> å‘½ä»¤å’Œ <code>stat</code> å‘½ä»¤éªŒè¯æ–‡ä»¶å±æ€§ã€‚</p><h2 id="äºŒã€è¿›ç¨‹æ§åˆ¶"><a href="#äºŒã€è¿›ç¨‹æ§åˆ¶" class="headerlink" title="äºŒã€è¿›ç¨‹æ§åˆ¶"></a><strong>äºŒã€è¿›ç¨‹æ§åˆ¶</strong></h2><h3 id="1-fork-ï¼šåˆ›å»ºå­è¿›ç¨‹"><a href="#1-fork-ï¼šåˆ›å»ºå­è¿›ç¨‹" class="headerlink" title="1. fork()ï¼šåˆ›å»ºå­è¿›ç¨‹"></a><strong>1. <code>fork()</code>ï¼šåˆ›å»ºå­è¿›ç¨‹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">fork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>è¿”å›å€¼</strong>ï¼š<ul><li><code>&gt;0</code>ï¼šçˆ¶è¿›ç¨‹ï¼Œè¿”å›å­è¿›ç¨‹ PIDã€‚</li><li><code>=0</code>ï¼šå­è¿›ç¨‹ã€‚</li><li><code>-1</code>ï¼šå‡ºé”™ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡"><a href="#ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡"></a><strong>ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process (PID=%d)\n&quot;</span>, getpid());<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process (PID=%d), child PID=%d\n&quot;</span>, getpid(), pid);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        perror(<span class="hljs-string">&quot;fork failed&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Parent process (<span class="hljs-attribute">PID</span>=1234), child <span class="hljs-attribute">PID</span>=1235<br>Child process (<span class="hljs-attribute">PID</span>=1235)<br></code></pre></td></tr></table></figure><hr><h3 id="2-exec-ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ"><a href="#2-exec-ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ" class="headerlink" title="2. exec()ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ"></a><strong>2. <code>exec()</code>ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">execl</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *path, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *arg0, ..., (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šç”¨æ–°ç¨‹åºæ›¿æ¢å½“å‰è¿›ç¨‹ï¼ˆå¦‚ <code>ls</code>ã€<code>gcc</code>ï¼‰ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ-ls-l"><a href="#ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ-ls-l" class="headerlink" title="ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ ls -l"></a><strong>ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ <code>ls -l</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ›¿æ¢ä¸º ls -l</span><br>        perror(<span class="hljs-string">&quot;exec failed&quot;</span>);  <span class="hljs-comment">// è‹¥ exec å¤±è´¥æ‰ä¼šæ‰§è¡Œ</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="exec-å‡½æ•°æ—å¯¹æ¯”è¡¨"><a href="#exec-å‡½æ•°æ—å¯¹æ¯”è¡¨" class="headerlink" title="exec å‡½æ•°æ—å¯¹æ¯”è¡¨"></a><strong><code>exec</code> å‡½æ•°æ—å¯¹æ¯”è¡¨</strong></h3><p>ä»¥ä¸‹æ˜¯ UNIX&#x2F;Linux ä¸­ <code>exec</code> ç³»åˆ—å‡½æ•°çš„è¯¦ç»†å¯¹æ¯”ï¼ŒåŒ…æ‹¬å‚æ•°ã€ä½¿ç”¨åœºæ™¯å’ŒåŒºåˆ«ï¼š</p><table><thead><tr><th><strong>å‡½æ•°</strong></th><th><strong>å‚æ•°å½¢å¼</strong></th><th><strong>ç¯å¢ƒå˜é‡</strong></th><th><strong>æŸ¥æ‰¾è·¯å¾„</strong></th><th><strong>å…¸å‹ç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong><code>execl</code></strong></td><td><code>execl(&quot;è·¯å¾„&quot;, &quot;arg0&quot;, &quot;arg1&quot;, ..., (char *)0)</code></td><td>ç»§æ‰¿å½“å‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>å·²çŸ¥å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå‚æ•°åˆ—è¡¨å›ºå®š</td></tr><tr><td><strong><code>execv</code></strong></td><td><code>execv(&quot;è·¯å¾„&quot;, char *argv[])</code> ï¼ˆ<code>argv</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>ç»§æ‰¿å½“å‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>å‚æ•°åˆ—è¡¨åŠ¨æ€ï¼ˆå¦‚æ•°ç»„ï¼‰</td></tr><tr><td><strong><code>execle</code></strong></td><td><code>execle(&quot;è·¯å¾„&quot;, &quot;arg0&quot;, ..., (char *)0, char *envp[])</code></td><td>è‡ªå®šä¹‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>éœ€æŒ‡å®šç¯å¢ƒå˜é‡</td></tr><tr><td><strong><code>execve</code></strong></td><td><code>execve(&quot;è·¯å¾„&quot;, char *argv[], char *envp[])</code> ï¼ˆ<code>argv</code> å’Œ <code>envp</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>è‡ªå®šä¹‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>ç³»ç»Ÿè°ƒç”¨ï¼Œæœ€åº•å±‚å®ç°</td></tr><tr><td><strong><code>execlp</code></strong></td><td><code>execlp(&quot;æ–‡ä»¶å&quot;, &quot;arg0&quot;, ..., (char *)0)</code></td><td>ç»§æ‰¿å½“å‰</td><td>ä» <code>PATH</code> æŸ¥æ‰¾</td><td>ç›´æ¥ä½¿ç”¨æ–‡ä»¶åï¼ˆå¦‚ <code>ls</code>ï¼‰</td></tr><tr><td><strong><code>execvp</code></strong></td><td><code>execvp(&quot;æ–‡ä»¶å&quot;, char *argv[])</code> ï¼ˆ<code>argv</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>ç»§æ‰¿å½“å‰</td><td>ä» <code>PATH</code> æŸ¥æ‰¾</td><td>åŠ¨æ€å‚æ•° + <code>PATH</code> æŸ¥æ‰¾</td></tr></tbody></table><hr><h3 id="å…³é”®åŒºåˆ«"><a href="#å…³é”®åŒºåˆ«" class="headerlink" title="å…³é”®åŒºåˆ«"></a><strong>å…³é”®åŒºåˆ«</strong></h3><ol><li><p><strong>å‚æ•°ä¼ é€’æ–¹å¼</strong>ï¼š</p><ul><li><strong><code>l</code> åç¼€</strong>ï¼ˆå¦‚ <code>execl</code>ï¼‰ï¼šå‚æ•°ä»¥<strong>å¯å˜å‚æ•°åˆ—è¡¨</strong>ï¼ˆ<code>arg0, arg1, ..., NULL</code>ï¼‰ä¼ é€’ã€‚</li><li><strong><code>v</code> åç¼€</strong>ï¼ˆå¦‚ <code>execv</code>ï¼‰ï¼šå‚æ•°ä»¥<strong>æŒ‡é’ˆæ•°ç»„</strong>ï¼ˆ<code>argv[]</code>ï¼‰ä¼ é€’ï¼Œæ•°ç»„å¿…é¡»ä»¥ <code>NULL</code> ç»“å°¾ã€‚</li></ul></li><li><p><strong>ç¯å¢ƒå˜é‡</strong>ï¼š</p><ul><li><strong><code>e</code> åç¼€</strong>ï¼ˆå¦‚ <code>execle</code>ï¼‰ï¼šå¯<strong>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</strong>ï¼ˆé€šè¿‡ <code>envp[]</code> æ•°ç»„ï¼‰ã€‚</li><li>æ—  <code>e</code> åç¼€ï¼šç»§æ‰¿å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ã€‚</li></ul></li><li><p><strong>è·¯å¾„æŸ¥æ‰¾</strong>ï¼š</p><ul><li><strong><code>p</code> åç¼€</strong>ï¼ˆå¦‚ <code>execlp</code>ï¼‰ï¼šè‡ªåŠ¨ä» <code>PATH</code> ç¯å¢ƒå˜é‡æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>æ—  <code>p</code> åç¼€ï¼šå¿…é¡»æä¾›å®Œæ•´è·¯å¾„ï¼ˆå¦‚ <code>/bin/ls</code>ï¼‰ã€‚</li></ul></li><li><p><strong>åº•å±‚å®ç°</strong>ï¼š</p><ul><li><strong><code>execve</code></strong> æ˜¯å”¯ä¸€çš„<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼Œå…¶ä»–å‡½æ•°å‡ä¸ºåº“å‡½æ•°ï¼ˆæœ€ç»ˆè°ƒç”¨ <code>execve</code>ï¼‰ã€‚</li></ul></li></ol><hr><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a><strong>ç¤ºä¾‹ä»£ç </strong></h3><h4 id="1-execlï¼ˆå›ºå®šå‚æ•°-å®Œæ•´è·¯å¾„ï¼‰"><a href="#1-execlï¼ˆå›ºå®šå‚æ•°-å®Œæ•´è·¯å¾„ï¼‰" class="headerlink" title="1. execlï¼ˆå›ºå®šå‚æ•° + å®Œæ•´è·¯å¾„ï¼‰"></a>1. <strong><code>execl</code>ï¼ˆå›ºå®šå‚æ•° + å®Œæ•´è·¯å¾„ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ‰§è¡Œ `ls -l`</span><br></code></pre></td></tr></table></figure><h4 id="2-execvï¼ˆåŠ¨æ€å‚æ•°-å®Œæ•´è·¯å¾„ï¼‰"><a href="#2-execvï¼ˆåŠ¨æ€å‚æ•°-å®Œæ•´è·¯å¾„ï¼‰" class="headerlink" title="2. execvï¼ˆåŠ¨æ€å‚æ•° + å®Œæ•´è·¯å¾„ï¼‰"></a>2. <strong><code>execv</code>ï¼ˆåŠ¨æ€å‚æ•° + å®Œæ•´è·¯å¾„ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execv(<span class="hljs-string">&quot;/bin/ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><h4 id="3-execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰"><a href="#3-execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰" class="headerlink" title="3. execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰"></a>3. <strong><code>execle</code>ï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *env[] = &#123;<span class="hljs-string">&quot;PATH=/usr/bin&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execle(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>, env);<br></code></pre></td></tr></table></figure><h4 id="4-execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾-PATHï¼‰"><a href="#4-execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾-PATHï¼‰" class="headerlink" title="4. execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ PATHï¼‰"></a>4. <strong><code>execlp</code>ï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ <code>PATH</code>ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execlp(<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ— éœ€å†™ `/bin/ls`</span><br></code></pre></td></tr></table></figure><h4 id="5-execvpï¼ˆåŠ¨æ€å‚æ•°-è‡ªåŠ¨æŸ¥æ‰¾ï¼‰"><a href="#5-execvpï¼ˆåŠ¨æ€å‚æ•°-è‡ªåŠ¨æŸ¥æ‰¾ï¼‰" class="headerlink" title="5. execvpï¼ˆåŠ¨æ€å‚æ•° + è‡ªåŠ¨æŸ¥æ‰¾ï¼‰"></a>5. <strong><code>execvp</code>ï¼ˆåŠ¨æ€å‚æ•° + è‡ªåŠ¨æŸ¥æ‰¾ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execvp(<span class="hljs-string">&quot;ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>éœ€è¦å®Œæ•´è·¯å¾„</strong> â†’ ç”¨ <code>execl</code>ã€<code>execv</code>ã€<code>execle</code>ã€<code>execve</code>ã€‚</li><li><strong>éœ€è¦ <code>PATH</code> æŸ¥æ‰¾</strong> â†’ ç”¨ <code>execlp</code>ã€<code>execvp</code>ã€‚</li><li><strong>åŠ¨æ€å‚æ•°</strong> â†’ ç”¨ <code>execv</code>ã€<code>execvp</code>ã€<code>execve</code>ã€‚</li><li><strong>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</strong> â†’ ç”¨ <code>execle</code>ã€<code>execve</code>ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šæ‰€æœ‰ <code>exec</code> å‡½æ•°æˆåŠŸæ—¶<strong>ä¸è¿”å›</strong>ï¼Œå¤±è´¥æ—¶è¿”å› <code>-1</code> å¹¶è®¾ç½® <code>errno</code>ã€‚</p><hr><h3 id="3-wait-ï¼šå›æ”¶å­è¿›ç¨‹"><a href="#3-wait-ï¼šå›æ”¶å­è¿›ç¨‹" class="headerlink" title="3. wait()ï¼šå›æ”¶å­è¿›ç¨‹"></a><strong>3. <code>wait()</code>ï¼šå›æ”¶å­è¿›ç¨‹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">wait</span><span class="hljs-params">(<span class="hljs-type">int</span> *status)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œé¿å…åƒµå°¸è¿›ç¨‹ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹"><a href="#ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹"></a><strong>ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process\n&quot;</span>);<br>        sleep(<span class="hljs-number">2</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process: child finished\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰"><a href="#ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰" class="headerlink" title="ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰"></a><strong>ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</strong></h2><h3 id="1-ç®¡é“ï¼ˆpipeï¼‰"><a href="#1-ç®¡é“ï¼ˆpipeï¼‰" class="headerlink" title="1. ç®¡é“ï¼ˆpipeï¼‰"></a><strong>1. ç®¡é“ï¼ˆ<code>pipe</code>ï¼‰</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">pipe</span><span class="hljs-params">(<span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>])</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>fd[0]</code>**ï¼šè¯»ç«¯ã€‚</li><li>**<code>fd[1]</code>**ï¼šå†™ç«¯ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡"><a href="#ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡"></a><strong>ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br>    pipe(fd);  <span class="hljs-comment">// åˆ›å»ºç®¡é“</span><br><br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// å­è¿›ç¨‹å…³é—­è¯»ç«¯</span><br>        write(fd[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;Hello, parent!&quot;</span>, <span class="hljs-number">14</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">1</span>]);  <span class="hljs-comment">// çˆ¶è¿›ç¨‹å…³é—­å†™ç«¯</span><br>        <span class="hljs-type">char</span> buf[<span class="hljs-number">20</span>];<br>        read(fd[<span class="hljs-number">0</span>], buf, <span class="hljs-keyword">sizeof</span>(buf));<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent received: %s\n&quot;</span>, buf);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">Parent received: Hello, parent!<br></code></pre></td></tr></table></figure><ul><li><strong>å†ç»™ä¸€ä¸ªä¾‹å­ï¼Œå¥½å¥½ç†è§£</strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    pipe(fd);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d  %d\n&quot;</span>, fd[<span class="hljs-number">0</span>], fd[<span class="hljs-number">1</span>]);<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">1</span>]);<br>        dup2(fd[<span class="hljs-number">0</span>], <span class="hljs-number">0</span>);<br>        execlp(<span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello world!\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">0</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;before dup2\n&quot;</span>);<br>        dup2(fd[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;after dup2\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;lalalala this line shouldn&#x27;t be print\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">3</span>  <span class="hljs-number">4</span><br><span class="hljs-attribute">before</span> dup2<br><span class="hljs-attribute">2</span><br></code></pre></td></tr></table></figure><hr><h2 id="å››ã€ä¿¡å·ï¼ˆSignalï¼‰"><a href="#å››ã€ä¿¡å·ï¼ˆSignalï¼‰" class="headerlink" title="å››ã€ä¿¡å·ï¼ˆSignalï¼‰"></a><strong>å››ã€ä¿¡å·ï¼ˆSignalï¼‰</strong></h2><h3 id="1-signal-ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°"><a href="#1-signal-ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°" class="headerlink" title="1. signal()ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°"></a><strong>1. <code>signal()</code>ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-type">void</span> (*signal(<span class="hljs-type">int</span> sig, <span class="hljs-type">void</span> (*handler)(<span class="hljs-type">int</span>)))(<span class="hljs-type">int</span>);<br></code></pre></td></tr></table></figure><ul><li><strong>å¸¸è§ä¿¡å·</strong>ï¼š<ul><li><code>SIGINT</code>ï¼ˆ<code>Ctrl+C</code>ï¼‰ã€‚</li><li><code>SIGKILL</code>ï¼ˆå¼ºåˆ¶ç»ˆæ­¢ï¼‰ã€‚</li><li><code>SIGALRM</code>ï¼ˆå®šæ—¶å™¨ï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šæ•è·-Ctrl-C"><a href="#ç¤ºä¾‹ï¼šæ•è·-Ctrl-C" class="headerlink" title="ç¤ºä¾‹ï¼šæ•è· Ctrl+C"></a><strong>ç¤ºä¾‹ï¼šæ•è· <code>Ctrl+C</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">handler</span><span class="hljs-params">(<span class="hljs-type">int</span> sig)</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nReceived SIGINT (Ctrl+C)\n&quot;</span>);<br>    _exit(<span class="hljs-number">1</span>);  <span class="hljs-comment">// é€€å‡ºç¨‹åº</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    signal(SIGINT, handler);  <span class="hljs-comment">// æ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Running...\n&quot;</span>);<br>        sleep(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¿è¡Œ</strong>ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br>^C<br>Received SIGINT (Ctrl+C)<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><table><thead><tr><th><strong>ä¸»é¢˜</strong></th><th><strong>å…³é”®å‡½æ•°</strong></th><th><strong>ç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>æ–‡ä»¶I&#x2F;O</strong></td><td><code>open</code>, <code>read</code>, <code>write</code>, <code>lseek</code>, <code>dup2</code></td><td>æ–‡ä»¶æ“ä½œã€é‡å®šå‘</td></tr><tr><td><strong>è¿›ç¨‹æ§åˆ¶</strong></td><td><code>fork</code>, <code>exec</code>, <code>wait</code></td><td>åˆ›å»ºè¿›ç¨‹ã€æ‰§è¡Œç¨‹åº</td></tr><tr><td><strong>IPC</strong></td><td><code>pipe</code>, <code>mkfifo</code></td><td>è¿›ç¨‹é—´é€šä¿¡</td></tr><tr><td><strong>ä¿¡å·</strong></td><td><code>signal</code>, <code>kill</code>, <code>alarm</code></td><td>å¼‚æ­¥äº‹ä»¶å¤„ç†</td></tr></tbody></table><p><strong>å»ºè®®</strong>ï¼š</p><ul><li>ç»“åˆä»£ç ç¤ºä¾‹åŠ¨æ‰‹å®éªŒï¼ŒåŠ æ·±ç†è§£ã€‚</li><li>ä½¿ç”¨ <code>strace</code> è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè¿‡ç¨‹ï¼ˆå¦‚ <code>strace ./a.out</code>ï¼‰ã€‚</li></ul></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/Linux/" class="category-chain-item">Linux</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Linux/" class="print-no-link">#Linux</a> <a href="/tags/UNIX/" class="print-no-link">#UNIX</a> <a href="/tags/%E5%A4%8D%E4%B9%A0/" class="print-no-link">#å¤ä¹ </a></div></div><div class="license-box my-3"><div class="license-title"><div>UNIXç³»ç»Ÿå¤ä¹ -4</div><div>http://pzhwuhu.github.io/2025/05/31/UNIX_Review_4/</div></div><div class="license-meta"><div class="license-meta-item"><div>æœ¬æ–‡ä½œè€…</div><div>pzhwuhu</div></div><div class="license-meta-item license-meta-date"><div>å‘å¸ƒäº</div><div>2025å¹´5æœˆ31æ—¥</div></div><div class="license-meta-item license-meta-date"><div>æ›´æ–°äº</div><div>2025å¹´5æœˆ31æ—¥</div></div><div class="license-meta-item"><div>è®¸å¯åè®®</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - ç½²å"><i class="iconfont icon-cc-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨"><i class="iconfont icon-cc-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«"><i class="iconfont icon-cc-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2025/06/15/BUAA-OO-Unit4/" title="BUAA-OO-Unit4"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">BUAA-OO-Unit4</span> <span class="visible-mobile">ä¸Šä¸€ç¯‡</span></a></article><article class="post-next col-6"><a href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/" title="UNIXç³»ç»Ÿå¤ä¹ -4"><span class="hidden-mobile">UNIXç³»ç»Ÿå¤ä¹ -4</span> <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div id="valine"></div><script>Fluid.utils.loadComments("#valine",(function(){Fluid.utils.createScript("https://lib.baomitu.com/valine/1.5.1/Valine.min.js",(function(){var i=Object.assign({appId:"cp3oK6SJdvk7QCx0TiMpNSdI-gzGzoHsz",appKey:"B9u5rSWtXwzrQl56fuCE0o9M",path:"window.location.pathname",placeholder:"ç•™ä¸‹ä½ çš„è¶³è¿¹å§ï¼Œè¶…å¤šemojiå¯ç”¨å™¢ï¼Œqqé‚®ç®±è‡ªåŠ¨è·å–å¤´åƒ",avatar:"robohash",meta:["nick","mail","link"],requiredFields:["nick"],pageSize:10,lang:"zh-CN",highlight:!0,recordIP:!0,serverURLs:"",emojiCDN:"https://valine-emoji.bili33.top/",emojiMaps:{bilibilitv2:"bilibilitv/[tv_doge].png",bilibilitv3:"bilibilitv/[tv_äº²äº²].png",bilibilitv4:"bilibilitv/[tv_å·ç¬‘].png",bilibilitv5:"bilibilitv/[tv_å†è§].png",bilibilitv6:"bilibilitv/[tv_å†·æ¼ ].png",bilibilitv7:"bilibilitv/[tv_å‘æ€’].png",bilibilitv8:"bilibilitv/[tv_å‘è´¢].png",bilibilitv9:"bilibilitv/[tv_å¯çˆ±].png",bilibilitv10:"bilibilitv/[tv_åè¡€].png",bilibilitv11:"bilibilitv/[tv_å‘†].png",bilibilitv12:"bilibilitv/[tv_å‘•å].png",bilibilitv13:"bilibilitv/[tv_å›°].png",bilibilitv14:"bilibilitv/[tv_åç¬‘].png",bilibilitv15:"bilibilitv/[tv_å¤§ä½¬].png",bilibilitv16:"bilibilitv/[tv_å¤§å“­].png",bilibilitv17:"bilibilitv/[tv_å§”å±ˆ].png",bilibilitv18:"bilibilitv/[tv_å®³ç¾].png",bilibilitv19:"bilibilitv/[tv_å°´å°¬].png",bilibilitv20:"bilibilitv/[tv_å¾®ç¬‘].png",bilibilitv21:"bilibilitv/[tv_æ€è€ƒ].png",bilibilitv22:"bilibilitv/[tv_æƒŠå“].png",bilibilitv23:"bilibilitv/[tv_æ‰“è„¸].png",bilibilitv24:"bilibilitv/[tv_æŠ“ç‹‚].png",bilibilitv25:"bilibilitv/[tv_æŠ é¼»].png",bilibilitv26:"bilibilitv/[tv_æ–œçœ¼ç¬‘].png",bilibilitv27:"bilibilitv/[tv_æ— å¥ˆ].png",bilibilitv28:"bilibilitv/[tv_æ™•].png",bilibilitv29:"bilibilitv/[tv_æµæ±—].png",bilibilitv30:"bilibilitv/[tv_æµæ³ª].png",bilibilitv31:"bilibilitv/[tv_æµé¼»è¡€].png",bilibilitv32:"bilibilitv/[tv_ç‚¹èµ].png",bilibilitv33:"bilibilitv/[tv_ç”Ÿæ°”].png",bilibilitv34:"bilibilitv/[tv_ç”Ÿç—…].png",bilibilitv35:"bilibilitv/[tv_ç–‘é—®].png",bilibilitv36:"bilibilitv/[tv_ç™½çœ¼].png",bilibilitv37:"bilibilitv/[tv_çš±çœ‰].png",bilibilitv38:"bilibilitv/[tv_ç›®çªå£å‘†].png",bilibilitv39:"bilibilitv/[tv_ç¡ç€].png",bilibilitv40:"bilibilitv/[tv_ç¬‘å“­].png",bilibilitv41:"bilibilitv/[tv_è…¼è…†].png",bilibilitv42:"bilibilitv/[tv_è‰²].png",bilibilitv43:"bilibilitv/[tv_è°ƒä¾ƒ].png",bilibilitv44:"bilibilitv/[tv_è°ƒçš®].png",bilibilitv45:"bilibilitv/[tv_é„™è§†].png",bilibilitv46:"bilibilitv/[tv_é—­å˜´].png",bilibilitv47:"bilibilitv/[tv_éš¾è¿‡].png",bilibilitv48:"bilibilitv/[tv_é¦‹].png",bilibilitv49:"bilibilitv/[tv_é¬¼è„¸].png",bilibilitv50:"bilibilitv/[tv_é»‘äººé—®å·].png",bilibilitv51:"bilibilitv/[tv_é¼“æŒ].png",bilibili22332:"bilibili2233/[2233å¨˜_å–èŒ].png",bilibili22333:"bilibili2233/[2233å¨˜_åƒæƒŠ].png",bilibili22334:"bilibili2233/[2233å¨˜_åé­‚].png",bilibili22335:"bilibili2233/[2233å¨˜_å–æ°´].png",bilibili22336:"bilibili2233/[2233å¨˜_å›°æƒ‘].png",bilibili22337:"bilibili2233/[2233å¨˜_å¤§å“­].png",bilibili22338:"bilibili2233/[2233å¨˜_å¤§ç¬‘].png",bilibili22339:"bilibili2233/[2233å¨˜_å§”å±ˆ].png",bilibili223310:"bilibili2233/[2233å¨˜_æ€’].png",bilibili223311:"bilibili2233/[2233å¨˜_æ— è¨€].png",bilibili223312:"bilibili2233/[2233å¨˜_æ±—].png",bilibili223313:"bilibili2233/[2233å¨˜_ç–‘é—®].png",bilibili223314:"bilibili2233/[2233å¨˜_ç¬¬ä¸€].png",bilibili223315:"bilibili2233/[2233å¨˜_è€¶].png",bilibili223316:"bilibili2233/[2233å¨˜_éƒé—·].png","Tieba-New2":"Tieba-New/image_emoticon.png","Tieba-New3":"Tieba-New/image_emoticon10.png","Tieba-New4":"Tieba-New/image_emoticon100.png","Tieba-New14":"Tieba-New/image_emoticon11.png","Tieba-New31":"Tieba-New/image_emoticon13.png","Tieba-New32":"Tieba-New/image_emoticon14.png","Tieba-New33":"Tieba-New/image_emoticon15.png","Tieba-New34":"Tieba-New/image_emoticon16.png","Tieba-New35":"Tieba-New/image_emoticon17.png","Tieba-New36":"Tieba-New/image_emoticon18.png","Tieba-New37":"Tieba-New/image_emoticon19.png","Tieba-New38":"Tieba-New/image_emoticon2.png","Tieba-New39":"Tieba-New/image_emoticon20.png","Tieba-New40":"Tieba-New/image_emoticon21.png","Tieba-New41":"Tieba-New/image_emoticon22.png","Tieba-New42":"Tieba-New/image_emoticon23.png","Tieba-New43":"Tieba-New/image_emoticon24.png","Tieba-New44":"Tieba-New/image_emoticon25.png","Tieba-New45":"Tieba-New/image_emoticon26.png","Tieba-New46":"Tieba-New/image_emoticon27.png","Tieba-New47":"Tieba-New/image_emoticon28.png","Tieba-New48":"Tieba-New/image_emoticon29.png","Tieba-New49":"Tieba-New/image_emoticon3.png","Tieba-New50":"Tieba-New/image_emoticon30.png","Tieba-New51":"Tieba-New/image_emoticon31.png","Tieba-New52":"Tieba-New/image_emoticon32.png","Tieba-New53":"Tieba-New/image_emoticon33.png","Tieba-New54":"Tieba-New/image_emoticon34.png","Tieba-New55":"Tieba-New/image_emoticon35.png","Tieba-New56":"Tieba-New/image_emoticon36.png","Tieba-New57":"Tieba-New/image_emoticon37.png","Tieba-New58":"Tieba-New/image_emoticon38.png","Tieba-New59":"Tieba-New/image_emoticon39.png","Tieba-New60":"Tieba-New/image_emoticon4.png","Tieba-New61":"Tieba-New/image_emoticon40.png","Tieba-New62":"Tieba-New/image_emoticon41.png","Tieba-New63":"Tieba-New/image_emoticon42.png","Tieba-New64":"Tieba-New/image_emoticon43.png","Tieba-New65":"Tieba-New/image_emoticon44.png","Tieba-New66":"Tieba-New/image_emoticon45.png","Tieba-New67":"Tieba-New/image_emoticon46.png","Tieba-New68":"Tieba-New/image_emoticon47.png","Tieba-New69":"Tieba-New/image_emoticon48.png","Tieba-New70":"Tieba-New/image_emoticon49.png","Tieba-New71":"Tieba-New/image_emoticon5.png","Tieba-New72":"Tieba-New/image_emoticon50.png","Tieba-New73":"Tieba-New/image_emoticon6.png","Tieba-New74":"Tieba-New/image_emoticon66.png","Tieba-New75":"Tieba-New/image_emoticon67.png","Tieba-New76":"Tieba-New/image_emoticon68.png","Tieba-New77":"Tieba-New/image_emoticon69.png","Tieba-New78":"Tieba-New/image_emoticon7.png","Tieba-New79":"Tieba-New/image_emoticon70.png","Tieba-New80":"Tieba-New/image_emoticon71.png","Tieba-New81":"Tieba-New/image_emoticon72.png","Tieba-New82":"Tieba-New/image_emoticon73.png","Tieba-New83":"Tieba-New/image_emoticon74.png","Tieba-New84":"Tieba-New/image_emoticon75.png","Tieba-New85":"Tieba-New/image_emoticon76.png","Tieba-New86":"Tieba-New/image_emoticon77.png","Tieba-New87":"Tieba-New/image_emoticon78.png","Tieba-New88":"Tieba-New/image_emoticon79.png","Tieba-New89":"Tieba-New/image_emoticon8.png","Tieba-New90":"Tieba-New/image_emoticon80.png","Tieba-New91":"Tieba-New/image_emoticon81.png","Tieba-New92":"Tieba-New/image_emoticon82.png","Tieba-New93":"Tieba-New/image_emoticon83.png","Tieba-New94":"Tieba-New/image_emoticon84.png","Tieba-New95":"Tieba-New/image_emoticon85.png","Tieba-New96":"Tieba-New/image_emoticon86.png","Tieba-New97":"Tieba-New/image_emoticon87.png","Tieba-New98":"Tieba-New/image_emoticon88.png","Tieba-New99":"Tieba-New/image_emoticon89.png","Tieba-New100":"Tieba-New/image_emoticon9.png","Tieba-New101":"Tieba-New/image_emoticon90.png","Tieba-New102":"Tieba-New/image_emoticon91.png","Tieba-New103":"Tieba-New/image_emoticon92.png","Tieba-New104":"Tieba-New/image_emoticon93.png","Tieba-New105":"Tieba-New/image_emoticon94.png","Tieba-New106":"Tieba-New/image_emoticon95.png","Tieba-New107":"Tieba-New/image_emoticon96.png","Tieba-New108":"Tieba-New/image_emoticon97.png","Tieba-New109":"Tieba-New/image_emoticon98.png","Tieba-New110":"Tieba-New/image_emoticon99.png",weibo2:"weibo/d_aoteman.png",weibo15:"weibo/d_doge.png",weibo16:"weibo/d_erha.png",weibo40:"weibo/d_miao.png",weibo49:"weibo/d_shenshou.png",weibo65:"weibo/d_xiongmao.png",weibo74:"weibo/d_zhutou.png",weibo75:"weibo/d_zuiyou.png",weibo76:"weibo/emoji_0x1f31f.png",weibo77:"weibo/emoji_0x1f349.png",weibo78:"weibo/emoji_0x1f357.png",weibo79:"weibo/emoji_0x1f384.png",weibo80:"weibo/emoji_0x1f44f.png",weibo81:"weibo/emoji_0x1f47b.png",weibo82:"weibo/emoji_0x1f47f.png",weibo83:"weibo/emoji_0x1f48a.png",weibo84:"weibo/emoji_0x1f4a3.png",weibo85:"weibo/emoji_0x1f4a9.png",weibo86:"weibo/emoji_0x1f631.png",weibo87:"weibo/emoji_0x1f643.png",weibo88:"weibo/emoji_0x1f645.png",weibo89:"weibo/emoji_0x1f648.png",weibo90:"weibo/emoji_0x1f649.png",weibo91:"weibo/emoji_0x1f64a.png",weibo92:"weibo/emoji_0x1f64b.png",weibo93:"weibo/emoji_0x1f64f.png",weibo94:"weibo/emoji_0x1f913.png",weibo95:"weibo/emoji_0x1f917.png",weibo96:"weibo/emoji_0x26a1.png",weibo97:"weibo/h_buyao.png",weibo98:"weibo/h_good.png",weibo99:"weibo/h_haha.png",weibo100:"weibo/h_jiayou.png",weibo101:"weibo/h_lai.png",weibo102:"weibo/h_ok.png",weibo103:"weibo/h_quantou.png",weibo105:"weibo/h_woshou.png",weibo106:"weibo/h_ye.png",weibo107:"weibo/h_zan.png",weibo108:"weibo/h_zuoyi.png","HONKAI3-Star1":"HONKAI3-Star/1.gif","HONKAI3-Star2":"HONKAI3-Star/10.gif","HONKAI3-Star3":"HONKAI3-Star/11.gif","HONKAI3-Star4":"HONKAI3-Star/12.gif","HONKAI3-Star5":"HONKAI3-Star/13.gif","HONKAI3-Star6":"HONKAI3-Star/14.gif","HONKAI3-Star7":"HONKAI3-Star/15.gif","HONKAI3-Star8":"HONKAI3-Star/16.gif","HONKAI3-Star9":"HONKAI3-Star/2.gif","HONKAI3-Star10":"HONKAI3-Star/3.gif","HONKAI3-Star11":"HONKAI3-Star/4.gif","HONKAI3-Star12":"HONKAI3-Star/5.gif","HONKAI3-Star13":"HONKAI3-Star/6.gif","HONKAI3-Star14":"HONKAI3-Star/7.gif","HONKAI3-Star15":"HONKAI3-Star/8.gif","HONKAI3-Star16":"HONKAI3-Star/9.gif","HONKAI3-Daily1":"HONKAI3-Daily/1.gif","HONKAI3-Daily2":"HONKAI3-Daily/10.gif","HONKAI3-Daily3":"HONKAI3-Daily/11.gif","HONKAI3-Daily4":"HONKAI3-Daily/12.gif","HONKAI3-Daily5":"HONKAI3-Daily/13.gif","HONKAI3-Daily6":"HONKAI3-Daily/14.gif","HONKAI3-Daily7":"HONKAI3-Daily/15.gif","HONKAI3-Daily8":"HONKAI3-Daily/16.gif","HONKAI3-Daily9":"HONKAI3-Daily/2.gif","HONKAI3-Daily10":"HONKAI3-Daily/3.gif","HONKAI3-Daily11":"HONKAI3-Daily/4.gif","HONKAI3-Daily12":"HONKAI3-Daily/5.gif","HONKAI3-Daily13":"HONKAI3-Daily/6.gif","HONKAI3-Daily14":"HONKAI3-Daily/7.gif","HONKAI3-Daily15":"HONKAI3-Daily/8.gif","HONKAI3-Daily16":"HONKAI3-Daily/9.gif","Tsuri-me-ju_mimi1":"Tsuri-me-ju_mimi/10753776_key@2x.png","Tsuri-me-ju_mimi2":"Tsuri-me-ju_mimi/10753777_key@2x.png","Tsuri-me-ju_mimi3":"Tsuri-me-ju_mimi/10753778_key@2x.png","Tsuri-me-ju_mimi12":"Tsuri-me-ju_mimi/10753787_key@2x.png","Tsuri-me-ju_mimi13":"Tsuri-me-ju_mimi/10753788_key@2x.png","Tsuri-me-ju_mimi14":"Tsuri-me-ju_mimi/10753789_key@2x.png","Tsuri-me-ju_mimi15":"Tsuri-me-ju_mimi/10753790_key@2x.png","Tsuri-me-ju_mimi16":"Tsuri-me-ju_mimi/10753791_key@2x.png","Tsuri-me-ju_mimi36":"Tsuri-me-ju_mimi/10753811_key@2x.png","Tsuri-me-ju_mimi37":"Tsuri-me-ju_mimi/10753812_key@2x.png","Tsuri-me-ju_mimi38":"Tsuri-me-ju_mimi/10753813_key@2x.png","Tsuri-me-ju_mimi40":"Tsuri-me-ju_mimi/10753815_key@2x.png"},enableQQ:!0,avatar_cdn:"https://cravatar.cn/avatar/",visitor:!0},{el:"#valine",path:window.location.pathname});new Valine(i),Fluid.utils.waitElementVisible("#valine .vemoji",(()=>{const i=document.createElement("style");i.innerHTML="\n            #valine .vemoji {\n              width: 40px !important;  /* æ ¹æ®éœ€è¦è°ƒæ•´å®½åº¦ */\n              height: 40px !important; /* æ ¹æ®éœ€è¦è°ƒæ•´é«˜åº¦ */\n            }\n          ",document.head.appendChild(i)})),Fluid.utils.waitElementVisible("#valine .vcontent",(()=>{var i="#valine .vcontent img:not(.vemoji)";Fluid.plugins.imageCaption(i),Fluid.plugins.fancyBox(i)}))}))}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>ç›®å½•</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a><div style="font-size:.85rem"><span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span><script src="/js/duration.js"></script></div></div><div class="statistics"><span id="leancloud-site-pv-container" style="display:none">æ€»è®¿é—®é‡ <span id="leancloud-site-pv"></span> æ¬¡ </span><span id="leancloud-site-uv-container" style="display:none">æ€»è®¿å®¢æ•° <span id="leancloud-site-uv"></span> äºº</span></div><span>64k</span></div></footer><script src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script>window.MathJax?(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise()):window.MathJax={tex:{inlineMath:{"[+]":[["$","$"]]}},loader:{load:["ui/lazy"]},options:{renderActions:{insertedScript:[200,()=>{document.querySelectorAll("mjx-container").forEach((t=>{let e=t.parentNode;"li"===e.nodeName.toLowerCase()&&e.parentNode.classList.add("has-jax")}))},"",!1]}}},Fluid.events.registerRefreshCallback((function(){"MathJax"in window&&MathJax.startup.document&&"function"==typeof MathJax.startup.document.state&&(MathJax.startup.document.state(0),MathJax.texReset(),MathJax.typeset(),MathJax.typesetPromise())}))</script><script src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js"></script><script defer src="/js/leancloud.js"></script><script src="/js/local-search.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/DynamicRibbon.min.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/star.min.js"></script><script src="//cdn.jsdelivr.net/gh/EmoryHuang/BlogBeautify@1.1/love.min.js"></script><script src="//cdn.jsdelivr.net/npm/highlight.js@11.5.1/styles/monokai.min.css.js"></script><script src="/js/scrollAnimation.js"></script><script src="/js/loading.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div></noscript><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>