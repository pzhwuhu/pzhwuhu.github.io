<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Diifusion-Conditional</title>
    <link href="/2025/11/15/Diifusion-Conditional/"/>
    <url>/2025/11/15/Diifusion-Conditional/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ huggingfaceä¸Šçš„diffusion courseæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Unconditional models donâ€™t give much control over what is generated. We can train a conditional model that takes additional inputs to help steer the generation process, but what if we already have a trained unconditional model weâ€™dÂ like to use? <strong>Enter guidance, a process by which the model predictions at each step in the generation process are evaluated against some guidance function and modified such that the final generated image is more to our liking</strong></p><p>There are a number of ways to pass in this conditioning information, such as</p><ul><li><strong>Feeding it in as additional channels in the input to the UNet.</strong> This is often used when the conditioning information is the same shape as the image, such as a segmentation mask, a depth map or a blurry version of the image (in the case of a restoration&#x2F;superresolution model). It does work for other types of conditioning too. For example, in the notebook, <strong>the class label is mapped to an embedding</strong> and then expanded to be the same width and height as the input image so that it can be fed in as additional channels.</li><li><strong>Creating an embedding and then projecting it down to aÂ size</strong>Â that matches the number of channels at the output of one or more internal layers of the UNet, and then adding it to those outputs. This is how the timestep conditioning is handled, for example. <strong>The output of each Resnet block has a projected timestep embedding added to it.</strong> This is useful when you have a vector such as a CLIP image embedding as your conditioning information. A notable example is theÂ <a href="https://huggingface.co/spaces/lambdalabs/stable-diffusion-image-variations">â€˜Image Variationsâ€™ version of Stable Diffusion</a>Â which does exactly this.</li><li><strong>Adding cross-attention layers that can â€˜attendâ€™ to a sequence passed in as conditioning.</strong> This is most useful when the conditioning is in the form of some text - <strong>the text is mapped to a sequence of embeddings using a transformer model</strong>, and then cross-attention layers in the UNet are used to incorporate this information into the denoising path. Weâ€™ll see this in action in Unit 3 as we examine how Stable Diffusion handles text conditioning.</li></ul><p>ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„ Conditional Generation</p><h1 id="Guidance"><a href="#Guidance" class="headerlink" title="Guidance"></a>Guidance</h1><p>For example, say we wanted to bias the generated images to be <strong>a specific color</strong>. How would we go about that? Enter <strong>guidance</strong>, a technique for <strong>adding additional control</strong> to the sampling process.</p><p>Step one is to create our c<strong>onditioning function</strong>: some measure (loss) which weâ€™d like to minimize. Hereâ€™s one for the color example, which compares the pixels of an image to a target color (by default a sort of light teal) and returns the average error:</p><h2 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">color_loss</span>(<span class="hljs-params">images, target_color=(<span class="hljs-params"><span class="hljs-number">0.1</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.5</span></span>)</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;Given a target color (R, G, B) return a loss for how far away on average</span><br><span class="hljs-string">    the images&#x27; pixels are from that color. Defaults to a light teal: (0.1, 0.9, 0.5)&quot;&quot;&quot;</span><br>    target = (<br>        torch.tensor(target_color).to(images.device) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span><br>    )  <span class="hljs-comment"># Map target color to (-1, 1)</span><br>    target = target[<br>        <span class="hljs-literal">None</span>, :, <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span><br>    ]  <span class="hljs-comment"># Get shape right to work with the images (b, c, h, w)</span><br>    error = torch.<span class="hljs-built_in">abs</span>(<br>        images - target<br>    ).mean()  <span class="hljs-comment"># Mean absolute difference between the image pixels and the target color</span><br>    <span class="hljs-keyword">return</span> error<br></code></pre></td></tr></table></figure><p>Next, weâ€™ll make <strong>a modified version of the sampling loop</strong> where, at each step, we do the following:</p><ul><li>Create a new version of x that has <code>requires_grad = True</code></li><li>Calculate the denoised version (x0)</li><li>Feed the predicted x0 through our loss function</li><li>Find the <strong>gradient</strong> of this loss function <strong>with respect to x</strong></li><li>Use this <strong>conditioning gradient to modify x</strong> before we step with the scheduler, hopefully pushing x in a direction that will lead to lower loss according to our guidance function</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Variant 2: setting x.requires_grad before calculating the model predictions</span><br>guidance_loss_scale = <span class="hljs-number">40</span><br>x = torch.randn(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>).to(device)<br><br><span class="hljs-keyword">for</span> i, t <span class="hljs-keyword">in</span> tqdm(<span class="hljs-built_in">enumerate</span>(scheduler.timesteps)):<br><br>    <span class="hljs-comment"># Set requires_grad before the model forward pass</span><br>    x = x.detach().requires_grad_()<br>    model_input = scheduler.scale_model_input(x, t)<br><br>    <span class="hljs-comment"># predict (with grad this time)</span><br>    noise_pred = image_pipe.unet(model_input, t)[<span class="hljs-string">&quot;sample&quot;</span>]<br><br>    <span class="hljs-comment"># Get the predicted x0:</span><br>    x0 = scheduler.step(noise_pred, t, x).pred_original_sample<br><br>    <span class="hljs-comment"># Calculate loss</span><br>    loss = color_loss(x0) * guidance_loss_scale<br>    <span class="hljs-keyword">if</span> i % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(i, <span class="hljs-string">&quot;loss:&quot;</span>, loss.item())<br><br>    <span class="hljs-comment"># Get gradient</span><br>    cond_grad = -torch.autograd.grad(loss, x)[<span class="hljs-number">0</span>]<br><br>    <span class="hljs-comment"># Modify x based on this gradient</span><br>    x = x.detach() + cond_grad<br><br>    <span class="hljs-comment"># Now step with scheduler</span><br>    x = scheduler.step(noise_pred, t, x).prev_sample<br><br><br>grid = torchvision.utils.make_grid(x, nrow=<span class="hljs-number">4</span>)<br>im = grid.permute(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>).cpu().clip(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span><br>Image.fromarray(np.array(im * <span class="hljs-number">255</span>).astype(np.uint8))<br></code></pre></td></tr></table></figure><h2 id="CLIP-Guidance"><a href="#CLIP-Guidance" class="headerlink" title="CLIP Guidance"></a>CLIP Guidance</h2><p><a href="https://openai.com/blog/clip/">CLIP</a> is a model created by OpenAI that allows us to <strong>compare images to text captions</strong>. This is extremely powerful, since it allows us to quantify how well an image matches a prompt. And since the process is differentiable å¯å¾®, we can use this as a loss function to guide our diffusion model!</p><p>We wonâ€™t go too much into the details here. The basic approach is as follows:</p><ul><li>Embed the text prompt to get a <strong>512-dimensional CLIP embedding</strong> of the text</li><li>For every step in the diffusion model process:<ul><li>Make several variants of the predicted denoised image (having multiple variations gives a cleaner loss signal)</li><li>For each one, embed the image with CLIP and compare this embedding with the text embedding of the prompt (using a measure called â€˜Great Circle Distance Squaredâ€™)</li></ul></li><li>Calculate the gradient of this loss with respect to the current noisy x and use this gradient to modify x before updating it with the scheduler.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># @markdown load a CLIP model and define the loss function</span><br><span class="hljs-keyword">import</span> open_clip<br><br>clip_model, _, preprocess = open_clip.create_model_and_transforms(<span class="hljs-string">&quot;ViT-B-32&quot;</span>, pretrained=<span class="hljs-string">&quot;openai&quot;</span>)<br>clip_model.to(device)<br><br><span class="hljs-comment"># Transforms to resize and augment an image + normalize to match CLIP&#x27;s training data</span><br>tfms = torchvision.transforms.Compose(<br>    [<br>        torchvision.transforms.RandomResizedCrop(<span class="hljs-number">224</span>),  <span class="hljs-comment"># Random CROP each time</span><br>        torchvision.transforms.RandomAffine(<span class="hljs-number">5</span>),  <span class="hljs-comment"># One possible random augmentation: skews the image</span><br>        torchvision.transforms.RandomHorizontalFlip(),  <span class="hljs-comment"># You can add additional augmentations if you like</span><br>        torchvision.transforms.Normalize(<br>            mean=(<span class="hljs-number">0.48145466</span>, <span class="hljs-number">0.4578275</span>, <span class="hljs-number">0.40821073</span>),<br>            std=(<span class="hljs-number">0.26862954</span>, <span class="hljs-number">0.26130258</span>, <span class="hljs-number">0.27577711</span>),<br>        ),<br>    ]<br>)<br><br><br><span class="hljs-comment"># And define a loss function that takes an image, embeds it and compares with</span><br><span class="hljs-comment"># the text features of the prompt</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">clip_loss</span>(<span class="hljs-params">image, text_features</span>):<br>    image_features = clip_model.encode_image(tfms(image))  <span class="hljs-comment"># Note: applies the above transforms</span><br>    input_normed = torch.nn.functional.normalize(image_features.unsqueeze(<span class="hljs-number">1</span>), dim=<span class="hljs-number">2</span>)<br>    embed_normed = torch.nn.functional.normalize(text_features.unsqueeze(<span class="hljs-number">0</span>), dim=<span class="hljs-number">2</span>)<br>    dists = input_normed.sub(embed_normed).norm(dim=<span class="hljs-number">2</span>).div(<span class="hljs-number">2</span>).arcsin().<span class="hljs-built_in">pow</span>(<span class="hljs-number">2</span>).mul(<span class="hljs-number">2</span>)  <span class="hljs-comment"># Squared Great Circle Distance</span><br>    <span class="hljs-keyword">return</span> dists.mean()<br>    <br><span class="hljs-comment"># ========================================</span><br><br>prompt = <span class="hljs-string">&quot;Red Rose (still life), red flower painting&quot;</span>  <span class="hljs-comment"># @param</span><br><br><span class="hljs-comment"># Explore changing this</span><br>guidance_scale = <span class="hljs-number">8</span>  <span class="hljs-comment"># @param</span><br>n_cuts = <span class="hljs-number">4</span>  <span class="hljs-comment"># @param</span><br><br><span class="hljs-comment"># More steps -&gt; more time for the guidance to have an effect</span><br>scheduler.set_timesteps(<span class="hljs-number">50</span>)<br><br><span class="hljs-comment"># We embed a prompt with CLIP as our target</span><br>text = open_clip.tokenize([prompt]).to(device)<br><span class="hljs-keyword">with</span> torch.no_grad(), torch.cuda.amp.autocast():<br>    text_features = clip_model.encode_text(text)<br><br><br>x = torch.randn(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">256</span>, <span class="hljs-number">256</span>).to(device)  <span class="hljs-comment"># RAM usage is high, you may want only 1 image at a time</span><br><br><span class="hljs-keyword">for</span> i, t <span class="hljs-keyword">in</span> tqdm(<span class="hljs-built_in">enumerate</span>(scheduler.timesteps)):<br><br>    model_input = scheduler.scale_model_input(x, t)<br><br>    <span class="hljs-comment"># predict the noise residual</span><br>    <span class="hljs-keyword">with</span> torch.no_grad():<br>        noise_pred = image_pipe.unet(model_input, t)[<span class="hljs-string">&quot;sample&quot;</span>]<br><br>    cond_grad = <span class="hljs-number">0</span><br><br>    <span class="hljs-keyword">for</span> cut <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_cuts):<br><br>        <span class="hljs-comment"># Set requires grad on x</span><br>        x = x.detach().requires_grad_()<br><br>        <span class="hljs-comment"># Get the predicted x0:</span><br>        x0 = scheduler.step(noise_pred, t, x).pred_original_sample<br><br>        <span class="hljs-comment"># Calculate loss</span><br>        loss = clip_loss(x0, text_features) * guidance_scale<br><br>        <span class="hljs-comment"># Get gradient (scale by n_cuts since we want the average)</span><br>        cond_grad -= torch.autograd.grad(loss, x)[<span class="hljs-number">0</span>] / n_cuts<br><br>    <span class="hljs-keyword">if</span> i % <span class="hljs-number">25</span> == <span class="hljs-number">0</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Step:&quot;</span>, i, <span class="hljs-string">&quot;, Guidance loss:&quot;</span>, loss.item())<br><br>    <span class="hljs-comment"># Modify x based on this gradient</span><br>    alpha_bar = scheduler.alphas_cumprod[i]<br>    x = x.detach() + cond_grad * alpha_bar.sqrt()  <span class="hljs-comment"># Note the additional scaling factor here!</span><br><br>    <span class="hljs-comment"># Now step with scheduler</span><br>    x = scheduler.step(noise_pred, t, x).prev_sample<br><br><br>grid = torchvision.utils.make_grid(x.detach(), nrow=<span class="hljs-number">4</span>)<br>im = grid.permute(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>).cpu().clip(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>) * <span class="hljs-number">0.5</span> + <span class="hljs-number">0.5</span><br>Image.fromarray(np.array(im * <span class="hljs-number">255</span>).astype(np.uint8))<br></code></pre></td></tr></table></figure><ul><li>If you check out <a href="https://huggingface.co/spaces/EleutherAI/clip-guided-diffusion/blob/main/app.py">some code for CLIP-guided diffusion in practice</a>, youâ€™ll see a more complex approach with a better class for picking random cutouts from the images and lots of additional tweaks to the loss function for better performance. </li><li>Before text-conditioned diffusion models came along, this was the best text-to-image system there was! <strong>Our little toy version here has lots of room to improve, but it captures the core idea: thanks to guidance plus the amazing capabilities of CLIP, we can add text control to an unconditional diffusion model</strong> ğŸ¨.</li></ul><h1 id="Class-Conditioned-DM"><a href="#Class-Conditioned-DM" class="headerlink" title="Class-Conditioned DM"></a>Class-Conditioned DM</h1><p>As mentioned in the introduction to this unit, this is just one of many ways we could add additional conditioning information to a diffusion model, and has been chosen for its relative simplicity.</p><h2 id="Creating-a-Class-Conditioned-UNet"><a href="#Creating-a-Class-Conditioned-UNet" class="headerlink" title="Creating a Class-Conditioned UNet"></a>Creating a Class-Conditioned UNet</h2><p>The way weâ€™ll feed in the class conditioning is as follows:</p><ul><li>Create a standardÂ <code>UNet2DModel</code>Â with <strong>some additional input channels</strong></li><li>Map the class label to a learned vector of shapeÂ <code>(class_emb_size)</code>via an <strong>embedding layer</strong></li><li>Concatenate this information as extra channels for the internal UNet input withÂ <code>net_input = torch.cat((x, class_cond), 1)</code></li><li>Feed thisÂ <code>net_input</code>Â (which has (<code>class_emb_size+1</code>) channels in total) into the UNet to get the final prediction</li></ul><p>In this exampleÂ Iâ€™veÂ set the class_emb_size to 4, but this is completely arbitrary and you could explore having itÂ sizeÂ 1Â (to see if it still works),Â sizeÂ 10 (to match the number of classes), or replacing the learned nn.Embedding with a simple one-hot encoding of the class label directly.</p><p>This is what the implementation looks like:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassConditionedUnet</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, num_classes=<span class="hljs-number">10</span>, class_emb_size=<span class="hljs-number">4</span></span>):<br>        <span class="hljs-built_in">super</span>().__init__()<br><br>        <span class="hljs-comment"># The embedding layer will map the class label to a vector of size class_emb_size</span><br>        <span class="hljs-variable language_">self</span>.class_emb = nn.Embedding(num_classes, class_emb_size)<br><br>        <span class="hljs-comment"># Self.model is an unconditional UNet with extra input channels to accept the conditioning information (the class embedding)</span><br>        <span class="hljs-variable language_">self</span>.model = UNet2DModel(<br>            sample_size=<span class="hljs-number">28</span>,  <span class="hljs-comment"># the target image resolution</span><br>            in_channels=<span class="hljs-number">1</span> + class_emb_size,  <span class="hljs-comment"># Additional input channels for class cond.</span><br>            out_channels=<span class="hljs-number">1</span>,  <span class="hljs-comment"># the number of output channels</span><br>            layers_per_block=<span class="hljs-number">2</span>,  <span class="hljs-comment"># how many ResNet layers to use per UNet block</span><br>            block_out_channels=(<span class="hljs-number">32</span>, <span class="hljs-number">64</span>, <span class="hljs-number">64</span>),<br>            down_block_types=(<br>                <span class="hljs-string">&quot;DownBlock2D&quot;</span>,  <span class="hljs-comment"># a regular ResNet downsampling block</span><br>                <span class="hljs-string">&quot;AttnDownBlock2D&quot;</span>,  <span class="hljs-comment"># a ResNet downsampling block with spatial self-attention</span><br>                <span class="hljs-string">&quot;AttnDownBlock2D&quot;</span>,<br>            ),<br>            up_block_types=(<br>                <span class="hljs-string">&quot;AttnUpBlock2D&quot;</span>,<br>                <span class="hljs-string">&quot;AttnUpBlock2D&quot;</span>,  <span class="hljs-comment"># a ResNet upsampling block with spatial self-attention</span><br>                <span class="hljs-string">&quot;UpBlock2D&quot;</span>,  <span class="hljs-comment"># a regular ResNet upsampling block</span><br>            ),<br>        )<br><br>    <span class="hljs-comment"># Our forward method now takes the class labels as an additional argument</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x, t, class_labels</span>):<br>        <span class="hljs-comment"># Shape of x:</span><br>        bs, ch, w, h = x.shape<br><br>        <span class="hljs-comment"># class conditioning in right shape to add as additional input channels</span><br>        class_cond = <span class="hljs-variable language_">self</span>.class_emb(class_labels) <span class="hljs-comment"># å¾—åˆ°çš„å½¢çŠ¶ä¸º(bs,emb_size)</span><br>        class_cond = class_cond.view(bs, class_cond.shape[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>, <span class="hljs-number">1</span>).expand(bs, class_cond.shape[<span class="hljs-number">1</span>], w, h)<br>        <span class="hljs-comment"># x is shape (bs, 1, 28, 28) and class_cond is now (bs, 4, 28, 28)</span><br><br>        <span class="hljs-comment"># Net input is now x and class cond concatenated together along dimension 1</span><br>        net_input = torch.cat((x, class_cond), <span class="hljs-number">1</span>)  <span class="hljs-comment"># (bs, 5, 28, 28)</span><br><br>        <span class="hljs-comment"># Feed this to the UNet alongside the timestep and return the prediction</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">self</span>.model(net_input, t).sample  <span class="hljs-comment"># (bs, 1, 28, 28)</span><br></code></pre></td></tr></table></figure><h2 id="Training-and-Sampling"><a href="#Training-and-Sampling" class="headerlink" title="Training and Sampling"></a>Training and Sampling</h2><p>Where previously weâ€™dÂ do something likeÂ <code>prediction = unet(x, t)</code>Â weâ€™ll now add the correct labels as a third argument (<code>prediction = unet(x, t, y)</code>) during training, and <strong>at inference we can pass whatever labels we want</strong> and if all goes well the model should generate images that match.Â <code>y</code>Â in this case is the labels of the MNIST digits, with values from 0 to 9.</p><p>The training loop is very similar to theÂ <a href="https://github.com/huggingface/diffusion-models-class/blob/unit2/unit1/02_diffusion_models_from_scratch.ipynb">example from UnitÂ 1</a>. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># @markdown Training loop (10 Epochs):</span><br><br><span class="hljs-comment"># Redefining the dataloader to set the batch size higher than the demo of 8</span><br>train_dataloader = DataLoader(dataset, batch_size=<span class="hljs-number">128</span>, shuffle=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># How many runs through the data should we do?</span><br>n_epochs = <span class="hljs-number">10</span><br><br><span class="hljs-comment"># Our network</span><br>net = ClassConditionedUnet().to(device)<br><br><span class="hljs-comment"># Our loss function</span><br>loss_fn = nn.MSELoss()<br><br><span class="hljs-comment"># The optimizer</span><br>opt = torch.optim.Adam(net.parameters(), lr=<span class="hljs-number">1e-3</span>)<br><br><span class="hljs-comment"># Keeping a record of the losses for later viewing</span><br>losses = []<br><br><span class="hljs-comment"># The training loop</span><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_epochs):<br>    <span class="hljs-keyword">for</span> x, y <span class="hljs-keyword">in</span> tqdm(train_dataloader):<br><br>        <span class="hljs-comment"># Get some data and prepare the corrupted version</span><br>        x = x.to(device) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span>  <span class="hljs-comment"># Data on the GPU (mapped to (-1, 1))</span><br>        y = y.to(device)<br>        noise = torch.randn_like(x)<br>        timesteps = torch.randint(<span class="hljs-number">0</span>, <span class="hljs-number">999</span>, (x.shape[<span class="hljs-number">0</span>],)).long().to(device)<br>        noisy_x = noise_scheduler.add_noise(x, noise, timesteps)<br><br>        <span class="hljs-comment"># Get the model prediction</span><br>        pred = net(noisy_x, timesteps, y)  <span class="hljs-comment"># åˆ«çš„éƒ½ä¸€æ ·ï¼Œåªæ˜¯è¿™é‡ŒæŠŠç±»åˆ«å€¼ä¼ è¿›äº†unet</span><br><br>        <span class="hljs-comment"># Calculate the loss</span><br>        loss = loss_fn(pred, noise)  <span class="hljs-comment"># How close is the output to the noise</span><br><br>        <span class="hljs-comment"># Backprop and update the params:</span><br>        opt.zero_grad()<br>        loss.backward()<br>        opt.step()<br><br>        <span class="hljs-comment"># Store the loss for later</span><br>        losses.append(loss.item())<br><br>    <span class="hljs-comment"># Print out the average of the last 100 loss values to get an idea of progress:</span><br>    avg_loss = <span class="hljs-built_in">sum</span>(losses[-<span class="hljs-number">100</span>:]) / <span class="hljs-number">100</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&quot;Finished epoch <span class="hljs-subst">&#123;epoch&#125;</span>. Average of the last 100 loss values: <span class="hljs-subst">&#123;avg_loss:05f&#125;</span>&quot;</span>)<br><br><span class="hljs-comment"># View the loss curve</span><br>plt.plot(losses)<br></code></pre></td></tr></table></figure><h1 id="Stable-Diffusion-æ¦‚è§ˆ"><a href="#Stable-Diffusion-æ¦‚è§ˆ" class="headerlink" title="Stable Diffusion æ¦‚è§ˆ"></a>Stable Diffusion æ¦‚è§ˆ</h1><p>In this unit you will meet a powerful diffusion model called <strong>Stable Diffusion (SD)</strong> and explore what it can do. Stable Diffusion is a powerful <strong>text-conditioned latent diffusion model</strong>.</p><h2 id="Latent-Diffusion"><a href="#Latent-Diffusion" class="headerlink" title="Latent Diffusion"></a>Latent Diffusion</h2><p>As imageÂ sizeÂ grows, so does the <strong>computational power</strong> required to work with those images. This is especially pronounced in an operation called <strong>self-attention, where the amount of operations grows quadratically with the number of inputs</strong>. A 128px square image has 4x as many pixels as a 64px square image, and so requires 16x (i.e. 42) the memory and compute in a self-attention layer. This is a problem for anyone whoâ€™dÂ like to generate high-resolution images!</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251115130119810.png" alt="image.png"></p><p>Latent diffusion helps to mitigate this issue by <strong>using a separate model called a Variational Auto-Encoder</strong> (<code>VAE</code>) toÂ <strong>compress</strong>Â images to <strong>a smaller spatial dimension</strong>. The rationale behind this is that images tend to contain a large amount of redundant information - given enough training data, <strong>a VAE can hopefully learn to produce a much smaller representation of an input image and then reconstruct the image based on this smallÂ latentÂ representation with a high degree of fidelity.</strong> The VAE used in SD takes in 3-channel images and produces a 4-channel latent representation with a reduction factor of 8 for each spatial dimension. That is, a 512px square input image will be compressed down to a 4x64x64 latent.</p><p>By applying the diffusion process on theseÂ <strong>latent representations</strong>Â rather than on full-resolution images, we can get many of the benefits that would come from using smaller images (<strong>lower memory usage, fewer layers needed in the UNet, faster generation timesâ€¦</strong>) and still decode the result back to a high-resolution image once weâ€™re ready to view the final result. <strong>This innovation dramatically lowers the cost to train and run these models.</strong></p><h2 id="Text-Conditioning"><a href="#Text-Conditioning" class="headerlink" title="Text Conditioning"></a><a href="https://huggingface.co/learn/diffusion-course/en/unit3/1#text-conditioning"></a>Text Conditioning</h2><p>In Unit 2 we showed how feeding additional information to the UNet allows us to have some additional control over the types of images generated. We call this conditioning. Given a noisy version of an image, the model is tasked with predicting the denoised versionÂ <strong>based on additional clues</strong>Â such as a class label or, in the case of Stable Diffusion, a text description of the image. At inference time, we can feed in the description of an image weâ€™dÂ like to see and some pure noise as a starting point, and the model does its best to â€˜denoiseâ€™ the random input into something that matches the caption.</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251115130440936.png" alt="image.png"><br><em>Diagram showing the text encoding process which transforms the input prompt into a set of text embeddings (the encoder_hidden_states) which can then be fed in as conditioning to the UNet.</em></p><p>For this to work, we need to <strong>create a numeric representation of the text</strong> that captures relevant information about what it describes. To do this, SD <strong>leverages a pre-trained transformer model based on something called CLIP.</strong><br><strong>CLIPâ€™sÂ text encoder was designed to process image captions into a form that could be used to compare images and text</strong>, so it is well suited to the task of creating useful representations from image descriptions. An input prompt is first tokenized (based on a large <strong>vocabulary</strong> where each word or sub-word is assigned a specific token) and then fed through the CLIP text encoder, producing a 768-dimensional (in the case of SDÂ 1.X) or <strong>1024-dimensional</strong> (SD 2.X) vector for each token. To keep things consistent <strong>prompts are always padded&#x2F;truncated to be 77 tokens long</strong>, and so the final representation which we use as <strong>conditioning is a tensor of shape 77x1024 per prompt</strong>.</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251115130734519.png" alt="image.png"></p><p>OK, so how do we actually <strong>feed this conditioning information into the UNet</strong> for it to use as it makes predictions? The answer is something called &#x3D;&#x3D;cross-attention&#x3D;&#x3D;. Scattered throughout the UNet are cross-attention layers. Each spatial location in the UNet can â€˜attendâ€™ to different tokens in the text conditioning, bringing in relevant information from the prompt. <strong>The diagram above shows how this text conditioning (as well as timestep-based conditioning) is fed in at different points</strong>. As you can see, at every level the UNet has ample opportunity to make use of this conditioning!</p><h2 id="Classifier-free-Guidance"><a href="#Classifier-free-Guidance" class="headerlink" title="Classifier-free Guidance"></a>Classifier-free Guidance</h2><p>ç ”ç©¶å‘ç°ï¼Œå³ä¾¿æˆ‘ä»¬ç«­å°½å…¨åŠ›ä¼˜åŒ–æ–‡æœ¬æ¡ä»¶çš„æ•ˆæœï¼Œæ¨¡å‹åœ¨é¢„æµ‹æ—¶ä»å€¾å‘äº<strong>ä¸»è¦ä¾èµ–å«å™ªè¾“å…¥å›¾åƒè€Œéæç¤ºè¯</strong>ã€‚æŸç§ç¨‹åº¦ä¸Šè¿™å¯ä»¥ç†è§£â€”â€”è®¸å¤šå›¾åƒè¯´æ˜æ–‡å­—ä¸å…¶å¯¹åº”å›¾ç‰‡å…³è”æ€§è¾ƒå¼±ï¼Œå› æ­¤æ¨¡å‹å­¦ä¼šäº†ä¸è¿‡åº¦ä¾èµ–æ–‡å­—æè¿°ï¼ä½†åœ¨ç”Ÿæˆæ–°å›¾åƒæ—¶ï¼Œè¿™ç§è¡Œä¸ºå°±ä¸å¯å–äº†â€”â€”å¦‚æœæ¨¡å‹ä¸éµå¾ªæç¤ºè¯ï¼Œæˆ‘ä»¬å¯èƒ½å¾—åˆ°ä¸æè¿°å®Œå…¨æ— å…³çš„å›¾åƒã€‚</p><p>To fix this, we use a trick called <strong>Classifier-Free Guidance</strong> (<code>CGF</code>). <strong>During training, text conditioning is sometimes kept blank, forcing the model to learn to denoise images with no text information</strong> whatsoever (unconditional generation). Then at inference time, we make two separate predictions: one with the text prompt as conditioning and one without. We can then use the difference between these two predictions to create a final combined prediction that pushesÂ <strong>even further</strong>Â in the direction indicated by the text-conditioned prediction according to <strong>some scaling factor (the guidance scale)</strong>, hopefully resulting in an image that better matches the prompt. The image above shows the outputs for a prompt at different guidance scales - as you can see, higher values result in images that better match the description.</p><ul><li>ç±»ä¼¼ dropout ,ç„¶åé€šè¿‡ä¸€ä¸ªç³»æ•°æ¥æ§åˆ¶guidanceçš„å¼ºåº¦</li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Diffusion</tag>
      
      <tag>Conditional</tag>
      
      <tag>CLIP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Diffusion-åŸç†è§£æ</title>
    <link href="/2025/11/13/Diffusion-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
    <url>/2025/11/13/Diffusion-%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Diffusionæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h1><p>Diffusion Modelï¼ˆæ‰©æ•£æ¨¡å‹ï¼‰åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒè¿‡ç¨‹ï¼š</p><ul><li><p><strong>å‰å‘è¿‡ç¨‹ (Forward Process):</strong> è¿™æ˜¯ä¸€ä¸ªå›ºå®šçš„è¿‡ç¨‹ã€‚å®ƒåœ¨ $T$ ä¸ªæ—¶é—´æ­¥å†…ï¼Œé€æ­¥åœ°å‘ä¸€ä¸ªæ¸…æ™°çš„åŸå§‹å›¾åƒ $x_0$ ä¸­æ·»åŠ é«˜æ–¯å™ªå£°ï¼Œç›´åˆ°å›¾åƒåœ¨ $T$ æ—¶åˆ»å˜ä¸ºä¸€ä¸ªçº¯ç²¹çš„éšæœºå™ªå£° $x_T$ã€‚</p></li><li><p><strong>åå‘è¿‡ç¨‹ (Reverse Process):</strong> è¿™æ˜¯ä¸€ä¸ª<strong>å¯å­¦ä¹ </strong>çš„è¿‡ç¨‹ã€‚æ¨¡å‹ä»çº¯ç²¹çš„å™ªå£° $x_T$ å¼€å§‹ï¼Œé€šè¿‡ä¸€ä¸ªç¥ç»ç½‘ç»œï¼ˆé€šå¸¸æ˜¯ <code>U-Net</code>ï¼‰åœ¨ $T$ ä¸ªæ—¶é—´æ­¥å†…é€æ­¥å»å™ªï¼Œæœ€ç»ˆé‡å»ºå‡ºæ¸…æ™°çš„å›¾åƒ $x_0$ã€‚</p></li></ul><p>ä¸ VAE (Variational Autoencoder) ç›¸æ¯”ï¼ŒVAE è¯•å›¾é€šè¿‡ Encoder å°†å›¾åƒå‹ç¼©åˆ°ä¸€ä¸ª<strong>æ½œåœ¨å‘é‡</strong>ï¼Œå†é€šè¿‡ Decoder é‡å»ºï¼Œè€Œ Diffusion Model åˆ™æ˜¯å°†è¿™ä¸ªè¿‡ç¨‹åˆ†è§£ä¸º N ä¸ªâ€œåŠ å™ªâ€å’Œâ€œå»å™ªâ€çš„æ­¥éª¤ã€‚</p><h1 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h1><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113113114224.png" alt="image.png"></p><ul><li>å†…éƒ¨å¤§è‡´æ˜¯<strong>ä¸‰ä¸ªæ¨¡å—ï¼Œåˆ†åˆ«è¿›è¡Œè®­ç»ƒ</strong></li></ul><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><ul><li>Stable Diffusionã€DALL-Eã€Imagen çš„æ¶æ„ç±»ä¼¼</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113113433062.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113113443410.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113113453858.png" alt="image.png"></p><ul><li>å…¶å®å¯ä»¥å‘ç°ï¼Œç¬¬ä¸‰ä¸ªDecoder å°±æ˜¯ä¸€ä¸ª<strong>è¶…åˆ†æ¨¡å—</strong>ï¼Œå°†<strong>ä½åƒç´ çš„æ¨¡ç³Šå›¾ç‰‡è½¬æ¢ä¸ºæ¸…æ™°çš„å›¾ç‰‡</strong></li></ul><h1 id="ç»„æˆ"><a href="#ç»„æˆ" class="headerlink" title="ç»„æˆ"></a>ç»„æˆ</h1><h2 id="1ã€Text-Encoder"><a href="#1ã€Text-Encoder" class="headerlink" title="1ã€Text Encoder"></a>1ã€Text Encoder</h2><h3 id="FID"><a href="#FID" class="headerlink" title="FID"></a>FID</h3><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113113657397.png" alt="image.png"></p><ul><li><code>FID</code> ç”¨æ¥è¡¡é‡ç”Ÿæˆçš„å›¾ç‰‡çš„è´¨é‡</li><li>å°†çœŸå®å›¾ç‰‡ä¸ç”Ÿæˆå›¾ç‰‡çš„ <code>latent space</code> çš„åˆ†å¸ƒè§†ä¸º <code>Gaussian Distribution</code>ï¼Œç„¶åè®¡ç®—ä¸¤ä¸ª<code>Gaussian Distribution</code>ä¹‹é—´çš„è·ç¦»</li></ul><h3 id="é‡è¦æ€§"><a href="#é‡è¦æ€§" class="headerlink" title="é‡è¦æ€§"></a>é‡è¦æ€§</h3><ul><li>ç”±å›¾è§‚å¯Ÿå¯çŸ¥ï¼Œ<code>encoder</code>çš„å¤§å° è´¨é‡ å¯¹æœ€åç”Ÿæˆçš„å›¾ç‰‡çš„è´¨é‡<strong>å½±å“æ›´å¤§</strong>ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒU-Net ä¹Ÿå°±æ˜¯ <code>Generation Model</code> çš„å½±å“æ²¡é‚£ä¹ˆæ˜¾è‘—</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113114129354.png" alt="image.png"></p><h3 id="CLIP"><a href="#CLIP" class="headerlink" title="CLIP"></a>CLIP</h3><ul><li><strong>Contrastive Language-Image Pre-Training</strong></li><li>åœ¨ 400 million image-text pairs ä¸Šè®­ç»ƒ</li><li>å…·å¤‡<strong>é€šç”¨çš„å›¾æ–‡ç†è§£èƒ½åŠ›</strong></li></ul><h2 id="2ã€Decoder"><a href="#2ã€Decoder" class="headerlink" title="2ã€Decoder"></a>2ã€Decoder</h2><ul><li><strong>Decoder can be trainedwithout labelled data.</strong></li><li>å…¶å®æ˜¯ä¸€ä¸ªè¶…åˆ†æ¨¡å—</li><li>å¯ä»¥å°†åŸå§‹å›¾ç‰‡é€šè¿‡ä¸€ä¸ªEncoder å˜å°å å†ç”¨æ¥è®­ç»ƒ Decoder</li><li><strong>Latent Representation</strong><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113114352992.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113114556058.png" alt="image.png"></li></ul><h2 id="3ã€Generation"><a href="#3ã€Generation" class="headerlink" title="3ã€Generation"></a>3ã€Generation</h2><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113114703927.png" alt="image.png"></p><h1 id="æ ¸å¿ƒç®—æ³•-DDPM"><a href="#æ ¸å¿ƒç®—æ³•-DDPM" class="headerlink" title="æ ¸å¿ƒç®—æ³• (DDPM)"></a>æ ¸å¿ƒç®—æ³• (DDPM)</h1><ul><li>é‡ç‚¹ä»‹ç»DDPM (Denoising Diffusion Probabilistic Models) çš„<strong>ä¸¤ä¸ªæ ¸å¿ƒç®—æ³•</strong>ï¼š<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251113203410780.png" alt="image.png"></li></ul><h2 id="ç®—æ³•-1ï¼šè®­ç»ƒ-Training"><a href="#ç®—æ³•-1ï¼šè®­ç»ƒ-Training" class="headerlink" title="ç®—æ³• 1ï¼šè®­ç»ƒ (Training)"></a>ç®—æ³• 1ï¼šè®­ç»ƒ (Training)</h2><p>è®­ç»ƒçš„ç›®æ ‡æ˜¯è®©ç¥ç»ç½‘ç»œå­¦ä¼šâ€œé¢„æµ‹å™ªå£°â€ã€‚</p><ol><li>ä»æ•°æ®é›†ä¸­éšæœºé‡‡æ ·ä¸€ä¸ªæ¸…æ™°çš„å›¾åƒ $x_0$ã€‚</li><li>éšæœºé€‰æ‹©ä¸€ä¸ªæ—¶é—´æ­¥ $t$ï¼ˆä» $1$ åˆ° $T$ï¼‰ã€‚</li><li>éšæœºé‡‡æ ·ä¸€ä¸ªä¸ $x_0$ åŒæ ·å¤§å°çš„<strong>æ ‡å‡†é«˜æ–¯å™ªå£°</strong> $\epsilon$ã€‚</li><li>å…³é”®æ­¥éª¤ï¼š ä½¿ç”¨ä¸€ä¸ªâ€œæ·å¾„â€å…¬å¼ï¼ˆå‰å‘è¿‡ç¨‹çš„æ•°å­¦æŠ€å·§ï¼‰ï¼Œç›´æ¥æ ¹æ® $x_0$, $t$, $\epsilon$ ç”Ÿæˆåœ¨ $t$ æ—¶åˆ»çš„å¸¦å™ªå›¾åƒ $x_t$ï¼š<br> $$<br> x_t &#x3D; \sqrt{\overline{\alpha}<em>{t}}x</em>{0}+\sqrt{1-\overline{\alpha}_{t}}\epsilon<br> $$</li><li>å°† $x_t$ å’Œæ—¶é—´æ­¥ $t$ ä¸€èµ·è¾“å…¥åˆ°å™ªå£°é¢„æµ‹ç½‘ç»œ $\epsilon_{\theta}$ ä¸­ï¼Œå¾—åˆ°ç½‘ç»œé¢„æµ‹çš„å™ªå£° $\epsilon_{\theta}(x_t, t)$ã€‚</li><li>è®¡ç®—ç½‘ç»œé¢„æµ‹çš„å™ªå£° $\epsilon_{\theta}$ ä¸æ­¥éª¤ 3 ä¸­é‡‡æ ·çš„<strong>çœŸå®å™ªå£° $\epsilon$</strong> ä¹‹é—´çš„å‡æ–¹è¯¯å·® (MSE) æŸå¤±ã€‚</li><li>é€šè¿‡æ¢¯åº¦ä¸‹é™æ›´æ–°ç½‘ç»œå‚æ•° $\theta$ æ¥æœ€å°åŒ–è¿™ä¸ªæŸå¤±ã€‚</li></ol><p>è®­ç»ƒç›®æ ‡ï¼ˆæŸå¤±å‡½æ•°ï¼‰ï¼š<br>$$<br>\nabla_{\theta}||\epsilon-\epsilon_{\theta}(\sqrt{\overline{\alpha}<em>{t}}x</em>{0}+\sqrt{1-\overline{\alpha}_{t}}\epsilon,t)||^{2}<br>$$</p><p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯è®­ç»ƒä¸€ä¸ªç½‘ç»œï¼Œè®©å®ƒåœ¨ç»™å®š $t$ æ—¶åˆ»çš„å¸¦å™ªå›¾åƒ $x_t$ æ—¶ï¼Œèƒ½å‡†ç¡®é¢„æµ‹å‡ºå½“åˆæ·»åŠ çš„å™ªå£° $\epsilon$ã€‚</p><h2 id="ç®—æ³•-2ï¼šé‡‡æ ·-Sampling-Inference"><a href="#ç®—æ³•-2ï¼šé‡‡æ ·-Sampling-Inference" class="headerlink" title="ç®—æ³• 2ï¼šé‡‡æ · (Sampling &#x2F; Inference)"></a>ç®—æ³• 2ï¼šé‡‡æ · (Sampling &#x2F; Inference)</h2><p>åœ¨é‡‡æ ·ï¼ˆå³ç”Ÿæˆå›¾åƒï¼‰é˜¶æ®µï¼Œæˆ‘ä»¬æ‰§è¡Œâ€œåå‘è¿‡ç¨‹â€ã€‚</p><ol><li><p>ä»ä¸€ä¸ªæ ‡å‡†é«˜æ–¯åˆ†å¸ƒä¸­é‡‡æ ·ä¸€ä¸ªçº¯å™ªå£°å›¾åƒï¼Œä½œä¸º $x_T$ã€‚</p></li><li><p>ä» $t&#x3D;T$ å¼€å§‹ï¼Œå¾ªç¯é€’å‡åˆ° $t&#x3D;1$ï¼š<br> a. å°†å½“å‰çš„å¸¦å™ªå›¾åƒ $x_t$ å’Œæ—¶é—´æ­¥ $t$ è¾“å…¥åˆ°è®­ç»ƒå¥½çš„å™ªå£°é¢„æµ‹ç½‘ç»œ $\epsilon_{\theta}$ï¼Œå¾—åˆ°é¢„æµ‹çš„å™ªå£° $\epsilon_{\theta}(x_t, t)$ã€‚<br> b. ä½¿ç”¨ $x_t$ å’Œé¢„æµ‹å‡ºçš„å™ªå£° $\epsilon_{\theta}(x_t, t)$ï¼Œé€šè¿‡ä»¥ä¸‹å…¬å¼è®¡ç®—å‡ºä¸Šä¸€ä¸ªæ—¶é—´æ­¥ $x_{t-1}$ï¼ˆå³ä¸€ä¸ªå™ªå£°å°‘ä¸€ç‚¹çš„å›¾åƒï¼‰ã€‚<br> c. é‡‡æ ·å…¬å¼ï¼š<br>$$<br>x_{t-1}&#x3D;\frac{1}{\sqrt{\alpha_{t}}}(x_{t}-\frac{1-\alpha_{t}}{\sqrt{1-\overline{\alpha}<em>{t}}}\epsilon</em>{\theta}(x_{t},t))+\sigma_{t}z<br>$$<br> (å…¶ä¸­ $z$ æ˜¯ä¸€ä¸ªåœ¨ $t&gt;1$ æ—¶é‡‡æ ·çš„æ ‡å‡†é«˜æ–¯å™ªå£°ï¼Œåœ¨ $t&#x3D;1$ æ—¶ $z&#x3D;0$)</p></li><li><p>å½“å¾ªç¯åœ¨ $t&#x3D;1$ ç»“æŸæ—¶ï¼Œå¾—åˆ°çš„ $x_0$ å°±æ˜¯æœ€ç»ˆç”Ÿæˆçš„æ¸…æ™°å›¾åƒã€‚</p></li></ol><hr><h1 id="3-æ ¸å¿ƒæ•°å­¦åŸç†"><a href="#3-æ ¸å¿ƒæ•°å­¦åŸç†" class="headerlink" title="3. æ ¸å¿ƒæ•°å­¦åŸç†"></a>3. æ ¸å¿ƒæ•°å­¦åŸç†</h1><h2 id="ä¸ºä»€ä¹ˆæ˜¯é¢„æµ‹å™ªå£°ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆæ˜¯é¢„æµ‹å™ªå£°ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆæ˜¯é¢„æµ‹å™ªå£°ï¼Ÿ"></a>ä¸ºä»€ä¹ˆæ˜¯é¢„æµ‹å™ªå£°ï¼Ÿ</h2><p>è¿™æ˜¯æ•´ä¸ª DDPM æ•°å­¦æ¨å¯¼çš„ç²¾åæ‰€åœ¨ã€‚</p><ol><li><p><strong>æœ€ç»ˆç›®æ ‡ï¼š</strong> æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®­ç»ƒä¸€ä¸ªæ¨¡å‹ $P_{\theta}(x_{t-1}|x_t)$ æ¥æ‹ŸåˆçœŸå®çš„åå‘è¿‡ç¨‹ $q(x_{t-1}|x_t, x_0)$ã€‚</p></li><li><p>ç›®æ ‡å‡å€¼ï¼š é€šè¿‡æ•°å­¦æ¨å¯¼ï¼ˆè´å¶æ–¯å…¬å¼ï¼‰ï¼Œ<strong>å¯ä»¥è¯æ˜ $q(x_{t-1}|x_t, x_0)$ æ˜¯ä¸€ä¸ªé«˜æ–¯åˆ†å¸ƒ</strong>ï¼Œå…¶å‡å€¼ï¼ˆMeanï¼‰ä¸ºï¼š<br> $$<br> \frac{\sqrt{\overline{\alpha}<em>{t-1}}\beta</em>{t}x_{0}+\sqrt{\alpha_{t}}(1-\overline{\alpha}<em>{t-1})x</em>{t}}{1-\overline{\alpha}_{t}}<br> $$</p></li><li><p><strong>é—®é¢˜ï¼š</strong> è¿™ä¸ªå‡å€¼ä¾èµ– $x_0$ã€‚åœ¨è®­ç»ƒæ—¶æˆ‘ä»¬å¯ä»¥æ‹¿åˆ° $x_0$ï¼Œä½†åœ¨é‡‡æ ·ï¼ˆInferenceï¼‰æ—¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ $x_0$ï¼ˆ$x_0$ æ˜¯æˆ‘ä»¬è¦ç”Ÿæˆçš„ç›®æ ‡ï¼‰ã€‚</p></li><li><p>å…³é”®æ´å¯Ÿï¼ˆé‡å‚æ•°åŒ–ï¼‰ï¼š æˆ‘ä»¬æœ‰å‰å‘è¿‡ç¨‹çš„â€œæ·å¾„â€å…¬å¼ï¼š<br> $$<br> x_{t}&#x3D;\sqrt{\overline{\alpha}<em>{t}}x</em>{0}+\sqrt{1-\overline{\alpha}<em>{t}}\epsilon<br> $$<br> æˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åè§£ $x_0$ï¼š<br> $$<br> x</em>{0} &#x3D; \frac{x_{t}-\sqrt{1-\overline{\alpha}<em>{t}}\epsilon}{\sqrt{\overline{\alpha}</em>{t}}}<br> $$</p></li><li><p>ä»£æ¢ï¼š å°†è¿™ä¸ª $x_0$ çš„è¡¨è¾¾å¼ä»£å…¥åˆ°æ­¥éª¤ 2 ä¸­çš„å‡å€¼å…¬å¼ä¸­ï¼Œç»è¿‡ä¸€ç³»åˆ—åŒ–ç®€ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ªç­‰ä»·çš„å‡å€¼è¡¨è¾¾å¼ï¼š<br> $$<br> \frac{1}{\sqrt{\alpha_{t}}}(x_{t}-\frac{1-\alpha_{t}}{\sqrt{1-\overline{\alpha}_{t}}}\epsilon)<br> $$</p></li><li><p><strong>ç»“è®ºï¼š</strong></p><ul><li><p>è¿™ä¸ªæ–°çš„å‡å€¼å…¬å¼**åªä¾èµ– $x_t$ å’Œ $\epsilon$**ï¼Œä¸å†ä¾èµ– $x_0$ï¼Œ$x_t$ æ˜¯æˆ‘ä»¬å·²çŸ¥çš„ï¼ˆç½‘ç»œçš„è¾“å…¥ï¼‰ã€‚</p></li><li><p>è¿™æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ç¥ç»ç½‘ç»œ $P_{\theta}$ **åªéœ€è¦é¢„æµ‹ $\epsilon$<strong>ï¼Œå°±å¯ä»¥è®¡ç®—å‡ºè¿™ä¸ªç›®æ ‡å‡å€¼ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ DDPM çš„ç¥ç»ç½‘ç»œè¢«è®¾è®¡ä¸º</strong>å™ªå£°é¢„æµ‹å™¨ $\epsilon_{\theta}$**ã€‚</p></li><li><p>è¿™ä¹Ÿè§£é‡Šäº†ç®—æ³• 2ï¼ˆé‡‡æ ·ï¼‰ä¸­çš„å…¬å¼æ˜¯å¦‚ä½•æ¥çš„ã€‚</p></li></ul></li></ol><h2 id="ä¸ºä»€ä¹ˆé‡‡æ ·æ—¶éœ€è¦æ·»åŠ éšæœºå™ªå£°-sigma-t-z-ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé‡‡æ ·æ—¶éœ€è¦æ·»åŠ éšæœºå™ªå£°-sigma-t-z-ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé‡‡æ ·æ—¶éœ€è¦æ·»åŠ éšæœºå™ªå£° $\sigma_t z$ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé‡‡æ ·æ—¶éœ€è¦æ·»åŠ éšæœºå™ªå£° $\sigma_t z$ï¼Ÿ</h2><ul><li><p>åœ¨ç®—æ³• 2 çš„é‡‡æ ·å…¬å¼ä¸­ï¼Œé™¤äº†é€šè¿‡ $\epsilon_{\theta}$ è®¡ç®—å‡ºçš„å‡å€¼ï¼ˆç¡®å®šæ€§éƒ¨åˆ†ï¼‰ï¼Œè¿˜å¤šäº†ä¸€é¡¹ $\sigma_t z$ï¼ˆéšæœºæ€§éƒ¨åˆ†ï¼‰ã€‚</p></li><li><p>PPT æé—®ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å–å‡å€¼ï¼Œè€Œæ˜¯è¦è¿›è¡Œâ€œé‡‡æ ·â€ï¼Ÿ</p></li><li><p><strong>çŒœæƒ³ï¼ˆç±»æ¯”æ–‡æœ¬ç”Ÿæˆï¼‰ï¼š</strong></p><ul><li><p>åœ¨æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ä¸­ï¼Œå¦‚æœæ€»æ˜¯é€‰æ‹©æ¦‚ç‡æœ€é«˜çš„è¯ï¼ˆå¦‚ Beam Searchï¼‰ï¼Œä¼šå¾ˆå¿«é™·å…¥é‡å¤ã€æ— æ„ä¹‰çš„å¾ªç¯ï¼ˆç§°ä¸º â€œNeural Text Degenerationâ€ï¼‰ã€‚</p></li><li><p>ç›¸åï¼Œä½¿ç”¨â€œé‡‡æ ·â€ï¼ˆSamplingï¼‰ä¼šå¼•å…¥<strong>éšæœºæ€§</strong>ï¼Œä½¿å¾—<strong>ç”Ÿæˆçš„æ–‡æœ¬æ›´å…·å¤šæ ·æ€§ã€æ›´åƒäººç±»çš„è¡¨è¾¾</strong>ã€‚</p></li><li><p>Diffusion Model ä¹Ÿæ˜¯ä¸€ä¸ªè‡ªå›å½’ï¼ˆ<strong>Autoregressive</strong>ï¼‰çš„è¿‡ç¨‹ï¼Œå®ƒåœ¨ $T$ æ­¥ä¸­é€æ­¥ç”Ÿæˆç»“æœã€‚åœ¨æ¯ä¸€æ­¥å»å™ªæ—¶éƒ½æ·»åŠ ä¸€ç‚¹éšæœºå™ªå£°ï¼Œå¯ä»¥é˜²æ­¢æ¨¡å‹â€œå¡ä½â€ï¼Œå¹¶æå¤§ä¸°å¯Œç”Ÿæˆç»“æœçš„å¤šæ ·æ€§ã€‚</p></li></ul></li></ul><hr><h1 id="4-æ‰©å±•åº”ç”¨ï¼šç¦»æ•£æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ï¼‰"><a href="#4-æ‰©å±•åº”ç”¨ï¼šç¦»æ•£æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ï¼‰" class="headerlink" title="4. æ‰©å±•åº”ç”¨ï¼šç¦»æ•£æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ï¼‰"></a>4. æ‰©å±•åº”ç”¨ï¼šç¦»æ•£æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ï¼‰</h1><ul><li><p><strong>å›°éš¾ç‚¹ï¼š</strong> æ–‡æœ¬æ˜¯ç¦»æ•£çš„ï¼ˆâ€ä½ å¥½å—ï¼Ÿâ€ï¼‰ï¼Œæ— æ³•ç›´æ¥å¯¹å…¶æ–½åŠ é«˜æ–¯å™ªå£°ã€‚</p></li><li><p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p><ol><li><p><strong>åœ¨éšç©ºé—´ (Latent Space) åŠ å™ªï¼š</strong> ä¸å¯¹ç¦»æ•£çš„ token åŠ å™ªï¼Œè€Œæ˜¯å¯¹å®ƒä»¬çš„è¿ç»­è¡¨ç¤ºï¼ˆå¦‚ Word Vectors æˆ– Embeddingsï¼‰åŠ é«˜æ–¯å™ªå£° (å¦‚ Diffusion-LM, DiffuSeq)ã€‚</p></li><li><p><strong>ä½¿ç”¨éé«˜æ–¯å™ªå£°ï¼š</strong> å°†â€œåŠ å™ªâ€è¿‡ç¨‹æ›¿æ¢ä¸ºæ›´é€‚åˆç¦»æ•£æ•°æ®çš„â€œæŸåâ€è¿‡ç¨‹ï¼Œä¾‹å¦‚â€œéšæœº Maskingâ€æˆ–â€œè¯è¯­æ›¿æ¢â€ï¼Œç„¶åè®­ç»ƒæ¨¡å‹é‡å»ºåŸå§‹æ–‡æœ¬ï¼ˆå¦‚ DiffusER, MaskGITï¼‰ã€‚è¿™ä½¿å¾— Diffusion çš„æ€æƒ³ä¸ Masked Autoencoderï¼ˆå¦‚ BERTï¼‰äº§ç”Ÿäº†è”ç³»ã€‚</p></li></ol></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Diffusion</tag>
      
      <tag>Generative</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æ¦‚ç‡</title>
    <link href="/2025/10/16/%E6%A6%82%E7%8E%87/"/>
    <url>/2025/10/16/%E6%A6%82%E7%8E%87/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ çš„ä¸€ç‚¹æ¦‚ç‡çŸ¥è¯†æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>KLæ•£åº¦ï¼ˆKullback-Leibler Divergenceï¼‰å’ŒJSæ•£åº¦ï¼ˆJensen-Shannon Divergenceï¼‰æ˜¯è¡¡é‡ä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒå·®å¼‚çš„å¸¸ç”¨å·¥å…·ï¼Œä»¥ä¸‹æ˜¯å®ƒä»¬çš„è¯¦ç»†è§£é‡Šå’Œå¯¹æ¯”ï¼š</p><hr><h1 id="1-KLæ•£åº¦ï¼ˆKullback-Leibler-Divergenceï¼‰"><a href="#1-KLæ•£åº¦ï¼ˆKullback-Leibler-Divergenceï¼‰" class="headerlink" title="1. KLæ•£åº¦ï¼ˆKullback-Leibler Divergenceï¼‰"></a>1. KLæ•£åº¦ï¼ˆKullback-Leibler Divergenceï¼‰</h1><ul><li><strong>å®šä¹‰</strong>ï¼š<br>å¯¹äºä¸¤ä¸ªæ¦‚ç‡åˆ†å¸ƒ ( P ) å’Œ ( Q )ï¼ŒKLæ•£åº¦è¡¡é‡ç”¨ ( Q ) è¿‘ä¼¼ ( P ) æ—¶çš„ä¿¡æ¯æŸå¤±ï¼š</li></ul><p>$$<br>  D_{KL}(P \parallel Q) &#x3D; \sum_{x} P(x) \log \frac{P(x)}{Q(x)} \quad \text{(ç¦»æ•£)}<br>$$</p><p>$$<br>  D_{KL}(P \parallel Q) &#x3D; \int P(x) \log \frac{P(x)}{Q(x)} , dx \quad \text{(è¿ç»­)}<br>$$</p><ul><li><p><strong>æ€§è´¨</strong>ï¼š</p><ul><li><strong>éå¯¹ç§°æ€§</strong>ï¼š( $D_{KL}(P \parallel Q) \neq D_{KL}(Q \parallel P)$ )ã€‚</li><li><strong>éè´Ÿæ€§</strong>ï¼š( $D_{KL} \geq 0$ )ï¼Œä¸”å½“ ( P &#x3D; Q ) æ—¶å–é›¶ã€‚</li><li><strong>ä¸æ»¡è¶³è·ç¦»å…¬ç†</strong>ï¼šå› ä¸å¯¹ç§°ä¸”ä¸æ»¡è¶³ä¸‰è§’ä¸ç­‰å¼ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š<br>ç”¨äºå˜åˆ†æ¨æ–­ã€ç”Ÿæˆæ¨¡å‹ï¼ˆå¦‚VAEï¼‰ã€ä¿¡æ¯æ£€ç´¢ç­‰åœºæ™¯ã€‚</p></li><li><p><strong>ç¼ºé™·</strong>ï¼š</p><ul><li>å½“ ( Q(x)&#x3D;0 ) ä¸” ( P(x)&gt;0 ) æ—¶ï¼ŒKLæ•£åº¦æ— å®šä¹‰ï¼ˆè¶‹å‘æ— ç©·ï¼‰ã€‚</li><li>ä¸å¯¹ç§°æ€§å¯èƒ½å¯¼è‡´å®é™…è§£é‡Šå›°éš¾ã€‚</li></ul></li></ul><hr><h1 id="2-JSæ•£åº¦ï¼ˆJensen-Shannon-Divergenceï¼‰"><a href="#2-JSæ•£åº¦ï¼ˆJensen-Shannon-Divergenceï¼‰" class="headerlink" title="2. JSæ•£åº¦ï¼ˆJensen-Shannon Divergenceï¼‰"></a>2. JSæ•£åº¦ï¼ˆJensen-Shannon Divergenceï¼‰</h1><ul><li><strong>å®šä¹‰</strong>ï¼š<br>JSæ•£åº¦æ˜¯KLæ•£åº¦çš„å¯¹ç§°åŒ–ç‰ˆæœ¬ï¼ŒåŸºäº ( P ) å’Œ ( Q ) çš„ä¸­é—´åˆ†å¸ƒ ( $M &#x3D; \frac{1}{2}(P + Q)$ )ï¼š</li></ul><p>$$<br>  D_{JS}(P \parallel Q) &#x3D; \frac{1}{2} D_{KL}(P \parallel M) + \frac{1}{2} D_{KL}(Q \parallel M)<br>$$<br>  å–å€¼èŒƒå›´ä¸º ([0, log2])ï¼ˆä»¥2ä¸ºåº•çš„å¯¹æ•°ï¼‰ã€‚</p><ul><li><p><strong>æ€§è´¨</strong>ï¼š</p><ul><li><strong>å¯¹ç§°æ€§</strong> $( D_{JS}(P \parallel Q) &#x3D; D_{JS}(Q \parallel P)$ã€‚</li><li><strong>æœ‰ç•Œæ€§</strong>ï¼šç»“æœå§‹ç»ˆåœ¨ ([0, 1])ï¼ˆè‡ªç„¶å¯¹æ•°æ—¶ ([0, \log 2])ï¼‰ã€‚</li><li><strong>æ»¡è¶³è·ç¦»å…¬ç†</strong>çš„å¼±åŒ–ç‰ˆæœ¬ï¼ˆå¯å¹³æ–¹æ ¹åä½œä¸ºè·ç¦»åº¦é‡ï¼‰ã€‚</li></ul></li><li><p><strong>åº”ç”¨</strong>ï¼š<br>åœ¨GANï¼ˆç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼‰ä¸­ä½œä¸ºæŸå¤±å‡½æ•°ï¼ˆä½†å®é™…ä¸­æ›´å¤šä½¿ç”¨<code>Wasserstein</code>è·ç¦»ï¼‰ã€‚</p></li><li><p><strong>ä¼˜åŠ¿</strong>ï¼š</p><ul><li><strong>é¿å…KLæ•£åº¦çš„ä¸å¯¹ç§°æ€§å’Œæ— å®šä¹‰é—®é¢˜</strong>ã€‚</li><li>å¯¹é‡å åˆ†å¸ƒæ›´é²æ£’ã€‚</li></ul></li></ul><hr><h1 id="3-å…³é”®å¯¹æ¯”"><a href="#3-å…³é”®å¯¹æ¯”" class="headerlink" title="3. å…³é”®å¯¹æ¯”"></a><strong>3. å…³é”®å¯¹æ¯”</strong></h1><table><thead><tr><th>ç‰¹æ€§</th><th>KLæ•£åº¦</th><th>JSæ•£åº¦</th></tr></thead><tbody><tr><td><strong>å¯¹ç§°æ€§</strong></td><td>ä¸å¯¹ç§°</td><td>å¯¹ç§°</td></tr><tr><td><strong>å–å€¼èŒƒå›´</strong></td><td>([0, +$\infty$))</td><td>([0, $\log 2$])</td></tr><tr><td><strong>å®šä¹‰åŸŸè¦æ±‚</strong></td><td>éœ€ ( $Q(x)&#x3D;0 \Rightarrow P(x)&#x3D;0$ )</td><td>å§‹ç»ˆå®šä¹‰è‰¯å¥½</td></tr><tr><td><strong>è®¡ç®—ç¨³å®šæ€§</strong></td><td>å¯èƒ½æ•°å€¼ä¸ç¨³å®š</td><td>æ›´ç¨³å®š</td></tr></tbody></table><hr><h1 id="4-ç›´è§‚ç†è§£"><a href="#4-ç›´è§‚ç†è§£" class="headerlink" title="4. ç›´è§‚ç†è§£"></a>4. ç›´è§‚ç†è§£</h1><ul><li><strong>KLæ•£åº¦</strong>ï¼šç±»ä¼¼äºâ€œç”¨Qç¼–ç Pâ€çš„é¢å¤–ä¿¡æ¯é‡ã€‚</li><li><strong>JSæ•£åº¦</strong>ï¼šå¯¹ç§°åœ°è¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒçš„â€œå¹³å‡å·®å¼‚â€ï¼Œé€šè¿‡ä¸­é—´åˆ†å¸ƒå¹³æ»‘å¤„ç†ã€‚</li></ul><hr><h1 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a><strong>ç¤ºä¾‹</strong></h1><p>å‡è®¾ ( P &#x3D; [0.5, 0.5] )ï¼Œ( Q &#x3D; [0.9, 0.1] )ï¼š</p><ul><li>( $D_{KL}(P \parallel Q) &#x3D; 0.5 \log \frac{0.5}{0.9} + 0.5 \log \frac{0.5}{0.1} \approx 0.693$ )</li><li>( $D_{JS}(P \parallel Q) &#x3D; \frac{1}{2} D_{KL}(P \parallel M) + \frac{1}{2} D_{KL}(Q \parallel M) \approx 0.102 )ï¼ˆå…¶ä¸­ ( M &#x3D; [0.7, 0.3] )$ï¼‰</li></ul><hr><p>æ€»ç»“ï¼šKLæ•£åº¦é€‚åˆéœ€è¦æ–¹å‘æ€§å·®å¼‚çš„åœºæ™¯ï¼ˆå¦‚ç¼–ç ä¼˜åŒ–ï¼‰ï¼Œè€ŒJSæ•£åº¦é€‚åˆå¯¹ç§°æ¯”è¾ƒï¼ˆå¦‚åˆ†å¸ƒç›¸ä¼¼æ€§è¯„ä¼°ï¼‰ã€‚ä¸¤è€…åœ¨æœºå™¨å­¦ä¹ ä¸­å„æœ‰ç”¨é€”ï¼Œä½†éœ€æ³¨æ„å®ƒä»¬çš„å±€é™æ€§ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>æ¦‚ç‡ç»Ÿè®¡</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JSæ•£åº¦</tag>
      
      <tag>æ¦‚ç‡ç»Ÿè®¡</tag>
      
      <tag>KLæ•£åº¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -å¤§æ¨¡å‹è®­ç»ƒ</title>
    <link href="/2025/10/16/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/"/>
    <url>/2025/10/16/%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ 2025ç‰ˆæœ¬å¤§æ¨¡å‹è®­ç»ƒéƒ¨åˆ†æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="å¤§å‹è¯­è¨€æ¨¡å‹ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€"><a href="#å¤§å‹è¯­è¨€æ¨¡å‹ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€" class="headerlink" title="å¤§å‹è¯­è¨€æ¨¡å‹ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€"></a>å¤§å‹è¯­è¨€æ¨¡å‹ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€</h1><p>è¿™ä»½ç¬”è®°æ—¨åœ¨æ¢è®¨å½“å‰å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ä¸»æµçš„ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€(<code>Pretrain</code>-<code>Alignment</code>) å¼€å‘èŒƒå¼ã€‚æˆ‘ä»¬å°†æ·±å…¥äº†è§£é¢„è®­ç»ƒé˜¶æ®µçš„å¼ºå¤§ä¹‹å¤„ï¼Œä»¥åŠå¯¹é½é˜¶æ®µçš„å…³é”®ä½œç”¨ä¸å…¶å†…åœ¨çš„é™åˆ¶ã€‚</p><hr><h2 id="ä»€ä¹ˆæ˜¯ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€èŒƒå¼ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€èŒƒå¼ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€èŒƒå¼ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€èŒƒå¼ï¼Ÿ</h2><p>ç›®å‰ä¸»æµçš„ LLM å¼€å‘æµç¨‹ä¸»è¦åŒ…å«ä¸‰ä¸ªé˜¶æ®µï¼Œå…±åŒæ„æˆäº†ã€Œé¢„è®­ç»ƒ-å¯¹é½ã€èŒƒå¼ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016231717729.png" alt="PixPin_2025-10-16_23-17-12.png"></p><ol><li><p><strong>ç¬¬ä¸€é˜¶æ®µï¼šé¢„è®­ç»ƒ (Pre-training)</strong> </p><ul><li><strong>ç›®æ ‡</strong>ï¼šè®©æ¨¡å‹å­¦ä¹ è¯­è¨€çš„è§„å¾‹ã€äº‹å®çŸ¥è¯†å’Œæ¨ç†èƒ½åŠ›ã€‚</li><li><strong>æ–¹å¼</strong>ï¼šåœ¨æµ·é‡ã€å¤šå…ƒçš„æ–‡æœ¬èµ„æ–™ä¸Šè¿›è¡Œè®­ç»ƒï¼Œé€šå¸¸æ˜¯é¢„æµ‹ä¸‹ä¸€ä¸ªè¯ï¼ˆtokenï¼‰ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ã€Œäººå·¥æ™ºã€ï¼Œæ¨¡å‹è¦èƒ½è¾“å‡ºã€Œæ…§ã€ã€‚ </li><li><strong>ç‰¹æ€§</strong>ï¼šè¿™ä¸ªé˜¶æ®µçš„æ¨¡å‹è™½ç„¶å­¦åˆ°äº†ä¸°å¯Œçš„çŸ¥è¯†ï¼Œä½†é€šå¸¸ä¸éµå¾ªäººç±»çš„æŒ‡ä»¤ï¼Œç›´æ¥ä½¿ç”¨æ—¶å¯èƒ½ç­”éæ‰€é—®æˆ–éš¾ä»¥æ§åˆ¶ã€‚</li></ul></li><li><p><strong>ç¬¬äºŒé˜¶æ®µï¼šæŒ‡ä»¤å¾®è°ƒ (Instruction Fine-tuning)</strong> </p><ul><li><strong>ç›®æ ‡</strong>ï¼šæ•™å¯¼æ¨¡å‹ç†è§£å¹¶éµå¾ªäººç±»çš„æŒ‡ä»¤ï¼Œä½¿å…¶è¡Œä¸ºä¸ä½¿ç”¨è€…å¯¹é½ (Alignment)ã€‚ </li><li><strong>æ–¹å¼</strong>ï¼šä½¿ç”¨é«˜å“è´¨çš„ã€ŒæŒ‡ä»¤-å›ç­”ã€èµ„æ–™å¯¹è¿›è¡Œå¾®è°ƒã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ã€ŒUSER:ä½ æ˜¯è°? AI:ã€ï¼Œæ¨¡å‹éœ€è¦å­¦ä¼šå›ç­”ã€Œæˆ‘ã€ã€‚</li></ul></li><li><p><strong>ç¬¬ä¸‰é˜¶æ®µï¼šäººç±»åé¦ˆçš„å¢å¼ºå­¦ä¹  (RLHF)</strong> </p><ul><li><strong>ç›®æ ‡</strong>ï¼šè¿›ä¸€æ­¥æ ¹æ®äººç±»çš„åå¥½ä¼˜åŒ–æ¨¡å‹çš„è¾“å‡ºï¼Œä½¿å…¶æ›´ç¬¦åˆã€Œæœ‰å¸®åŠ©ã€æ— å®³ã€è¯šå®ã€ç­‰åŸåˆ™ã€‚</li><li><strong>æ–¹å¼</strong>ï¼šè®©äººç±»å¯¹æ¨¡å‹ç”Ÿæˆçš„å¤šä¸ªå›ç­”è¿›è¡Œæ’åºï¼Œè®­ç»ƒä¸€ä¸ªå¥–åŠ±æ¨¡å‹ï¼ˆReward Modelï¼‰ï¼Œå†é€šè¿‡å¼ºåŒ–å­¦ä¹ ï¼ˆRLï¼‰ç®—æ³•æ¥æœ€å¤§åŒ–å¥–åŠ±åˆ†æ•°ã€‚ä¾‹å¦‚ï¼Œå¯¹äºé—®é¢˜ã€Œå°æ¹¾æœ€é«˜çš„å±±æ˜¯å“ªåº§ï¼Ÿã€ï¼Œæ¨¡å‹ç”Ÿæˆçš„ã€Œç‰å±±ã€ä¼šæ¯”ã€Œè°æ¥å‘Šè¯‰æˆ‘å‘€ã€è·å¾—æ›´é«˜çš„åå¥½ã€‚</li></ul></li></ol><hr><h2 id="Alignment-çš„åŠ›é‡ä¸ç‰¹æ€§"><a href="#Alignment-çš„åŠ›é‡ä¸ç‰¹æ€§" class="headerlink" title="Alignment çš„åŠ›é‡ä¸ç‰¹æ€§"></a>Alignment çš„åŠ›é‡ä¸ç‰¹æ€§</h2><p>Alignment è™½ç„¶çœ‹ä¼¼åªæ˜¯å¾®è°ƒï¼Œä½†å®ƒå¯¹æ¨¡å‹çš„æœ€ç»ˆè¡¨ç°æœ‰ç€å†³å®šæ€§çš„å½±å“ï¼Œå¦‚åŒã€Œç”»é¾™ç‚¹ç›ã€ã€‚ </p><p><strong>1. å¯¹é½å‰åçš„å·¨å¤§è¡Œä¸ºå·®å¼‚</strong></p><ul><li><strong>é¢„è®­ç»ƒæ¨¡å‹</strong>ï¼šä»¥ LLaMA-2-7b-base ä¸ºä¾‹ï¼Œå½“è¢«é—®åŠã€ŒWhat is Machine Learning?ã€ï¼Œå®ƒä¼šåƒç½‘ç»œæ–‡ç« ä¸€æ ·ç»­å†™ï¼Œå†…å®¹æ­£ç¡®ä½†æ ¼å¼ä¸åƒæ˜¯å¯¹è¯ã€‚ </li><li><strong>å¯¹é½åæ¨¡å‹</strong>ï¼šä»¥ LLaMA-2-7b-chat ä¸ºä¾‹ï¼ŒåŒæ ·çš„é—®é¢˜ï¼Œå®ƒä¼šç»™å‡ºç»“æ„åŒ–ã€æ¸…æ™°ä¸”åƒæ˜¯åŠ©æ‰‹åœ¨å›ç­”é—®é¢˜çš„ç­”æ¡ˆã€‚</li></ul><p><strong>2. Alignment çš„å…³é”®ï¼šèµ„æ–™å“è´¨è¿œèƒœäºæ•°é‡</strong></p><ul><li><strong>LLaMA 2 çš„ç»éªŒ</strong>ï¼šç ”ç©¶å‘ç°ï¼Œä½¿ç”¨æ•°ä¸‡ç¬”é«˜å“è´¨ã€ç”±äººå·¥æ ‡æ³¨çš„ SFT (Supervised Fine-tuning) èµ„æ–™ï¼Œæ•ˆæœè¿œèƒœäºä½¿ç”¨æ•°ç™¾ä¸‡ç¬”å“è´¨å‚å·®ä¸é½çš„ç¬¬ä¸‰æ–¹èµ„æ–™ã€‚LLaMA 2 æœ€ç»ˆä»…ç”¨äº† 27,540 ç¬” SFT èµ„æ–™å°±è¾¾åˆ°äº†é«˜å“è´¨çš„ç»“æœã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2307.09288">https://arxiv.org/abs/2307.09288</a></li></ul></li><li><strong>LIMA çš„å¯ç¤º</strong>ï¼š(â€œLess Is Moreâ€) å¦ä¸€é¡¹ç ”ç©¶ LIMA ä»…ç”¨ 1,000 ä¸ªç²¾å¿ƒæŒ‘é€‰çš„èŒƒä¾‹è¿›è¡Œå¾®è°ƒï¼Œå°±è¾¾åˆ°äº†æƒŠäººçš„æ•ˆæœã€‚è¿™è¯æ˜äº†åªè¦å¯¹é½èµ„æ–™çš„å“è´¨è¶³å¤Ÿé«˜ã€é£æ ¼è¶³å¤Ÿå¤šæ ·ï¼Œæ¨¡å‹å°±èƒ½å­¦ä¼šæ³›åŒ–åˆ°å„ç§æœªè§çš„æŒ‡ä»¤ç±»å‹ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2305.11206">https://arxiv.org/abs/2305.11206</a></li></ul></li></ul><p><strong>3. å¯¹é½èµ„æ–™çš„æ¥æºä¸å½±å“</strong></p><p>å¯¹é½èµ„æ–™çš„æ¥æºï¼ˆDomainï¼‰å¯¹æ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸçš„è¡¨ç°æœ‰æ˜¾è‘—å½±å“ã€‚ã€Œç‚¹ç›ã€çš„ä½ç½®éå¸¸é‡è¦ã€‚ </p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016231814302.png" alt="PixPin_2025-10-16_23-18-03.png"></p><ul><li>ä»è¡¨æ ¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„é«˜å“è´¨èµ„æ–™ï¼ˆå¦‚ Ruozhibaï¼Œå¼±æ™ºå§ï¼‰èƒ½å¤§å¹…æå‡æ¨¡å‹åœ¨ç›¸åº”èƒ½åŠ›ï¼ˆå¦‚æ•°å­¦ã€é€»è¾‘ï¼‰ä¸Šçš„è¡¨ç°ï¼Œå³ä½¿èµ„æ–™é‡éå¸¸å°‘ï¼ˆä»… 240 ç¬”ï¼‰ã€‚ </li><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2403.18058">https://arxiv.org/abs/2403.18058</a></li></ul><hr><h2 id="Alignment-çš„é«˜æ•ˆå®è·µæ–¹æ³•"><a href="#Alignment-çš„é«˜æ•ˆå®è·µæ–¹æ³•" class="headerlink" title="Alignment çš„é«˜æ•ˆå®è·µæ–¹æ³•"></a>Alignment çš„é«˜æ•ˆå®è·µæ–¹æ³•</h2><p>é‰´äºé«˜å“è´¨äººå·¥æ ‡æ³¨èµ„æ–™çš„æ˜‚è´µï¼Œç¤¾ç¾¤å‘å±•å‡ºå¤šç§é«˜æ•ˆçš„å¯¹é½æ–¹æ³•ã€‚</p><p><strong>1. çŸ¥è¯†è’¸é¦ (Knowledge Distillation)</strong></p><ul><li><strong>æ¦‚å¿µ</strong>ï¼šä½¿ç”¨ä¸€ä¸ªå¼ºå¤§çš„ã€å·²ç»å¯¹é½å¥½çš„ã€Œè€å¸ˆæ¨¡å‹ã€ï¼ˆå¦‚ ChatGPTã€Geminiï¼‰æ¥äº§ç”Ÿå¤§é‡çš„ã€ŒæŒ‡ä»¤-å›ç­”ã€èµ„æ–™ï¼Œå†ç”¨è¿™äº›èµ„æ–™å»å¾®è°ƒè‡ªå·±çš„ã€Œå­¦ç”Ÿæ¨¡å‹ã€ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016231901532.png" alt="PixPin_2025-10-16_23-18-57.png"></p><ul><li><strong>AlpaGasus</strong>ï¼šæ­¤æ–¹æ³•è¿›ä¸€æ­¥æå‡ºï¼Œå¯ä»¥ç”¨è€å¸ˆæ¨¡å‹ï¼ˆå¦‚ ChatGPTï¼‰ä½œä¸ºã€Œå“è´¨è¯„ä¼°å‘˜ã€ï¼Œè¿‡æ»¤æ‰å“è´¨ä¸ä½³çš„è’¸é¦èµ„æ–™ï¼Œä»è€Œå®ç°ç”¨æ›´å°‘çš„èµ„æ–™ã€æ›´å¿«çš„è®­ç»ƒï¼Œè¾¾åˆ°æ›´å¼ºçš„æ€§èƒ½ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2307.08701">https://arxiv.org/abs/2307.08701</a></li></ul></li></ul><p><strong>2. éæŒ‡ä»¤å¼å¾®è°ƒ (Non-instructional Fine-tuning)</strong></p><ul><li><strong>æ¦‚å¿µ</strong>ï¼šè¿™æ˜¯ä¸€ç§åˆ›æ–°çš„è’¸é¦æ–¹æ³•ï¼Œä¸ç›´æ¥å¤åˆ¶é—®ç­”å¯¹ã€‚è€Œæ˜¯ä»ä»»æ„æ–‡æœ¬ä¸­å–å‰åŠå¥ï¼Œè®©è€å¸ˆæ¨¡å‹ç»­å†™ååŠå¥ï¼Œç„¶åè®­ç»ƒå­¦ç”Ÿæ¨¡å‹å»æ¨¡ä»¿è€å¸ˆæ¨¡å‹çš„ç»­å†™é£æ ¼å’ŒçŸ¥è¯†ã€‚è¿™ç§æ–¹æ³•éšæ€§åœ°ä¼ é€’äº†è€å¸ˆæ¨¡å‹çš„ã€Œä¸–ç•Œæ¨¡å‹ã€ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2409.00096">https://arxiv.org/abs/2409.00096</a></li></ul></li></ul><p><strong>3. Alignment çœŸçš„å¾ˆç®€å•å—ï¼Ÿæ–°è§‚ç‚¹çš„æ¶Œç°</strong></p><p>ç ”ç©¶è¡¨æ˜ï¼ŒLLM åœ¨é¢„è®­ç»ƒé˜¶æ®µå¯èƒ½å·²ç»å…·å¤‡äº†éµå¾ªæŒ‡ä»¤çš„èƒ½åŠ›ï¼Œåªæ˜¯éœ€è¦è¢«ã€Œè§£é”ã€ã€‚</p><ul><li><p><strong>æ¨¡å‹è¡Œä¸ºå·®å¼‚çš„çœŸç›¸</strong>ï¼šç ”ç©¶ã€ŠThe Unlocking Spell on Base LLMsã€‹å‘ç°ï¼Œå¯¹é½å‰åçš„æ¨¡å‹åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé¢„æµ‹ä¸‹ä¸€ä¸ªè¯çš„æ¦‚ç‡åˆ†å¸ƒæ˜¯ç›¸ä¼¼çš„ (Unshifted)ã€‚åªæœ‰åœ¨å°‘æ•°å…³é”®è¯ï¼ˆå¦‚å¯¹è¯å¼€å¤´çš„ â€œSureâ€, â€œHelloâ€ ç­‰ï¼‰ä¸Šï¼Œæ¦‚ç‡åˆ†å¸ƒè¢«æ˜¾è‘—æ”¹å˜ (Shifted)ã€‚è¿™æ„å‘³ç€ Alignment æ›´åƒæ˜¯åœ¨å¼•å¯¼æ¨¡å‹ä½¿ç”¨å®ƒå·²æœ‰çš„çŸ¥è¯†ï¼Œè€Œä¸æ˜¯æ•™å®ƒæ–°çŸ¥è¯†ã€‚ </p><ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2312.01552">https://arxiv.org/abs/2312.01552</a></li></ul></li><li><p><strong>Response Tuning</strong>ï¼šä¸ä¼ ç»Ÿçš„ã€ŒæŒ‡ä»¤å¾®è°ƒã€(Instruction Tuning) ä¸åŒï¼ŒRT åªè®¡ç®—ã€Œå›ç­”ã€éƒ¨åˆ†çš„æŸå¤±ï¼Œè€Œä¸è®¡ç®—ã€ŒæŒ‡ä»¤ã€éƒ¨åˆ†çš„æŸå¤±ã€‚å®éªŒè¡¨æ˜ï¼ŒRT çš„æ•ˆæœä¸ IT ç›¸å½“ï¼Œç”šè‡³æ›´å¥½ã€‚è¿™å†æ¬¡ä½è¯äº†æ¨¡å‹åœ¨é¢„è®­ç»ƒåå·²èƒ½ç†è§£æŒ‡ä»¤ï¼Œå¾®è°ƒçš„é‡ç‚¹æ˜¯æ•™ä¼šå®ƒå¦‚ä½•å›ç­”ã€‚ </p><ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2410.02465v2">https://arxiv.org/abs/2410.02465v2</a></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232036558.png" alt="PixPin_2025-10-16_23-20-33.png"></p><ul><li><p><strong>æ— éœ€å¾®è°ƒçš„æŒ‡ä»¤éµå¾ª</strong>ï¼šæ›´æœ‰ç”šè€…ï¼Œç ”ç©¶å‘ç°ä»…é€šè¿‡è®¾è®¡ç®€å•çš„ã€Œè§„åˆ™é€‚é…å™¨ã€(Rule-Based Adapter) æ¥ä¿®æ”¹è¯æ±‡çš„è¾“å‡ºæ¦‚ç‡ï¼Œå°±å¯ä»¥è®©ä¸€ä¸ªé¢„è®­ç»ƒæ¨¡å‹åœ¨æ²¡æœ‰ä»»ä½•å¾®è°ƒçš„æƒ…å†µä¸‹éµå¾ªæŒ‡ä»¤ã€‚ </p><ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2409.14254">https://arxiv.org/abs/2409.14254</a></li></ul></li><li><p><strong>Self-Alignment</strong>ï¼šä¸Šè¿°å‘ç°è§£é‡Šäº†ä¸ºä½•æ¨¡å‹å¯ä»¥ã€Œè‡ªæˆ‘å¯¹é½ã€ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæœªç»å¯¹é½çš„æ¨¡å‹å¯ä»¥å…ˆç”Ÿæˆå¤šä¸ªå€™é€‰ç­”æ¡ˆï¼Œç„¶åå†æ ¹æ®ç»™å®šçš„è¯„åˆ†æŒ‡ç¤ºï¼Œè‡ªå·±è¯„ä¼°å“ªä¸ªç­”æ¡ˆæœ€å¥½ï¼Œä»è€Œå®ç°å¯¹é½ã€‚ </p><ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2401.10020">https://arxiv.org/abs/2401.10020</a></li></ul></li></ul><hr><h2 id="Pretrain-çš„å¨åŠ›ä¸æé™"><a href="#Pretrain-çš„å¨åŠ›ä¸æé™" class="headerlink" title="Pretrain çš„å¨åŠ›ä¸æé™"></a>Pretrain çš„å¨åŠ›ä¸æé™</h2><p>æ—¢ç„¶ Alignment åªæ˜¯ã€Œç‚¹ç›ã€ï¼Œé‚£ä¹ˆ LLM çš„çœŸæ­£å¨åŠ›æ¥æºäº Pretrain é˜¶æ®µã€‚</p><ol><li><strong>Pretrain çš„åŠ›é‡æºæ³‰ï¼šèµ„æ–™çš„å¤šæ ·æ€§</strong></li></ol><ul><li><strong>å…³é”®åœ¨äºæ”¹å†™</strong>ï¼š<code>Paraphrasing</code> å®éªŒè¯æ˜ï¼Œå¦‚æœé¢„è®­ç»ƒèµ„æ–™ä¸­åªåŒ…å«å•ä¸€å½¢å¼çš„é™ˆè¿°ï¼ˆä¾‹å¦‚ã€ŒAæ˜¯Bã€ï¼‰ï¼Œå³ä½¿åœ¨å¯¹é½é˜¶æ®µå­¦ä¹ äº†é—®ç­”æ ¼å¼ï¼Œæ¨¡å‹ä¹Ÿæ— æ³•å›ç­”å…³äºè¿™äº›çŸ¥è¯†çš„é—®é¢˜ã€‚ç„¶è€Œï¼Œå¦‚æœåœ¨é¢„è®­ç»ƒèµ„æ–™ä¸­åŠ å…¥åŒä¸€çŸ¥è¯†çš„å¤šç§ä¸åŒè¡¨è¿°æ–¹å¼ï¼ˆæ”¹å†™ï¼‰ï¼Œæ¨¡å‹å°±èƒ½å­¦ä¼šçŸ¥è¯†çš„æŠ½è±¡è¡¨ç¤ºï¼Œå¹¶èƒ½æ³›åŒ–åˆ°é—®ç­”ä»»åŠ¡ä¸Šï¼Œå‡†ç¡®ç‡ä» 0% è·ƒå‡è‡³ 96%ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232220384.png" alt="PixPin_2025-10-16_23-22-16.png"></p><ul><li><strong>ç»“è®º</strong>ï¼šé¢„è®­ç»ƒé˜¶æ®µçœ‹è¿‡å¤§é‡ã€å„å¼å„æ ·çš„èµ„æ–™æ˜¯æ¨¡å‹èƒ½åŠ›çš„æ ¸å¿ƒã€‚ </li><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2309.14316">https://arxiv.org/abs/2309.14316</a></li></ul><p><strong>2. é¢„è®­ç»ƒèµ„æ–™çš„è§„æ¨¡ä¸å“è´¨</strong></p><ul><li><strong>è§„æ¨¡</strong>ï¼šå½“å‰é¡¶å°–æ¨¡å‹çš„é¢„è®­ç»ƒèµ„æ–™é‡æä¸ºåºå¤§ã€‚ä¾‹å¦‚ï¼ŒLLaMA 3 ä½¿ç”¨äº†çº¦ 15T tokensï¼ŒDeepSeek-V3 ä½¿ç”¨äº† 14.8T tokensã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡ (LLAMA 3)</em>: <a href="https://arxiv.org/abs/2407.21783">https://arxiv.org/abs/2407.21783</a></li></ul></li><li><strong>å“è´¨</strong>ï¼šèµ„æ–™å“è´¨è‡³å…³é‡è¦ã€‚é«˜å“è´¨çš„èµ„æ–™å¯ä»¥è®©æ¨¡å‹ç”¨æ›´å°‘çš„ tokens è¾¾åˆ°æ›´é«˜çš„æ€§èƒ½ã€‚ä¾‹å¦‚ï¼Œç ”ç©¶æ˜¾ç¤ºä½¿ç”¨ç»è¿‡ç²¾å¿ƒè¿‡æ»¤å’Œåˆæˆçš„æ•°æ®é›†ï¼ˆå¦‚ phi-1ï¼‰ï¼Œä¸€ä¸ªè¾ƒå°çš„æ¨¡å‹ï¼ˆ350Mï¼‰å¯ä»¥è¶…è¶Šåœ¨æ›´å¤šã€ä½†å“è´¨è¾ƒæ‚ä¹±çš„èµ„æ–™ä¸Šè®­ç»ƒçš„æ›´å¤§æ¨¡å‹ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2306.11644">https://arxiv.org/abs/2306.11644</a></li></ul></li><li><strong>èµ„æ–™ä¸æ¨¡å‹çš„æƒè¡¡</strong>ï¼šåœ¨æœ‰é™çš„ç®—åŠ›ä¸‹ï¼Œå¹¶éèµ„æ–™è¶Šå¤šè¶Šå¥½ã€‚å› ä¸ºä½¿ç”¨è¿‡å¤šèµ„æ–™æ„å‘³ç€æ¨¡å‹éœ€è¦ç¼©å°ã€‚ç ”ç©¶è¡¨æ˜ï¼Œæ¨¡å‹å¤§å°å’Œèµ„æ–™é‡ä¹‹é—´å­˜åœ¨ä¸€ä¸ªæœ€ä½³çš„å¹³è¡¡ç‚¹ï¼Œä»¥è¾¾åˆ°æœ€ä½çš„è®­ç»ƒæŸå¤±ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2203.15556">https://arxiv.org/abs/2203.15556</a></li></ul></li></ul><hr><h2 id="Alignment-çš„æé™ä¸æŒ‘æˆ˜"><a href="#Alignment-çš„æé™ä¸æŒ‘æˆ˜" class="headerlink" title="Alignment çš„æé™ä¸æŒ‘æˆ˜"></a>Alignment çš„æé™ä¸æŒ‘æˆ˜</h2><p>å°½ç®¡ Alignment å¾ˆå¼ºå¤§ï¼Œä½†å®ƒå¹¶éä¸‡èƒ½ï¼Œå­˜åœ¨å…¶å›ºæœ‰çš„æé™ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232251532.png" alt="PixPin_2025-10-16_23-22-47.png"></p><p><strong>1. éš¾ä»¥å­¦ä¹ æ–°çŸ¥è¯†ï¼Œåªä¼šå¼ºåŒ–å·²çŸ¥</strong></p><ul><li><strong>æ¨¡ä»¿çš„è™šå‡æ‰¿è¯º</strong>ï¼šç ”ç©¶å‘ç°ï¼Œé€šè¿‡çŸ¥è¯†è’¸é¦å¾®è°ƒçš„æ¨¡å‹ï¼ˆImitation Modelï¼‰è™½ç„¶èƒ½æ¨¡ä»¿è€å¸ˆæ¨¡å‹çš„é£æ ¼ï¼Œä½†åœ¨å›ç­”äº‹å®æ€§é—®é¢˜æ—¶ï¼Œå¾ˆå®¹æ˜“äº§ç”Ÿã€Œå¹»è§‰ã€æˆ–äº‹å®æ€§é”™è¯¯ã€‚è¿™è¡¨æ˜æ¨¡å‹åªæ˜¯åœ¨å¼ºåŒ–å’Œé‡æ–°ç»„ç»‡å®ƒåœ¨é¢„è®­ç»ƒé˜¶æ®µå·²ç»å­¦åˆ°çš„çŸ¥è¯†ï¼Œè€Œä¸æ˜¯çœŸæ­£å­¦ä¼šè€å¸ˆæ¨¡å‹çš„æ–°çŸ¥è¯†ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2305.15717">https://arxiv.org/abs/2305.15717</a></li></ul></li><li><strong>çŸ¥è¯†çš„è¾¹ç•Œ</strong>ï¼šç ”ç©¶å°†çŸ¥è¯†åˆ†ä¸ºã€Œå·²çŸ¥ã€(Known) åˆ°ã€ŒæœªçŸ¥ã€(Unknown) å››ä¸ªå±‚æ¬¡ã€‚ç»“æœæ˜¾ç¤ºï¼Œå¾®è°ƒå¯¹ã€ŒMaybe Knownã€ï¼ˆæ¨¡å‹å¯èƒ½çŸ¥é“ä½†ä¸ç¡®å®šï¼‰çš„çŸ¥è¯†æœ€æœ‰å¸®åŠ©ã€‚å¯¹äºæ¨¡å‹å®Œå…¨ä¸çŸ¥é“çš„ã€ŒUnknownã€çŸ¥è¯†ï¼Œå¾®è°ƒå‡ ä¹æ²¡æœ‰æ•ˆæœï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å¯¼è‡´åœ¨å·²çŸ¥çŸ¥è¯†ä¸Šçš„è¿‡æ‹Ÿåˆã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2405.05904">https://arxiv.org/abs/2405.05904</a></li></ul></li></ul><p><strong>2. é¢„è®­ç»ƒçš„åé—ç—‡ï¼šéš¾ä»¥æ ¹é™¤çš„åè§</strong></p><ul><li><strong>Shift Ciphers æ¡ˆä¾‹</strong>ï¼šGPT-4 å¯ä»¥è½»æ˜“è§£å¼€ ROT-13 åŠ å¯†ï¼Œä½†æ— æ³•è§£å¼€åŒæ ·ç®€å•çš„ ROT-8 åŠ å¯†ã€‚ åŸå› æ˜¯ ROT-13 åœ¨å…¶é¢„è®­ç»ƒæ•°æ®é›† (C4) ä¸­å‡ºç°äº† 1225 æ¬¡ï¼Œè€Œå…¶ä»– ROT ç±»å‹åˆ™å‡ ä¹æ²¡æœ‰å‡ºç°ã€‚æ¨¡å‹å­¦åˆ°çš„æ˜¯ç‰¹å®šæ¨¡å¼çš„æ˜ å°„ï¼Œè€Œä¸æ˜¯é€šç”¨çš„è§£å¯†é€»è¾‘ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2309.13638">https://arxiv.org/abs/2309.13638</a></li></ul></li><li><strong>æœ‰å®³å†…å®¹çš„æ®‹ç•™</strong>ï¼šå³ä½¿ç»è¿‡å¯¹é½ï¼ˆå¦‚ DPOï¼‰æ¥æŠ‘åˆ¶æœ‰å®³å†…å®¹çš„è¾“å‡ºï¼Œæ¨¡å‹å†…éƒ¨å¯¹åº”æœ‰å®³æ¦‚å¿µçš„ç¥ç»å…ƒï¼ˆMLPæ¿€æ´»ï¼‰ä»ç„¶å­˜åœ¨ã€‚å¯¹é½åªæ˜¯å­¦ä¼šäº†ã€ŒæŠ‘åˆ¶ã€è¿™äº›æ¿€æ´»çš„è¡¨è¾¾ï¼Œè€Œä¸æ˜¯çœŸæ­£åœ°ã€Œé—å¿˜ã€æˆ–ã€Œæ¸…é™¤ã€å®ƒä»¬ã€‚è¿™æ„å‘³ç€åœ¨ç‰¹å®šæ¡ä»¶ä¸‹ï¼Œè¿™äº›æ½œåœ¨çš„æœ‰å®³è¡Œä¸ºä»å¯èƒ½è¢«è§¦å‘ã€‚ <ul><li><em>ç›¸å…³è®ºæ–‡</em>: <a href="https://arxiv.org/abs/2401.01967">https://arxiv.org/abs/2401.01967</a></li></ul></li></ul><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ol><li><strong>Pretrain-Alignment èŒƒå¼éå¸¸å¼ºå¤§</strong>ï¼šè¿™æ˜¯å½“å‰æ‰“é€ é€šç”¨è¯­è¨€æ¨¡å‹æœ€æˆåŠŸçš„è·¯å¾„ã€‚ </li><li><strong>Pretrain æ˜¯åŸºç¡€ï¼ŒAlignment æ˜¯ç‚¹ç›</strong>ï¼šLLM çš„æ ¸å¿ƒèƒ½åŠ›ï¼ˆçŸ¥è¯†ã€æ¨ç†ï¼‰æ¥è‡ªäºåœ¨æµ·é‡ã€å¤šæ ·åŒ–èµ„æ–™ä¸Šçš„é¢„è®­ç»ƒã€‚Alignment åˆ™è´Ÿè´£å°†è¿™äº›æ½œåœ¨èƒ½åŠ›å¼•å¯¼å‡ºæ¥ï¼Œä½¿å…¶ç¬¦åˆäººç±»çš„æœŸæœ›å’ŒæŒ‡ä»¤ã€‚ </li><li><strong>Alignment çš„æé™</strong>ï¼šAlignment éš¾ä»¥è®©æ¨¡å‹å­¦ä¹ å…¨æ–°çš„æŠ€èƒ½æˆ–çŸ¥è¯†ï¼Œå®ƒæ›´å¤šæ˜¯å¼ºåŒ–å’Œå¡‘é€ æ¨¡å‹å·²æœ‰çš„èƒ½åŠ›ã€‚åŒæ—¶ï¼Œé¢„è®­ç»ƒé˜¶æ®µå­¦åˆ°çš„åè§å’Œæœ‰å®³çŸ¥è¯†å¾ˆéš¾è¢«å½»åº•æ¸…é™¤ï¼ŒAlignment åªæ˜¯æˆ´ä¸Šäº†ä¸€å±‚é¢å…·ã€‚</li></ol><h1 id="å¤§æ¨¡å‹åè®­ç»ƒ"><a href="#å¤§æ¨¡å‹åè®­ç»ƒ" class="headerlink" title="å¤§æ¨¡å‹åè®­ç»ƒ"></a>å¤§æ¨¡å‹åè®­ç»ƒ</h1><h2 id="ä»€ä¹ˆæ˜¯åè®­ç»ƒï¼ˆPost-Trainingï¼‰ä¸ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic-Forgettingï¼‰"><a href="#ä»€ä¹ˆæ˜¯åè®­ç»ƒï¼ˆPost-Trainingï¼‰ä¸ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic-Forgettingï¼‰" class="headerlink" title="ä»€ä¹ˆæ˜¯åè®­ç»ƒï¼ˆPost-Trainingï¼‰ä¸ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic Forgettingï¼‰"></a>ä»€ä¹ˆæ˜¯åè®­ç»ƒï¼ˆPost-Trainingï¼‰ä¸ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic Forgettingï¼‰</h2><h3 id="1-åè®­ç»ƒçš„æ¦‚å¿µ"><a href="#1-åè®­ç»ƒçš„æ¦‚å¿µ" class="headerlink" title="1. åè®­ç»ƒçš„æ¦‚å¿µ"></a>1. åè®­ç»ƒçš„æ¦‚å¿µ</h3><p>åœ¨é€šç”¨å¤§æ¨¡å‹æ—¶ä»£ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåŸºäºä¸€ä¸ªå¼ºå¤§çš„<strong>åŸºç¡€æ¨¡å‹ï¼ˆFoundation Modelï¼‰</strong>ï¼Œé€šè¿‡<strong>åè®­ç»ƒï¼ˆPost-Trainingï¼‰çš„æ–¹å¼ï¼Œå°†å…¶è°ƒæ•™æˆä¸€ä¸ªæ“…é•¿ç‰¹å®šä»»åŠ¡çš„</strong>å¾®è°ƒæ¨¡å‹ï¼ˆFine-tuned Modelï¼‰**ã€‚</p><ul><li><p><strong>åŸºç¡€æ¨¡å‹</strong>ï¼šä¹Ÿç§°ä¸ºé¢„è®­ç»ƒæ¨¡å‹ï¼ˆPre-trained Modelï¼‰æˆ–åŸºåº§æ¨¡å‹ï¼ˆBase Modelï¼‰ï¼Œæ‹¥æœ‰å¹¿æ³›çš„é€šç”¨çŸ¥è¯†ã€‚</p></li><li><p><strong>åè®­ç»ƒ</strong>ï¼šä¸€ä¸ªæŒç»­å­¦ä¹ ï¼ˆContinual Learningï¼‰å’Œå¯¹é½ï¼ˆAlignmentï¼‰çš„è¿‡ç¨‹ï¼Œç›®çš„æ˜¯è®©æ¨¡å‹æŒæ¡æ–°çŸ¥è¯†æˆ–æ–°èƒ½åŠ›ã€‚</p></li><li><p><strong>å¾®è°ƒæ¨¡å‹</strong>ï¼šç»è¿‡åè®­ç»ƒï¼Œä¸“æ³¨äºç‰¹å®šé¢†åŸŸï¼ˆå¦‚èŠå¤©ã€æŒ‡ä»¤è·Ÿéšæˆ–ç‰¹å®šä¸“ä¸šï¼‰çš„æ¨¡å‹ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232335518.png" alt="PixPin_2025-10-16_23-23-31.png"></p><p>åè®­ç»ƒä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§æŠ€æœ¯é£æ ¼ï¼š</p><ul><li><p><strong>é¢„è®­ç»ƒé£æ ¼ï¼ˆPre-train Styleï¼‰</strong>ï¼šç»§ç»­ç”¨çº¯æ–‡æœ¬è¿›è¡Œè®­ç»ƒï¼Œå¢å¼ºæ¨¡å‹åœ¨ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†ã€‚</p></li><li><p><strong>ç›‘ç£å¾®è°ƒé£æ ¼ï¼ˆSFT Styleï¼‰</strong>ï¼šä½¿ç”¨â€œæŒ‡ä»¤-å›ç­”â€æ ¼å¼çš„æ•°æ®å¯¹è¿›è¡Œå¾®è°ƒã€‚</p></li><li><p><strong>å¼ºåŒ–å­¦ä¹ é£æ ¼ï¼ˆRL Styleï¼‰</strong>ï¼šä½¿ç”¨å¼ºåŒ–å­¦ä¹ ï¼ˆå¦‚<code>RLHF</code>ï¼‰è®©æ¨¡å‹çš„å›ç­”æ›´ç¬¦åˆäººç±»åå¥½ã€‚</p></li></ul><h3 id="2-ç¾éš¾æ€§é—å¿˜çš„é—®é¢˜"><a href="#2-ç¾éš¾æ€§é—å¿˜çš„é—®é¢˜" class="headerlink" title="2. ç¾éš¾æ€§é—å¿˜çš„é—®é¢˜"></a>2. ç¾éš¾æ€§é—å¿˜çš„é—®é¢˜</h3><p>åè®­ç»ƒçš„æ ¸å¿ƒæŒ‘æˆ˜æ˜¯<strong>ç¾éš¾æ€§é—å¿˜ï¼ˆCatastrophic Forgettingï¼‰</strong>ã€‚å½“æ¨¡å‹ä¸“æ³¨äºå­¦ä¹ æ–°çŸ¥è¯†æ—¶ï¼Œå®ƒå¯èƒ½ä¼šæˆå‰§æ€§åœ°å¿˜è®°åŸæœ‰çš„é€šç”¨èƒ½åŠ›æˆ–é‡è¦ç‰¹æ€§ï¼ˆæ¯”å¦‚å®‰å…¨æ€§å¯¹é½ï¼‰ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232358337.png" alt="PixPin_2025-10-16_23-23-54.png"></p><p>è¿™å°±åƒæ˜¯â€œ<strong>æ‰‹æœ¯æˆåŠŸäº†ï¼Œä½†ç—…äººå´æ­»äº†</strong>â€â€”â€”æ¨¡å‹å­¦ä¼šäº†ç¼–ç¨‹ï¼Œå´å¿˜è®°äº†è¯­æ–‡ã€æ•°å­¦ã€ç‰©ç†ã€åŒ–å­¦ç­‰å…¶ä»–æ‰€æœ‰çŸ¥è¯†ã€‚</p><h2 id="ç¾éš¾æ€§é—å¿˜çš„å®é™…æ¡ˆä¾‹"><a href="#ç¾éš¾æ€§é—å¿˜çš„å®é™…æ¡ˆä¾‹" class="headerlink" title="ç¾éš¾æ€§é—å¿˜çš„å®é™…æ¡ˆä¾‹"></a>ç¾éš¾æ€§é—å¿˜çš„å®é™…æ¡ˆä¾‹</h2><h3 id="æ¡ˆä¾‹ä¸€ï¼šæ•™-LLaMA-2-Chat-å­¦ä¸­æ–‡"><a href="#æ¡ˆä¾‹ä¸€ï¼šæ•™-LLaMA-2-Chat-å­¦ä¸­æ–‡" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼šæ•™ LLaMA-2-Chat å­¦ä¸­æ–‡"></a>æ¡ˆä¾‹ä¸€ï¼šæ•™ LLaMA-2-Chat å­¦ä¸­æ–‡</h3><ul><li><p><strong>è®ºæ–‡</strong>ï¼š<em>Examining Forgetting in Continual Pre-training of Aligned Large Language Models</em> (<a href="https://arxiv.org/abs/2401.03129">https://arxiv.org/abs/2401.03129</a>)</p></li><li><p><strong>èƒŒæ™¯</strong>ï¼šLLaMA-2-Chat ä¸»è¦ç”¨è‹±æ–‡æ•°æ®è®­ç»ƒï¼Œå¹¶ä¸”ç»è¿‡äº†å®‰å…¨å¯¹é½ï¼Œä½¿å…¶ä¸ä¼šå›ç­”æœ‰å®³é—®é¢˜ã€‚</p></li><li><p><strong>æ“ä½œ</strong>ï¼šç ”ç©¶äººå‘˜ä½¿ç”¨ä¸­æ–‡æ•°æ®å¯¹ LLaMA-2-Chat è¿›è¡Œåè®­ç»ƒï¼Œå¸Œæœ›å®ƒèƒ½æ›´å¥½åœ°ä½¿ç”¨ä¸­æ–‡ã€‚</p></li><li><p><strong>ç»“æœ</strong>ï¼š</p><ul><li><strong>å¥½çš„æ–¹é¢</strong>ï¼šæ¨¡å‹å­¦ä¼šäº†ç”¨ä¸­æ–‡å›ç­”é—®é¢˜ã€‚</li><li><strong>ç¾éš¾æ€§é—å¿˜</strong>ï¼šæ¨¡å‹å¿˜è®°äº†ä¹‹å‰çš„<strong>å®‰å…¨å¯¹é½</strong>ã€‚å½“è¢«é—®åŠâ€œå¦‚ä½•è·å–é“¶è¡Œç³»ç»Ÿçš„æ–°å¯†ç ï¼Ÿâ€æ—¶ï¼š<ul><li><strong>åŸå§‹æ¨¡å‹ï¼ˆè‹±æ–‡å›ç­”ï¼‰</strong>ï¼šæ‹’ç»å›ç­”ï¼Œå¹¶å¼ºè°ƒå®‰å…¨çš„é‡è¦æ€§ã€‚</li><li><strong>åè®­ç»ƒæ¨¡å‹ï¼ˆä¸­æ–‡å›ç­”ï¼‰</strong>ï¼šå¼€å§‹æä¾›å…·ä½“çš„æ”»å‡»æ–¹æ³•å»ºè®®ã€‚</li></ul></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232445850.png" alt="PixPin_2025-10-16_23-24-41.png"></p><h3 id="æ¡ˆä¾‹äºŒï¼šå¾®è°ƒå¯¼è‡´å®‰å…¨å¯¹é½å¤±æ•ˆ"><a href="#æ¡ˆä¾‹äºŒï¼šå¾®è°ƒå¯¼è‡´å®‰å…¨å¯¹é½å¤±æ•ˆ" class="headerlink" title="æ¡ˆä¾‹äºŒï¼šå¾®è°ƒå¯¼è‡´å®‰å…¨å¯¹é½å¤±æ•ˆ"></a>æ¡ˆä¾‹äºŒï¼šå¾®è°ƒå¯¼è‡´å®‰å…¨å¯¹é½å¤±æ•ˆ</h3><ul><li><p><strong>è®ºæ–‡</strong>ï¼š<em>Fine-tuning Aligned Language Models Compromises Safety, Even When Users Do Not Intend To!</em> (<a href="https://arxiv.org/abs/2310.03693">https://arxiv.org/abs/2310.03693</a>)</p></li><li><p><strong>å‘ç°</strong>ï¼šç ”ç©¶è¡¨æ˜ï¼Œå³ä½¿ä½¿ç”¨å®Œå…¨è‰¯æ€§ã€æ— å®³çš„æ•°æ®é›†ï¼ˆå¦‚Alpacaï¼‰å¯¹ä¸€ä¸ªå·²ç»å®‰å…¨å¯¹é½çš„æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œæ¨¡å‹çš„å®‰å…¨æ€§èƒ½ä¹Ÿä¼šå¤§å¹…ä¸‹é™ã€‚</p></li><li><p><strong>ç»“è®º</strong>ï¼šå¾®è°ƒè¿‡ç¨‹æœ¬èº«å°±ä¼šæŸå®³æ¨¡å‹çš„å®‰å…¨å¯¹é½ï¼Œæ— è®ºå¾®è°ƒæ•°æ®çš„æ„å›¾å¦‚ä½•ã€‚</p></li></ul><h3 id="æ¡ˆä¾‹ä¸‰ï¼šæ•™-LLaMA-å­¦ä¹ å¬å£°éŸ³"><a href="#æ¡ˆä¾‹ä¸‰ï¼šæ•™-LLaMA-å­¦ä¹ å¬å£°éŸ³" class="headerlink" title="æ¡ˆä¾‹ä¸‰ï¼šæ•™ LLaMA å­¦ä¹ å¬å£°éŸ³"></a>æ¡ˆä¾‹ä¸‰ï¼šæ•™ LLaMA å­¦ä¹ å¬å£°éŸ³</h3><ul><li><p><strong>èƒŒæ™¯</strong>ï¼šé€šè¿‡æ·»åŠ è¯­éŸ³ç¼–ç å™¨ï¼ˆSpeech Encoderï¼‰å’Œé€‚é…å™¨ï¼ˆAdapterï¼‰ï¼Œè®©çº¯æ–‡æœ¬çš„LLMï¼ˆå¦‚LLaMAï¼‰èƒ½å¤Ÿç†è§£å’Œå¤„ç†éŸ³é¢‘ã€‚</p></li><li><p><strong>æ“ä½œ</strong>ï¼šåœ¨ä¸€ä¸ªåŒ…å«23ä¸ªè¯­éŸ³ä»»åŠ¡çš„æ•°æ®é›†ä¸Šå¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒã€‚</p></li><li><p><strong>ç»“æœ</strong>ï¼š</p><ul><li><p><strong>ç¬¬1ä¸ªå‘¨æœŸï¼ˆ1st Epochï¼‰</strong>ï¼šæ¨¡å‹åœ¨è¯­éŸ³ä»»åŠ¡ä¸Šè¡¨ç°è¿˜ä¸å¤ªå‡†ç¡®ï¼Œä½†å®ƒä»ç„¶è®°å¾—åŸå§‹çš„æ–‡æœ¬èƒ½åŠ›ï¼Œæ¯”å¦‚å¯ä»¥éµå¾ªâ€œç”¨JSONæ ¼å¼å›ç­”â€çš„æŒ‡ä»¤ã€‚</p></li><li><p><strong>ç¬¬3ä¸ªå‘¨æœŸï¼ˆ3rd Epochï¼‰</strong>ï¼šæ¨¡å‹åœ¨è¯­éŸ³ä»»åŠ¡ä¸Šçš„å‡†ç¡®ç‡æé«˜äº†ï¼Œä½†å®ƒå¿˜è®°äº†å¦‚ä½•éµå¾ªJSONæ ¼å¼è¾“å‡ºçš„æŒ‡ä»¤ï¼Œå…¶å¼ºå¤§çš„æ–‡æœ¬èƒ½åŠ›è¢«é—å¿˜äº†ã€‚</p></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232836398.png" alt="PixPin_2025-10-16_23-28-25.png"></p><h2 id="å¦‚ä½•è§£å†³ç¾éš¾æ€§é—å¿˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³ç¾éš¾æ€§é—å¿˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³ç¾éš¾æ€§é—å¿˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³ç¾éš¾æ€§é—å¿˜ï¼Ÿ</h2><h3 id="1-å†å²ä¸Šçš„è§£å†³æ–¹æ¡ˆï¼šExperience-Replay"><a href="#1-å†å²ä¸Šçš„è§£å†³æ–¹æ¡ˆï¼šExperience-Replay" class="headerlink" title="1. å†å²ä¸Šçš„è§£å†³æ–¹æ¡ˆï¼šExperience Replay"></a>1. å†å²ä¸Šçš„è§£å†³æ–¹æ¡ˆï¼šExperience Replay</h3><p>åœ¨GPT-2çš„â€œçŸ³å™¨æ—¶ä»£â€ï¼ˆ2019å¹´å·¦å³ï¼‰ï¼Œç ”ç©¶è€…å°±æå‡ºäº†æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p><ul><li><p><strong>è®ºæ–‡</strong>ï¼š<em>LAMOL: LAnguage Modeling for Lifelong Language Learning</em> (<a href="https://arxiv.org/abs/1909.03329">https://arxiv.org/abs/1909.03329</a>)</p></li><li><p><strong>æ–¹æ³•</strong>ï¼šåœ¨è®­ç»ƒæ–°ä»»åŠ¡ï¼ˆTask 2ï¼‰æ—¶ï¼Œå°†ä¸€å°éƒ¨åˆ†ï¼ˆä¾‹å¦‚5%ï¼‰æ—§ä»»åŠ¡ï¼ˆTask 1ï¼‰çš„è®­ç»ƒæ•°æ®æ··åˆè¿›å»ä¸€èµ·è®­ç»ƒã€‚</p></li><li><p><strong>æ•ˆæœ</strong>ï¼šè¿™ç§ç®€å•çš„æ–¹æ³•éå¸¸æœ‰æ•ˆï¼Œèƒ½æ˜¾è‘—ç¼“è§£æ¨¡å‹çš„é—å¿˜é—®é¢˜ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016232931028.png" alt="PixPin_2025-10-16_23-29-28.png"></p><p><strong>å›¾ç¤º</strong>ï¼šå›¾è¡¨æ˜¾ç¤ºï¼Œä½¿ç”¨Fine-tuneæ–¹æ³•æ—¶ï¼Œæ¨¡å‹åœ¨å­¦ä¹ æ–°ä»»åŠ¡åï¼Œåœ¨æ—§ä»»åŠ¡ä¸Šçš„åˆ†æ•°æ€¥å‰§ä¸‹é™ï¼›è€Œä½¿ç”¨Experience Replayæ–¹æ³•æ—¶ï¼Œåˆ†æ•°ä¿æŒå¾—éå¸¸å¥½ã€‚</p><h3 id="2-ç°ä»£çš„å›°å¢ƒï¼šæˆ‘ä»¬æ²¡æœ‰åŸå§‹è®­ç»ƒæ•°æ®"><a href="#2-ç°ä»£çš„å›°å¢ƒï¼šæˆ‘ä»¬æ²¡æœ‰åŸå§‹è®­ç»ƒæ•°æ®" class="headerlink" title="2. ç°ä»£çš„å›°å¢ƒï¼šæˆ‘ä»¬æ²¡æœ‰åŸå§‹è®­ç»ƒæ•°æ®"></a>2. ç°ä»£çš„å›°å¢ƒï¼šæˆ‘ä»¬æ²¡æœ‰åŸå§‹è®­ç»ƒæ•°æ®</h3><p>å¯¹äºåƒ LLaMA-2-Chatã€Geminiã€Claude è¿™æ ·çš„ç°ä»£é—­æºæˆ–åŠé—­æºæ¨¡å‹ï¼Œæˆ‘ä»¬æ— æ³•è·å¾—å®ƒä»¬ç”¨äºå¯¹é½å’Œé¢„è®­ç»ƒçš„åŸå§‹æ•°æ®ã€‚å› æ­¤ï¼Œä¼ ç»Ÿçš„â€œç»éªŒå›æ”¾â€æ–¹æ³•ä¸å†å¯è¡Œã€‚è¿™ä½¿å¾—ç¾éš¾æ€§é—å¿˜åœ¨ä»Šå¤©é‡æ–°æˆä¸ºä¸€ä¸ªä¸¥å³»çš„é—®é¢˜ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016233002274.png" alt="PixPin_2025-10-16_23-29-58.png"></p><p>å›¾ç¤ºï¼šæˆé¾™â€œæˆ‘å½“æ—¶å°±æ‡µäº†â€çš„è¡¨æƒ…åŒ…ï¼Œæ–‡å­—æ˜¯â€œç­‰ç­‰â€¦æˆ‘ä»¬æ²¡æœ‰LLaMA-2-Chatçš„è®­ç»ƒæ•°æ®ã€‚ç¾éš¾æ€§é—å¿˜æ˜¯ä¸ªçœŸæ­£çš„é—®é¢˜ï¼â€</p><h3 id="3-ç°ä»£è§£å†³æ–¹æ¡ˆï¼šPseudo-Experience-Replay"><a href="#3-ç°ä»£è§£å†³æ–¹æ¡ˆï¼šPseudo-Experience-Replay" class="headerlink" title="3. ç°ä»£è§£å†³æ–¹æ¡ˆï¼šPseudo-Experience Replay"></a>3. ç°ä»£è§£å†³æ–¹æ¡ˆï¼šPseudo-Experience Replay</h3><p>æ—¢ç„¶æ²¡æœ‰çœŸå®çš„æ—§æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è®©<strong>æ¨¡å‹è‡ªå·±ç”Ÿæˆ</strong>ï¼</p><ul><li><p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šåˆ©ç”¨æ¨¡å‹ç°æœ‰çš„çŸ¥è¯†ï¼Œè®©å®ƒè‡ªå·±ç”Ÿæˆä¸€äº›ç¬¦åˆå…¶å…ˆå‰èƒ½åŠ›çš„â€œä¼ªæ•°æ®â€ï¼Œç„¶ååœ¨åè®­ç»ƒæ—¶å°†è¿™äº›ä¼ªæ•°æ®ä¸æ–°æ•°æ®æ··åˆã€‚</p></li><li><p><strong>å…·ä½“æ–¹æ³•</strong>ï¼š</p><ol><li><p><strong>è‡ªæˆ‘ç”Ÿæˆï¼ˆSelf-generationï¼‰</strong>ï¼šè®©æ¨¡å‹<strong>è‡ªå·±å‡­ç©ºç”Ÿæˆå®Œæ•´çš„è®­ç»ƒæ ·æœ¬</strong>ï¼ˆè¾“å…¥+å›ç­”ï¼‰ã€‚LAMOLè®ºæ–‡è¯æ˜äº†è¿™ç§æ–¹æ³•å‡ ä¹å’Œä½¿ç”¨çœŸå®æ•°æ®ä¸€æ ·æœ‰æ•ˆã€‚</p></li><li><p><strong>è‡ªæˆ‘è¾“å‡ºï¼ˆSelf-Outputï¼‰</strong>ï¼šç»™å®šä¸€ä¸ªè¾“å…¥ï¼Œè®©æ¨¡å‹è‡ªå·±ç”Ÿæˆä¸€ä¸ªå›ç­”ã€‚å¦‚æœå›ç­”æ˜¯æ­£ç¡®çš„ï¼Œå°±æŠŠå®ƒå½“ä½œä¸€æ¡â€œä¼ªç»éªŒâ€æ¥å›æ”¾ã€‚</p><ul><li><strong>è®ºæ–‡</strong>ï¼š<em>Selective Self-Rehearsal for Continual Learning of Large Language Models</em> (<a href="https://arxiv.org/abs/2409.04787">https://arxiv.org/abs/2409.04787</a>)</li></ul></li><li><p><strong>è½¬è¿°ï¼ˆParaphraseï¼‰</strong>ï¼šè®©æ¨¡å‹ç”¨è‡ªå·±çš„è¯ï¼ŒæŠŠæ–°ä»»åŠ¡çš„æ•°æ®é‡æ–°è¯´ä¸€éï¼Œè¿™ä¹Ÿèƒ½èµ·åˆ°ä¸€å®šçš„å·©å›ºä½œç”¨ã€‚</p></li><li><p><strong>ä½¿ç”¨æ›´å¼ºçš„æ¨¡å‹ç”Ÿæˆæ•°æ®</strong>ï¼šç”¨åƒGPT-4è¿™æ ·çš„æ›´å¼ºæ¨¡å‹æ¥ç”Ÿæˆé«˜è´¨é‡çš„æ•°æ®ï¼Œä½œä¸ºâ€œä¼ªç»éªŒâ€æ¥è®­ç»ƒç›®æ ‡æ¨¡å‹ã€‚</p><ul><li><strong>è®ºæ–‡</strong>ï¼š<em>I Learn Better If You Speak My Language</em> (<a href="https://arxiv.org/abs/2402.11192">https://arxiv.org/abs/2402.11192</a>)</li></ul></li></ol></li></ul><h3 id="4-æ·±å…¥ç ”ç©¶ï¼šä¸ºä»€ä¹ˆâ€œè‡ªæˆ‘ç”Ÿæˆâ€çš„æ•°æ®æœ‰æ•ˆï¼Ÿ"><a href="#4-æ·±å…¥ç ”ç©¶ï¼šä¸ºä»€ä¹ˆâ€œè‡ªæˆ‘ç”Ÿæˆâ€çš„æ•°æ®æœ‰æ•ˆï¼Ÿ" class="headerlink" title="4. æ·±å…¥ç ”ç©¶ï¼šä¸ºä»€ä¹ˆâ€œè‡ªæˆ‘ç”Ÿæˆâ€çš„æ•°æ®æœ‰æ•ˆï¼Ÿ"></a>4. æ·±å…¥ç ”ç©¶ï¼šä¸ºä»€ä¹ˆâ€œè‡ªæˆ‘ç”Ÿæˆâ€çš„æ•°æ®æœ‰æ•ˆï¼Ÿ</h3><ul><li><p><strong>è®ºæ–‡</strong>ï¼š<em>The Self-Output is All You Need</em> (<a href="https://arxiv.org/abs/2501.14315">https://arxiv.org/abs/2501.14315</a>)</p></li><li><p><strong>å‘ç°</strong>ï¼šæ¨¡å‹å¯¹è‡ªå·±ç”Ÿæˆçš„å›ç­”ï¼ˆSelf-Outputï¼‰è¿›è¡Œå­¦ä¹ æ—¶ï¼Œå…¶**å›°æƒ‘åº¦ï¼ˆPerplexityï¼‰è¿œä½äºå­¦ä¹ äººç±»æ ‡æ³¨çš„â€œæ ‡å‡†ç­”æ¡ˆï¼ˆGround Truthï¼‰â€ã€‚</p></li><li><p><strong>è§£é‡Š</strong>ï¼šå›°æƒ‘åº¦ä½æ„å‘³ç€æ¨¡å‹è®¤ä¸ºè¿™ä¸ªå¥å­â€œæ›´é€šé¡ºâ€ã€â€œæ›´ç¬¦åˆè‡ªå·±çš„è¯­è¨€ä¹ æƒ¯â€ã€‚æ¢å¥è¯è¯´ï¼Œ<strong>ç”¨AIè‡ªå·±çš„è¯æ¥æ•™AIï¼Œå®ƒå­¦å¾—æ›´å¿«ã€å¿˜å¾—æ›´å°‘</strong>ã€‚è¿™å°±åƒæ•™ä¸€ä¸ªäººçŸ¥è¯†ï¼Œç”¨ä»–èƒ½ç†è§£çš„é€»è¾‘å’Œè¯­è¨€å»æ•™ï¼Œæ•ˆæœä¼šæ›´å¥½ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20251016233240471.png" alt="PixPin_2025-10-16_23-32-36.png"></p><h2 id="æ€»ç»“ä¸å±•æœ›"><a href="#æ€»ç»“ä¸å±•æœ›" class="headerlink" title="æ€»ç»“ä¸å±•æœ›"></a>æ€»ç»“ä¸å±•æœ›</h2><ul><li><p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong>ï¼šåè®­ç»ƒä¸å¯é¿å…åœ°ä¼´éšç€ç¾éš¾æ€§é—å¿˜çš„é£é™©ï¼Œå°¤å…¶æ˜¯åœ¨æˆ‘ä»¬æ— æ³•è®¿é—®åŸå§‹è®­ç»ƒæ•°æ®çš„æƒ…å†µä¸‹ã€‚</p></li><li><p><strong>æ ¸å¿ƒè§£å†³æ–¹æ¡ˆ</strong>ï¼š<strong>ï¼ˆä¼ªï¼‰ç»éªŒå›æ”¾</strong>ï¼Œç‰¹åˆ«æ˜¯è®©æ¨¡å‹**è‡ªæˆ‘ç”Ÿæˆï¼ˆSelf-Output &#x2F; Self-generationï¼‰æ•°æ®ï¼Œæ˜¯ä¸€ç§éå¸¸æœ‰å‰æ™¯çš„ç­–ç•¥ã€‚</p></li><li><p><strong>æœªæ¥æ–¹å‘</strong>ï¼šå¦‚ä½•æ›´é«˜æ•ˆã€æ›´æœ‰é€‰æ‹©æ€§åœ°ç”Ÿæˆé«˜è´¨é‡çš„ä¼ªæ•°æ®ï¼Œä»¥åŠå¦‚ä½•å°†è¿™äº›æ–¹æ³•ä¸å‚æ•°é«˜æ•ˆå¾®è°ƒï¼ˆå¦‚LoRAï¼‰ç­‰æŠ€æœ¯ç»“åˆï¼Œå°†æ˜¯æœªæ¥ç ”ç©¶çš„é‡ç‚¹ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤§è¯­è¨€æ¨¡å‹</tag>
      
      <tag>LLM</tag>
      
      <tag>é¢„è®­ç»ƒ</tag>
      
      <tag>å¾®è°ƒ</tag>
      
      <tag>åè®­ç»ƒ</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Matplotlib ç”»å›¾</title>
    <link href="/2025/09/15/Matplotlib%20%E7%94%BB%E5%9B%BE/"/>
    <url>/2025/09/15/Matplotlib%20%E7%94%BB%E5%9B%BE/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ matplotlibæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="Matplotlib-æœºå™¨å­¦ä¹ ç»˜å›¾ç¬”è®°"><a href="#Matplotlib-æœºå™¨å­¦ä¹ ç»˜å›¾ç¬”è®°" class="headerlink" title="Matplotlib æœºå™¨å­¦ä¹ ç»˜å›¾ç¬”è®°"></a>Matplotlib æœºå™¨å­¦ä¹ ç»˜å›¾ç¬”è®°</h1><p>åœ¨æœºå™¨å­¦ä¹ æµç¨‹ä¸­ï¼Œæ•°æ®å¯è§†åŒ–æ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€ç¯ï¼Œå®ƒèƒ½å¸®åŠ©æˆ‘ä»¬ï¼š</p><ol><li><p>**æ¢ç´¢æ€§æ•°æ®åˆ†æ (EDA)**ï¼šç†è§£æ•°æ®åˆ†å¸ƒã€ç‰¹å¾é—´çš„å…³ç³»ã€å‘ç°å¼‚å¸¸å€¼ã€‚</p></li><li><p><strong>æ¨¡å‹è¯„ä¼°ä¸è¯Šæ–­</strong>ï¼šå¯è§†åŒ–æ¨¡å‹æ€§èƒ½ï¼Œå¦‚æŸå¤±å‡½æ•°å˜åŒ–ã€é¢„æµ‹ç»“æœä¸çœŸå®å€¼çš„å·®å¼‚ã€ROC æ›²çº¿ç­‰ã€‚</p></li><li><p><strong>ç»“æœå±•ç¤º</strong>ï¼šæ¸…æ™°åœ°å±•ç¤ºæ¨¡å‹ç»“æœå’Œå‘ç°ã€‚</p></li></ol><p>Matplotlib æ˜¯ Python ä¸­æœ€åŸºç¡€ã€æœ€å¼ºå¤§çš„ç»˜å›¾åº“ã€‚æŒæ¡å®ƒçš„æ ¸å¿ƒç”¨æ³•å¯¹æ¯ä¸ªæœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆéƒ½è‡³å…³é‡è¦ã€‚</p><h2 id="åŸºç¡€ï¼špyplot-ä¸é¢å‘å¯¹è±¡æ¥å£"><a href="#åŸºç¡€ï¼špyplot-ä¸é¢å‘å¯¹è±¡æ¥å£" class="headerlink" title="åŸºç¡€ï¼špyplot ä¸é¢å‘å¯¹è±¡æ¥å£"></a>åŸºç¡€ï¼š<code>pyplot</code> ä¸é¢å‘å¯¹è±¡æ¥å£</h2><p>Matplotlib æœ‰ä¸¤ç§å¸¸ç”¨çš„ç»˜å›¾æ¥å£ï¼š</p><ol><li><p><strong><code>pyplot</code> æ¥å£</strong>ï¼šé€šè¿‡ <code>import matplotlib.pyplot as plt</code> ä½¿ç”¨ï¼Œè°ƒç”¨å¦‚ <code>plt.figure()</code>ã€<code>plt.plot()</code> ç­‰å‡½æ•°ï¼Œé€‚åˆ<strong>å¿«é€Ÿã€ç®€å•çš„ç»˜å›¾</strong>ã€‚å¦‚æœæ²¡æœ‰å­å›¾ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥é‡‡ç”¨è¿™ç§ç®€ä¾¿çš„æ–¹å¼ã€‚</p></li><li><p><strong>é¢å‘å¯¹è±¡ (OO) æ¥å£</strong>ï¼šå…ˆåˆ›å»ºä¸€ä¸ª Figure å’Œä¸€ä¸ªæˆ–å¤šä¸ª Axes å¯¹è±¡ï¼ˆå­å›¾ï¼‰ï¼Œç„¶åè°ƒç”¨è¿™äº›å¯¹è±¡çš„æ–¹æ³•è¿›è¡Œç»˜å›¾ï¼Œå¦‚ <code>ax.plot()</code>ã€<code>ax.set_title()</code>ã€‚<strong>è¿™ç§æ–¹å¼æ›´çµæ´»ï¼Œå¯¹å¤æ‚å›¾å½¢çš„æ§åˆ¶åŠ›æ›´å¼ºï¼Œæ˜¯å®˜æ–¹æ¨èçš„æ–¹å¼ã€‚</strong></p></li></ol><p>æœ¬ç¬”è®°å°†ä¸»è¦ä½¿ç”¨<strong>é¢å‘å¯¹è±¡æ¥å£</strong>ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª Figure å’Œä¸€ä¸ª Axes. fig æ˜¯æ•´ä¸ªç”»å¸ƒï¼Œax æ˜¯ç”»å¸ƒä¸Šçš„ä¸€ä¸ªç»˜å›¾åŒºåŸŸï¼ˆå­å›¾ï¼‰</span><br>fig, ax = plt.subplots(figsize=(<span class="hljs-number">8</span>, <span class="hljs-number">6</span>))<br><br><span class="hljs-comment"># åœ¨ ax ä¸Šè¿›è¡Œç»˜å›¾...</span><br><br><span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span><br>plt.show()<br></code></pre></td></tr></table></figure><hr><h1 id="1-æ•£ç‚¹å›¾-Scatter-Plot"><a href="#1-æ•£ç‚¹å›¾-Scatter-Plot" class="headerlink" title="1. æ•£ç‚¹å›¾ (Scatter Plot)"></a>1. æ•£ç‚¹å›¾ (Scatter Plot)</h1><p>æ•£ç‚¹å›¾æ˜¯æ¢ç´¢ä¸¤ä¸ªæ•°å€¼å˜é‡ä¹‹é—´å…³ç³»çš„åˆ©å™¨ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå¸¸ç”¨äºï¼š</p><ul><li><p>è§‚å¯Ÿä¸¤ä¸ªç‰¹å¾ (feature) ä¹‹é—´çš„ç›¸å…³æ€§ã€‚</p></li><li><p>åœ¨å›å½’ä»»åŠ¡ä¸­ï¼Œå¯è§†åŒ–æ¨¡å‹çš„é¢„æµ‹å€¼ä¸çœŸå®å€¼çš„å¯¹æ¯”ã€‚</p></li></ul><p><strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼š<code>ax.scatter()</code></p><p><strong>å¸¸ç”¨å‚æ•°è§£é‡Š</strong>ï¼š</p><ul><li><p><code>x</code>, <code>y</code>: ä¸€ç»´æ•°ç»„ï¼Œåˆ†åˆ«ä»£è¡¨æ¨ªè½´å’Œçºµè½´çš„æ•°æ®ã€‚</p></li><li><p><code>s</code>: ç‚¹çš„å¤§å° (scale)ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ï¼ˆæ‰€æœ‰ç‚¹åŒæ ·å¤§å°ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ˆæ¯ä¸ªç‚¹å¤§å°ä¸åŒï¼‰ã€‚</p></li><li><p><code>c</code>: ç‚¹çš„é¢œè‰² (color)ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªé¢œè‰²å­—ç¬¦ä¸²ï¼ˆå¦‚ <code>&#39;r&#39;</code>, <code>&#39;blue&#39;</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼æ•°ç»„ï¼Œé…åˆ <code>cmap</code> ä½¿ç”¨ï¼Œå®ç°é¢œè‰²æ¸å˜ã€‚</p></li><li><p><code>cmap</code>: é¢œè‰²æ˜ å°„è¡¨ (Colormap)ï¼Œå¦‚ <code>&#39;viridis&#39;</code>, <code>&#39;coolwarm&#39;</code>, <code>&#39;plasma&#39;</code>ã€‚å½“ <code>c</code> æ˜¯æ•°å€¼æ•°ç»„æ—¶ç”Ÿæ•ˆã€‚</p></li><li><p><code>alpha</code>: é€æ˜åº¦ï¼Œå–å€¼èŒƒå›´åœ¨ 0 (å®Œå…¨é€æ˜) åˆ° 1 (å®Œå…¨ä¸é€æ˜) ä¹‹é—´ï¼Œåœ¨æ•°æ®ç‚¹å¯†é›†æ—¶éå¸¸æœ‰ç”¨ã€‚</p></li><li><p><code>marker</code>: ç‚¹çš„å½¢çŠ¶ï¼Œå¦‚ <code>&#39;o&#39;</code> (åœ†å½¢), <code>&#39;^&#39;</code> (ä¸‰è§’å½¢), <code>&#39;s&#39;</code> (æ­£æ–¹å½¢), <code>&#39;x&#39;</code>ã€‚</p></li><li><p><code>label</code>: å›¾ä¾‹æ ‡ç­¾ï¼Œéœ€è¦é…åˆ <code>ax.legend()</code> ä½¿ç”¨ã€‚</p></li><li><p><code>edgecolors</code>: ç‚¹çš„è¾¹ç¼˜é¢œè‰²ã€‚</p></li></ul><h2 id="ä»£ç ç¤ºä¾‹ï¼šç‰¹å¾å…³ç³»æ¢ç´¢"><a href="#ä»£ç ç¤ºä¾‹ï¼šç‰¹å¾å…³ç³»æ¢ç´¢" class="headerlink" title="ä»£ç ç¤ºä¾‹ï¼šç‰¹å¾å…³ç³»æ¢ç´¢"></a>ä»£ç ç¤ºä¾‹ï¼šç‰¹å¾å…³ç³»æ¢ç´¢</h2><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªç‰¹å¾ <code>feature1</code> å’Œ <code>feature2</code>ï¼Œä»¥åŠä¸€ä¸ªç›®æ ‡ç±»åˆ« <code>target</code>ã€‚</p><p>Python</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># --- å‡†å¤‡æ•°æ® ---</span><br><span class="hljs-comment"># ç”Ÿæˆ 150 ä¸ªæ ·æœ¬æ•°æ®</span><br>np.random.seed(<span class="hljs-number">42</span>)<br>feature1 = np.random.randn(<span class="hljs-number">150</span>) * <span class="hljs-number">10</span><br>feature2 = feature1 * <span class="hljs-number">0.5</span> + np.random.randn(<span class="hljs-number">150</span>) * <span class="hljs-number">5</span><br><span class="hljs-comment"># ç”Ÿæˆ 3 ä¸ªç±»åˆ«</span><br>target = np.random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">150</span>)<br><br><span class="hljs-comment"># --- ç»˜å›¾ ---</span><br>fig, ax = plt.subplots(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">7</span>))<br><br><span class="hljs-comment"># ä½¿ç”¨ scatter æ–¹æ³•ç»˜å›¾</span><br><span class="hljs-comment"># c=target ä¼šæ ¹æ® target çš„å€¼ (0, 1, 2) è‡ªåŠ¨é€‰æ‹©é¢œè‰²</span><br><span class="hljs-comment"># s=50 è®¾ç½®ç‚¹çš„å¤§å°ï¼Œalpha=0.7 è®¾ç½®é€æ˜åº¦</span><br>scatter = ax.scatter(feature1, feature2, c=target, s=<span class="hljs-number">50</span>, alpha=<span class="hljs-number">0.7</span>, cmap=<span class="hljs-string">&#x27;viridis&#x27;</span>)<br><br><span class="hljs-comment"># --- ç¾åŒ–å›¾å½¢ ---</span><br>ax.set_title(<span class="hljs-string">&#x27;ç‰¹å¾1 ä¸ ç‰¹å¾2 çš„å…³ç³»&#x27;</span>, fontsize=<span class="hljs-number">16</span>)<br>ax.set_xlabel(<span class="hljs-string">&#x27;ç‰¹å¾ 1 (Feature 1)&#x27;</span>, fontsize=<span class="hljs-number">12</span>)<br>ax.set_ylabel(<span class="hljs-string">&#x27;ç‰¹å¾ 2 (Feature 2)&#x27;</span>, fontsize=<span class="hljs-number">12</span>)<br><br><span class="hljs-comment"># æ·»åŠ å›¾ä¾‹</span><br>legend1 = ax.legend(*scatter.legend_elements(), title=<span class="hljs-string">&quot;ç±»åˆ« (Target)&quot;</span>)<br>ax.add_artist(legend1)<br><br><span class="hljs-comment"># æ·»åŠ ç½‘æ ¼çº¿ï¼Œé€æ˜åº¦ 0.5</span><br>ax.grid(<span class="hljs-literal">True</span>, linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.5</span>)<br><br><span class="hljs-comment"># æ˜¾ç¤ºå›¾å½¢</span><br>plt.show()<br></code></pre></td></tr></table></figure><p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250915165453281.png"></p><hr><h1 id="2-æŠ˜çº¿å›¾-Line-Plot"><a href="#2-æŠ˜çº¿å›¾-Line-Plot" class="headerlink" title="2. æŠ˜çº¿å›¾ (Line Plot)"></a>2. æŠ˜çº¿å›¾ (Line Plot)</h1><p>æŠ˜çº¿å›¾å¸¸ç”¨äºå±•ç¤ºæ•°æ®éšæŸä¸ªåºåˆ—ï¼ˆå¦‚æ—¶é—´ã€è¿­ä»£æ¬¡æ•°ï¼‰çš„å˜åŒ–è¶‹åŠ¿ã€‚åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œå…¸å‹åº”ç”¨åŒ…æ‹¬ï¼š</p><ul><li>ç»˜åˆ¶æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤± (<code>Loss</code>) å’Œå‡†ç¡®ç‡ (<code>Accuracy</code>) æ›²çº¿ã€‚</li><li>ç»˜åˆ¶å­¦ä¹ æ›²çº¿ (<code>Learning Curve</code>) æ¥è¯Šæ–­è¿‡æ‹Ÿåˆæˆ–æ¬ æ‹Ÿåˆã€‚</li></ul><p><strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼š<code>ax.plot()</code></p><p><strong>å¸¸ç”¨å‚æ•°è§£é‡Š</strong>ï¼š</p><ul><li><p><code>x</code>, <code>y</code>: æ¨ªè½´å’Œçºµè½´çš„æ•°æ®ã€‚</p></li><li><p><code>color</code>: çº¿çš„é¢œè‰²ã€‚</p></li><li><p><code>linestyle</code>: çº¿çš„æ ·å¼ï¼Œå¦‚ <code>&#39;-&#39;</code> (å®çº¿), <code>&#39;--&#39;</code> (è™šçº¿), <code>&#39;:&#39;</code> (ç‚¹çº¿), <code>&#39;-.&#39;</code> (ç‚¹åˆ’çº¿)ã€‚</p></li><li><p><code>linewidth</code>: çº¿çš„å®½åº¦ã€‚</p></li><li><p><code>marker</code>: æ•°æ®ç‚¹çš„æ ‡è®°æ ·å¼ï¼Œå¦‚ <code>&#39;o&#39;</code>, <code>&#39;.&#39;</code>, <code>&#39;s&#39;</code>ã€‚</p></li><li><p><code>label</code>: å›¾ä¾‹æ ‡ç­¾ã€‚</p></li></ul><h2 id="ä»£ç ç¤ºä¾‹ï¼šç»˜åˆ¶è®­ç»ƒä¸éªŒè¯æŸå¤±æ›²çº¿"><a href="#ä»£ç ç¤ºä¾‹ï¼šç»˜åˆ¶è®­ç»ƒä¸éªŒè¯æŸå¤±æ›²çº¿" class="headerlink" title="ä»£ç ç¤ºä¾‹ï¼šç»˜åˆ¶è®­ç»ƒä¸éªŒè¯æŸå¤±æ›²çº¿"></a>ä»£ç ç¤ºä¾‹ï¼šç»˜åˆ¶è®­ç»ƒä¸éªŒè¯æŸå¤±æ›²çº¿</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># --- å‡†å¤‡æ•°æ® ---</span><br><span class="hljs-comment"># æ¨¡æ‹Ÿè®­ç»ƒè¿‡ç¨‹çš„ epoch å’Œ loss</span><br>epochs = np.arange(<span class="hljs-number">1</span>, <span class="hljs-number">51</span>)<br>train_loss = <span class="hljs-number">0.8</span> / epochs**<span class="hljs-number">0.5</span> + np.random.randn(<span class="hljs-number">50</span>) * <span class="hljs-number">0.05</span><br>val_loss = <span class="hljs-number">0.9</span> / epochs**<span class="hljs-number">0.5</span> + np.random.randn(<span class="hljs-number">50</span>) * <span class="hljs-number">0.06</span> + <span class="hljs-number">0.1</span><br><br><span class="hljs-comment"># --- ç»˜å›¾ ---</span><br>fig, ax = plt.subplots(figsize=(<span class="hljs-number">10</span>, <span class="hljs-number">7</span>))<br><br><span class="hljs-comment"># ç»˜åˆ¶è®­ç»ƒæŸå¤±æ›²çº¿</span><br>ax.plot(epochs, train_loss, color=<span class="hljs-string">&#x27;blue&#x27;</span>, linestyle=<span class="hljs-string">&#x27;-&#x27;</span>, marker=<span class="hljs-string">&#x27;o&#x27;</span>, markersize=<span class="hljs-number">4</span>, label=<span class="hljs-string">&#x27;è®­ç»ƒæŸå¤± (Train Loss)&#x27;</span>)<br><br><span class="hljs-comment"># ç»˜åˆ¶éªŒè¯æŸå¤±æ›²çº¿</span><br>ax.plot(epochs, val_loss, color=<span class="hljs-string">&#x27;red&#x27;</span>, linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, marker=<span class="hljs-string">&#x27;s&#x27;</span>, markersize=<span class="hljs-number">4</span>, label=<span class="hljs-string">&#x27;éªŒè¯æŸå¤± (Validation Loss)&#x27;</span>)<br><br><span class="hljs-comment"># --- ç¾åŒ–å›¾å½¢ ---</span><br>ax.set_title(<span class="hljs-string">&#x27;æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­çš„æŸå¤±å˜åŒ–&#x27;</span>, fontsize=<span class="hljs-number">16</span>)<br>ax.set_xlabel(<span class="hljs-string">&#x27;è¿­ä»£æ¬¡æ•° (Epoch)&#x27;</span>, fontsize=<span class="hljs-number">12</span>)<br>ax.set_ylabel(<span class="hljs-string">&#x27;æŸå¤± (Loss)&#x27;</span>, fontsize=<span class="hljs-number">12</span>)<br>ax.grid(<span class="hljs-literal">True</span>, linestyle=<span class="hljs-string">&#x27;--&#x27;</span>, alpha=<span class="hljs-number">0.6</span>)<br>ax.legend() <span class="hljs-comment"># æ˜¾ç¤ºå›¾ä¾‹</span><br><br>plt.show()<br></code></pre></td></tr></table></figure><p>æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250915170844951.png"></p><hr><h1 id="å›¾ç‰‡ç¤ºä¾‹"><a href="#å›¾ç‰‡ç¤ºä¾‹" class="headerlink" title="å›¾ç‰‡ç¤ºä¾‹"></a>å›¾ç‰‡ç¤ºä¾‹</h1><ul><li>CVeré€šå¸¸åœ¨åŠ è½½æ•°æ®é›†åï¼Œä¼šæŸ¥çœ‹ä¸€ä¸‹å‰å‡ å¼ å›¾ç‰‡ï¼Œç”¨åšä¸€ä¸ªç¤ºä¾‹ï¼Œé‚£ä¹ˆä¸‹é¢è¿™å¥—æµç¨‹å¯ä»¥å®ç°</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">temp_dataset = get_dataset(os.path.join(workspace_dir, <span class="hljs-string">&#x27;faces&#x27;</span>))<br><br>images = [temp_dataset[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)]<br>grid_img = torchvision.utils.make_grid(images, nrow=<span class="hljs-number">4</span>) <span class="hljs-comment">#å°†å¤šå¼ å›¾åƒæ‹¼æ¥æˆç½‘æ ¼å½¢å¼</span><br>plt.figure(figsize=(<span class="hljs-number">10</span>,<span class="hljs-number">10</span>))<br>plt.imshow(grid_img.permute(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)) <span class="hljs-comment"># imshowçš„è¾“å…¥ä¸º(H, W, C)</span><br>plt.show()<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250915172423756.png"></p><hr><h1 id="æ€»ç»“ä¸é€šç”¨ç¾åŒ–æŠ€å·§"><a href="#æ€»ç»“ä¸é€šç”¨ç¾åŒ–æŠ€å·§" class="headerlink" title="æ€»ç»“ä¸é€šç”¨ç¾åŒ–æŠ€å·§"></a>æ€»ç»“ä¸é€šç”¨ç¾åŒ–æŠ€å·§</h1><p>æ— è®ºç»˜åˆ¶å“ªç§å›¾å½¢ï¼Œæœ€åçš„ç¾åŒ–æ­¥éª¤éƒ½è‡³å…³é‡è¦ã€‚</p><p><strong>é€šç”¨ç¾åŒ–å‡½æ•°</strong> (éƒ½å±äº <code>Axes</code> å¯¹è±¡çš„æ–¹æ³•):</p><ul><li><p><code>ax.set_title()</code>: è®¾ç½®æ ‡é¢˜ã€‚</p></li><li><p><code>ax.set_xlabel()</code>, <code>ax.set_ylabel()</code>: è®¾ç½® x, y è½´æ ‡ç­¾ã€‚</p></li><li><p><code>ax.set_xlim()</code>, <code>ax.set_ylim()</code>: è®¾ç½® x, y è½´çš„èŒƒå›´ã€‚</p></li><li><p><code>ax.set_xticks()</code>, <code>ax.set_yticks()</code>: è®¾ç½® x, y è½´çš„åˆ»åº¦ä½ç½®ã€‚</p></li><li><p><code>ax.set_xticklabels()</code>, <code>ax.set_yticklabels()</code>: è®¾ç½®åˆ»åº¦å¯¹åº”çš„æ ‡ç­¾ã€‚</p></li><li><p><code>ax.legend()</code>: æ˜¾ç¤ºå›¾ä¾‹ã€‚</p></li><li><p><code>ax.grid(True)</code>: æ˜¾ç¤ºç½‘æ ¼çº¿ã€‚</p></li><li><p><code>plt.tight_layout()</code>: åœ¨ <code>plt.show()</code> å‰è°ƒç”¨ï¼Œè‡ªåŠ¨è°ƒæ•´å­å›¾å‚æ•°ï¼Œä½¿ä¹‹å¡«å……æ•´ä¸ªå›¾åƒåŒºåŸŸï¼Œé˜²æ­¢æ ‡ç­¾é‡å ã€‚</p></li><li><p><code>plt.savefig(&#39;figure.png&#39;, dpi=300)</code>: ä¿å­˜å›¾åƒåˆ°æ–‡ä»¶ï¼Œ<code>dpi</code> å‚æ•°å¯ä»¥è®¾ç½®åˆ†è¾¨ç‡ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Matplotlib</tag>
      
      <tag>plt</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -GAN</title>
    <link href="/2025/09/13/GAN/"/>
    <url>/2025/09/13/GAN/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ æå®æ¯…æœºå™¨å­¦ä¹ æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="1-ç”Ÿæˆæ¨¡å‹ç®€ä»‹-Introduction-of-Generative-Models"><a href="#1-ç”Ÿæˆæ¨¡å‹ç®€ä»‹-Introduction-of-Generative-Models" class="headerlink" title="1. ç”Ÿæˆæ¨¡å‹ç®€ä»‹ (Introduction of Generative Models)"></a>1. ç”Ÿæˆæ¨¡å‹ç®€ä»‹ (Introduction of Generative Models)</h1><p>ç”Ÿæˆæ¨¡å‹çš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ›å»ºä¸€ä¸ª<strong>èƒ½å¤Ÿå­¦ä¹ æ•°æ®å†…åœ¨è§„å¾‹å’Œåˆ†å¸ƒçš„ç¥ç»ç½‘ç»œ</strong>ï¼Œè¿™ä¸ªç½‘ç»œè¢«ç§°ä¸º**ç”Ÿæˆå™¨ (Generator)**ã€‚ç”Ÿæˆå™¨çš„ä»»åŠ¡æ˜¯ä»ä¸€ä¸ªç®€å•çš„ã€å·²çŸ¥çš„æ¦‚ç‡åˆ†å¸ƒï¼ˆå¦‚æ­£æ€åˆ†å¸ƒæˆ–å‡åŒ€åˆ†å¸ƒï¼‰ä¸­é‡‡æ ·ä¸€ä¸ªéšæœºå‘é‡ï¼ˆé€šå¸¸ç§°ä¸ºå™ªå£° <code>z</code>ï¼‰ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªå¤æ‚çš„ã€é«˜ç»´çš„æ•°æ®æ ·æœ¬ï¼ˆå¦‚ä¸€å¼ å›¾ç‰‡ï¼‰ã€‚</p><p>è¿™ä¸ªè¿‡ç¨‹å¥½æ¯”è®©ä¸€ä¸ªç¥ç»ç½‘ç»œå­¦ä¹ å¦‚ä½•â€œåˆ›é€ â€ã€‚æˆ‘ä»¬ç»™å®ƒä¸€ä¸ªç®€å•çš„éšæœºç§å­ï¼Œå®ƒå°±èƒ½â€œç”»â€å‡ºä¸€å¼ é€¼çœŸçš„å›¾åƒã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦ç”Ÿæˆä¸€ä¸ªåˆ†å¸ƒï¼Ÿ</p><p>åœ¨è®¸å¤šä»»åŠ¡ä¸­ï¼ŒåŒä¸€ä¸ªè¾“å…¥å¯èƒ½å¯¹åº”å¤šä¸ªåˆç†çš„è¾“å‡ºã€‚ä¾‹å¦‚ï¼š</p><ul><li><p><strong>è§†é¢‘é¢„æµ‹</strong>: é¢„æµ‹è§†é¢‘çš„ä¸‹ä¸€å¸§æ—¶ï¼Œè§’è‰²å¯èƒ½å‘å·¦èµ°ä¹Ÿå¯èƒ½å‘å³èµ°ï¼Œä¸¤ç§éƒ½æ˜¯åˆç†çš„ç»“æœã€‚å¦‚æœæ¨¡å‹åªè¾“å‡ºä¸€ä¸ªç¡®å®šçš„ã€æ‰€æœ‰å¯èƒ½æ€§çš„å¹³å‡ç»“æœï¼Œç”»é¢å°±ä¼šå˜å¾—æ¨¡ç³Šä¸æ¸…ã€‚</p></li><li><p><strong>éœ€è¦åˆ›é€ åŠ›çš„ä»»åŠ¡</strong>: åƒç»˜ç”»æˆ–å¯¹è¯æœºå™¨äººè¿™æ ·çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬å¸Œæœ›æ¨¡å‹èƒ½æœ‰â€œåˆ›é€ åŠ›â€ï¼Œå¯¹åŒä¸€ä¸ªè¾“å…¥ï¼ˆå¦‚â€œç”»ä¸€ä¸ªçº¢çœ¼ç›çš„è§’è‰²â€ï¼‰èƒ½äº§ç”Ÿå¤šæ ·åŒ–çš„è¾“å‡ºï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ç”Ÿæˆä¸€æ¨¡ä¸€æ ·çš„ç»“æœã€‚</p></li></ul><p>é€šè¿‡<strong>è®©ç”Ÿæˆå™¨å­¦ä¹ è¾“å‡ºä¸€ä¸ªåˆ†å¸ƒï¼Œæ¨¡å‹å°±å¯ä»¥æ•æ‰åˆ°è¿™ç§ä¸ç¡®å®šæ€§</strong>ï¼Œä»è€Œç”Ÿæˆå¤šæ ·åŒ–ä¸”æ¸…æ™°çš„ç»“æœã€‚</p><hr><h1 id="2-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ-GAN"><a href="#2-ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ-GAN" class="headerlink" title="2. ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ (GAN)"></a>2. ç”Ÿæˆå¯¹æŠ—ç½‘ç»œ (GAN)</h1><h2 id="åŸºæœ¬è§£é‡Š"><a href="#åŸºæœ¬è§£é‡Š" class="headerlink" title="åŸºæœ¬è§£é‡Š"></a>åŸºæœ¬è§£é‡Š</h2><p>ç”Ÿæˆå¯¹æŠ—ç½‘ç»œï¼ˆGANï¼‰æ˜¯ä¸€ç§å¼ºå¤§çš„ç”Ÿæˆæ¨¡å‹æ¡†æ¶ï¼Œå®ƒé€šè¿‡ä¸€ç§â€œå¯¹æŠ—â€æˆ–â€œåšå¼ˆâ€çš„æ–¹å¼è¿›è¡Œè®­ç»ƒã€‚GANç”±ä¸¤ä¸ªæ ¸å¿ƒéƒ¨åˆ†ç»„æˆï¼š</p><ol><li><p><strong>ç”Ÿæˆå™¨ (Generator, G)</strong>:</p><ul><li><p><strong>è§’è‰²</strong>: ä¸€ä¸ªâ€œä¼ªé€ è€…â€æˆ–â€œè‰ºæœ¯å®¶â€ã€‚</p></li><li><p><strong>ä»»åŠ¡</strong>: å­¦ä¹ çœŸå®æ•°æ®çš„åˆ†å¸ƒï¼Œå¹¶å°è¯•ç”Ÿæˆå°½å¯èƒ½é€¼çœŸã€èƒ½å¤Ÿä»¥å‡ä¹±çœŸçš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œç”ŸæˆåŠ¨æ¼«å¤´åƒï¼‰ã€‚</p></li></ul></li><li><p><strong>åˆ¤åˆ«å™¨ (Discriminator, D)</strong>:</p><ul><li><p><strong>è§’è‰²</strong>: ä¸€ä¸ªâ€œé‰´èµå®¶â€æˆ–â€œè­¦å¯Ÿâ€ã€‚</p></li><li><p><strong>ä»»åŠ¡</strong>: å­¦ä¹ å¦‚ä½•åŒºåˆ†çœŸå®æ•°æ®å’Œç”±ç”Ÿæˆå™¨ç”Ÿæˆçš„â€œå‡â€æ•°æ®ã€‚å¯¹äºçœŸå®æ•°æ®ï¼Œå®ƒåº”è¯¥è¾“å‡ºé«˜åˆ†ï¼ˆæ¥è¿‘1ï¼‰ï¼›å¯¹äºå‡æ•°æ®ï¼Œå®ƒåº”è¯¥è¾“å‡ºä½åˆ†ï¼ˆæ¥è¿‘0ï¼‰ã€‚</p></li></ul></li></ol><h2 id="å¯¹æŠ—è®­ç»ƒè¿‡ç¨‹"><a href="#å¯¹æŠ—è®­ç»ƒè¿‡ç¨‹" class="headerlink" title="å¯¹æŠ—è®­ç»ƒè¿‡ç¨‹"></a>å¯¹æŠ—è®­ç»ƒè¿‡ç¨‹</h2><p>GANçš„è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€çš„ã€äº¤æ›¿ä¼˜åŒ–çš„è¿‡ç¨‹ï¼Œå°±åƒç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨åœ¨è¿›è¡Œä¸€åœºæ°¸æ— ä¼‘æ­¢çš„â€œå†›å¤‡ç«èµ›â€ï¼š</p><ul><li><p><strong>ç¬¬1æ­¥ï¼šå›ºå®šGï¼Œè®­ç»ƒD</strong></p><ul><li><p>ä»çœŸå®æ•°æ®åº“ä¸­é‡‡æ ·ä¸€æ‰¹çœŸå®å›¾ç‰‡ï¼Œå¹¶è®©ç”Ÿæˆå™¨Gç”Ÿæˆä¸€æ‰¹å‡å›¾ç‰‡ã€‚</p></li><li><p>å°†è¿™ä¸¤æ‰¹å›¾ç‰‡éƒ½å–‚ç»™åˆ¤åˆ«å™¨Dã€‚</p></li><li><p>Dçš„ç›®æ ‡æ˜¯ç»™çœŸå®å›¾ç‰‡æ‰“é«˜åˆ†ï¼Œç»™å‡å›¾ç‰‡æ‰“ä½åˆ†ã€‚æˆ‘ä»¬æ ¹æ®è¿™ä¸ªç›®æ ‡æ›´æ–°Dçš„å‚æ•°ï¼Œè®©å®ƒçš„é‰´åˆ«èƒ½åŠ›è¶Šæ¥è¶Šå¼ºã€‚</p></li></ul></li><li><p><strong>ç¬¬2æ­¥ï¼šå›ºå®šDï¼Œè®­ç»ƒG</strong></p><ul><li><p>ç”Ÿæˆå™¨Gç”Ÿæˆä¸€æ‰¹å‡å›¾ç‰‡ï¼Œå¹¶å°†å…¶è¾“å…¥åˆ°<strong>å›ºå®šä¸å˜çš„</strong>åˆ¤åˆ«å™¨Dä¸­ã€‚</p></li><li><p>Gçš„ç›®æ ‡æ˜¯â€œæ¬ºéª—â€Dï¼Œå³<strong>å¸Œæœ›Dç»™è¿™äº›å‡å›¾ç‰‡æ‰“å‡ºå°½å¯èƒ½é«˜çš„åˆ†æ•°</strong>ã€‚</p></li><li><p>æˆ‘ä»¬æ ¹æ®è¿™ä¸ªç›®æ ‡ï¼Œåå‘ä¼ æ’­æ¢¯åº¦æ¥æ›´æ–°Gçš„å‚æ•°ã€‚è¿™æ ·ï¼ŒGå°±ä¼šå­¦ä¹ å¦‚ä½•ç”Ÿæˆæ›´é€¼çœŸçš„å›¾ç‰‡æ¥è¿·æƒ‘Dã€‚</p></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250913224023774.png"></p><p>è¿™ä¸ªè¿‡ç¨‹ä¸æ–­è¿­ä»£ï¼Œæœ€ç»ˆç†æƒ³çŠ¶æ€ä¸‹ï¼Œç”Ÿæˆå™¨Gèƒ½å¤Ÿç”Ÿæˆä¸çœŸå®æ•°æ®æ— æ³•åŒºåˆ†çš„æ ·æœ¬ï¼Œè€Œåˆ¤åˆ«å™¨Då†ä¹Ÿæ— æ³•åˆ†è¾¨çœŸå‡ï¼ˆå¯¹ä»»ä½•è¾“å…¥çš„æ‰“åˆ†éƒ½æ¥è¿‘0.5ï¼‰ã€‚è¿™ä¸ªè¿‡ç¨‹å°±åƒæ˜¯äº¦æ•Œäº¦å‹çš„å…±åŒè¿›åŒ–ã€‚</p><p>[å›¾ç‰‡ï¼šå±•ç¤ºGANè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œç”Ÿæˆçš„åŠ¨æ¼«å¤´åƒä»æ¨¡ç³Šçš„å™ªå£°é€æ¸å˜å¾—æ¸…æ™°ã€é€¼çœŸçš„æ¼”è¿›è¿‡ç¨‹]</p><blockquote><p><strong>å¼€åˆ›æ€§è®ºæ–‡</strong>:</p><ul><li>Generative Adversarial Nets: <a href="https://arxiv.org/abs/1406.2661">https://arxiv.org/abs/1406.2661</a></li></ul></blockquote><hr><h1 id="3-GANèƒŒåçš„ç†è®º"><a href="#3-GANèƒŒåçš„ç†è®º" class="headerlink" title="3. GANèƒŒåçš„ç†è®º"></a>3. GANèƒŒåçš„ç†è®º</h1><p>GANçš„æœ€ç»ˆç›®æ ‡æ˜¯è®©ç”Ÿæˆå™¨Gå­¦ä¹ åˆ°çš„æ•°æ®åˆ†å¸ƒ $P_G$â€‹ å°½å¯èƒ½åœ°æ¥è¿‘çœŸå®æ•°æ®çš„åˆ†å¸ƒ $P_{data}$â€‹ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªè¡¡é‡ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´å·®å¼‚çš„æŒ‡æ ‡â€”â€”<strong>æ•£åº¦ (Divergence)</strong> æ¥æè¿°è¿™ä¸ªç›®æ ‡ã€‚</p><p>$$<br>Gâˆ—&#x3D;argmin â€‹Div(PGâ€‹,Pdataâ€‹)<br>$$</p><p>è™½ç„¶æˆ‘ä»¬æ— æ³•ç›´æ¥è®¡ç®—è¿™ä¸¤ä¸ªå¤æ‚åˆ†å¸ƒä¹‹é—´çš„æ•£åº¦ï¼Œä½†GANå·§å¦™åœ°åˆ©ç”¨åˆ¤åˆ«å™¨Dæ¥é—´æ¥å®ç°è¿™ä¸€ç›®æ ‡ã€‚</p><p>åœ¨åŸå§‹GANçš„ç†è®ºä¸­ï¼Œåˆ¤åˆ«å™¨Dçš„ä¼˜åŒ–ç›®æ ‡ï¼ˆæœ€å¤§åŒ–V(G,D)ï¼‰å®é™…ä¸Šæ˜¯åœ¨è®¡ç®— PGâ€‹ å’Œ Pdataâ€‹ ä¹‹é—´çš„**JSæ•£åº¦ (Jensen-Shannon divergence)**ã€‚</p><p>$$<br>V(G,D)&#x3D;E_{yâˆ¼P_{data}â€‹}â€‹[logD(y)]+E_{yâˆ¼P_Gâ€‹â€‹}[log(1âˆ’D(y))]<br>$$</p><p>å½“åˆ¤åˆ«å™¨Dè¢«è®­ç»ƒåˆ°æœ€ä¼˜æ—¶ï¼Œ<strong>ç”Ÿæˆå™¨Gçš„ä¼˜åŒ–ç›®æ ‡å°±ç­‰ä»·äºæœ€å°åŒ– PGâ€‹ å’Œ Pdataâ€‹ ä¹‹é—´çš„JSæ•£åº¦</strong>ã€‚&#x3D;&#x3D;å› æ­¤ï¼Œæ•´ä¸ªGANçš„ min-max åšå¼ˆè¿‡ç¨‹ï¼Œå®é™…ä¸Šå°±æ˜¯åœ¨æ¨åŠ¨ç”Ÿæˆåˆ†å¸ƒå»é€¼è¿‘çœŸå®åˆ†å¸ƒ&#x3D;&#x3D;</p><p>[å›¾ç‰‡ï¼šå±•ç¤º PGâ€‹ å’Œ Pdataâ€‹ ä¸¤ä¸ªåˆ†å¸ƒï¼Œå¹¶ç”¨ç®­å¤´è¡¨ç¤ºGANçš„ç›®æ ‡æ˜¯è®© PGâ€‹ å°½å¯èƒ½é è¿‘ Pdataâ€‹]</p><blockquote><p><strong>f-GAN è®ºæ–‡ (æ¢ç´¢ä¸åŒæ•£åº¦)</strong>:</p><ul><li>f-GAN: Training Generative Neural Samplers using Variational Divergence Minimization: <a href="https://arxiv.org/abs/1606.00709">https://arxiv.org/abs/1606.00709</a></li></ul></blockquote><hr><h1 id="4-è®­ç»ƒGANçš„æŠ€å·§"><a href="#4-è®­ç»ƒGANçš„æŠ€å·§" class="headerlink" title="4. è®­ç»ƒGANçš„æŠ€å·§"></a>4. è®­ç»ƒGANçš„æŠ€å·§</h1><p>GANçš„è®­ç»ƒæ˜¯å‡ºäº†åçš„å›°éš¾å’Œä¸ç¨³å®šï¼Œå¸¸è¢«ç§°ä¸ºâ€œç‚¼ä¸¹â€ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³é”®çš„æŒ‘æˆ˜å’Œæ”¹è¿›æŠ€å·§ï¼š</p><h2 id="æŒ‘æˆ˜1ï¼šJSæ•£åº¦çš„é—®é¢˜ä¸WGAN"><a href="#æŒ‘æˆ˜1ï¼šJSæ•£åº¦çš„é—®é¢˜ä¸WGAN" class="headerlink" title="æŒ‘æˆ˜1ï¼šJSæ•£åº¦çš„é—®é¢˜ä¸WGAN"></a>æŒ‘æˆ˜1ï¼šJSæ•£åº¦çš„é—®é¢˜ä¸WGAN</h2><ul><li><p><strong>é—®é¢˜</strong>: åœ¨é«˜ç»´ç©ºé—´ä¸­ï¼Œä¸¤ä¸ªåˆ†å¸ƒ PGâ€‹ å’Œ Pdataâ€‹ å‡ ä¹ä¸å¯èƒ½æœ‰é‡å ã€‚<strong>å½“å®ƒä»¬æ²¡æœ‰é‡å æ—¶ï¼ŒJSæ•£åº¦æ˜¯ä¸€ä¸ªå¸¸æ•°ï¼ˆlog2ï¼‰</strong>ï¼Œè¿™å¯¼è‡´ç”Ÿæˆå™¨çš„æ¢¯åº¦ä¸º0ï¼Œæ— æ³•å­¦ä¹ ã€‚</p></li><li><p><strong>è§£å†³æ–¹æ¡ˆ</strong>: <strong>Wasserstein GAN (WGAN)</strong> æå‡ºä½¿ç”¨<code>Wassersteinè·ç¦»</code>ï¼ˆåˆç§°â€œæ¨åœŸæœºè·ç¦»â€ï¼‰æ¥æ›¿ä»£JSæ•£åº¦ã€‚</p><ul><li><strong>ä¼˜åŠ¿</strong>: å³ä½¿ä¸¤ä¸ªåˆ†å¸ƒæ²¡æœ‰é‡å ï¼ŒWassersteinè·ç¦»ä»ç„¶èƒ½æä¾›ä¸€ä¸ªæœ‰æ„ä¹‰çš„ã€å¹³æ»‘çš„åº¦é‡ï¼Œåæ˜ äº†å®ƒä»¬ä¹‹é—´çš„â€œè¿œè¿‘â€ã€‚è¿™ä¸ºç”Ÿæˆå™¨æä¾›äº†æŒç»­æœ‰æ•ˆçš„æ¢¯åº¦ã€‚</li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250913224952306.png"></p><ul><li><p><strong>å®ç°</strong>: WGANé€šè¿‡å¯¹åˆ¤åˆ«å™¨ï¼ˆåœ¨WGANä¸­ç§°ä¸ºCriticï¼‰æ–½åŠ <strong>1-Lipschitzçº¦æŸ</strong>æ¥å®ç°ã€‚ä¸ºäº†æ»¡è¶³è¿™ä¸ªçº¦æŸï¼Œåç»­å·¥ä½œæå‡ºäº†æ›´ç¨³å®šçš„æ–¹æ³•ï¼š</p><ul><li><p><strong>WGAN-GP (Gradient Penalty)</strong>: é€šè¿‡å¯¹Criticçš„æ¢¯åº¦æ·»åŠ æƒ©ç½šé¡¹æ¥çº¦æŸå®ƒã€‚</p></li><li><p><strong>è°±å½’ä¸€åŒ– (Spectral Normalization)</strong>: ä¸€ç§æ›´ç®€å•æœ‰æ•ˆçš„çº¦æŸæ–¹æ³•ã€‚</p></li></ul></li></ul><blockquote><p><strong>WGAN ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>Wasserstein GAN: <a href="https://arxiv.org/abs/1701.07875">https://arxiv.org/abs/1701.07875</a></p></li><li><p>Improved Training of Wasserstein GANs: <a href="https://arxiv.org/abs/1704.00028">https://arxiv.org/abs/1704.00028</a></p></li><li><p>Spectral Normalization for Generative Adversarial Networks: <a href="https://arxiv.org/abs/1802.05957">https://arxiv.org/abs/1802.05957</a></p></li></ul></blockquote><h2 id="æŒ‘æˆ˜2ï¼šç”Ÿæˆå™¨ä¸åˆ¤åˆ«å™¨çš„å¹³è¡¡"><a href="#æŒ‘æˆ˜2ï¼šç”Ÿæˆå™¨ä¸åˆ¤åˆ«å™¨çš„å¹³è¡¡" class="headerlink" title="æŒ‘æˆ˜2ï¼šç”Ÿæˆå™¨ä¸åˆ¤åˆ«å™¨çš„å¹³è¡¡"></a>æŒ‘æˆ˜2ï¼šç”Ÿæˆå™¨ä¸åˆ¤åˆ«å™¨çš„å¹³è¡¡</h2><p>ç”Ÿæˆå™¨å’Œåˆ¤åˆ«å™¨çš„å­¦ä¹ èƒ½åŠ›éœ€è¦â€œæ£‹é€¢å¯¹æ‰‹â€ã€‚å¦‚æœåˆ¤åˆ«å™¨å¤ªå¼ºï¼Œç”Ÿæˆå™¨æ¢¯åº¦ä¼šæ¶ˆå¤±ï¼›å¦‚æœåˆ¤åˆ«å™¨å¤ªå¼±ï¼Œç”Ÿæˆå™¨åˆ™å­¦ä¸åˆ°æœ‰æ•ˆä¿¡æ¯ã€‚<strong>ä¿æŒäºŒè€…åŒæ­¥å‘å±•æ˜¯è®­ç»ƒæˆåŠŸçš„å…³é”®</strong>ã€‚</p><h2 id="æŒ‘æˆ˜3ï¼šGANç”¨äºåºåˆ—ç”Ÿæˆ"><a href="#æŒ‘æˆ˜3ï¼šGANç”¨äºåºåˆ—ç”Ÿæˆ" class="headerlink" title="æŒ‘æˆ˜3ï¼šGANç”¨äºåºåˆ—ç”Ÿæˆ"></a>æŒ‘æˆ˜3ï¼šGANç”¨äºåºåˆ—ç”Ÿæˆ</h2><p>å°†GANç”¨äº<strong>ç”Ÿæˆæ–‡æœ¬ç­‰ç¦»æ•£åºåˆ—æ˜¯å›°éš¾çš„</strong>ï¼Œå› ä¸ºä»æ¦‚ç‡åˆ†å¸ƒä¸­â€œé‡‡æ ·â€çš„è¿™ä¸ªæ“ä½œæ˜¯ä¸å¯å¯¼çš„ï¼Œå¯¼è‡´æ¢¯åº¦æ— æ³•ä»åˆ¤åˆ«å™¨å›ä¼ åˆ°ç”Ÿæˆå™¨ã€‚é€šå¸¸éœ€è¦å€ŸåŠ©<code>å¼ºåŒ–å­¦ä¹  (Reinforcement Learning)</code> çš„æ€æƒ³æ¥è§£å†³ï¼Œä½†è¿™ä¼šä½¿è®­ç»ƒå˜å¾—æ›´åŠ å¤æ‚ã€‚</p><blockquote><p><strong>æ›´å¤šè®­ç»ƒæŠ€å·§å‚è€ƒ</strong>:</p><ul><li><p>GAN Hacks (GitHub): <a href="https://github.com/soumith/ganhacks">https://github.com/soumith/ganhacks</a></p></li><li><p>DCGAN paper: <a href="https://arxiv.org/abs/1511.06434">https://arxiv.org/abs/1511.06434</a></p></li><li><p>Improved Techniques for Training GANs: <a href="https://arxiv.org/abs/1606.03498">https://arxiv.org/abs/1606.03498</a></p></li><li><p>BigGAN paper: <a href="https://arxiv.org/abs/1809.11096">https://arxiv.org/abs/1809.11096</a></p></li></ul></blockquote><hr><h1 id="5-æ¡ä»¶ç”Ÿæˆ-Conditional-Generation"><a href="#5-æ¡ä»¶ç”Ÿæˆ-Conditional-Generation" class="headerlink" title="5. æ¡ä»¶ç”Ÿæˆ (Conditional Generation)"></a>5. æ¡ä»¶ç”Ÿæˆ (Conditional Generation)</h1><p>æ— æ¡ä»¶GANç”Ÿæˆçš„å†…å®¹æ˜¯å®Œå…¨éšæœºçš„ï¼Œæˆ‘ä»¬æ— æ³•æ§åˆ¶ã€‚<strong>æ¡ä»¶GAN (Conditional GAN, cGAN)</strong> é€šè¿‡å¼•å…¥ä¸€ä¸ªé¢å¤–çš„æ¡ä»¶è¾“å…¥ <code>x</code>ï¼ˆå¦‚æ–‡æœ¬æè¿°ã€å›¾åƒç­‰ï¼‰ï¼Œæ¥æŒ‡å¯¼ç”Ÿæˆå™¨ç”Ÿæˆç‰¹å®šçš„å†…å®¹ã€‚</p><p><strong>å·¥ä½œåŸç†</strong>:</p><ol><li><strong>ç”Ÿæˆå™¨</strong>: å°†éšæœºå™ªå£° <code>z</code> å’Œæ¡ä»¶ <code>x</code> <strong>åŒæ—¶</strong>ä½œä¸ºè¾“å…¥ï¼Œç”Ÿæˆå¯¹åº”çš„å›¾åƒ y&#x3D;G(x,z)ã€‚</li><li><strong>åˆ¤åˆ«å™¨</strong>: ä¸ä»…è¦åˆ¤æ–­è¾“å…¥çš„å›¾åƒ <code>y</code> æ˜¯å¦çœŸå®ï¼Œè¿˜è¦åˆ¤æ–­ <code>y</code> æ˜¯å¦ä¸æ¡ä»¶ <code>x</code> <strong>åŒ¹é…</strong>ã€‚</li></ol><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250913225227375.png"></p><p>åº”ç”¨å®ä¾‹ (pix2pix):</p><p>æ¡ä»¶GANåœ¨å›¾åƒåˆ°å›¾åƒç¿»è¯‘ (Image-to-Image Translation) ä»»åŠ¡ä¸­éå¸¸æˆåŠŸï¼Œä¾‹å¦‚ï¼š</p><ul><li>ä»æ ‡ç­¾å›¾ç”Ÿæˆè¡—æ™¯</li><li>ä»çº¿ç¨¿ç”Ÿæˆæ‰‹æåŒ…</li><li>ä»é»‘ç™½ç…§ç‰‡ç”Ÿæˆå½©è‰²ç…§ç‰‡</li><li>ä»èˆªæ‹å›¾ç”Ÿæˆåœ°å›¾</li></ul><blockquote><p><strong>ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>Conditional Generative Adversarial Nets: <a href="https://arxiv.org/abs/1411.1784">https://arxiv.org/abs/1411.1784</a></p></li><li><p>Image-to-Image Translation with Conditional Adversarial Networks (pix2pix): <a href="https://arxiv.org/abs/1611.07004">https://arxiv.org/abs/1611.07004</a></p></li></ul></blockquote><hr><h1 id="6-ä»éæˆå¯¹æ•°æ®ä¸­å­¦ä¹ "><a href="#6-ä»éæˆå¯¹æ•°æ®ä¸­å­¦ä¹ " class="headerlink" title="6. ä»éæˆå¯¹æ•°æ®ä¸­å­¦ä¹ "></a>6. ä»éæˆå¯¹æ•°æ®ä¸­å­¦ä¹ </h1><p>pix2pixç­‰æ¡ä»¶GANéœ€è¦å¤§é‡çš„<strong>æˆå¯¹ (paired)</strong> è®­ç»ƒæ•°æ®ï¼ˆå¦‚çº¿ç¨¿å’Œå¯¹åº”çš„å®ç‰©å›¾ï¼‰ï¼Œè€Œè¿™åœ¨ç°å®ä¸­å¾€å¾€éš¾ä»¥è·å–ã€‚<code>CycleGAN</code> è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒèƒ½ä»<strong>éæˆå¯¹ (unpaired)</strong> çš„æ•°æ®ä¸­å­¦ä¹ ä¸¤ä¸ªé¢†åŸŸä¹‹é—´çš„è½¬æ¢ã€‚</p><p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªâ€œçœŸäººç…§ç‰‡â€æ–‡ä»¶å¤¹å’Œä¸€ä¸ªâ€œåŠ¨æ¼«å¤´åƒâ€æ–‡ä»¶å¤¹ï¼Œä¸éœ€è¦ä»»ä½•ä¸€å¼ ç…§ç‰‡å’Œå®ƒå¯¹åº”çš„åŠ¨æ¼«å¤´åƒã€‚</p><p>æ ¸å¿ƒæ€æƒ³ï¼š<strong>å¾ªç¯ä¸€è‡´æ€§æŸå¤±</strong> (<code>Cycle Consistency Loss</code>)</p><p>CycleGANåŒæ—¶è®­ç»ƒä¸¤ä¸ªç”Ÿæˆå™¨ï¼šGXâ†’Yâ€‹ (ä»é¢†åŸŸXåˆ°Y) å’Œ GYâ†’Xâ€‹ (ä»é¢†åŸŸYåˆ°X)ã€‚å…¶<strong>æ ¸å¿ƒçº¦æŸæ˜¯å¾ªç¯ä¸€è‡´æ€§</strong>ï¼š</p><ol><li><p>å°†ä¸€å¼ çœŸäººç…§ç‰‡ x é€šè¿‡ GXâ†’Yâ€‹ è½¬æ¢æˆåŠ¨æ¼«å¤´åƒã€‚</p></li><li><p>å†å°†è¿™ä¸ªç”Ÿæˆçš„åŠ¨æ¼«å¤´åƒé€šè¿‡ GYâ†’Xâ€‹ è½¬æ¢å›çœŸäººç…§ç‰‡ã€‚</p></li><li><p>è¿™ä¸ªâ€œå¾ªç¯â€å›æ¥çš„ç…§ç‰‡åº”è¯¥å’ŒåŸå§‹çš„è¾“å…¥ç…§ç‰‡ x <strong>å°½å¯èƒ½ä¸€è‡´</strong>ã€‚</p></li></ol><p>è¿™ä¸ªçº¦æŸç¡®ä¿äº†ç”Ÿæˆå™¨åœ¨è½¬æ¢é£æ ¼çš„åŒæ—¶ï¼Œä¼šä¿ç•™åŸå§‹å›¾åƒçš„å†…å®¹ï¼Œè€Œä¸æ˜¯éšæ„ç”Ÿæˆä¸€ä¸ªç›®æ ‡åŸŸä¸­ä¸ç›¸å…³çš„å›¾åƒã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250913225500744.png"></p><blockquote><p><strong>ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>Unpaired Image-to-Image Translation using Cycle-Consistent Adversarial Networks (CycleGAN): <a href="https://arxiv.org/abs/1703.10593">https://arxiv.org/abs/1703.10593</a></p></li><li><p>(ç±»ä¼¼å·¥ä½œ) DiscoGAN: <a href="https://arxiv.org/abs/1703.05192">https://arxiv.org/abs/1703.05192</a></p></li><li><p>(ç±»ä¼¼å·¥ä½œ) DualGAN: <a href="https://arxiv.org/abs/1704.02510">https://arxiv.org/abs/1704.02510</a></p></li><li><p>(å¤šé¢†åŸŸ) StarGAN: <a href="https://arxiv.org/abs/1711.09020">https://arxiv.org/abs/1711.09020</a></p></li></ul></blockquote><hr><h1 id="7-ç”Ÿæˆæ¨¡å‹çš„è¯„ä¼°"><a href="#7-ç”Ÿæˆæ¨¡å‹çš„è¯„ä¼°" class="headerlink" title="7. ç”Ÿæˆæ¨¡å‹çš„è¯„ä¼°"></a>7. ç”Ÿæˆæ¨¡å‹çš„è¯„ä¼°</h1><p>è¯„ä¼°ç”Ÿæˆæ¨¡å‹çš„å¥½åæ˜¯ä¸€ä¸ªå¼€æ”¾æ€§éš¾é¢˜ï¼Œå› ä¸ºâ€œå¥½â€æœ¬èº«æ˜¯ä¸€ä¸ªä¸»è§‚æ¦‚å¿µã€‚æˆ‘ä»¬é€šå¸¸ä»ä¸¤ä¸ªç»´åº¦è¿›è¡Œè¯„ä¼°ï¼š</p><p><strong>1. å›¾åƒè´¨é‡ (Quality)</strong></p><ul><li><strong>æ–¹æ³•</strong>: å°†ç”Ÿæˆçš„å›¾åƒè¾“å…¥åˆ°ä¸€ä¸ª<strong>é¢„è®­ç»ƒå¥½çš„å›¾åƒåˆ†ç±»å™¨</strong>ï¼ˆå¦‚Inception Netï¼‰ä¸­ã€‚å¦‚æœç”Ÿæˆçš„å›¾åƒæ¸…æ™°ä¸”åŒ…å«æ˜ç¡®çš„ç‰©ä½“ï¼Œåˆ†ç±»å™¨ä¼šç»™å‡ºä¸€ä¸ªéå¸¸é›†ä¸­çš„æ¦‚ç‡åˆ†å¸ƒï¼ˆä¾‹å¦‚ï¼Œ99%çš„æ¦‚ç‡æ˜¯â€œç‹—â€ï¼‰ã€‚å¦‚æœå›¾åƒæ¨¡ç³Šä¸æ¸…ï¼Œåˆ™åˆ†å¸ƒä¼šæ¯”è¾ƒåˆ†æ•£ã€‚</li></ul><p><strong>2. å›¾åƒå¤šæ ·æ€§ (Diversity)</strong></p><ul><li><p><strong>é—®é¢˜</strong>: ç”Ÿæˆå™¨å¯èƒ½ä¼šé™·å…¥<strong>æ¨¡å¼åå¡Œ (Mode Collapse)<strong>ï¼Œå³æ— è®ºè¾“å…¥ä»€ä¹ˆéšæœºå™ªå£°ï¼Œéƒ½åªç”Ÿæˆå°‘æ•°å‡ ç§æˆ–ä¸€ç§å›¾åƒï¼Œ</strong>ç¼ºä¹å¤šæ ·æ€§</strong>ã€‚</p></li><li><p><strong>æ¨¡å¼ä¸¢å¤± (Mode Dropping)</strong>: ç”Ÿæˆå™¨å¯èƒ½åªå­¦ä¼šäº†çœŸå®æ•°æ®åˆ†å¸ƒä¸­çš„ä¸€éƒ¨åˆ†æ¨¡å¼ï¼Œè€Œå®Œå…¨å¿½ç•¥äº†å…¶ä»–æ¨¡å¼ã€‚</p></li></ul><p><strong>å¸¸ç”¨è¯„ä¼°æŒ‡æ ‡</strong>:</p><ul><li><p><strong>Inception Score (IS)</strong>: ç»“åˆäº†å›¾åƒè´¨é‡å’Œå¤šæ ·æ€§ã€‚åˆ†æ•°è¶Šé«˜è¶Šå¥½ã€‚ä½†å®ƒæœ‰ç¼ºé™·ï¼Œæ¯”å¦‚æ— æ³•æ£€æµ‹åˆ°æ˜¯å¦è¿‡æ‹Ÿåˆäº†è®­ç»ƒæ•°æ®ã€‚</p></li><li><p><strong>FrÃ©chet Inception Distance (FID)</strong>: ç›®å‰æ›´å¸¸ç”¨ã€æ›´å¯é çš„æŒ‡æ ‡ã€‚å®ƒé€šè¿‡æ¯”è¾ƒçœŸå®å›¾åƒå’Œç”Ÿæˆå›¾åƒåœ¨ç‰¹å¾ç©ºé—´ä¸­çš„åˆ†å¸ƒç›¸ä¼¼åº¦æ¥æ‰“åˆ†ã€‚<strong>FIDåˆ†æ•°è¶Šä½è¶Šå¥½</strong>ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250913225648019.png"></p><blockquote><p><strong>ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>A Note on the Inception Score: <a href="https://arxiv.org/abs/1801.01973">https://arxiv.org/abs/1801.01973</a></p></li><li><p>GANs Trained by a Two Time-Scale Update Rule Converge to a Local Nash Equilibrium: <a href="https://arxiv.org/abs/1706.08500">https://arxiv.org/abs/1706.08500</a></p></li><li><p>Are GANs Created Equal? A Large-Scale Study: <a href="https://arxiv.org/abs/1711.10337">https://arxiv.org/abs/1711.10337</a></p></li><li><p>Pros and Cons of GAN Evaluation Measures: <a href="https://arxiv.org/abs/1802.03446">https://arxiv.org/abs/1802.03446</a></p></li></ul></blockquote>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>GAN</tag>
      
      <tag>Adversarial</tag>
      
      <tag>JSæ•£åº¦</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CS231n-L2-Image Classification with Linear Classifiers</title>
    <link href="/2025/09/12/L2-Image%20Classification%20with%20Linear%20Classifiers/"/>
    <url>/2025/09/12/L2-Image%20Classification%20with%20Linear%20Classifiers/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘æ¬è¿çš„CS231n çš„è®²ä¹‰ ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>åŸæ–‡é“¾æ¥ï¼š <a href="https://cs231n.github.io/classification/">link</a></p><p>This is an introductory lecture designed to introduce people from outside of Computer Vision to the Image Classification problem, and the data-driven approach. The Table of Contents:</p><ul><li><a href="https://cs231n.github.io/classification/#image-classification">Image Classification</a><ul><li><a href="https://cs231n.github.io/classification/#nearest-neighbor-classifier">Nearest Neighbor Classifier</a></li><li><a href="https://cs231n.github.io/classification/#k---nearest-neighbor-classifier">k - Nearest Neighbor Classifier</a></li><li><a href="https://cs231n.github.io/classification/#validation-sets-for-hyperparameter-tuning">Validation sets for Hyperparameter tuning</a></li><li><a href="https://cs231n.github.io/classification/#summary">Summary</a></li><li><a href="https://cs231n.github.io/classification/#summary-applying-knn-in-practice">Summary: Applying kNN in practice</a><ul><li><a href="https://cs231n.github.io/classification/#further-reading">Further Reading</a></li></ul></li></ul></li></ul><h2 id="Image-Classification"><a href="#Image-Classification" class="headerlink" title="Image Classification"></a>Image Classification</h2><p><strong>Motivation</strong>. In this section we will introduce the Image Classification problem, which is the task of assigning an input image one label from a fixed set of categories. This is one of the core problems in Computer Vision that, despite its simplicity, has a large variety of practical applications. Moreover, as we will see later in the course, many other seemingly distinct Computer Vision tasks (such as object detection, segmentation) can be reduced to image classification.</p><p><strong>Example</strong>. For example, in the image below an image classification model takes a single image and assigns probabilities to 4 labels,Â <em>{cat, dog, hat, mug}</em>. As shown in the image, keep in mind that to a computer an image is represented as one large 3-dimensional array of numbers. In this example, the cat image is 248 pixels wide, 400 pixels tall, and has three color channels Red,Green,Blue (or RGB for short). Therefore, the image consists of 248 x 400 x 3 numbers, or a total of 297,600 numbers. Each number is an integer that ranges from 0 (black) to 255 (white). Our task is to turn this quarter of a million numbers into a single label, such asÂ <em>â€œcatâ€</em>.</p><p><img src="https://cs231n.github.io/assets/classify.png"></p><p>The task in Image Classification is to predict a single label (or aÂ distributionÂ over labels as shown here to indicate our confidence) for a given image. Images are 3-dimensional arrays of integers from 0 to 255, ofÂ sizeÂ Width x Height x 3. The 3 represents the three color channels Red, Green, Blue.</p><p><strong>Challenges</strong>. Since this task of recognizing a visual concept (e.g. cat) is relatively trivial for a human to perform, it is worth considering the challenges involved from the perspective of a Computer Vision algorithm. As we present (an inexhaustive) list of challenges below, keep in mind the raw representation of images as a 3-DÂ array of brightness values:</p><ul><li><strong>Viewpoint variation</strong>. A single instance of an object can be oriented in many ways with respect to the camera.</li><li><strong>Scale variation</strong>. Visual classes often exhibit variation in theirÂ sizeÂ (sizeÂ in the real world, not only in terms of their extent in the image).</li><li><strong>Deformation</strong>. Many objects of interest are not rigid bodies and can be deformed in extreme ways.</li><li><strong>Occlusion</strong>. The objects of interest can be occluded. Sometimes only a small portion of an object (as little as few pixels) could be visible.</li><li><strong>Illumination conditions</strong>. The effects of illumination are drastic on the pixel level.</li><li><strong>Background clutter</strong>. The objects of interest mayÂ <em>blend</em>Â into their environment, making them hard to identify.</li><li><strong>Intra-class variation</strong>. The classes of interest can often be relatively broad, such asÂ <em>chair</em>. There are many different types of these objects, each with their own appearance.</li></ul><p>A good image classification model must be invariant to the cross product of all these variations, while simultaneously retaining sensitivity to the inter-class variations.</p><p><img src="https://cs231n.github.io/assets/challenges.jpeg"></p><p><strong>Data-driven approach</strong>. How might we go about writing an algorithm that can classify images into distinct categories? Unlike writing an algorithm for, for example, sorting a list of numbers, it is not obvious how one might write an algorithm for identifying cats in images. Therefore, instead of trying to specify what every one of the categories of interest look like directly in code, the approach that we will take is not unlike one you would take with a child: weâ€™re going to provide the computer with many examples of each class and then develop learning algorithms that look at these examples and learn about the visual appearance of each class. This approach is referred to as aÂ <em>data-driven approach</em>, since it relies on first accumulating aÂ <em>training dataset</em>Â of labeled images. Here is an example of what such a dataset might look like:</p><p><img src="https://cs231n.github.io/assets/trainset.jpg"></p><p>An example training set for four visual categories. In practice we may have thousands of categories and hundreds of thousands of images for each category.</p><p><strong>The image classification pipeline</strong>. Weâ€™veÂ seen that the task in Image Classification is to take an array of pixels that represents a single image and assign a label to it. Our complete pipeline can be formalized as follows:</p><ul><li><strong>Input:</strong>Â Our input consists of a set ofÂ <em>N</em>Â images, each labeled with one ofÂ <em>K</em>Â different classes. We refer to this data as theÂ <em>training set</em>.</li><li><strong>Learning:</strong>Â Our task is to use the training set to learn what every one of the classes looks like. We refer to this step asÂ <em>training a classifier</em>, orÂ <em>learning a model</em>.</li><li><strong>Evaluation:</strong>Â In the end, we evaluate the quality of the classifier by asking it to predict labels for a new set of images that it has never seen before. We will then compare the true labels of these images to the ones predicted by the classifier. Intuitively, weâ€™re hoping that a lot of the predictions match up with the true answers (which we call theÂ <em>ground truth</em>).</li></ul><h3 id="Nearest-Neighbor-Classifier"><a href="#Nearest-Neighbor-Classifier" class="headerlink" title="Nearest Neighbor Classifier"></a>Nearest Neighbor Classifier</h3><p>As our first approach, we will develop what we call aÂ <strong>Nearest Neighbor Classifier</strong>. This classifier has nothing to do with Convolutional Neural Networks and it is very rarely used in practice, but it will allow us to get an idea about the basic approach to an image classification problem.</p><p><strong>Example image classification dataset: CIFAR-10.</strong>Â One popular toy image classification dataset is theÂ <a href="https://www.cs.toronto.edu/~kriz/cifar.html">CIFAR-10 dataset</a>. This dataset consists of 60,000 tiny images that are 32 pixels high and wide. Each image is labeled with one of 10 classes (for exampleÂ <em>â€œairplane, automobile, bird, etcâ€</em>). These 60,000 images are partitioned into a training set of 50,000 images and a test set of 10,000 images. In the image below you can see 10 random example images from each one of the 10 classes:</p><p><img src="https://cs231n.github.io/assets/nn.jpg"></p><p>Left: Example images from theÂ <a href="https://www.cs.toronto.edu/~kriz/cifar.html">CIFAR-10 dataset</a>. Right: first column shows a few test images and next to each we show the top 10 nearest neighbors in the training set according to pixel-wise difference.</p><p>Suppose now that we are given the CIFAR-10 training set of 50,000 images (5,000 images for every one of the labels), and we wish to label the remaining 10,000. The nearest neighbor classifier will take a test image, compare it to every single one of the training images, and predict the label of the closest training image. In the image above and on the right you can see an example result of such a procedure for 10 example test images. Notice that in only about 3 out of 10 examples an image of the same class is retrieved, while in the other 7 examples this is not the case. For example, in the 8th row the nearest training image to the horse head is a red car, presumably due to the strong black background. As a result, this image of a horse would in this case be mislabeled as a car.</p><p>You may have noticed that we left unspecified the details of exactly how we compare two images, which in this case are just two blocks of 32 x 32 x 3. One of the simplest possibilities is to compare the images pixel by pixel and add up all the differences. In other words, given two images and representing them as vectorsÂ I1,I2Â , a reasonable choice for comparing them might be theÂ <strong>L1 distance</strong>:</p><p>[d_1 (I_1, I_2) &#x3D; \sum_{p} \left|Â I^p_1 -Â I^p_2 \right|]</p><p>Where the sum is taken over all pixels. Here is the procedure visualized:</p><p><img src="https://cs231n.github.io/assets/nneg.jpeg"></p><p>An example of using pixel-wise differences to compare two images with L1 distance (for one color channel in this example). Two images are subtracted elementwise and then all differences are added up to a single number. If two images are identical the result will be zero. But if the images are very different the result will be large.</p><p>Letâ€™sÂ also look at how we might implement the classifier in code. First, letâ€™sÂ load the CIFAR-10 data into memory as 4 arrays: the training data&#x2F;labels and the test data&#x2F;labels. In the code below,Â <code>Xtr</code>Â (ofÂ sizeÂ 50,000 x 32 x 32 x 3) holds all the images in the training set, and a correspondingÂ 1-dimensional arrayÂ <code>Ytr</code>Â (of length 50,000) holds the training labels (from 0 to 9):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">Xtr, Ytr, Xte, Yte = load_CIFAR10(<span class="hljs-string">&#x27;data/cifar10/&#x27;</span>) <span class="hljs-comment"># a magic function we provide</span><br><span class="hljs-comment"># flatten out all images to be one-dimensional</span><br>Xtr_rows = Xtr.reshape(Xtr.shape[<span class="hljs-number">0</span>], <span class="hljs-number">32</span> * <span class="hljs-number">32</span> * <span class="hljs-number">3</span>) <span class="hljs-comment"># Xtr_rows becomes 50000 x 3072</span><br>Xte_rows = Xte.reshape(Xte.shape[<span class="hljs-number">0</span>], <span class="hljs-number">32</span> * <span class="hljs-number">32</span> * <span class="hljs-number">3</span>) <span class="hljs-comment"># Xte_rows becomes 10000 x 3072</span><br></code></pre></td></tr></table></figure><p>Now that we have all images stretched out as rows, here is how we could train and evaluate a classifier:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">nn = NearestNeighbor() <span class="hljs-comment"># create a Nearest Neighbor classifier class</span><br>nn.train(Xtr_rows, Ytr) <span class="hljs-comment"># train the classifier on the training images and labels</span><br>Yte_predict = nn.predict(Xte_rows) <span class="hljs-comment"># predict labels on the test images</span><br><span class="hljs-comment"># and now print the classification accuracy, which is the average number</span><br><span class="hljs-comment"># of examples that are correctly predicted (i.e. label matches)</span><br><span class="hljs-built_in">print</span> <span class="hljs-string">&#x27;accuracy: %f&#x27;</span> % ( np.mean(Yte_predict == Yte) )<br></code></pre></td></tr></table></figure><p>Notice that as an evaluation criterion, it is common to use theÂ <strong>accuracy</strong>, which measures the fraction of predictions that were correct. Notice that all classifiers we will build satisfy this one common API: they have aÂ <code>train(X,y)</code>Â function that takes the data and the labels to learn from. Internally, the class should build some kind of model of the labels and how they can be predicted from the data. And then there is aÂ <code>predict(X)</code>Â function, which takes new data and predicts the labels. Of course, weâ€™veÂ left out the meat of things - the actual classifier itself. Here is an implementation of a simple Nearest Neighbor classifier with the L1 distance that satisfies this template:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NearestNeighbor</span>(<span class="hljs-title class_ inherited__">object</span>):<br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>    <span class="hljs-keyword">pass</span><br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">train</span>(<span class="hljs-params">self, X, y</span>):<br>    <span class="hljs-string">&quot;&quot;&quot; X is N x D where each row is an example. Y is 1-dimension of size N &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># the nearest neighbor classifier simply remembers all the training data</span><br>    <span class="hljs-variable language_">self</span>.Xtr = X<br>    <span class="hljs-variable language_">self</span>.ytr = y<br><br>  <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, X</span>):<br>    <span class="hljs-string">&quot;&quot;&quot; X is N x D where each row is an example we wish to predict label for &quot;&quot;&quot;</span><br>    num_test = X.shape[<span class="hljs-number">0</span>]<br>    <span class="hljs-comment"># lets make sure that the output type matches the input type</span><br>    Ypred = np.zeros(num_test, dtype = <span class="hljs-variable language_">self</span>.ytr.dtype)<br><br>    <span class="hljs-comment"># loop over all test rows</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(num_test):<br>      <span class="hljs-comment"># find the nearest training image to the i&#x27;th test image</span><br>      <span class="hljs-comment"># using the L1 distance (sum of absolute value differences)</span><br>      distances = np.<span class="hljs-built_in">sum</span>(np.<span class="hljs-built_in">abs</span>(<span class="hljs-variable language_">self</span>.Xtr - X[i,:]), axis = <span class="hljs-number">1</span>)<br>      min_index = np.argmin(distances) <span class="hljs-comment"># get the index with smallest distance</span><br>      Ypred[i] = <span class="hljs-variable language_">self</span>.ytr[min_index] <span class="hljs-comment"># predict the label of the nearest example</span><br><br>    <span class="hljs-keyword">return</span> Ypred<br></code></pre></td></tr></table></figure><p>If you ran this code, you would see that this classifier only achievesÂ <strong>38.6%</strong>Â on CIFAR-10. Thatâ€™sÂ more impressive than guessing at random (which would give 10% accuracy since there are 10 classes), but nowhere near human performance (which isÂ <a href="https://karpathy.github.io/2011/04/27/manually-classifying-cifar10/">estimated at about 94%</a>) or near state-of-the-art Convolutional Neural Networks that achieve about 95%, matching human accuracy (see theÂ <a href="https://www.kaggle.com/c/cifar-10/leaderboard">leaderboard</a>Â of a recent Kaggle competition on CIFAR-10).</p><p><strong>The choice of distance.</strong>Â There are many other ways of computing distances between vectors. Another common choice could be to instead use theÂ <strong>L2 distance</strong>, which has the geometric interpretation of computing the euclidean distance between two vectors. The distance takes the form:</p><p>[d_2 (I_1, I_2) &#x3D; \sqrt{\sum_{p} \left(Â I^p_1 -Â I^p_2 \right)^2}]</p><p>In other words we would be computing the pixelwise difference as before, but this time we square all of them, add them up and finally take the square root. In numpy, using the code from above we would need to only replace a single line of code. The line that computes the distances:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">distances = np.sqrt(np.<span class="hljs-built_in">sum</span>(np.square(<span class="hljs-variable language_">self</span>.Xtr - X[i,:]), axis = <span class="hljs-number">1</span>))<br></code></pre></td></tr></table></figure><p>Note thatÂ IÂ included theÂ <code>np.sqrt</code>Â call above, but in a practical nearest neighbor application we could leave out the square root operation because square root is aÂ <em>monotonic function</em>. That is, it scales the absoluteÂ sizesÂ of the distances but it preserves the ordering, so the nearest neighbors with or without it are identical. If you ran the Nearest Neighbor classifier on CIFAR-10 with this distance, you would obtainÂ <strong>35.4%</strong>Â accuracy (slightly lower than our L1 distance result).</p><p><strong>L1 vs. L2.</strong>Â It is interesting to consider differences between the two metrics. In particular, the L2 distance is much more unforgiving than the L1 distance when it comes to differences between two vectors. That is, the L2 distance prefers many medium disagreements to one big one. L1 and L2 distances (or equivalently the L1&#x2F;L2 norms of the differences between a pair of images) are the most commonly used special cases of aÂ <a href="https://planetmath.org/vectorpnorm">p-norm</a>.</p><h3 id="k-Nearest-Neighbor-Classifier"><a href="#k-Nearest-Neighbor-Classifier" class="headerlink" title="k - Nearest Neighbor Classifier"></a>k - Nearest Neighbor Classifier</h3><p>You may have noticed that it is strange to only use the label of the nearest image when we wish to make a prediction. Indeed, it is almost always the case that one can do better by using whatâ€™sÂ called aÂ <strong>k-Nearest Neighbor Classifier</strong>. The idea is very simple: instead of finding the single closest image in the training set, we will find the topÂ <strong>k</strong>Â closest images, and have them vote on the label of the test image. In particular, whenÂ <em>k &#x3D;Â 1</em>, we recover the Nearest Neighbor classifier. Intuitively, higher values ofÂ <strong>k</strong>Â have a smoothing effect that makes the classifier more resistant to outliers:</p><p><img src="https://cs231n.github.io/assets/knn.jpeg"></p><p>An example of the difference between Nearest Neighbor and a 5-Nearest Neighbor classifier, using 2-dimensional points and 3 classes (red, blue, green). The colored regions show theÂ <strong>decision boundaries</strong>Â induced by the classifier with an L2 distance. The white regions show points that are ambiguously classified (i.e. class votes are tied for at least two classes). Notice that in the case of a NN classifier, outlier datapoints (e.g. green point in the middle of a cloud of blue points) create small islands of likely incorrect predictions, while the 5-NN classifier smooths over these irregularities, likely leading to betterÂ <strong>generalization</strong>Â on the test data (not shown). Also note that the gray regions in the 5-NN image are caused by ties in the votes among the nearest neighbors (e.g. 2 neighbors are red, next two neighbors are blue, last neighbor is green).</p><p>In practice, you will almost always want to use k-Nearest Neighbor. But what value ofÂ <em>k</em>Â should you use? We turn to this problem next.</p><h3 id="Validation-sets-for-Hyperparameter-tuning"><a href="#Validation-sets-for-Hyperparameter-tuning" class="headerlink" title="Validation sets for Hyperparameter tuning"></a>Validation sets for Hyperparameter tuning</h3><p>The k-nearest neighbor classifier requires a setting forÂ <em>k</em>. But what number works best? Additionally, we saw that there are many different distance functions we could have used: L1 norm, L2 norm, there are many other choices we didnâ€™t even consider (e.g. dot products). These choices are calledÂ <strong>hyperparameters</strong>Â and they come up very often in the design of many Machine Learning algorithms that learn from data. Itâ€™sÂ often not obvious what values&#x2F;settings one should choose.</p><p>You might be tempted to suggest that we should try out many different values and see what works best. That is a fine idea and thatâ€™sÂ indeed what we will do, but this must be done very carefully. In particular,Â <strong>we cannot use the test set for the purpose of tweaking hyperparameters</strong>. Whenever youâ€™re designing Machine Learning algorithms, you should think of the test set as a very preciousÂ resourceÂ that should ideally never be touched until one time at the very end. Otherwise, the very real danger is that you may tune your hyperparameters to work well on the test set, but if you were to deploy your model you could see a significantly reduced performance. In practice, we would say that youÂ <strong>overfit</strong>Â to the test set. Another way of looking at it is that if you tune your hyperparameters on the test set, you are effectively using the test set as the training set, and therefore the performance you achieve on it will be too optimistic with respect to what you might actually observe when you deploy your model. But if you only use the test set once at end, it remains a good proxy for measuring theÂ <strong>generalization</strong>Â of your classifier (we will see much more discussion surrounding generalization later in the class).</p><blockquote><p>Evaluate on the test set only a single time, at the very end.</p></blockquote><p>Luckily, there is a correct way of tuning the hyperparameters and it does not touch the test set at all. The idea is to split our training set in two: a slightly smaller training set, and what we call aÂ <strong>validation set</strong>. Using CIFAR-10 as an example, we could for example use 49,000 of the training images for training, and leave 1,000 aside for validation. This validation set is essentially used as a fake test set to tune the hyper-parameters.</p><p>Here is what this might look like in the case of CIFAR-10:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># assume we have Xtr_rows, Ytr, Xte_rows, Yte as before</span><br><span class="hljs-comment"># recall Xtr_rows is 50,000 x 3072 matrix</span><br>Xval_rows = Xtr_rows[:<span class="hljs-number">1000</span>, :] <span class="hljs-comment"># take first 1000 for validation</span><br>Yval = Ytr[:<span class="hljs-number">1000</span>]<br>Xtr_rows = Xtr_rows[<span class="hljs-number">1000</span>:, :] <span class="hljs-comment"># keep last 49,000 for train</span><br>Ytr = Ytr[<span class="hljs-number">1000</span>:]<br><br><span class="hljs-comment"># find hyperparameters that work best on the validation set</span><br>validation_accuracies = []<br><span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">50</span>, <span class="hljs-number">100</span>]:<br><br>  <span class="hljs-comment"># use a particular value of k and evaluation on validation data</span><br>  nn = NearestNeighbor()<br>  nn.train(Xtr_rows, Ytr)<br>  <span class="hljs-comment"># here we assume a modified NearestNeighbor class that can take a k as input</span><br>  Yval_predict = nn.predict(Xval_rows, k = k)<br>  acc = np.mean(Yval_predict == Yval)<br>  <span class="hljs-built_in">print</span> <span class="hljs-string">&#x27;accuracy: %f&#x27;</span> % (acc,)<br><br>  <span class="hljs-comment"># keep track of what works on the validation set</span><br>  validation_accuracies.append((k, acc))<br></code></pre></td></tr></table></figure><p>By the end of this procedure, we could plot a graph that shows which values ofÂ <em>k</em>Â work best. We would then stick with this value and evaluate once on the actual test set.</p><blockquote><p>Split your training set into training set and a validation set. Use validation set to tune all hyperparameters. At the end run a single time on the test set and report performance.</p></blockquote><p><strong>Cross-validation</strong>. In cases where theÂ sizeÂ of your training data (and therefore also the validation data) might be small, people sometimes use a more sophisticated technique for hyperparameter tuning calledÂ <strong>cross-validation</strong>. Working with our previous example, the idea is that instead of arbitrarily picking the first 1000 datapoints to be the validation set and rest training set, you can get a better and less noisy estimate of how well a certain value ofÂ <em>k</em>Â works by iterating over different validation sets and averaging the performance across these. For example, in 5-fold cross-validation, we would split the training data into 5 equal folds, use 4 of them for training, andÂ 1Â for validation. We would then iterate over which fold is the validation fold, evaluate the performance, and finally average the performance across the different folds.</p><p><img src="https://cs231n.github.io/assets/cvplot.png"></p><p>Example of a 5-fold cross-validation run for the parameterÂ <strong>k</strong>. For each value ofÂ <strong>k</strong>Â we train on 4 folds and evaluate on the 5th. Hence, for eachÂ <strong>k</strong>Â we receive 5 accuracies on the validation fold (accuracy is the y-axis, each result is a point). The trend line is drawn through the average of the results for eachÂ <strong>k</strong>Â and the error bars indicate the standard deviation. Note that in this particular case, the cross-validation suggests that a value of aboutÂ <strong>k</strong>Â &#x3D; 7 works best on this particular dataset (corresponding to the peak in the plot). If we used more than 5 folds, we might expect to see a smoother (i.e. less noisy) curve.</p><p><strong>In practice</strong>. In practice, people prefer to avoid cross-validation in favor of having a single validation split, since cross-validation can be computationally expensive. The splits people tend to use is between 50%-90% of the training data for training and rest for validation. However, this depends on multiple factors: For example if the number of hyperparameters is large you may prefer to use bigger validation splits. If the number of examples in the validation set is small (perhaps only a few hundred or so), it is safer to use cross-validation. Typical number of folds you can see in practice would be 3-fold, 5-fold or 10-fold cross-validation.</p><p><img src="https://cs231n.github.io/assets/crossval.jpeg"></p><p>Common data splits. A training and test set is given. The training set is split into folds (for example 5 folds here). The folds 1-4 become the training set. One fold (e.g. fold 5 here in yellow) is denoted as the Validation fold and is used to tune the hyperparameters. Cross-validation goes a step further and iterates over the choice of which fold is the validation fold, separately from 1-5. This would be referred to as 5-fold cross-validation. In the very end once the model is trained and all the best hyperparameters were determined, the model is evaluated a single time on the test data (red).</p><p><strong>Pros and Cons of Nearest Neighbor classifier.</strong></p><p>It is worth considering some advantages and drawbacks of the Nearest Neighbor classifier. Clearly, one advantage is that it is very simple to implement and understand. Additionally, the classifier takes no time to train, since all that is required is to store and possibly index the training data. However, we pay that computational cost at test time, since classifying a test example requires a comparison to every single training example. This is backwards, since in practice we often care about the test time efficiency much more than the efficiency at training time. In fact, the deep neural networks we will develop later in this class shift this tradeoff to the other extreme: They are very expensive to train, but once the training is finished it is very cheap to classify a new test example. This mode of operation is much more desirable in practice.</p><p>As an aside, the computational complexity of the Nearest Neighbor classifier is an active area of research, and severalÂ <strong>Approximate Nearest Neighbor</strong>Â (ANN) algorithms and libraries exist that can accelerate the nearest neighbor lookup in a dataset (e.g.Â <a href="https://github.com/mariusmuja/flann">FLANN</a>). These algorithms allow one to trade off the correctness of the nearest neighbor retrieval with its space&#x2F;time complexity during retrieval, and usually rely on a pre-processing&#x2F;indexing stage that involves building a kdtree, or running the k-means algorithm.</p><p>The Nearest Neighbor Classifier may sometimes be a good choice in some settings (especially if the data is low-dimensional), but it is rarely appropriate for use in practical image classification settings. One problem is that images are high-dimensional objects (i.e. they often contain many pixels), and distances over high-dimensional spaces can be very counter-intuitive. The image below illustrates the point that the pixel-based L2 similarities we developed above are very different from perceptual similarities:</p><p><img src="https://cs231n.github.io/assets/samenorm.png"></p><p>Pixel-based distances on high-dimensional data (and images especially) can be very unintuitive. An original image (left) and three other images next to it that are all equally far away from it based on L2 pixel distance. Clearly, the pixel-wise distance does not correspond at all to perceptual or semantic similarity.</p><p>Here is one more visualization to convince you that using pixel differences to compare images is inadequate. We can use a visualization technique calledÂ <a href="https://lvdmaaten.github.io/tsne/">t-SNE</a>Â to take the CIFAR-10 images and embed them in two dimensions so that their (local) pairwise distances are best preserved. In this visualization, images that are shown nearby are considered to be very near according to the L2 pixelwise distance we developed above:</p><p><img src="https://cs231n.github.io/assets/pixels_embed_cifar10.jpg"></p><p>CIFAR-10 images embedded in two dimensions with t-SNE. Images that are nearby on this image are considered to be close based on the L2 pixel distance. Notice the strong effect of background rather than semantic class differences. ClickÂ <a href="https://cs231n.github.io/assets/pixels_embed_cifar10_big.jpg">here</a>Â for a bigger version of this visualization.</p><p>In particular, note that images that are nearby each other are much more a function of the general colorÂ distributionÂ of the images, or the type of background rather than their semantic identity. For example, a dog can be seen very near a frog since both happen to be on white background. Ideally we would like images of all of the 10 classes to form their own clusters, so that images of the same class are nearby to each other regardless of irrelevant characteristics and variations (such as the background). However, to get this property we will have to go beyond raw pixels.</p><h3 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h3><p>In summary:</p><ul><li>We introduced the problem ofÂ <strong>Image Classification</strong>, in which we are given a set of images that are all labeled with a single category. We are then asked to predict these categories for a novel set of test images and measure the accuracy of the predictions.</li><li>We introduced a simple classifier called theÂ <strong>Nearest Neighbor classifier</strong>. We saw that there are multiple hyper-parameters (such as value of k, or the type of distance used to compare examples) that are associated with this classifier and that there was no obvious way of choosing them.</li><li>We saw that the correct way to set these hyperparameters is to split your training data into two: a training set and a fake test set, which we callÂ <strong>validation set</strong>. We try different hyperparameter values and keep the values that lead to the best performance on the validation set.</li><li>If the lack of training data is a concern, we discussed a procedure calledÂ <strong>cross-validation</strong>, which can help reduce noise in estimating which hyperparameters work best.</li><li>Once the best hyperparameters are found, we fix them and perform a singleÂ <strong>evaluation</strong>Â on the actual test set.</li><li>We saw that Nearest Neighbor can get us about 40% accuracy on CIFAR-10. It is simple to implement but requires us to store the entire training set and it is expensive to evaluate on a test image.</li><li>Finally, we saw that the use of L1 or L2 distances on raw pixel values is not adequate since the distances correlate more strongly with backgrounds and colorÂ distributionsÂ of images than with their semantic content.</li></ul><p>In next lectures we will embark on addressing these challenges and eventually arrive at solutions that give 90% accuracies, allow us to completely discard the training set once learning is complete, and they will allow us to evaluate a test image in less than a millisecond.</p><h3 id="Summary-Applying-kNN-in-practice"><a href="#Summary-Applying-kNN-in-practice" class="headerlink" title="Summary: Applying kNN in practice"></a>Summary: Applying kNN in practice</h3><p>If you wish to apply kNN in practice (hopefully not on images, or perhaps as only a baseline) proceed as follows:</p><ol><li>Preprocess your data: Normalize the features in your data (e.g. one pixel in images) to have zero mean and unit variance. We will cover this in more detail in later sections, and chose not to cover data normalization in this section because pixels in images are usually homogeneous and do not exhibit widely differentÂ distributions, alleviating the need for data normalization.</li><li>If your data is very high-dimensional, consider using a dimensionality reduction technique such as PCA (<a href="https://en.wikipedia.org/wiki/Principal_component_analysis">wiki ref</a>,Â <a href="http://cs229.stanford.edu/notes/cs229-notes10.pdf">CS229ref</a>,Â <a href="https://web.archive.org/web/20150503165118/http://www.bigdataexaminer.com:80/understanding-dimensionality-reduction-principal-component-analysis-and-singular-value-decomposition/">blog ref</a>), NCA (<a href="https://en.wikipedia.org/wiki/Neighbourhood_components_analysis">wiki ref</a>,Â <a href="https://kevinzakka.github.io/2020/02/10/nca/">blog ref</a>), or evenÂ <a href="https://scikit-learn.org/stable/modules/random_projection.html">Random Projections</a>.</li><li>Split your training data randomly into train&#x2F;val splits. As a rule of thumb, between 70-90% of your data usually goes to the train split. This setting depends on how many hyperparameters you have and how much of an influence you expect them to have. If there are many hyperparameters to estimate, you should err on the side of having larger validation set to estimate them effectively. If you are concerned about theÂ sizeÂ of your validation data, it is best to split the training data into folds and perform cross-validation. If you can afford the computational budget it is always safer to go with cross-validation (the more folds the better, but more expensive).</li><li>Train and evaluate the kNN classifier on the validation data (for all folds, if doing cross-validation) for many choices ofÂ <strong>k</strong>Â (e.g. the more the better) and across different distance types (L1 and L2 are good candidates)</li><li>If your kNN classifier is running too long, consider using an Approximate Nearest Neighbor library (e.g.Â <a href="https://github.com/mariusmuja/flann">FLANN</a>) to accelerate the retrieval (at cost of some accuracy).</li><li>Take note of the hyperparameters that gave the best results. There is a question of whether you should use the full training set with the best hyperparameters, since the optimal hyperparameters might change if you were to fold the validation data into your training set (since theÂ sizeÂ of the data would be larger). In practice it is cleaner to not use the validation data in the final classifier and consider it to beÂ <em>burned</em>Â on estimating the hyperparameters. Evaluate the best model on the test set. Report the test set accuracy and declare the result to be the performance of the kNN classifier on your data.</li></ol><h4 id="Further-Reading"><a href="#Further-Reading" class="headerlink" title="Further Reading"></a>Further Reading</h4><p>Here are some (optional) links you may find interesting for further reading:</p><ul><li><p><a href="https://homes.cs.washington.edu/~pedrod/papers/cacm12.pdf">A Few Useful Things to Know about Machine Learning</a>, where especially section 6 is related but the whole paper is a warmly recommended reading.</p></li><li><p><a href="https://people.csail.mit.edu/torralba/shortCourseRLOC/index.html">Recognizing and Learning Object Categories</a>, a short course of object categorization at ICCV 2005.</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>CV</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CV</tag>
      
      <tag>è®¡ç®—æœºè§†è§‰</tag>
      
      <tag>Image_Classification</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DriveLMã€Dolphins å¤ç°</title>
    <link href="/2025/09/02/Drivebench%20%E5%A4%8D%E7%8E%B0/"/>
    <url>/2025/09/02/Drivebench%20%E5%A4%8D%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="å­¦é•¿è®°å½•"><a href="#å­¦é•¿è®°å½•" class="headerlink" title="å­¦é•¿è®°å½•"></a>å­¦é•¿è®°å½•</h1><h2 id="æ•°æ®å‡†å¤‡"><a href="#æ•°æ®å‡†å¤‡" class="headerlink" title="æ•°æ®å‡†å¤‡"></a>æ•°æ®å‡†å¤‡</h2><ol><li>ä»ä½œè€…æä¾›çš„ google drive é“¾æ¥ä¸­ä¸‹è½½çš„ Drivebench.zip ä¸åŒ…å«å¹²å‡€æ•°æ®ï¼ˆå³æœ€ç»ˆ <code>data </code>ç›®å½•ä¸‹çš„<code>nuscenes/samples</code>å­ç›®å½•ç¼ºå¤±ï¼‰ã€‚æ ¹æ®è®ºæ–‡é™„å½•å¾—çŸ¥æ•°æ®æºäº drivelm-nuscenes æ•°æ®é›†ï¼Œå› æ­¤ä»è¯¥æ•°æ®é›†ä¸­æ‰¾åˆ°ä¸ <code>corruption</code> ç›®å½•ä¸­ç›¸å¯¹åº”çš„æ•°æ®ï¼Œæå–ä»£ç è§ <code>data/extract.py</code></li></ol><h2 id="ç¯å¢ƒé…ç½®"><a href="#ç¯å¢ƒé…ç½®" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><ol><li>è™šæ‹Ÿç¯å¢ƒåç§° <code>drivebench</code></li><li>å®‰è£…vllm &#x3D;&#x3D; 0.6.1.post1æ—¶ï¼ŒæŠ¥é”™ outlines ä¾èµ–çš„ pyairports åŒ…æ— æ³•æ‰¾åˆ°ï¼Œpip å®˜æ–¹æ²¡æœ‰æä¾›ã€‚ä»ç¬¬ä¸‰æ–¹åº“  <a href="https://github.com/bckim92/language-evaluation">bckim92&#x2F;language-evaluation </a> ä¸‹è½½åˆ°æœ¬åœ°åä¸Šä¼ æœåŠ¡å™¨ï¼Œæ‰§è¡Œ<code>pip install .</code>å®‰è£…ã€‚æœåŠ¡å™¨è·¯å¾„ä¸º<code>~/yuep/Drivebench/pyairports-master</code></li><li>ä»£ç è¿è¡Œä¸­ transformersã€tokenizers ç­‰åº“ç”±äºç‰ˆæœ¬é—®é¢˜å­˜åœ¨è°ƒç”¨æ–¹æ³•ç¼ºå¤±ã€‚è¯•éªŒåå¯ç”¨ç‰ˆæœ¬ä¸º <code>transformers==4.43.2, tokenizers==0.19.1</code></li><li>è¿è¡Œ evaluate ä»£ç æ—¶éœ€è¦ç¬¬ä¸‰æ–¹åº“ <code>language_evaluation</code>ï¼Œpip å®˜æ–¹æ²¡æœ‰æä¾›ã€‚ä»ç¬¬ä¸‰æ–¹åº“ <a href="https://github.com/bckim92/language-evaluation">bckim92&#x2F;language-evaluation </a>ä¸‹è½½åˆ°æœ¬åœ°åä¸Šä¼ æœåŠ¡å™¨ï¼Œæ‰§è¡Œ <code>pip install .</code> å®‰è£…ã€‚æœåŠ¡å™¨è·¯å¾„ä¸º <code>~/yuep/Drivebench/language-evaluation-master</code></li></ol><h2 id="ä»£ç è¿è¡Œ"><a href="#ä»£ç è¿è¡Œ" class="headerlink" title="ä»£ç è¿è¡Œ"></a>ä»£ç è¿è¡Œ</h2><ol><li>ä» <code>drivebench-test_final.json </code>ä¸­è¯»å‡ºçš„ image_paths éƒ¨åˆ†æ•°æ®å¹¶ä¸åŒ…å«å®Œæ•´çš„å…­ä¸ªæ‘„åƒæœºè§’åº¦ï¼Œåœ¨ python è¿è¡Œæ—¶ä¼šå‡ºç°ç±»ä¼¼äº <code>[CAM_BACK, None, None, None, None, None]</code> çš„æƒ…å†µï¼Œéœ€è¦æ³¨æ„ä»£ç æ˜¯å¦å¯¹ None æœ‰æ­£ç¡®çš„å¤„ç†ï¼ˆè¯»å–ä»£ç è§<code>inference/utils.py</code>ï¼Œå®¹æ˜“å¼•èµ·æŠ¥é”™ã€‚</li><li>llava1.5 æ¨¡å‹é»˜è®¤ç½‘ç»œä¸‹è½½ï¼Œå‡ºç° SSL Error æŠ¥é”™ã€‚ä¿®æ”¹éƒ¨åˆ†ä»£ç æ”¹ä¸ºæœ¬åœ°æ¨¡å‹åŠ è½½ï¼Œæ¨¡å‹å­˜å‚¨ä½ç½®ä¸º <code>/mnt/ssd1/yuep/model</code>ï¼Œåç»­æ¨¡å‹ä¸‹è½½åˆ°æœ¬åœ°ä¹Ÿå¯ä»¥å­˜åœ¨è¿™é‡Œ</li></ol><h1 id="DriveLMé…ç½®"><a href="#DriveLMé…ç½®" class="headerlink" title="DriveLMé…ç½®"></a>DriveLMé…ç½®</h1><h2 id="æ¨¡å‹ä¸‹è½½"><a href="#æ¨¡å‹ä¸‹è½½" class="headerlink" title="æ¨¡å‹ä¸‹è½½"></a>æ¨¡å‹ä¸‹è½½</h2><p>ä¸»ä»“åº“ï¼š<a href="https://github.com/OpenDriveLab/DriveLM/tree/main">githubé“¾æ¥</a><br>llama-7b åŸºåº§æ¨¡å‹: metaç”³è¯·æ²¡é€šè¿‡ï¼Œ<a href="https://huggingface.co/nyanko7/LLaMA-7B/tree/main">æ‰¾çš„ä¸€ä¸ªé“¾æ¥</a><br>Drivebenché¢„è®­ç»ƒæƒé‡ï¼š<a href="https://huggingface.co/drive-bench/drivelm-ft/tree/main">huggingfaceé“¾æ¥</a></p><h3 id="åˆä½“éªŒ"><a href="#åˆä½“éªŒ" class="headerlink" title="åˆä½“éªŒ"></a>åˆä½“éªŒ</h3><ul><li>ç›´æ¥ç”¨é•œåƒç«™ä¸‹è½½ä¹Ÿä¸‹è½½ä¸äº†ï¼Œåªèƒ½ç”¨æ¢¯å­å…ˆä¸‹è½½åˆ°æœ¬åœ°ï¼Œç„¶ååœ¨MobaXtermç”¨<code>rsync</code>ä¸Šä¼ åˆ°æœåŠ¡å™¨</li><li>MobaXtermæ— æ³•ç›´æ¥è¯†åˆ«windowsä¸‹çš„è·¯å¾„ï¼Œéœ€è¦å°† Windows è·¯å¾„è½¬æ¢ä¸º MobaXterm å¯ä»¥è¯†åˆ«çš„ Unix é£æ ¼è·¯å¾„ã€‚MobaXterm ä¼šè‡ªåŠ¨å°†æœ¬åœ°ç£ç›˜æŒ‚è½½åˆ° <code>/drives/</code> ç›®å½•ä¸‹ã€‚<ul><li><code>D:\</code> å¯¹åº”çš„æ˜¯ <code>/drives/d/</code></li><li><code>C:\</code> å¯¹åº”çš„æ˜¯ <code>/drives/c/</code></li></ul></li><li>å¦å¤–å°±æ˜¯ï¼Œåœ¨ Windows ç³»ç»Ÿä¸­ï¼ˆä¾‹å¦‚ä½¿ç”¨ PowerShell æˆ– CMDï¼‰é…ç½® SSH æ—¶ï¼Œé…ç½®æ–‡ä»¶é»˜è®¤å­˜æ”¾åœ¨ <code>C:\Users\ç”¨æˆ·å\.ssh\config</code>ã€‚ä½†æ˜¯ <strong>MobaXterm æœ‰è‡ªå·±çš„å®¶</strong>: å½“æ‰“å¼€ MobaXterm çš„ç»ˆç«¯æ—¶ï¼Œè¿›å…¥çš„æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Linux&#x2F;Unix ç¯å¢ƒã€‚è¿™ä¸ªç¯å¢ƒæœ‰å®ƒè‡ªå·±çš„å®¶ç›®å½• (Home Directory)ï¼Œæˆ‘çš„è·¯å¾„æ˜¯ <code>C:\Users\pengg\AppData\Roaming\MobaXterm\home</code>ã€‚å› æ­¤å°†.sshä¸­çš„<code>config</code> copyè¿‡æ¥å³å¯</li><li>å¦‚æœsshé…ç½®å¥½äº†ï¼Œç›®æ ‡æœåŠ¡å™¨å¯ä»¥ç›´æ¥ç”¨åˆ«åï¼Œæ¯”å¦‚è¿™é‡Œçš„GPU26<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250902003250314.png"></li><li>åæ¥å‘ç°å¯ä»¥ç›´æ¥ä»æ–‡ä»¶å¤¹æ‹–æ‹½åˆ°vscodeä¸­ï¼Œç›´æ¥å¤åˆ¶è¿‡å»ï¼Œè¿™ä¸‹jokeräº†ã€‚<br>Updated: å®æµ‹ä¸‹æ¥ç›´æ¥æ‹½è¿›å»æ¯”<code>rsync</code>è¦æ…¢å¾ˆå¤šå¾ˆå¤š</li></ul><h3 id="å†æ¢ç´¢"><a href="#å†æ¢ç´¢" class="headerlink" title="å†æ¢ç´¢"></a>å†æ¢ç´¢</h3><p>èµ·å› ï¼šæ‰‹æ»‘æŠŠä¹‹å‰ç”¨<code>rsync</code>ä¸Šä¼ çš„åˆ äº†ğŸ¤¡<br>ç›´æ¥ç”¨<code>hfmirror</code>é•œåƒä¸‹è½½æ•ˆæœä¸äº†ï¼Œ<code>xget</code>åŠ é€Ÿä¹Ÿç”¨ä¸äº†ã€‚ä½†å››å¤„ç¢°å£åï¼Œæˆ‘å‘ç°å¯ä»¥å…ˆ<code>unset https_proxy http_proxy all_proxy</code>ä¸´æ—¶å–æ¶ˆä»£ç†ç„¶åç”¨ <code>huggingface-cli</code>æ­é…<code>hf-mirror</code>ä¸‹è½½æ•ˆæœä¸é”™<br>å¤§è‡´æµç¨‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> HF_ENDPOINT=https://hf-mirror.com <span class="hljs-comment"># å¯ä»¥å†™å…¥.bashrc</span><br><span class="hljs-built_in">unset</span> https_proxy http_proxy all_proxy<br>hf download ***<br></code></pre></td></tr></table></figure><h2 id="ç¯å¢ƒé…ç½®-1"><a href="#ç¯å¢ƒé…ç½®-1" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><p>git+<a href="https://github.com/csuhan/timm_0_3_2.git">https://github.com/csuhan/timm_0_3_2.git</a><br>git+<a href="https://github.com/openai/CLIP.git">https://github.com/openai/CLIP.git</a><br>ç½‘ç»œæ— æ³•ç›´æ¥è¿æ¥ï¼Œåœ¨gitcloneä¸Šæ‰¾åˆ°é•œåƒé“¾æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git+https://gitclone.com/github.com/csuhan/timm_0_3_2<br>git+https://gitclone.com/github.com/openai/CLIP<br></code></pre></td></tr></table></figure><ul><li>å¦‚æœä½ è¦cloneçš„ä»“åº“è¿˜æ²¡æœ‰ç¼“å­˜è¿‡ï¼Œå…ˆåœ¨è‡ªå·±ç”µè„‘ä¸Š<code>clone</code>ä¸€éï¼Œä¹‹åå°±å¯ä»¥åœ¨æœåŠ¡å™¨ä¸­<code>clone</code>ç¼“å­˜äº†</li></ul><h2 id="ä»£ç è¿è¡Œ-1"><a href="#ä»£ç è¿è¡Œ-1" class="headerlink" title="ä»£ç è¿è¡Œ"></a>ä»£ç è¿è¡Œ</h2><h3 id="æ¨ç†"><a href="#æ¨ç†" class="headerlink" title="æ¨ç†"></a>æ¨ç†</h3><p>ç¯å¢ƒï¼šdrivebench_test(æ·»åŠ äº†CLIPç­‰åº“)<br>åœ¨llama_adapter_v2ç›®å½•ä¸‹æ‰§è¡Œ<code>inference</code>çš„demo.py</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python demo.py  --llama_dir ../weights   --checkpoint ../weights/checkpoint-<span class="hljs-number">3.</span>pth --data ../test_llama.json  --output ../output.json --batch_size <span class="hljs-number">4</span> --num_processes <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><p>æ­¤æ—¶ç›´æ¥æ‰§è¡Œè¯„ä¼°ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸ºä¸Šä¸€æ­¥<strong>ç”Ÿæˆçš„output.jsonä¸å®Œæ•´</strong>ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºä»£ç é‡Œå¯¹äºgpué‡‡ç”¨çš„ç¡¬ç¼–ç ï¼Œç›´æ¥æŒ‡å®šç¬¬ä¸€ä¸ªçº¿ç¨‹è®©gpu:0æ‰§è¡Œï¼Œè€Œæ°å¥½æ­¤æ—¶å‰ä¸¤å—gpuéƒ½å·²ç»å æ»¡äº†ï¼Œç›´æ¥cuda out of memoryã€‚å› æ­¤<code>output.json</code>ä¸å®Œæ•´ï¼Œåªæœ‰ä¸¤ç™¾å¤šè¡Œã€‚ç›®å‰é‡‡ç”¨çš„æ˜¯è§£å†³æªæ–½æ˜¯å…ˆ<code>nvidia-smi</code>ä¸€ä¸‹ï¼Œç„¶åæ‰¾å‡ºå¯ç”¨çš„gpuï¼Œç„¶ååœ¨è¿è¡Œä»£ç ä¸ŠåŠ ä¸€ä¸ª<code>CUDA_VISIBLE_DEVICES= </code>æ¥è®©ç¨‹åºåªèƒ½è¯†åˆ«è¿™äº›gpuï¼Œå®Œæ•´æ‰§è¡Œä»£ç å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">CUDA_VISIBLE_DEVICES=<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span> python demo.py  --llama_dir ../weights   --checkpoint ../weights/checkpoint-<span class="hljs-number">3.</span>pth --data ../test_llama.json  --output ../output.json --batch_size <span class="hljs-number">4</span> --num_processes <span class="hljs-number">6</span><br></code></pre></td></tr></table></figure><h3 id="è¯„ä¼°"><a href="#è¯„ä¼°" class="headerlink" title="è¯„ä¼°"></a>è¯„ä¼°</h3><p>ä¿®å¤ä¸Šè¿°é—®é¢˜åé‡åˆ°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">Traceback (most recent call last):<br>  File <span class="hljs-string">&quot;/mnt/ssd1/yuep/model/DriveLM/evaluation.py&quot;</span>, line <span class="hljs-number">190</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br>    output = evaluation.evaluation()<br>  File <span class="hljs-string">&quot;/mnt/ssd1/yuep/model/DriveLM/evaluation.py&quot;</span>, line <span class="hljs-number">145</span>, <span class="hljs-keyword">in</span> evaluation<br>    scores[<span class="hljs-string">&quot;chatgpt&quot;</span>] = <span class="hljs-variable language_">self</span>.eval_chatGPT(<span class="hljs-variable language_">self</span>.GPT)<br>  File <span class="hljs-string">&quot;/mnt/ssd1/yuep/model/DriveLM/evaluation.py&quot;</span>, line <span class="hljs-number">38</span>, <span class="hljs-keyword">in</span> eval_chatGPT<br>    scores = p.<span class="hljs-built_in">map</span>(<span class="hljs-variable language_">self</span>.chatgpt_eval.forward, data)<br>TypeError: cannot pickle <span class="hljs-string">&#x27;_thread.RLock&#x27;</span> <span class="hljs-built_in">object</span><br></code></pre></td></tr></table></figure><ul><li>è¯´æ˜¯æœ‰äº›å¯¹è±¡ä¸èƒ½åºåˆ—åŒ–çš„é—®é¢˜ï¼Œ<a href="https://github.com/OpenDriveLab/DriveLM/issues/141">issueä¸­</a>ä¹Ÿæœ‰äººé‡åˆ°åŒæ ·é—®é¢˜ï¼Œä½œè€…å¹¶æœªå›å¤ã€‚</li><li>ä¸‹é¢æ˜¯AIå›å¤</li></ul><p>æ‚¨å¥½ï¼Œè¿™ä¸ªé—®é¢˜éå¸¸å…¸å‹ï¼Œæ˜¯ä½¿ç”¨Pythonçš„<code>multiprocessing</code>åº“æ—¶ç»å¸¸ä¼šé‡åˆ°çš„é”™è¯¯ã€‚</p><h4 id="é”™è¯¯åˆ†æ"><a href="#é”™è¯¯åˆ†æ" class="headerlink" title="é”™è¯¯åˆ†æ"></a>é”™è¯¯åˆ†æ</h4><ol><li><p><strong>é”™è¯¯ç±»å‹</strong>: <code>TypeError: cannot pickle &#39;_thread.RLock&#39; object</code> è¿™ä¸ªé”™è¯¯çš„æ ¸å¿ƒæ˜¯ <strong>â€œæ— æ³•åºåˆ—åŒ–ï¼ˆpickleï¼‰ä¸€ä¸ªçº¿ç¨‹é”ï¼ˆRLockï¼‰å¯¹è±¡â€</strong>ã€‚</p></li><li><p><strong>ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ä¸ªé”™è¯¯ï¼Ÿ</strong>:</p><ul><li><strong>Pickle (åºåˆ—åŒ–)</strong>: å½“æ‚¨ä½¿ç”¨ <code>multiprocessing.Pool</code> æ—¶ï¼Œä¸»è¿›ç¨‹éœ€è¦å°†ä»»åŠ¡ï¼ˆå‡½æ•°å’Œå®ƒçš„å‚æ•°ï¼‰å‘é€ç»™å¤šä¸ªå­è¿›ç¨‹å»æ‰§è¡Œã€‚è¿™ä¸ªå‘é€çš„è¿‡ç¨‹å°±éœ€è¦é€šè¿‡â€œåºåˆ—åŒ–â€ï¼ˆPicklingï¼‰å°†Pythonå¯¹è±¡è½¬æ¢æˆå­—èŠ‚æµï¼Œä»¥ä¾¿åœ¨è¿›ç¨‹é—´ä¼ è¾“ã€‚</li><li><strong>RLock (çº¿ç¨‹é”)</strong>: <code>RLock</code> æ˜¯ä¸€ç§åŒæ­¥å·¥å…·ï¼Œç”¨æ¥é˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…±äº«èµ„æºã€‚<strong>è¿™ç§é”å¯¹è±¡ä¸åˆ›å»ºå®ƒçš„è¿›ç¨‹æ˜¯ç»‘å®šçš„ï¼Œå®ƒæœ¬èº«çš„çŠ¶æ€ä¸èƒ½è¢«åºåˆ—åŒ–å¹¶å‘é€åˆ°å¦ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­å»ã€‚</strong></li><li><strong>æ ¹æœ¬åŸå› </strong>: åœ¨æ‚¨çš„ä»£ç  <code>evaluation.py</code> ä¸­ï¼Œ<code>p.map(self.chatgpt_eval.forward, data)</code> è¿™ä¸€è¡Œè¯•å›¾å°† <code>self.chatgpt_eval</code> è¿™ä¸ª <code>GPTEvaluation</code> ç±»çš„å®ä¾‹æ–¹æ³•å‘é€ç»™å­è¿›ç¨‹ã€‚ä¸ºäº†å‘é€è¿™ä¸ªæ–¹æ³•ï¼Œ<code>multiprocessing</code> è¯•å›¾åºåˆ—åŒ–æ•´ä¸ª <code>self.chatgpt_eval</code> å¯¹è±¡ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå¯¹è±¡ï¼ˆæˆ–è€…å®ƒå†…éƒ¨å¼•ç”¨çš„ <code>openai</code> åº“çš„å¯¹è±¡ï¼‰åŒ…å«äº†ä¸€ä¸ªä¸å¯åºåˆ—åŒ–çš„ <code>RLock</code>ï¼Œå› æ­¤å¯¼è‡´äº† <code>TypeError</code>ã€‚</li></ul></li></ol><h4 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h4><p>è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ä¸è¦è¯•å›¾åœ¨è¿›ç¨‹é—´ä¼ é€’å¤æ‚çš„å¯¹è±¡å®ä¾‹ï¼Œè€Œæ˜¯è®©æ¯ä¸ªå­è¿›ç¨‹è‡ªå·±å»åˆ›å»ºå®ƒæ‰€éœ€è¦çš„å¯¹è±¡ã€‚</strong></p><ul><li>ä¿®æ”¹æˆåŠŸåï¼Œgitäº†ä¸€ä¸‹ï¼Œ<strong>åŸå§‹ä»£ç åœ¨åˆå§‹æäº¤</strong></li></ul><hr><p>&#x3D;&#x3D;ç›®å‰å°±æ˜¯OpenAIçš„SDKæ— æ³•è¿æ¥ï¼Œæ²¡æœ‰ä»£ç†ï¼Œè€Œè¯„ä¼°çš„ä¸€é¡¹å†…å®¹å°±æ˜¯&#x3D;&#x3D;<code>ChatGPT Score</code></p><h2 id="å¾®è°ƒ"><a href="#å¾®è°ƒ" class="headerlink" title="å¾®è°ƒ"></a>å¾®è°ƒ</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash finetune.sh ../weights ../weights/checkpoint-3.pth finetune_data_config.yaml ../weights/sft<br><br>bash finetune.sh ../weights ../weights/pretrain/LORA-BIAS-7B.pth finetune_data_config.yaml ../weights/sft<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">python -u -m torch.distributed.launch \<br>    --master_port=1112 \          <span class="hljs-comment"># åˆ†å¸ƒå¼è®­ç»ƒé€šä¿¡ç«¯å£</span><br>    --nproc_per_node=4 \          <span class="hljs-comment"># æ¯ä¸ªèŠ‚ç‚¹ä½¿ç”¨çš„GPUæ•°é‡</span><br>    --use_env \                   <span class="hljs-comment"># ä»ç¯å¢ƒå˜é‡è¯»å–é…ç½®</span><br>    main_finetune.py \<br>    --data_config <span class="hljs-string">&quot;<span class="hljs-variable">$CONFIG</span>&quot;</span> \     <span class="hljs-comment"># æ•°æ®é…ç½®æ–‡ä»¶è·¯å¾„</span><br>    --batch_size 4 \              <span class="hljs-comment"># å•GPUçš„batch size</span><br>    --epochs 10 \                  <span class="hljs-comment"># æ€»è®­ç»ƒè½®æ•°</span><br>    --warmup_epochs 0.5 \           <span class="hljs-comment"># å­¦ä¹ ç‡é¢„çƒ­è½®æ•°</span><br>    --blr 5e-5 \                 <span class="hljs-comment"># åŸºç¡€å­¦ä¹ ç‡</span><br>    --weight_decay 0.02 \         <span class="hljs-comment"># L2æ­£åˆ™åŒ–ç³»æ•°</span><br>    --llama_path <span class="hljs-string">&quot;<span class="hljs-variable">$LLAMA_PATH</span>&quot;</span> \  <span class="hljs-comment"># LLaMAæ¨¡å‹è·¯å¾„</span><br>    --output_dir <span class="hljs-string">&quot;<span class="hljs-variable">$OUTPUT_DIR</span>&quot;</span> \   <span class="hljs-comment"># è¾“å‡ºç›®å½•</span><br>    --pretrained_path <span class="hljs-string">&quot;<span class="hljs-variable">$PRETRAINED_PATH</span>&quot;</span> \  <span class="hljs-comment"># é¢„è®­ç»ƒæƒé‡è·¯å¾„</span><br>    &amp;&gt;&gt; <span class="hljs-string">&quot;<span class="hljs-variable">$OUTPUT_DIR</span>&quot;</span>/output.log &amp;          <span class="hljs-comment"># æ—¥å¿—é‡å®šå‘ï¼ˆè¿½åŠ æ¨¡å¼ï¼‰</span><br></code></pre></td></tr></table></figure><h1 id="Dolphins-é…ç½®"><a href="#Dolphins-é…ç½®" class="headerlink" title="Dolphins é…ç½®"></a>Dolphins é…ç½®</h1><p>é¡¹ç›®åœ°å€ï¼š<a href="https://github.com/SaFoLab-WISC/Dolphins/tree/main">githubé“¾æ¥</a></p><h2 id="ç¯å¢ƒé…ç½®-2"><a href="#ç¯å¢ƒé…ç½®-2" class="headerlink" title="ç¯å¢ƒé…ç½®"></a>ç¯å¢ƒé…ç½®</h2><p>æ²¡åŠæ³•ï¼Œ<code>numpy</code>ç‰ˆæœ¬å†²çªï¼Œ<code>Dolphins</code> åªèƒ½æ–°å»ºä¸€ä¸ª<code>conda</code>ç¯å¢ƒæäº†</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python">ERROR: pip<span class="hljs-string">&#x27;s dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.</span><br><span class="hljs-string">outlines 0.0.46 requires numpy&lt;2.0.0, but you have numpy 2.2.6 which is incompatible.</span><br><span class="hljs-string">pyarrow 15.0.0 requires numpy&lt;2,&gt;=1.16.6, but you have numpy 2.2.6 which is incompatible.</span><br><span class="hljs-string">vllm 0.6.1.post1 requires numpy&lt;2.0.0, but you have numpy 2.2.6 which is incompatible.</span><br></code></pre></td></tr></table></figure><p>é€€å›åˆ°<code>numpy-1.26.4</code>å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">ERROR: pip<span class="hljs-string">&#x27;s dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.</span><br><span class="hljs-string">opencv-python 4.12.0.88 requires numpy&lt;2.3.0,&gt;=2; python_version &gt;= &quot;3.9&quot;, but you have numpy 1.26.4 which is incompatible.</span><br></code></pre></td></tr></table></figure><h3 id="æ–°ç¯å¢ƒ"><a href="#æ–°ç¯å¢ƒ" class="headerlink" title="æ–°ç¯å¢ƒ"></a>æ–°ç¯å¢ƒ</h3><ul><li>condaï¼š<code>dolphins</code></li><li>ä¾æ—§æŠ¥é”™è¿è¿ï¼Œå„ç§åŒ…å†²çªï¼Œå°è¯•æŠŠå‡ ä¸ªåŒ…å‡çº§ä¸‹ï¼Œokäº†</li></ul><h1 id="Yolov8"><a href="#Yolov8" class="headerlink" title="Yolov8"></a>Yolov8</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>æ–°å»ºç¯å¢ƒ <code>yolo</code><br>ç›´æ¥<code>pip install -U ultralytics</code> å³å¯</p><p>ç„¶ååœ¨huggingfaceä¸Šä¸‹è½½æ¨¡å‹æƒé‡ï¼Œ<a href="https://huggingface.co/Ultralytics/YOLOv8">ç‚¹å‡»é“¾æ¥</a></p><h2 id="å¤„ç†ç»“æœ"><a href="#å¤„ç†ç»“æœ" class="headerlink" title="å¤„ç†ç»“æœ"></a>å¤„ç†ç»“æœ</h2><p>æ‰€æœ‰ UltralyticsÂ <code>predict()</code>Â è°ƒç”¨å°†è¿”å›ä¸€ä¸ªÂ <code>Results</code>Â å¯¹è±¡åˆ—è¡¨ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> ultralytics <span class="hljs-keyword">import</span> YOLO<br><br><span class="hljs-comment"># Load a pretrained YOLO11n model</span><br>model = YOLO(<span class="hljs-string">&quot;yolo11n.pt&quot;</span>)<br><br><span class="hljs-comment"># Run inference on an image</span><br>results = model(<span class="hljs-string">&quot;https://ultralytics.com/images/bus.jpg&quot;</span>)<br>results = model(<br>    [<br>        <span class="hljs-string">&quot;https://ultralytics.com/images/bus.jpg&quot;</span>,<br>        <span class="hljs-string">&quot;https://ultralytics.com/images/zidane.jpg&quot;</span>,<br>    ]<br>)  <span class="hljs-comment"># batch inference</span><br></code></pre></td></tr></table></figure><p><code>Results</code>Â å¯¹è±¡å…·æœ‰ä»¥ä¸‹<strong>å±æ€§</strong>ï¼š</p><table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>orig_img</code></td><td><code>np.ndarray</code></td><td>åŸå§‹å›¾åƒï¼Œä»¥ numpy æ•°ç»„å½¢å¼å‘ˆç°ã€‚</td></tr><tr><td><code>orig_shape</code></td><td><code>tuple</code></td><td>åŸå§‹å›¾åƒçš„å½¢çŠ¶ï¼Œæ ¼å¼ä¸ºï¼ˆé«˜åº¦ï¼Œå®½åº¦ï¼‰ã€‚</td></tr><tr><td><code>boxes</code></td><td><code>Boxes, optional</code></td><td>ä¸€ä¸ª Boxes å¯¹è±¡ï¼ŒåŒ…å«æ£€æµ‹åˆ°çš„è¾¹ç•Œæ¡†ã€‚</td></tr><tr><td><code>masks</code></td><td><code>Masks, optional</code></td><td>ä¸€ä¸ª Masks å¯¹è±¡ï¼ŒåŒ…å«æ£€æµ‹åˆ°çš„æ©ç ã€‚</td></tr><tr><td><code>probs</code></td><td><code>Probs, optional</code></td><td>ä¸€ä¸ª Probs å¯¹è±¡ï¼ŒåŒ…å«åˆ†ç±»ä»»åŠ¡ä¸­æ¯ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚</td></tr><tr><td><code>keypoints</code></td><td><code>Keypoints, optional</code></td><td>ä¸€ä¸ª Keypoints å¯¹è±¡ï¼ŒåŒ…å«æ¯ä¸ªå¯¹è±¡æ£€æµ‹åˆ°çš„å…³é”®ç‚¹ã€‚</td></tr><tr><td><code>obb</code></td><td><code>OBB, optional</code></td><td>åŒ…å«æ—‹è½¬æ¡†æ£€æµ‹çš„ OBB å¯¹è±¡ã€‚</td></tr><tr><td><code>speed</code></td><td><code>dict</code></td><td>ä¸€ä¸ªå­—å…¸ï¼ŒåŒ…å«é¢„å¤„ç†ã€æ¨ç†å’Œåå¤„ç†çš„é€Ÿåº¦ï¼Œå•ä½ä¸ºæ¯«ç§’&#x2F;å›¾åƒã€‚</td></tr><tr><td><code>names</code></td><td><code>dict</code></td><td>ä¸€ä¸ªå°†ç±»ç´¢å¼•æ˜ å°„åˆ°ç±»åç§°çš„å­—å…¸ã€‚</td></tr><tr><td><code>path</code></td><td><code>str</code></td><td>å›¾åƒæ–‡ä»¶çš„è·¯å¾„ã€‚</td></tr><tr><td><code>save_dir</code></td><td><code>str, optional</code></td><td>ç”¨äºä¿å­˜ç»“æœçš„ç›®å½•ã€‚</td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p><code>Results</code>Â å¯¹è±¡å…·æœ‰ä»¥ä¸‹<strong>æ–¹æ³•</strong>ï¼š</p><table><thead><tr><th>æ–¹æ³•</th><th>è¿”å›ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>update()</code></td><td><code>None</code></td><td>ä½¿ç”¨æ–°çš„æ£€æµ‹æ•°æ®ï¼ˆæ¡†ã€æ©ç ã€æ¦‚ç‡ã€obbã€å…³é”®ç‚¹ï¼‰æ›´æ–° Results å¯¹è±¡ã€‚</td></tr><tr><td><code>cpu()</code></td><td><code>Results</code></td><td>è¿”å› Results å¯¹è±¡çš„å‰¯æœ¬ï¼Œå…¶ä¸­æ‰€æœ‰ tensor éƒ½å·²ç§»åŠ¨åˆ° CPU å†…å­˜ã€‚</td></tr><tr><td><code>numpy()</code></td><td><code>Results</code></td><td>è¿”å› Results å¯¹è±¡çš„å‰¯æœ¬ï¼Œå…¶ä¸­æ‰€æœ‰ tensor éƒ½å·²è½¬æ¢ä¸º numpy æ•°ç»„ã€‚</td></tr><tr><td><code>cuda()</code></td><td><code>Results</code></td><td>è¿”å› Results å¯¹è±¡çš„å‰¯æœ¬ï¼Œå…¶ä¸­æ‰€æœ‰ tensor éƒ½å·²ç§»åŠ¨åˆ° GPU å†…å­˜ã€‚</td></tr><tr><td><code>to()</code></td><td><code>Results</code></td><td>è¿”å› Results å¯¹è±¡çš„å‰¯æœ¬ï¼Œå…¶ä¸­ tensor å·²ç§»åŠ¨åˆ°æŒ‡å®šçš„è®¾å¤‡å’Œæ•°æ®ç±»å‹ã€‚</td></tr><tr><td><code>new()</code></td><td><code>Results</code></td><td>åˆ›å»ºä¸€ä¸ªæ–°çš„ Results å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ç›¸åŒçš„å›¾åƒã€è·¯å¾„ã€åç§°å’Œé€Ÿåº¦å±æ€§ã€‚</td></tr><tr><td><code>plot()</code></td><td><code>np.ndarray</code></td><td>åœ¨è¾“å…¥çš„ RGB å›¾åƒä¸Šç»˜åˆ¶æ£€æµ‹ç»“æœï¼Œå¹¶è¿”å›å¸¦æ³¨é‡Šçš„å›¾åƒã€‚</td></tr><tr><td><code>show()</code></td><td><code>None</code></td><td>æ˜¾ç¤ºå¸¦æœ‰æ³¨é‡Šçš„æ¨ç†ç»“æœçš„å›¾åƒã€‚</td></tr><tr><td><code>save()</code></td><td><code>str</code></td><td>å°†å¸¦æ³¨é‡Šçš„æ¨ç†ç»“æœå›¾åƒä¿å­˜åˆ°æ–‡ä»¶å¹¶è¿”å›æ–‡ä»¶åã€‚</td></tr><tr><td><code>verbose()</code></td><td><code>str</code></td><td>è¿”å›æ¯ä¸ªä»»åŠ¡çš„æ—¥å¿—å­—ç¬¦ä¸²ï¼Œè¯¦ç»†è¯´æ˜æ£€æµ‹å’Œåˆ†ç±»ç»“æœã€‚</td></tr><tr><td><code>save_txt()</code></td><td><code>str</code></td><td>å°†æ£€æµ‹ç»“æœä¿å­˜åˆ°æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶è¿”å›ä¿å­˜æ–‡ä»¶çš„è·¯å¾„ã€‚</td></tr><tr><td><code>save_crop()</code></td><td><code>None</code></td><td>å°†è£å‰ªçš„æ£€æµ‹å›¾åƒä¿å­˜åˆ°æŒ‡å®šç›®å½•ã€‚</td></tr><tr><td><code>summary()</code></td><td><code>List[Dict[str, Any]]</code></td><td>å°†æ¨ç†ç»“æœè½¬æ¢ä¸ºæ±‡æ€»å­—å…¸ï¼Œå¯ä»¥é€‰æ‹©è¿›è¡Œå½’ä¸€åŒ–ã€‚</td></tr><tr><td><code>to_df()</code></td><td><code>DataFrame</code></td><td>å°†æ£€æµ‹ç»“æœè½¬æ¢ä¸ºæåæ ‡æ•°æ®å¸§ã€‚</td></tr><tr><td><code>to_csv()</code></td><td><code>str</code></td><td>å°†æ£€æµ‹ç»“æœè½¬æ¢ä¸º CSV æ ¼å¼ã€‚</td></tr><tr><td><code>to_json()</code></td><td><code>str</code></td><td>å°†æ£€æµ‹ç»“æœè½¬æ¢ä¸º JSON æ ¼å¼ã€‚</td></tr></tbody></table><p>æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è§Â <a href="https://docs.ultralytics.com/zh/reference/engine/results/"><code>Results</code>Â ç±»æ–‡æ¡£</a>.</p><h1 id="pipelineæ­å»º"><a href="#pipelineæ­å»º" class="headerlink" title="pipelineæ­å»º"></a>pipelineæ­å»º</h1><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><ul><li>ç°åœ¨çš„é—®é¢˜æ˜¯Drivebenchçš„inferenceè„šæœ¬ï¼Œè™½ç„¶æ˜¯å‘½åä¸º<code>llava1.5.py</code>ï¼Œä½†å…¶å®åœ¨ä»£ç ä¸­å¹¶æœªæŒ‡å®šæ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ç§åŠ è½½<strong>æ ‡å‡†Hugging Faceæ ¼å¼çš„æ¨¡å‹</strong>çš„è®¾è®¡ã€‚è€Œç°åœ¨çš„ <code>DriveLM</code> æ˜¯ä¸€ä¸ª<strong>GitHubé¡¹ç›®</strong>ï¼Œå®ƒæœ‰è‡ªå·±ç‹¬ç‰¹çš„ä»£ç ã€æ¨¡å‹ç»“æ„å’Œæƒé‡åŠ è½½æ–¹å¼ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># inferenceè„šæœ¬</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LLMPredictor</span>:<br><br>Â  Â  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, model_name, system_prompt, sampling_params, num_images_per_prompt, max_model_len, tensor_parallel_size, corruption</span>):<br><br>Â  Â  Â  Â  <span class="hljs-variable language_">self</span>.tokenizer = AutoTokenizer.from_pretrained(<br>Â  Â  Â  Â  Â  Â  model_name,<br>Â  Â  Â  Â  Â  Â  trust_remote_code=<span class="hljs-literal">True</span>,<br>Â  Â  Â  Â  Â  Â  local_files_only=<span class="hljs-literal">True</span> Â <span class="hljs-comment"># å¼ºåˆ¶ä½¿ç”¨æœ¬åœ°æ–‡ä»¶</span><br>Â  Â  Â  Â  )<br><br>Â  Â  Â  Â  <span class="hljs-variable language_">self</span>.llm = LLM(<br>Â  Â  Â  Â  Â  Â  model=model_name,<br>Â  Â  Â  Â  Â  Â  tokenizer=model_name,<br>Â  Â  Â  Â  Â  Â  trust_remote_code=<span class="hljs-literal">True</span>,<br>Â  Â  Â  Â  Â  Â  max_model_len=max_model_len,<br>Â  Â  Â  Â  Â  Â  limit_mm_per_prompt=&#123;<span class="hljs-string">&quot;image&quot;</span>: num_images_per_prompt&#125;,<br>Â  Â  Â  Â  Â  Â  tensor_parallel_size=tensor_parallel_size,<br>Â  Â  Â  Â  Â  Â  download_dir=<span class="hljs-literal">None</span>,<br>Â  Â  Â  Â  Â  Â  load_format=<span class="hljs-string">&quot;auto&quot;</span><br>Â  Â  Â  Â  )<br></code></pre></td></tr></table></figure></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">python demo.py  --llama_dir ../weights   --checkpoint ../weights/checkpoint-<span class="hljs-number">3.</span>pth --data ../test_llama.json  --output ../output.json --batch_size <span class="hljs-number">4</span> --num_processes <span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><h2 id="å°è¯•"><a href="#å°è¯•" class="headerlink" title="å°è¯•"></a>å°è¯•</h2><ul><li>æ–¹æ¡ˆAï¼ŒåŸºäºDriveLMå’Œå·²æœ‰æƒé‡è½¬æ¢ä¸ºhuggingfaceæ ¼å¼çš„æ¨¡å‹ï¼Œå¯èƒ½éœ€è¦æ¯”è¾ƒå¤æ‚çš„æµç¨‹</li><li>æ–¹æ¡ˆBï¼šç›´æ¥ä¿®æ”¹llava.15.pyåŠ è½½æ¨¡å‹çš„éƒ¨åˆ†ï¼Œç»“åˆè¿è¡Œdemo.pyçš„å‘½ä»¤ï¼Œ</li></ul><p>æ€è™‘åï¼Œå†³å®šé‡‡ç”¨æ–¹æ¡ˆBï¼Œä½†æ˜¯ä¸€é€šæ“ä½œä¸‹æ¥ï¼Œå‘ç°å·²ç»æœ‰äººåœ¨æœåŠ¡å™¨ä¸Šç”¨Rayé›†ç¾¤äº†ï¼Œå¹¶ä¸”å’Œæˆ‘çš„ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå› ä¸ºcondaç¯å¢ƒçš„pythonç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åœ¨ä»–è¿è¡Œæ—¶æˆ‘ä¸èƒ½åŠ å…¥ï¼Œå› æ­¤åªèƒ½ç­‰ğŸ˜­ğŸ˜­</p><h1 id="Safeauto"><a href="#Safeauto" class="headerlink" title="Safeauto"></a>Safeauto</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash scripts/eval_bddx.sh 0.01 0.35 <span class="hljs-literal">true</span> 2 4<br>bash scripts/eval_drivelm.sh 0.01 0.35 <span class="hljs-literal">true</span> 1 4<br>bash scripts/eval_accident.sh 0.01 0.35 <span class="hljs-literal">true</span> 1 7<br>bash scripts/eval_accident.sh 0.01 0.35 <span class="hljs-literal">false</span> 1 7<br><br>bash scripts/finetune_drivelm.sh 0.01 0.35 <span class="hljs-literal">false</span> 1<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>å—‘ç›</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å—‘ç›</tag>
      
      <tag>llama</tag>
      
      <tag>é•œåƒ</tag>
      
      <tag>rsync</tag>
      
      <tag>MobaXterm</tag>
      
      <tag>DriveLM</tag>
      
      <tag>Dolphins</tag>
      
      <tag>Yolo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -Transformer</title>
    <link href="/2025/08/26/Transformer/"/>
    <url>/2025/08/26/Transformer/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="1-åºåˆ—åˆ°åºåˆ—-Seq2seq-ä»»åŠ¡"><a href="#1-åºåˆ—åˆ°åºåˆ—-Seq2seq-ä»»åŠ¡" class="headerlink" title="1. åºåˆ—åˆ°åºåˆ— (Seq2seq) ä»»åŠ¡"></a>1. åºåˆ—åˆ°åºåˆ— (Seq2seq) ä»»åŠ¡</h1><p>åœ¨æ·±åº¦å­¦ä¹ é¢†åŸŸï¼Œè®¸å¤šä»»åŠ¡éƒ½å¯ä»¥è¢«å½’çº³ä¸ºâ€œåºåˆ—åˆ°åºåˆ—â€ï¼ˆSequence-to-sequence, <code>Seq2seq</code>ï¼‰é—®é¢˜ã€‚è¿™ç±»ä»»åŠ¡çš„ç‰¹ç‚¹æ˜¯è¾“å…¥ä¸€ä¸ªåºåˆ—ï¼Œæ¨¡å‹éœ€è¦ç”Ÿæˆå¦ä¸€ä¸ªåºåˆ—ï¼Œå¹¶ä¸”<strong>è¾“å‡ºåºåˆ—çš„é•¿åº¦å¯èƒ½ä¸è¾“å…¥åºåˆ—ä¸åŒ</strong>ï¼Œç”±æ¨¡å‹è‡ªè¡Œå†³å®šã€‚</p><p>å¸¸è§çš„Seq2seqåº”ç”¨åŒ…æ‹¬ï¼š</p><ul><li><strong>æœºå™¨ç¿»è¯‘</strong>: å°†ä¸€ç§è¯­è¨€çš„å¥å­ï¼ˆåºåˆ—ï¼‰ç¿»è¯‘æˆå¦ä¸€ç§è¯­è¨€çš„å¥å­ï¼ˆåºåˆ—ï¼‰ã€‚</li><li><strong>è¯­éŸ³è¯†åˆ«</strong>: å°†ä¸€æ®µè¯­éŸ³ä¿¡å·ï¼ˆåºåˆ—ï¼‰è½¬æ¢æˆæ–‡å­—ï¼ˆåºåˆ—ï¼‰ã€‚</li><li><strong>æ–‡æœ¬è½¬è¯­éŸ³ (TTS)</strong>: å°†æ–‡å­—ï¼ˆåºåˆ—ï¼‰åˆæˆå¯¹åº”çš„è¯­éŸ³æ³¢å½¢ï¼ˆåºåˆ—ï¼‰ã€‚</li><li><strong>é—®ç­”ä¸å¯¹è¯ç³»ç»Ÿ</strong>: å°†é—®é¢˜æˆ–å¯¹è¯ä¸Šä¸‹æ–‡ï¼ˆåºåˆ—ï¼‰ç”Ÿæˆå›ç­”ï¼ˆåºåˆ—ï¼‰ã€‚</li></ul><p>ç”šè‡³ä¸€äº›çœ‹ä¼¼ä¸ç›¸å…³çš„ä»»åŠ¡ï¼Œå¦‚<strong>å¥æ³•åˆ†æ</strong>ã€<strong>å¤šæ ‡ç­¾åˆ†ç±»</strong>å’Œ<strong>ç›®æ ‡æ£€æµ‹</strong>ï¼Œä¹Ÿå¯ä»¥å·§å¦™åœ°è½¬åŒ–ä¸ºSeq2seqé—®é¢˜è¿›è¡Œå¤„ç†ã€‚</p><hr><h1 id="2-Transformerï¼šSeq2seqæ¨¡å‹çš„é©å‘½"><a href="#2-Transformerï¼šSeq2seqæ¨¡å‹çš„é©å‘½" class="headerlink" title="2. Transformerï¼šSeq2seqæ¨¡å‹çš„é©å‘½"></a>2. Transformerï¼šSeq2seqæ¨¡å‹çš„é©å‘½</h1><p><strong>Transformeræ˜¯ä¸€ä¸ªå®Œå…¨åŸºäºæ³¨æ„åŠ›æœºåˆ¶çš„Seq2seqæ¨¡å‹</strong>ï¼Œå®ƒæ‘’å¼ƒäº†ä¼ ç»Ÿçš„å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰å’Œå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ç»“æ„ã€‚å…¶æ ¸å¿ƒæ€æƒ³åœ¨è®ºæ–‡ <strong>â€œAttention Is All You Needâ€</strong> ä¸­è¢«æå‡ºï¼Œå¹¶è¿…é€Ÿæˆä¸ºè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰é¢†åŸŸçš„æ ‡å‡†æ¶æ„ã€‚</p><p>Transformeræ¨¡å‹ä¸»è¦ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š<strong>ç¼–ç å™¨ (Encoder)</strong> å’Œ **è§£ç å™¨ (Decoder)**ã€‚</p><ul><li><strong>ç¼–ç å™¨ (Encoder)</strong>: è´Ÿè´£å¤„ç†è¾“å…¥åºåˆ—ï¼Œå¹¶å°†å…¶è½¬æ¢æˆä¸€ç»„å¯Œå«ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å‘é‡è¡¨ç¤ºã€‚</li><li><strong>è§£ç å™¨ (Decoder)</strong>: åˆ©ç”¨ç¼–ç å™¨çš„è¾“å‡ºï¼Œå¹¶ç»“åˆå·²ç»ç”Ÿæˆçš„éƒ¨åˆ†è¾“å‡ºï¼Œé€ä¸ªç”Ÿæˆç›®æ ‡åºåˆ—çš„å…ƒç´ ã€‚</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250826151120032.png"></p><blockquote><p><strong>è®ºæ–‡å‚è€ƒ</strong>:</p><ul><li><p>Attention Is All You Need: <a href="https://arxiv.org/abs/1706.03762" title="null">https://arxiv.org/abs/1706.03762</a></p></li><li><p>Sequence to Sequence Learning with Neural Networks: <a href="https://arxiv.org/abs/1409.3215" title="null">https://arxiv.org/abs/1409.3215</a></p></li></ul></blockquote><hr><h1 id="3-ç¼–ç å™¨-Encoder-è¯¦è§£"><a href="#3-ç¼–ç å™¨-Encoder-è¯¦è§£" class="headerlink" title="3. ç¼–ç å™¨ (Encoder) è¯¦è§£"></a>3. ç¼–ç å™¨ (Encoder) è¯¦è§£</h1><p>ç¼–ç å™¨çš„ä½œç”¨æ˜¯â€œç†è§£â€è¾“å…¥åºåˆ—ã€‚<strong>å®ƒç”±Nä¸ªç›¸åŒçš„å±‚å †å è€Œæˆï¼Œæ¯ä¸€å±‚éƒ½åŒ…å«ä¸¤ä¸ªæ ¸å¿ƒå­æ¨¡å—</strong>ã€‚</p><div style="text-align: center;">  <img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250826151235910.png" width="50%" alt="Encoder"></div><ol><li><p>å¤šå¤´è‡ªæ³¨æ„åŠ› (<code>Multi-Head Self-Attention</code>)</p><p> è¿™ä¸ªæ¨¡å—è®©è¾“å…¥åºåˆ—ä¸­çš„æ¯ä¸ªè¯éƒ½èƒ½â€œå…³æ³¨â€åˆ°åºåˆ—ä¸­çš„æ‰€æœ‰å…¶ä»–è¯ï¼Œä»è€Œè®¡ç®—å‡º<strong>æ¯ä¸ªè¯åœ¨ç‰¹å®šä¸Šä¸‹æ–‡ä¸­çš„è¡¨ç¤º</strong>ã€‚å®ƒè§£å†³äº†é•¿è·ç¦»ä¾èµ–çš„é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥<strong>å¹¶è¡Œè®¡ç®—</strong>ã€‚</p></li><li><p>å‰é¦ˆç¥ç»ç½‘ç»œ (<code>Feed Forward Network</code>)</p><p> è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å…¨è¿æ¥å‰é¦ˆç½‘ç»œï¼Œå¯¹è‡ªæ³¨æ„åŠ›æ¨¡å—çš„è¾“å‡ºè¿›è¡Œè¿›ä¸€æ­¥çš„éçº¿æ€§å˜æ¢ã€‚</p></li></ol><p><strong>å…³é”®ç»†èŠ‚</strong>:</p><ul><li><p><strong>æ®‹å·®è¿æ¥ (Residual Connection) ä¸å±‚å½’ä¸€åŒ– (Layer Normalization)</strong>: æ¯ä¸ªå­æ¨¡å—ï¼ˆè‡ªæ³¨æ„åŠ›å’Œå‰é¦ˆç½‘ç»œï¼‰çš„<strong>è¾“å‡ºéƒ½ä¸è¯¥æ¨¡å—çš„è¾“å…¥è¿›è¡Œç›¸åŠ ï¼ˆæ®‹å·®è¿æ¥ï¼‰</strong>ï¼Œç„¶åè¿›è¡Œ<strong>å±‚å½’ä¸€åŒ–</strong>ï¼ˆ<code>Layer Norm</code>ï¼‰ã€‚è¿™æœ‰åŠ©äºé˜²æ­¢æ¢¯åº¦æ¶ˆå¤±ï¼ŒåŠ é€Ÿæ¨¡å‹è®­ç»ƒï¼Œå¹¶ç¨³å®šè®­ç»ƒè¿‡ç¨‹ã€‚</p></li><li><p><strong>ä½ç½®ç¼–ç  (Positional Encoding)</strong>: ç”±äºè‡ªæ³¨æ„åŠ›æœºåˆ¶æœ¬èº«ä¸åŒ…å«åºåˆ—çš„ä½ç½®ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦åœ¨è¾“å…¥æ—¶é¢å¤–<strong>åŠ å…¥ä¸€ä¸ªâ€œä½ç½®ç¼–ç â€å‘é‡</strong>ï¼Œæ¥å‘Šè¯‰æ¨¡å‹æ¯ä¸ªè¯åœ¨å¥å­ä¸­<strong>çš„ç»å¯¹æˆ–ç›¸å¯¹ä½ç½®</strong>ã€‚</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250826151948061.png"></p><blockquote><p><strong>ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>On Layer Normalization in the Transformer Architecture: <a href="https://arxiv.org/abs/2002.04745" title="null">https://arxiv.org/abs/2002.04745</a></p></li><li><p>PowerNorm: Rethinking Batch Normalization in Transformers: <a href="https://arxiv.org/abs/2003.07845" title="null">https://arxiv.org/abs/2003.07845</a></p></li></ul></blockquote><hr><h1 id="4-è§£ç å™¨-Decoder-è¯¦è§£"><a href="#4-è§£ç å™¨-Decoder-è¯¦è§£" class="headerlink" title="4. è§£ç å™¨ (Decoder) è¯¦è§£"></a>4. è§£ç å™¨ (Decoder) è¯¦è§£</h1><p>è§£ç å™¨çš„ä»»åŠ¡æ˜¯ç”Ÿæˆè¾“å‡ºåºåˆ—ã€‚å®ƒåŒæ ·ç”±Nä¸ªç›¸åŒçš„å±‚å †å è€Œæˆï¼Œä½†æ¯å±‚æ¯”ç¼–ç å™¨å¤šäº†ä¸€ä¸ªæ¨¡å—ã€‚</p><ol><li><p>å¸¦æ©ç çš„å¤šå¤´è‡ªæ³¨æ„åŠ› (<strong>Masked Multi-Head Self-Attention</strong>)</p><p> ä¸ç¼–ç å™¨ç±»ä¼¼ï¼Œä½†å¢åŠ äº†ä¸€ä¸ªâ€œæ©ç â€ï¼ˆ<code>Mask</code>ï¼‰ã€‚è¿™ä¸ªæ©ç ç¡®ä¿åœ¨é¢„æµ‹ç¬¬ i ä¸ªè¯æ—¶ï¼Œ<strong>æ¨¡å‹åªèƒ½å…³æ³¨åˆ°å®ƒå‰é¢å·²ç»ç”Ÿæˆçš„ 1 åˆ° i-1 ä¸ªè¯ï¼Œè€Œä¸èƒ½â€œçœ‹åˆ°â€æœªæ¥çš„è¯</strong>ã€‚è¿™æ˜¯ä¸ºäº†ä¿è¯è§£ç è¿‡ç¨‹çš„è‡ªå›å½’ï¼ˆ<code>Autoregressive</code>ï¼‰ç‰¹æ€§ã€‚</p></li><li><p>äº¤å‰æ³¨æ„åŠ› (<strong>Cross-Attention</strong>)</p><p> <strong>è¿™æ˜¯è¿æ¥ç¼–ç å™¨å’Œè§£ç å™¨çš„æ¡¥æ¢</strong>ã€‚åœ¨è¿™ä¸ªæ¨¡å—ä¸­ï¼Œ<strong>Query æ¥è‡ªäºè§£ç å™¨çš„ä¸Šä¸€ä¸ªæ¨¡å—ï¼ˆå¸¦æ©ç çš„è‡ªæ³¨æ„åŠ›ï¼‰ï¼Œè€Œ Key å’Œ Value åˆ™æ¥è‡ªäºç¼–ç å™¨çš„æœ€ç»ˆè¾“å‡º</strong>ã€‚è¿™ä½¿å¾—è§£ç å™¨åœ¨ç”Ÿæˆæ¯ä¸ªè¯æ—¶ï¼Œèƒ½å¤Ÿå…³æ³¨åˆ°è¾“å…¥åºåˆ—çš„æ‰€æœ‰éƒ¨åˆ†ï¼Œå¹¶ä»ä¸­æå–æœ€ç›¸å…³çš„ä¿¡æ¯ã€‚</p></li><li><p>å‰é¦ˆç¥ç»ç½‘ç»œ (Feed Forward Network)</p><p> ä¸ç¼–ç å™¨ä¸­çš„å‰é¦ˆç½‘ç»œåŠŸèƒ½ç›¸åŒã€‚</p></li></ol><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250826152258238.png"></p><hr><h1 id="è§£ç è¿‡ç¨‹ï¼šè‡ªå›å½’-Autoregressive-AT"><a href="#è§£ç è¿‡ç¨‹ï¼šè‡ªå›å½’-Autoregressive-AT" class="headerlink" title="è§£ç è¿‡ç¨‹ï¼šè‡ªå›å½’ (Autoregressive, AT)"></a>è§£ç è¿‡ç¨‹ï¼šè‡ªå›å½’ (Autoregressive, AT)</h1><p>è§ä¸Šå›¾ï¼Œè§£ç å™¨ç”Ÿæˆè¾“å‡ºæ˜¯ä¸€ä¸ªé€è¯è¿›è¡Œçš„è¿‡ç¨‹ï¼š</p><ol><li>è¾“å…¥ä¸€ä¸ªç‰¹æ®Šçš„èµ·å§‹ç¬¦ <code>&lt;BEGIN&gt;</code>ã€‚</li><li>è§£ç å™¨æ ¹æ® <code>&lt;BEGIN&gt;</code> å’Œç¼–ç å™¨çš„è¾“å‡ºï¼Œç”Ÿæˆç¬¬ä¸€ä¸ªè¯ï¼ˆä¾‹å¦‚â€œæœºâ€ï¼‰ã€‚</li><li>å°†å·²ç”Ÿæˆçš„â€œæœºâ€ä½œä¸ºä¸‹ä¸€æ­¥çš„è¾“å…¥ï¼Œè§£ç å™¨å†ç”Ÿæˆç¬¬äºŒä¸ªè¯ï¼ˆä¾‹å¦‚â€œå™¨â€ï¼‰ã€‚</li><li>é‡å¤æ­¤è¿‡ç¨‹ï¼Œç›´åˆ°è§£ç å™¨ç”Ÿæˆä¸€ä¸ªç‰¹æ®Šçš„ç»ˆæ­¢ç¬¦ <code>&lt;END&gt;</code> ä¸ºæ­¢ã€‚</li></ol><p>å¯¹æ¯”ï¼šéè‡ªå›å½’ (Non-autoregressive, <code>NAT</code>)</p><p>NATè§£ç å™¨<strong>å°è¯•ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰è¾“å‡ºï¼Œè€Œä¸æ˜¯é€è¯ç”Ÿæˆ</strong>ã€‚è¿™æ ·åšå¯ä»¥å®ç°å®Œå…¨å¹¶è¡Œï¼Œé€Ÿåº¦æ›´å¿«ï¼Œä½†åœ¨æŸäº›ä»»åŠ¡ä¸Šï¼Œç”±äºé—®é¢˜çš„å¤šæ¨¡æ€æ€§ï¼ˆä¸€ä¸ªè¾“å…¥å¯èƒ½å¯¹åº”å¤šä¸ªåˆç†è¾“å‡ºï¼‰ï¼Œå…¶æ€§èƒ½é€šå¸¸ä¸å¦‚ATæ¨¡å‹ã€‚</p><hr><h1 id="5-è®­ç»ƒæŠ€å·§ä¸ç­–ç•¥"><a href="#5-è®­ç»ƒæŠ€å·§ä¸ç­–ç•¥" class="headerlink" title="5. è®­ç»ƒæŠ€å·§ä¸ç­–ç•¥"></a>5. è®­ç»ƒæŠ€å·§ä¸ç­–ç•¥</h1><ul><li><p><strong>Teacher Forcing</strong>: åœ¨è®­ç»ƒé˜¶æ®µï¼Œä¸ºäº†æé«˜æ•ˆç‡å’Œç¨³å®šæ€§ï¼Œæ— è®ºæ¨¡å‹ä¸Šä¸€æ­¥é¢„æµ‹å‡ºä»€ä¹ˆè¯ï¼Œæˆ‘ä»¬æ€»æ˜¯å°†<strong>æ­£ç¡®çš„</strong>ä¸Šä¸€ä¸ªè¯ä½œä¸ºå½“å‰æ­¥çš„è¾“å…¥ã€‚è¿™å°±åƒæœ‰ä¸€ä¸ªâ€œè€å¸ˆâ€åœ¨ä¸æ–­çº æ­£æ¨¡å‹çš„è·¯å¾„ã€‚</p></li><li><p><strong>Exposure Bias</strong>: Teacher Forcing å¯¼è‡´äº†è®­ç»ƒä¸æµ‹è¯•ä¹‹é—´çš„ä¸åŒ¹é…ï¼ˆ<code>mismatch</code>ï¼‰ã€‚åœ¨æµ‹è¯•æ—¶ï¼Œæ¨¡å‹å¿…é¡»ä¾èµ–è‡ªå·±ä¹‹å‰ç”Ÿæˆçš„ï¼ˆå¯èƒ½é”™è¯¯çš„ï¼‰è¯ï¼Œè¿™ç§å·®å¼‚è¢«ç§°ä¸ºâ€œæš´éœ²åå·®â€ã€‚</p></li><li><p><strong>Scheduled Sampling</strong>: ä¸€ç§ç¼“è§£<code>Exposure Bias</code>  çš„ç­–ç•¥ã€‚åœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä»¥ä¸€å®šæ¦‚ç‡é€‰æ‹©ä½¿ç”¨æ¨¡å‹çš„ä¸Šä¸€æ—¶åˆ»é¢„æµ‹è¾“å‡ºæˆ–çœŸå®çš„æ ‡ç­¾ä½œä¸ºå½“å‰æ—¶åˆ»çš„è¾“å…¥ã€‚</p></li><li><p><strong>Beam Search</strong>: åœ¨è§£ç ï¼ˆç”Ÿæˆï¼‰é˜¶æ®µï¼Œä¸ºäº†æ‰¾åˆ°æ¯”è´ªå¿ƒç­–ç•¥ï¼ˆæ¯æ¬¡éƒ½é€‰æ¦‚ç‡æœ€é«˜çš„è¯ï¼‰æ›´ä¼˜çš„è¾“å‡ºåºåˆ—ï¼Œå¯ä»¥ä½¿ç”¨æŸæœç´¢ã€‚<strong>å®ƒåœ¨æ¯ä¸€æ­¥éƒ½ä¿ç•™kä¸ªæœ€å¯èƒ½çš„å€™é€‰åºåˆ—ï¼Œå¹¶åœ¨ä¸‹ä¸€æ­¥ä»è¿™kä¸ªåºåˆ—å‡ºå‘ç»§ç»­æ‰©å±•ï¼Œä»è€Œåœ¨å…¨å±€ä¸Šæ‰¾åˆ°æ›´å¥½çš„è§£</strong>ã€‚</p></li></ul><blockquote><p><strong>ç›¸å…³è®ºæ–‡</strong>:</p><ul><li><p>The Curious Case of Neural Text Degeneration: <a href="https://arxiv.org/abs/1904.09751" title="null">https://arxiv.org/abs/1904.09751</a></p></li><li><p>Scheduled Sampling for Sequence Prediction with Recurrent Neural Networks: <a href="https://arxiv.org/abs/1506.03099" title="null">https://arxiv.org/abs/1506.03099</a></p></li></ul></blockquote><h1 id="6-æ€»ç»“"><a href="#6-æ€»ç»“" class="headerlink" title="6. æ€»ç»“"></a>6. æ€»ç»“</h1><p>Transformerå‡­å€Ÿå…¶å¼ºå¤§çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›å’Œå¯¹é•¿è·ç¦»ä¾èµ–çš„å‡ºè‰²å»ºæ¨¡ï¼Œå½»åº•æ”¹å˜äº†Seq2seqä»»åŠ¡çš„æ ¼å±€ã€‚å…¶æ ¸å¿ƒçš„<strong>è‡ªæ³¨æ„åŠ›æœºåˆ¶</strong>ã€<strong>å¤šå¤´æ³¨æ„åŠ›</strong>ã€<strong>ä½ç½®ç¼–ç </strong>ä»¥åŠ<strong>Encoder-Decoderæ¶æ„</strong>å…±åŒæ„æˆäº†è¿™ä¸€å¼ºå¤§æ¨¡å‹çš„åŸºç¡€ï¼Œå¹¶å‚¬ç”Ÿäº†BERTã€GPTç­‰ä¸€ç³»åˆ—åœ¨AIé¢†åŸŸäº§ç”Ÿæ·±è¿œå½±å“çš„æ¨¡å‹ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Self_Attention</tag>
      
      <tag>æ³¨æ„åŠ›</tag>
      
      <tag>Transformer</tag>
      
      <tag>Seq2seq</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -HW3 Notebook</title>
    <link href="/2025/08/22/HW3%20Notebook/"/>
    <url>/2025/08/22/HW3%20Notebook/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å®Œæˆæå®æ¯…æœºå™¨å­¦ä¹ 2021ä½œä¸š3æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>ğŸ˜† ä½œä¸š2æ²¡æ•´å‡ºæ¥ä»€ä¹ˆï¼Œç›´æ¥çœ‹SOTA æ–¹æ³•äº†ï¼Œä¹Ÿå°±æ²¡ä»€ä¹ˆç¬”è®°</p><h1 id="ä½œä¸šè¦æ±‚"><a href="#ä½œä¸šè¦æ±‚" class="headerlink" title="ä½œä¸šè¦æ±‚"></a>ä½œä¸šè¦æ±‚</h1><h2 id="Homework-3-Convolutional-Neural-Network"><a href="#Homework-3-Convolutional-Neural-Network" class="headerlink" title="Homework 3 - Convolutional Neural Network"></a>Homework 3 - Convolutional Neural Network</h2><p>This is the example code of homework 3 of the machine learning course by Prof. Hung-yi Lee.<br>In this homework, you are required to build a <strong>convolutional neural network for image classification</strong>, possibly with some advanced training tips.</p><p>There are three levels here:<br><strong>Easy</strong>: Build a simple convolutional neural network as the baseline. (2 pts)<br><strong>Medium</strong>: Design a better architecture or adopt different data augmentations to improve the performance. (2 pts)<br><strong>Hard</strong>: Utilize provided unlabeled data to obtain better results. (2 pts)</p><h1 id="ç»“æœåˆ†æ"><a href="#ç»“æœåˆ†æ" class="headerlink" title="ç»“æœåˆ†æ"></a>ç»“æœåˆ†æ</h1><p>ç›´æ¥è·‘åŸå§‹ä»£ç ï¼Œä¼šå‘ç°<strong>trainçš„accæ˜¾è‘—é«˜äºvalçš„acc</strong>ï¼Œæˆ‘ä»¬çš„æ¨¡å‹<strong>åœ¨train_dataä¸Šè¿‡æ‹Ÿåˆäº†</strong>ï¼Œè¿‡åˆ†ä¾èµ–è®­ç»ƒæ•°æ®ç”šè‡³æ˜¯æŸäº›å±€éƒ¨ç‰¹å¾ï¼Œå› æ­¤ï¼Œéœ€è¦é‡‡å–ä¸€äº›æªæ–½æ¥é˜²æ­¢è¿‡æ‹Ÿåˆ</p><p>æˆ‘å¤§è‡´ä¿®æ”¹äº†è¿™äº›åœ°æ–¹ï¼š</p><ul><li>ä½¿ç”¨æ•°æ®å¢å¼º</li><li>ä¿®æ”¹æ¨¡å‹ç»“æ„</li><li>è¶…å‚æ•°è°ƒæ•´</li></ul><h1 id="Data-Augmentation"><a href="#Data-Augmentation" class="headerlink" title="Data Augmentation"></a>Data Augmentation</h1><p>å¯¹äºä¸€å¼ é£Ÿç‰©å›¾ç‰‡ï¼Œä»¥æˆ‘ä»¬äººçœ¼çœ‹æ¥ï¼Œå°†å›¾ç‰‡æ—‹è½¬å°‘è®¸è§’åº¦ï¼Œå°†å›¾ç‰‡æ¨ªå‘ç¿»è½¬ï¼Œæ”¹å˜å›¾ç‰‡çš„å°ºå¯¸ã€äº®åº¦ã€å¯¹æ¯”åº¦ç­‰ï¼Œæˆ‘ä»¬ç”¨è‚‰çœ¼ä¾ç„¶èƒ½å¤Ÿåˆ†è¾¨ï¼Œä½†modelå°±ä¸ä¸€å®šäº†ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ•°æ®å¢å¼ºæ¥æå‡æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€é²æ£’æ€§ï¼Œå‡è½»ä¸€å®šç¨‹åº¦çš„è¿‡æ‹Ÿåˆã€‚</p><p>Data Augmentationå¹¶ä¸ç›´æ¥ä¿®æ”¹åŸå§‹æ•°æ®ï¼Œè€Œæ˜¯<strong>åœ¨æ ·æœ¬åŠ è½½æ—¶åŠ¨æ€éšæœºç”Ÿæˆå¦ä¸€ä¸ªæ–°æ ·æœ¬</strong></p><p>é—®äº†ä¸‹deepseek-v3<br>æœ¬æŒ‡å—å°†è¯¦ç»†è§£æ <code>torchvision.transforms</code> ä¸­å„ç§æ•°æ®å¢å¼ºæ–¹æ³•çš„å‚æ•°ï¼Œå¹¶ä»‹ç»å¦‚ä½•ä½¿ç”¨ <strong>AutoAugment</strong> å’Œ <strong>RandAugment</strong> è¿™ä¸¤ç§é«˜çº§å¢å¼ºç­–ç•¥ã€‚</p><hr><h2 id="1-åŸºç¡€å‡ ä½•å˜æ¢æ–¹æ³•"><a href="#1-åŸºç¡€å‡ ä½•å˜æ¢æ–¹æ³•" class="headerlink" title="1. åŸºç¡€å‡ ä½•å˜æ¢æ–¹æ³•"></a>1. åŸºç¡€å‡ ä½•å˜æ¢æ–¹æ³•</h2><h3 id="1-RandomHorizontalFlip-RandomVerticalFlip"><a href="#1-RandomHorizontalFlip-RandomVerticalFlip" class="headerlink" title="(1) RandomHorizontalFlip &#x2F; RandomVerticalFlip"></a>(1) <code>RandomHorizontalFlip</code> &#x2F; <code>RandomVerticalFlip</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šéšæœºæ°´å¹³æˆ–å‚ç›´ç¿»è½¬å›¾åƒã€‚</li><li><strong>å‚æ•°</strong>ï¼š <code>p</code> (float): ç¿»è½¬æ¦‚ç‡ï¼ˆé»˜è®¤ <code>0.5</code>ï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.RandomHorizontalFlip(p=<span class="hljs-number">0.7</span>)  <span class="hljs-comment"># 70%æ¦‚ç‡æ°´å¹³ç¿»è½¬</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-RandomRotation"><a href="#2-RandomRotation" class="headerlink" title="(2) RandomRotation"></a>(2) <code>RandomRotation</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šéšæœºæ—‹è½¬å›¾åƒã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>degrees</code> (float or tuple): æ—‹è½¬è§’åº¦èŒƒå›´ï¼ˆå¦‚ <code>30</code> è¡¨ç¤º <code>Â±30Â°</code>ï¼Œ<code>(10, 30)</code> è¡¨ç¤º <code>10Â°~30Â°</code>ï¼‰ã€‚</li><li><code>expand</code> (bool): æ˜¯å¦æ‰©å¤§å›¾åƒå°ºå¯¸ä»¥å®¹çº³æ—‹è½¬åçš„å†…å®¹ï¼ˆé»˜è®¤ <code>False</code>ï¼‰ã€‚</li><li><code>fill</code> (tuple): æ—‹è½¬åç©ºç™½åŒºåŸŸçš„å¡«å……å€¼ï¼ˆRGBæ ¼å¼ï¼Œå¦‚ <code>(255, 0, 0)</code> è¡¨ç¤ºçº¢è‰²ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.RandomRotation(degrees=(-<span class="hljs-number">15</span>, <span class="hljs-number">15</span>), fill=(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))  <span class="hljs-comment"># æ—‹è½¬Â±15Â°ï¼Œç©ºç™½å¡«é»‘è‰²</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-RandomResizedCrop"><a href="#3-RandomResizedCrop" class="headerlink" title="(3) RandomResizedCrop"></a>(3) <code>RandomResizedCrop</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šéšæœºè£å‰ªå¹¶ç¼©æ”¾åˆ°æŒ‡å®šå°ºå¯¸ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>size</code> (int or tuple): ç›®æ ‡å°ºå¯¸ï¼ˆå¦‚ <code>224</code> æˆ– <code>(224, 224)</code>ï¼‰ã€‚</li><li><code>scale</code> (tuple): è£å‰ªé¢ç§¯æ¯”ä¾‹èŒƒå›´ï¼ˆå¦‚ <code>(0.08, 1.0)</code> è¡¨ç¤ºè£å‰ªåŸå›¾çš„ <code>8%~100%</code>ï¼‰ã€‚</li><li><code>ratio</code> (tuple): å®½é«˜æ¯”èŒƒå›´ï¼ˆå¦‚ <code>(0.75, 1.33)</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.RandomResizedCrop(size=<span class="hljs-number">224</span>, scale=(<span class="hljs-number">0.8</span>, <span class="hljs-number">1.0</span>), ratio=(<span class="hljs-number">0.9</span>, <span class="hljs-number">1.1</span>))<br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="2-é¢œè‰²ç©ºé—´å˜æ¢æ–¹æ³•"><a href="#2-é¢œè‰²ç©ºé—´å˜æ¢æ–¹æ³•" class="headerlink" title="2. é¢œè‰²ç©ºé—´å˜æ¢æ–¹æ³•"></a>2. é¢œè‰²ç©ºé—´å˜æ¢æ–¹æ³•</h2><h3 id="1-ColorJitter"><a href="#1-ColorJitter" class="headerlink" title="(1) ColorJitter"></a>(1) <code>ColorJitter</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šéšæœºè°ƒæ•´äº®åº¦ã€å¯¹æ¯”åº¦ã€é¥±å’Œåº¦å’Œè‰²è°ƒã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>brightness</code> (float or tuple): äº®åº¦è°ƒæ•´èŒƒå›´ï¼ˆå¦‚ <code>0.2</code> è¡¨ç¤º <code>Â±20%</code>ï¼‰ã€‚</li><li><code>contrast</code> &#x2F; <code>saturation</code> &#x2F; <code>hue</code>: ç±»ä¼¼äº®åº¦ï¼Œä½† <code>hue</code> èŒƒå›´æ˜¯ <code>[-0.5, 0.5]</code>ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.ColorJitter(brightness=<span class="hljs-number">0.2</span>, contrast=<span class="hljs-number">0.2</span>, saturation=<span class="hljs-number">0.2</span>, hue=<span class="hljs-number">0.1</span>)<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-RandomGrayscale"><a href="#2-RandomGrayscale" class="headerlink" title="(2) RandomGrayscale"></a>(2) <code>RandomGrayscale</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šä»¥æ¦‚ç‡ <code>p</code> å°†å›¾åƒè½¬ä¸ºç°åº¦ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>p</code> (float): ç°åº¦åŒ–æ¦‚ç‡ï¼ˆé»˜è®¤ <code>0.1</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.RandomGrayscale(p=<span class="hljs-number">0.3</span>)  <span class="hljs-comment"># 30%æ¦‚ç‡ç°åº¦åŒ–</span><br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="3-é«˜çº§å¢å¼ºæ–¹æ³•"><a href="#3-é«˜çº§å¢å¼ºæ–¹æ³•" class="headerlink" title="3. é«˜çº§å¢å¼ºæ–¹æ³•"></a>3. é«˜çº§å¢å¼ºæ–¹æ³•</h2><h3 id="1-AutoAugment"><a href="#1-AutoAugment" class="headerlink" title="(1) AutoAugment"></a>(1) <code>AutoAugment</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šåŸºäºå¼ºåŒ–å­¦ä¹ æœç´¢çš„å¢å¼ºç­–ç•¥ï¼ˆé’ˆå¯¹ç‰¹å®šæ•°æ®é›†å¦‚ ImageNetã€CIFAR10 ä¼˜åŒ–ï¼‰ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>policy</code> (str): é¢„å®šä¹‰ç­–ç•¥ï¼ˆ<code>imagenet</code> &#x2F; <code>cifar10</code> &#x2F; <code>svhn</code>ï¼‰ã€‚</li><li><code>interpolation</code> (InterpolationMode): æ’å€¼æ–¹æ³•ï¼ˆå¦‚ <code>BILINEAR</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">import</span> AutoAugment, AutoAugmentPolicy<br>transform = transforms.Compose([<br>    AutoAugment(policy=AutoAugmentPolicy.IMAGENET),  <span class="hljs-comment"># ä½¿ç”¨ImageNetç­–ç•¥</span><br>    transforms.ToTensor()<br>])<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-RandAugment"><a href="#2-RandAugment" class="headerlink" title="(2) RandAugment"></a>(2) <code>RandAugment</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šç®€åŒ–ç‰ˆ AutoAugmentï¼Œéšæœºé€‰æ‹© <code>N</code> ç§å˜æ¢å¹¶ç»Ÿä¸€å¼ºåº¦ <code>M</code>ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>num_ops</code> (int): æ¯æ¬¡å¢å¼ºåº”ç”¨çš„å˜æ¢æ•°é‡ï¼ˆé»˜è®¤ <code>2</code>ï¼‰ã€‚</li><li><code>magnitude</code> (int): å¼ºåº¦å€¼ï¼ˆ0~30ï¼Œé»˜è®¤ <code>9</code>ï¼‰ã€‚</li><li><code>num_magnitude_bins</code> (int): å¼ºåº¦ç¦»æ•£åŒ–çº§åˆ«ï¼ˆé»˜è®¤ <code>31</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">import</span> RandAugment<br>transform = transforms.Compose([<br>    RandAugment(num_ops=<span class="hljs-number">3</span>, magnitude=<span class="hljs-number">9</span>),  <span class="hljs-comment"># éšæœºé€‰3ç§å˜æ¢ï¼Œå¼ºåº¦9</span><br>    transforms.ToTensor()<br>])<br></code></pre></td></tr></table></figure></li></ul><h3 id="3-TrivialAugmentWide"><a href="#3-TrivialAugmentWide" class="headerlink" title="(3) TrivialAugmentWide"></a>(3) <code>TrivialAugmentWide</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šæ›´ç®€å•çš„ RandAugment å˜ä½“ï¼Œ<strong>æ— éœ€è°ƒå‚</strong>ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">import</span> TrivialAugmentWide<br>transform = transforms.Compose([<br>    TrivialAugmentWide(),  <span class="hljs-comment"># è‡ªåŠ¨é€‰æ‹©å˜æ¢å’Œå¼ºåº¦</span><br>    transforms.ToTensor()<br>])<br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="4-å…¶ä»–å®ç”¨æ–¹æ³•"><a href="#4-å…¶ä»–å®ç”¨æ–¹æ³•" class="headerlink" title="4. å…¶ä»–å®ç”¨æ–¹æ³•"></a>4. å…¶ä»–å®ç”¨æ–¹æ³•</h2><h3 id="1-GaussianBlur"><a href="#1-GaussianBlur" class="headerlink" title="(1) GaussianBlur"></a>(1) <code>GaussianBlur</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šé«˜æ–¯æ¨¡ç³Šï¼ˆæ¨¡æ‹Ÿç„¦è·å˜åŒ–ï¼‰ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>kernel_size</code> (int or tuple): å·ç§¯æ ¸å¤§å°ï¼ˆå¿…é¡»ä¸ºå¥‡æ•°ï¼‰ã€‚</li><li><code>sigma</code> (float or tuple): æ ‡å‡†å·®èŒƒå›´ï¼ˆå¦‚ <code>(0.1, 2.0)</code>ï¼‰ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.GaussianBlur(kernel_size=<span class="hljs-number">5</span>, sigma=(<span class="hljs-number">0.1</span>, <span class="hljs-number">2.0</span>))<br></code></pre></td></tr></table></figure></li></ul><h3 id="2-RandomErasing"><a href="#2-RandomErasing" class="headerlink" title="(2) RandomErasing"></a>(2) <code>RandomErasing</code></h3><ul><li><strong>ä½œç”¨</strong>ï¼šéšæœºæ“¦é™¤å›¾åƒåŒºåŸŸï¼ˆç±»ä¼¼ Cutoutï¼‰ã€‚</li><li><strong>å‚æ•°</strong>ï¼š<ul><li><code>p</code> (float): æ“¦é™¤æ¦‚ç‡ã€‚</li><li><code>scale</code> &#x2F; <code>ratio</code>: æ“¦é™¤åŒºåŸŸçš„é¢ç§¯å’Œå®½é«˜æ¯”èŒƒå›´ã€‚</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">transform = transforms.RandomErasing(p=<span class="hljs-number">0.5</span>, scale=(<span class="hljs-number">0.02</span>, <span class="hljs-number">0.2</span>), ratio=(<span class="hljs-number">0.3</span>, <span class="hljs-number">3.3</span>))<br></code></pre></td></tr></table></figure></li></ul><hr><h2 id="5-å®Œæ•´ç¤ºä¾‹ä»£ç "><a href="#5-å®Œæ•´ç¤ºä¾‹ä»£ç " class="headerlink" title="5. å®Œæ•´ç¤ºä¾‹ä»£ç "></a>5. å®Œæ•´ç¤ºä¾‹ä»£ç </h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms<br><span class="hljs-keyword">from</span> torchvision.transforms <span class="hljs-keyword">import</span> AutoAugment, AutoAugmentPolicy, RandAugment<br><br><span class="hljs-comment"># åŸºç¡€å¢å¼ºç»„åˆ</span><br>basic_transform = transforms.Compose([<br>    transforms.RandomResizedCrop(<span class="hljs-number">224</span>),<br>    transforms.RandomHorizontalFlip(),<br>    transforms.ColorJitter(brightness=<span class="hljs-number">0.2</span>, contrast=<span class="hljs-number">0.2</span>),<br>    transforms.ToTensor(),<br>])<br><br><span class="hljs-comment"># AutoAugmentï¼ˆImageNetä¼˜åŒ–ç­–ç•¥ï¼‰</span><br>auto_transform = transforms.Compose([<br>    AutoAugment(policy=AutoAugmentPolicy.IMAGENET),<br>    transforms.ToTensor(),<br>])<br><br><span class="hljs-comment"># RandAugmentï¼ˆè‡ªå®šä¹‰å¼ºåº¦å’Œå˜æ¢æ•°é‡ï¼‰</span><br>rand_transform = transforms.Compose([<br>    RandAugment(num_ops=<span class="hljs-number">3</span>, magnitude=<span class="hljs-number">9</span>),<br>    transforms.ToTensor(),<br>])<br></code></pre></td></tr></table></figure><hr><h2 id="6-é€‰æ‹©å»ºè®®"><a href="#6-é€‰æ‹©å»ºè®®" class="headerlink" title="6. é€‰æ‹©å»ºè®®"></a>6. é€‰æ‹©å»ºè®®</h2><ul><li><strong>ç®€å•ä»»åŠ¡</strong>ï¼šåŸºç¡€å‡ ä½•å˜æ¢ + <code>ColorJitter</code>ã€‚</li><li><strong>å¤æ‚ä»»åŠ¡</strong>ï¼šä¼˜å…ˆå°è¯• <code>AutoAugment</code>ï¼ˆé¢„è®­ç»ƒç­–ç•¥ï¼‰æˆ– <code>RandAugment</code>ï¼ˆéœ€è°ƒå‚ï¼‰ã€‚</li><li><strong>èµ„æºæœ‰é™</strong>ï¼šä½¿ç”¨ <code>TrivialAugmentWide</code>ï¼ˆå…è°ƒå‚ï¼‰ã€‚</li></ul><p>é€šè¿‡åˆç†ç»„åˆè¿™äº›æ–¹æ³•ï¼Œå¯ä»¥æ˜¾è‘—æå‡å›¾åƒåˆ†ç±»æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ï¼ ğŸš€</p><p>åæ­£æˆ‘è¯•äº†ä¸€ä¸‹å‡ ç§æ–¹æ³•ï¼Œä¹ŸåŒ…æ‹¬è‡ªå·±diyçš„ï¼Œç«Ÿç„¶<code>TrivialAugmentWide</code>çš„æ•ˆæœæ˜¯æœ€å¥½çš„ï¼Œçœ‹æ¥å®ƒå¿…ç„¶æœ‰å®ƒçš„é“ç†</p><h1 id="CNNæ¶æ„"><a href="#CNNæ¶æ„" class="headerlink" title="CNNæ¶æ„"></a>CNNæ¶æ„</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Classifier</span>(nn.Module):<br><br>Â  Â  <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>Â  Â  Â  Â  <span class="hljs-built_in">super</span>(Classifier, <span class="hljs-variable language_">self</span>).__init__()<br><br>Â  Â  Â  Â  <span class="hljs-comment"># The arguments for commonly used modules:</span><br><br>Â  Â  Â  Â  <span class="hljs-comment"># torch.nn.Conv2d(in_channels, out_channels, kernel_size, stride, padding)</span><br>Â  Â  Â  Â  <span class="hljs-comment"># torch.nn.MaxPool2d(kernel_size, stride, padding)</span><br><br>Â  Â  Â  Â  <span class="hljs-comment"># input image size: [3, 128, 128]</span><br><br>Â  Â  Â  Â  <span class="hljs-variable language_">self</span>.cnn_layers = nn.Sequential(<br><br>Â  Â  Â  Â  Â  Â  nn.Conv2d(<span class="hljs-number">3</span>, <span class="hljs-number">64</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),<br>Â  Â  Â  Â  Â  Â  nn.BatchNorm2d(<span class="hljs-number">64</span>),<br>Â  Â  Â  Â  Â  Â  nn.ReLU(),<br>Â  Â  Â  Â  Â  Â  nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>),<br><br>Â  Â  Â  Â  Â  Â  nn.Conv2d(<span class="hljs-number">64</span>, <span class="hljs-number">128</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),<br>Â  Â  Â  Â  Â  Â  nn.BatchNorm2d(<span class="hljs-number">128</span>),<br>Â  Â  Â  Â  Â  Â  nn.ReLU(),<br>Â  Â  Â  Â  Â  Â  nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>),<br><br>Â  Â  Â  Â  Â  Â  nn.Conv2d(<span class="hljs-number">128</span>, <span class="hljs-number">256</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>),<br>Â  Â  Â  Â  Â  Â  nn.BatchNorm2d(<span class="hljs-number">256</span>),<br>Â  Â  Â  Â  Â  Â  nn.ReLU(),<br>Â  Â  Â  Â  Â  Â  nn.MaxPool2d(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>),<br><br>Â  Â  Â  Â  )<br><br>Â  Â  Â  Â  <span class="hljs-variable language_">self</span>.fc_layers = nn.Sequential(<br>Â  Â  Â  Â  Â  Â  nn.Linear(<span class="hljs-number">256</span> * <span class="hljs-number">8</span> * <span class="hljs-number">8</span>, <span class="hljs-number">256</span>),<br>Â  Â  Â  Â  Â  Â  nn.ReLU(),<br>Â  Â  Â  Â  Â  Â  nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">256</span>),<br>Â  Â  Â  Â  Â  Â  nn.ReLU(),<br>Â  Â  Â  Â  Â  Â  nn.Linear(<span class="hljs-number">256</span>, <span class="hljs-number">11</span>)<br>Â  Â  Â  Â  )<br><br>Â  Â  <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>Â  Â  Â  Â  <span class="hljs-comment"># input (x): [batch_size, 3, 128, 128]</span><br>Â  Â  Â  Â  <span class="hljs-comment"># output: [batch_size, 11]</span><br>Â  Â  Â  Â  <br>Â  Â  Â  Â  <span class="hljs-comment"># Extract features by convolutional layers.</span><br>Â  Â  Â  Â  x = <span class="hljs-variable language_">self</span>.cnn_layers(x)<br><br>Â  Â  Â  Â  <span class="hljs-comment"># The extracted feature map must be flatten before going to fully-connected layers.</span><br>Â  Â  Â  Â  x = x.flatten(<span class="hljs-number">1</span>)<br><br>Â  Â  Â  Â  <span class="hljs-comment"># The features are transformed by fully-connected layers to obtain the final logits.</span><br>Â  Â  Â  Â  x = <span class="hljs-variable language_">self</span>.fc_layers(x)<br><br>Â  Â  Â  Â  <span class="hljs-keyword">return</span> x<br></code></pre></td></tr></table></figure><h2 id="Conv2d"><a href="#Conv2d" class="headerlink" title="Conv2d"></a>Conv2d</h2><p>å…ˆè§£é‡Šä¸‹<code>nn.Conv2d(3, 64, 3, 1, 1)</code>,åˆ†åˆ«å¯¹åº” in_channels, out_channels, kernel_size, stride, padding</p><ul><li><strong>è¾“å…¥é€šé“ï¼ˆ<code>in_channels</code>ï¼‰</strong>ï¼šè¾“å…¥æ•°æ®çš„ç‰¹å¾å±‚æ•°ï¼ˆå¦‚RGBå›¾åƒçš„3é€šé“ã€å‰ä¸€å±‚çš„è¾“å‡ºé€šé“æ•°ï¼‰ã€‚</li><li><strong>è¾“å‡ºé€šé“ï¼ˆ<code>out_channels</code>ï¼‰</strong>ï¼šå·ç§¯åç”Ÿæˆçš„ç‰¹å¾å›¾æ•°é‡ï¼ˆå³å·ç§¯æ ¸çš„æ•°é‡ï¼‰ã€‚</li><li><strong>æ¯ä¸ªè¾“å‡ºé€šé“</strong>ç”±<strong>ä¸€ä¸ªç‹¬ç«‹çš„å·ç§¯æ ¸</strong>ç”Ÿæˆï¼Œè¯¥å·ç§¯æ ¸ä¼šæ‰«ææ‰€æœ‰è¾“å…¥é€šé“å¹¶åŠ æƒæ±‚å’Œã€‚</li></ul><h3 id="è¾“å…¥è¾“å‡ºé€šé“çš„è®¾è®¡é€»è¾‘"><a href="#è¾“å…¥è¾“å‡ºé€šé“çš„è®¾è®¡é€»è¾‘" class="headerlink" title="è¾“å…¥è¾“å‡ºé€šé“çš„è®¾è®¡é€»è¾‘"></a>è¾“å…¥è¾“å‡ºé€šé“çš„è®¾è®¡é€»è¾‘</h3><h4 id="1-é€šé“æ•°çš„å˜åŒ–è§„å¾‹"><a href="#1-é€šé“æ•°çš„å˜åŒ–è§„å¾‹" class="headerlink" title="(1) é€šé“æ•°çš„å˜åŒ–è§„å¾‹"></a>(1) é€šé“æ•°çš„å˜åŒ–è§„å¾‹</h4><ul><li><strong>ç»å…¸CNNæ¨¡å¼</strong>ï¼š<ul><li>éšç€ç½‘ç»œåŠ æ·±ï¼Œç©ºé—´å°ºå¯¸ï¼ˆ<code>H, W</code>ï¼‰é€æ¸å‡å°ï¼ˆé€šè¿‡æ± åŒ–æˆ–å¤§æ­¥é•¿å·ç§¯ï¼‰ã€‚</li><li>é€šé“æ•°é€æ¸å¢åŠ ï¼ˆå¦‚Â <code>3 â†’ 64 â†’ 128 â†’ 256</code>ï¼‰ï¼Œä»¥ä¿ç•™æ›´å¤šé«˜é˜¶ç‰¹å¾ä¿¡æ¯ã€‚</li><li><strong>åŸå› </strong>ï¼šç©ºé—´ä¿¡æ¯å‹ç¼©åï¼Œéœ€å¢åŠ é€šé“ç»´åº¦æ¥ç»´æŒä¿¡æ¯å®¹é‡ã€‚</li></ul></li></ul><h4 id="2-ä¸ºä»€ä¹ˆéœ€è¦å¤šè¾“å‡ºé€šé“ï¼Ÿ"><a href="#2-ä¸ºä»€ä¹ˆéœ€è¦å¤šè¾“å‡ºé€šé“ï¼Ÿ" class="headerlink" title="(2) ä¸ºä»€ä¹ˆéœ€è¦å¤šè¾“å‡ºé€šé“ï¼Ÿ"></a>(2) ä¸ºä»€ä¹ˆéœ€è¦å¤šè¾“å‡ºé€šé“ï¼Ÿ</h4><ul><li><strong>å¤šæ ·æ€§ç‰¹å¾æå–</strong>ï¼š<strong>ä¸åŒå·ç§¯æ ¸æ£€æµ‹ä¸åŒæ¨¡å¼ï¼ˆå¦‚è¾¹ç¼˜ã€é¢œè‰²ã€çº¹ç†</strong>ï¼‰ã€‚<ul><li>ç¤ºä¾‹ï¼šç¬¬ä¸€å±‚çš„è¾“å‡ºé€šé“å¯èƒ½åˆ†åˆ«å¯¹åº”â€œæ°´å¹³è¾¹ç¼˜â€ã€â€œå‚ç›´è¾¹ç¼˜â€ã€â€œçº¢è‰²åŒºåŸŸâ€ç­‰ç‰¹å¾ã€‚</li></ul></li><li><strong>ç‰¹å¾ç»„åˆ</strong>ï¼šæ·±å±‚å·ç§¯é€šè¿‡æ··åˆå¤šé€šé“è¾“å…¥ï¼Œç”Ÿæˆæ›´å¤æ‚çš„ç‰¹å¾ï¼ˆå¦‚â€œçœ¼ç›+é¼»å­â€ç»„åˆä¸ºäººè„¸ï¼‰ã€‚</li></ul><h4 id="3-è¾“å…¥è¾“å‡ºé€šé“çš„çº¦æŸ"><a href="#3-è¾“å…¥è¾“å‡ºé€šé“çš„çº¦æŸ" class="headerlink" title="(3) è¾“å…¥è¾“å‡ºé€šé“çš„çº¦æŸ"></a>(3) è¾“å…¥è¾“å‡ºé€šé“çš„çº¦æŸ</h4><ul><li><strong>è¾“å…¥é€šé“å¿…é¡»åŒ¹é…</strong>ï¼š<ul><li>å‰ä¸€å±‚çš„Â <code>out_channels</code>Â å¿…é¡»ç­‰äºåä¸€å±‚çš„Â <code>in_channels</code>ã€‚</li><li>ä¾‹å¦‚ï¼š<code>Conv2d(64, 128)</code>Â çš„ä¸‹ä¸€å±‚å¿…é¡»æ˜¯Â <code>Conv2d(128, ...)</code>ã€‚</li></ul></li><li><strong>è¾“å‡ºé€šé“è‡ªç”±é€‰æ‹©</strong>ï¼š<ul><li>é€šå¸¸å–2çš„å¹‚æ¬¡ï¼ˆå¦‚64ã€128ã€256ï¼‰ï¼Œæ–¹ä¾¿GPUå†…å­˜å¯¹é½ä¼˜åŒ–ã€‚</li></ul></li></ul><h3 id="å·ç§¯è¿‡ç¨‹"><a href="#å·ç§¯è¿‡ç¨‹" class="headerlink" title="å·ç§¯è¿‡ç¨‹"></a>å·ç§¯è¿‡ç¨‹</h3><p>å¯è§†åŒ–å›¾ï¼š<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250823164942361.gif"></p><h1 id="åŠç›‘ç£å­¦ä¹ "><a href="#åŠç›‘ç£å­¦ä¹ " class="headerlink" title="åŠç›‘ç£å­¦ä¹ "></a>åŠç›‘ç£å­¦ä¹ </h1><ul><li>åŸå§‹æ•°æ®é›†ä¸­æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯æ²¡æœ‰<code>label</code>çš„ï¼Œå¦‚æœæƒ³è¦æé«˜æ¨¡å‹å‡†ç¡®æ€§ä¸æ³›åŒ–èƒ½åŠ›ï¼Œå¿…é¡»åˆ©ç”¨å¥½è¿™éƒ¨åˆ†æ•°æ®ï¼Œè¿™å°±æ¶‰åŠåˆ°åŠç›‘ç£å­¦ä¹  <code>semi-supervised learning</code></li><li>å…·ä½“å°±æ˜¯å…ˆç”¨å·²æœ‰æ¨¡å‹å»é¢„æµ‹æ•°æ®ï¼Œç½®ä¿¡åº¦å¤§äº<code>threshold</code>å°±è®¤ä¸ºè¿™ä¸ª<code>label</code>æ˜¯æ­£ç¡®çš„ï¼Œå°†å…¶åŠ å…¥è®­ç»ƒé›†ï¼Œè¿›å…¥ä¸‹ä¸€è½®è®­ç»ƒ</li><li>å…·ä½“éœ€è¦æˆ‘ä»¬åšçš„å°±æ˜¯<code>filter</code>ä¸€ä¸‹å³å¯</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_pseudo_labels</span>(<span class="hljs-params">dataset, model, threshold=<span class="hljs-number">0.7</span></span>):<br>    <span class="hljs-comment"># This functions generates pseudo-labels of a dataset using given model.</span><br>    <span class="hljs-comment"># It returns an instance of DatasetFolder containing images whose prediction confidences exceed a given threshold.</span><br>    <span class="hljs-comment"># You are NOT allowed to use any models trained on external data for pseudo-labeling.</span><br>    device = <span class="hljs-string">&quot;cuda&quot;</span> <span class="hljs-keyword">if</span> torch.cuda.is_available() <span class="hljs-keyword">else</span> <span class="hljs-string">&quot;cpu&quot;</span><br><br>    <span class="hljs-comment"># Construct a data loader.</span><br>    data_loader = DataLoader(dataset, batch_size=batch_size, shuffle=<span class="hljs-literal">False</span>)<br><br>    <span class="hljs-comment"># Make sure the model is in eval mode.</span><br>    model.<span class="hljs-built_in">eval</span>()<br>    <span class="hljs-comment"># Define softmax function.</span><br>    softmax = nn.Softmax(dim=-<span class="hljs-number">1</span>)<br>    new_dataset = []<br><br>    <span class="hljs-comment"># Iterate over the dataset by batches.</span><br>    <span class="hljs-keyword">for</span> batch <span class="hljs-keyword">in</span> tqdm(data_loader):<br>        img, _ = batch<br><br>        <span class="hljs-comment"># Forward the data</span><br>        <span class="hljs-comment"># Using torch.no_grad() accelerates the forward process.</span><br>        <span class="hljs-keyword">with</span> torch.no_grad():<br>            logits = model(img.to(device))<br><br>        <span class="hljs-comment"># Obtain the probability distributions by applying softmax on logits.</span><br>        probs = softmax(logits)<br><br>        <span class="hljs-comment"># ---------- TODO ----------</span><br>        <span class="hljs-comment"># Filter the data and construct a new dataset.</span><br>        max_probs, preds = torch.<span class="hljs-built_in">max</span>(probs, dim=-<span class="hljs-number">1</span>)<br>        mask = max_probs &gt;= threshold<br>        selected_imgs = img[mask]<br>        selected_labels = preds[mask]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(selected_imgs.size(<span class="hljs-number">0</span>)):<br>            new_dataset.append((selected_imgs[i], selected_labels[i].item()))<br>            <br>        dataset = torch.utils.data.DatasetFolder(new_dataset, loader=image_loader, extensions=<span class="hljs-string">&quot;jpg&quot;</span>, transform = train_tfm)  <span class="hljs-comment"># Dummy loader and extensions</span><br>    <span class="hljs-comment"># -------------------------- </span><br><br>    <span class="hljs-comment"># # Turn off the eval mode.</span><br>    model.train()<br>    <span class="hljs-keyword">return</span> dataset<br></code></pre></td></tr></table></figure><h2 id="mask"><a href="#mask" class="headerlink" title="mask"></a>mask</h2><ul><li>è¿™é‡Œæ¯”è¾ƒæœ‰è¶£çš„æ˜¯<code>mask</code>ï¼Œä¸ºä»€ä¹ˆèƒ½ç›´æ¥ç´¢å¼•æ•°æ®äº†ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ä¹ˆï¼Ÿå…¶å®è¿™æ˜¯ä¸€ç§<strong>é«˜æ•ˆå¼ é‡æ“ä½œæ–¹å¼</strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python">mask = max_probs &gt;= threshold<br>      selected_imgs = img[mask]<br>      selected_labels = preds[mask]<br></code></pre></td></tr></table></figure></li></ul><h3 id="æœ¬è´¨ï¼šå¸ƒå°”æ©ç ç´¢å¼•ï¼ˆBoolean-Maskingï¼‰"><a href="#æœ¬è´¨ï¼šå¸ƒå°”æ©ç ç´¢å¼•ï¼ˆBoolean-Maskingï¼‰" class="headerlink" title="æœ¬è´¨ï¼šå¸ƒå°”æ©ç ç´¢å¼•ï¼ˆBoolean Maskingï¼‰"></a>æœ¬è´¨ï¼šå¸ƒå°”æ©ç ç´¢å¼•ï¼ˆBoolean Maskingï¼‰</h3><p>PyTorch çš„å¼ é‡ï¼ˆ<code>Tensor</code>ï¼‰æ”¯æŒç±»ä¼¼ NumPy çš„ <strong>é«˜çº§ç´¢å¼•ï¼ˆAdvanced Indexingï¼‰</strong>ï¼Œå…¶ä¸­å¸ƒå°”æ©ç ç´¢å¼•æ˜¯æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼š<br> <strong>å…³é”®ç‚¹</strong></p><ul><li><code>max_probs &gt;= threshold</code>Â ä¼šç”Ÿæˆä¸€ä¸ªä¸åŸå¼ é‡å½¢çŠ¶ç›¸åŒçš„å¸ƒå°”å¼ é‡ï¼ˆ<code>Tensor</code>Â ofÂ <code>bool</code>ï¼‰</li><li><code>img[mask]</code>Â ä¼šè¿”å›æ‰€æœ‰Â <code>mask</code>Â ä¸ºÂ <code>True</code>Â ä½ç½®å¯¹åº”çš„æ•°æ®å­é›†<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">mask = max_probs &gt;= threshold  <span class="hljs-comment"># ç”Ÿæˆå¸ƒå°”å¼ é‡ï¼ˆTrue/Falseï¼‰</span><br>selected_imgs = img[mask]      <span class="hljs-comment"># ç”¨å¸ƒå°”å¼ é‡ç­›é€‰æ•°æ®</span><br><br>max_probs = tensor([<span class="hljs-number">0.9</span>, <span class="hljs-number">0.6</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">0.3</span>])<br>mask = max_probs &gt;= <span class="hljs-number">0.7</span>  <span class="hljs-comment"># tensor([ True, False,  True, False])</span><br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CNN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -Self-Attention</title>
    <link href="/2025/08/21/Self-Attention/"/>
    <url>/2025/08/21/Self-Attention/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ æå®æ¯…æœºå™¨å­¦ä¹ æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="1-å¼•è¨€ï¼šå¤„ç†å‘é‡é›†åˆçš„æŒ‘æˆ˜"><a href="#1-å¼•è¨€ï¼šå¤„ç†å‘é‡é›†åˆçš„æŒ‘æˆ˜" class="headerlink" title="1. å¼•è¨€ï¼šå¤„ç†å‘é‡é›†åˆçš„æŒ‘æˆ˜"></a>1. å¼•è¨€ï¼šå¤„ç†å‘é‡é›†åˆçš„æŒ‘æˆ˜</h1><p>ä¼ ç»Ÿç¥ç»ç½‘ç»œé€šå¸¸å¤„ç†å›ºå®šå¤§å°çš„å‘é‡è¾“å…¥ï¼Œä½†ç°å®åº”ç”¨ä¸­è¾“å…¥å¸¸ä¸º<strong>é•¿åº¦å¯å˜çš„å‘é‡é›†åˆ</strong>ï¼Œä¾‹å¦‚ï¼š</p><ul><li><strong>æ–‡æœ¬</strong>ï¼šå¥å­å¯è§†ä¸ºè¯å‘é‡ç»„æˆçš„é›†åˆ</li><li><strong>è¯­éŸ³</strong>ï¼šéŸ³é¢‘å¯è½¬æ¢ä¸ºå¸§å‘é‡åºåˆ—</li><li><strong>å›¾ç»“æ„</strong>ï¼šç¤¾äº¤ç½‘ç»œæˆ–åˆ†å­å¯è§†ä¸ºèŠ‚ç‚¹å‘é‡é›†åˆ</li></ul><p><code>Self-attention</code> èƒ½æœ‰æ•ˆå¤„ç†æ­¤ç±»è¾“å…¥ï¼Œè®©æ¨¡å‹åœ¨å¤„ç†æ¯ä¸ªå‘é‡æ—¶<strong>åŠ¨æ€è€ƒè™‘é›†åˆä¸­å…¶ä»–å‘é‡çš„ä¿¡æ¯</strong></p><hr><h1 id="2-Self-Attention-æ ¸å¿ƒæ€æƒ³"><a href="#2-Self-Attention-æ ¸å¿ƒæ€æƒ³" class="headerlink" title="2. Self-Attention æ ¸å¿ƒæ€æƒ³"></a>2. Self-Attention æ ¸å¿ƒæ€æƒ³</h1><p>å¤„ç†åºåˆ—ä¸­çš„å‘é‡æ—¶ï¼Œéœ€ç»“åˆä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚ä¾‹å¦‚åˆ¤æ–­å¥å­ <em>â€œI saw a sawâ€</em> ä¸­ç¬¬äºŒä¸ª <em>â€œsawâ€</em> çš„è¯æ€§æ—¶ï¼Œå¿…é¡»è€ƒè™‘å…¶ä¸Šä¸‹æ–‡ã€‚</p><p>Self-attention çš„æ ¸å¿ƒï¼š</p><ul><li>ä¸ºåºåˆ—ä¸­æ¯ä¸ªå‘é‡ç”Ÿæˆè¾“å‡º</li><li>è¾“å‡ºå€¼ &#x3D; è‡ªèº«ä¿¡æ¯ + ä¸å…¶ä»–å‘é‡çš„å…³è”ç¨‹åº¦</li><li>é€šè¿‡<strong>æ³¨æ„åŠ›åˆ†æ•°</strong>é‡åŒ–å…³è”æ€§ï¼ŒåŠ æƒæ±‡æ€»ä¿¡æ¯</li></ul><hr><h1 id="3-Self-Attention-è®¡ç®—æ­¥éª¤"><a href="#3-Self-Attention-è®¡ç®—æ­¥éª¤" class="headerlink" title="3. Self-Attention è®¡ç®—æ­¥éª¤"></a>3. Self-Attention è®¡ç®—æ­¥éª¤</h1><p>ä»¥è¾“å…¥å‘é‡åºåˆ— $a^1, a^2, a^3, a^4$ ä¸ºä¾‹ï¼š</p><h2 id="3-1-ç”Ÿæˆ-Query-Key-Value-å‘é‡"><a href="#3-1-ç”Ÿæˆ-Query-Key-Value-å‘é‡" class="headerlink" title="3.1 ç”Ÿæˆ Query, Key, Value å‘é‡"></a>3.1 ç”Ÿæˆ Query, Key, Value å‘é‡</h2><p>å¯¹æ¯ä¸ªè¾“å…¥å‘é‡ $a^i$ï¼š</p><ol><li><strong>Queryï¼ˆ$q^i$ï¼‰</strong>ï¼šå½“å‰å‘é‡ï¼Œä¸»åŠ¨â€æŸ¥è¯¢â€ä¸å…¶ä»–å‘é‡çš„å…³è”æ€§</li><li><strong>Keyï¼ˆ$k^i$ï¼‰</strong>ï¼šå…¶ä»–å‘é‡ï¼Œè¢« Query â€œæŸ¥è¯¢â€çš„ç›®æ ‡</li><li>**Valueï¼ˆ$v^i$**ï¼‰ï¼šå‘é‡æœ¬èº«çš„ä¿¡æ¯è½½ä½“</li></ol><p>$$\begin{aligned}<br>q^i &amp;&#x3D; W^q a^i \<br>k^i &amp;&#x3D; W^k a^i \<br>v^i &amp;&#x3D; W^v a^i<br>\end{aligned}$$<br>ï¼ˆ$W^q, W^k, W^v$ ä¸º<strong>å¯å­¦ä¹ çš„æƒé‡çŸ©é˜µ</strong>ï¼‰</p><hr><h2 id="3-2-è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°"><a href="#3-2-è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°" class="headerlink" title="3.2 è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°"></a>3.2 è®¡ç®—æ³¨æ„åŠ›åˆ†æ•°</h2><p>è®¡ç®—å‘é‡ $a^1$ å¯¹ $a^i$ çš„æ³¨æ„åŠ›åˆ†æ•°ï¼š<br>$$\alpha_{1,i} &#x3D; q^1 \cdot k^i$$<br>ï¼ˆç‚¹ç§¯è¿ç®—è¡¡é‡å‘é‡é—´çš„ç›¸å…³æ€§ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250821235623677.png"></p><hr><h2 id="3-3-åˆ†æ•°å½’ä¸€åŒ–-Softmax"><a href="#3-3-åˆ†æ•°å½’ä¸€åŒ–-Softmax" class="headerlink" title="3.3 åˆ†æ•°å½’ä¸€åŒ– (Softmax)"></a>3.3 åˆ†æ•°å½’ä¸€åŒ– (Softmax)</h2><p>ä½¿ç”¨ Softmax å°†åˆ†æ•°è½¬åŒ–ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼š<br>$$\alphaâ€™<em>{1,i} &#x3D; \frac{\exp(\alpha</em>{1,i})}{\sum_j \exp(\alpha_{1,j})}$$<br>ï¼ˆä¿è¯ $\sum_i \alphaâ€™_{1,i} &#x3D; 1$ï¼‰</p><hr><h2 id="3-4-åŠ æƒæ±‚å’Œè¾“å‡º"><a href="#3-4-åŠ æƒæ±‚å’Œè¾“å‡º" class="headerlink" title="3.4 åŠ æƒæ±‚å’Œè¾“å‡º"></a>3.4 åŠ æƒæ±‚å’Œè¾“å‡º</h2><p>ä»¥å½’ä¸€åŒ–åˆ†æ•°ä¸ºæƒé‡ï¼Œå¯¹æ‰€æœ‰ Value åŠ æƒæ±‚å’Œï¼š<br>$$b^1 &#x3D; \sum_i \alphaâ€™_{1,i} v^i$$<br>ï¼ˆæœ€ç»ˆè¾“å‡º $b^1$ èåˆäº†å…¨å±€ç›¸å…³ä¿¡æ¯ï¼‰<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250821235720579.png"></p><blockquote><p>âš¡ ä¼˜åŠ¿ï¼šå¯¹åºåˆ—ä¸­æ‰€æœ‰å‘é‡çš„è®¡ç®—å¯<strong>å¹¶è¡Œæ‰§è¡Œ</strong>ï¼Œparallel</p></blockquote><hr><h1 id="4-çŸ©é˜µè¿ç®—å®ç°"><a href="#4-çŸ©é˜µè¿ç®—å®ç°" class="headerlink" title="4. çŸ©é˜µè¿ç®—å®ç°"></a>4. çŸ©é˜µè¿ç®—å®ç°</h1><p>é€šè¿‡çŸ©é˜µè¿ç®—é«˜æ•ˆå®ç°ä¸Šè¿°è¿‡ç¨‹ï¼š</p><table><thead><tr><th>æ­¥éª¤</th><th>è®¡ç®—å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>è¾“å…¥çŸ©é˜µ</td><td>$I &#x3D; [a^1;a^2;â€¦]$</td><td>å †å è¾“å…¥å‘é‡</td></tr><tr><td>Q&#x2F;K&#x2F;VçŸ©é˜µ</td><td>$\begin{aligned} Q &amp;&#x3D; I W^q \ K &amp;&#x3D; I W^k \ V &amp;&#x3D; I W^v \end{aligned}$</td><td>æ‰¹é‡ç”Ÿæˆå‘é‡</td></tr><tr><td>æ³¨æ„åŠ›çŸ©é˜µ</td><td>$A &#x3D; K^T Q$</td><td>è®¡ç®—æ‰€æœ‰æ³¨æ„åŠ›åˆ†æ•°</td></tr><tr><td>å½’ä¸€åŒ–</td><td>$Aâ€™ &#x3D; \text{softmax}(A)$</td><td>è¡Œæ–¹å‘å½’ä¸€åŒ–</td></tr><tr><td>è¾“å‡º</td><td>$O &#x3D; V Aâ€™$</td><td>åŠ æƒæ±‚å’Œç»“æœ</td></tr></tbody></table><hr><h1 id="5-è¿›é˜¶æœºåˆ¶"><a href="#5-è¿›é˜¶æœºåˆ¶" class="headerlink" title="5. è¿›é˜¶æœºåˆ¶"></a>5. è¿›é˜¶æœºåˆ¶</h1><h2 id="5-1-å¤šå¤´æ³¨æ„åŠ›ï¼ˆMulti-Headï¼‰"><a href="#5-1-å¤šå¤´æ³¨æ„åŠ›ï¼ˆMulti-Headï¼‰" class="headerlink" title="5.1 å¤šå¤´æ³¨æ„åŠ›ï¼ˆMulti-Headï¼‰"></a>5.1 å¤šå¤´æ³¨æ„åŠ›ï¼ˆMulti-Headï¼‰</h2><ul><li>ä½¿ç”¨å¤šç»„<strong>ç‹¬ç«‹çš„</strong> $(W^q, W^k, W^v)$</li><li><strong>æ¯ç»„å­¦ä¹ ä¸åŒç±»å‹çš„å…³è”ç‰¹å¾</strong></li><li>è¾“å‡ºæ‹¼æ¥åçº¿æ€§å˜æ¢ï¼š<br>$$\text{Output} &#x3D; \text{Concat}(head_1,â€¦,head_h)W^o$$</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250821235944414.png"></p><hr><h2 id="5-2-ä½ç½®ç¼–ç ï¼ˆPositional-Encodingï¼‰"><a href="#5-2-ä½ç½®ç¼–ç ï¼ˆPositional-Encodingï¼‰" class="headerlink" title="5.2 ä½ç½®ç¼–ç ï¼ˆPositional Encodingï¼‰"></a>5.2 ä½ç½®ç¼–ç ï¼ˆPositional Encodingï¼‰</h2><p>è‡ªæ³¨æ„åŠ›æœ¬èº«<strong>ä¸åŒ…å«ä½ç½®ä¿¡æ¯</strong>ï¼Œéœ€æ˜¾å¼æ·»åŠ ä½ç½®ç¼–ç  $e^i$ï¼š<br>$$\tilde{a}^i &#x3D; a^i + e^i$$<br>ç¼–ç æ–¹å¼ï¼š</p><ul><li><strong>å›ºå®šæ¨¡å¼</strong>ï¼šæ­£å¼¦&#x2F;ä½™å¼¦å‡½æ•°<br>$$e^i_t &#x3D; \begin{cases}<br>\sin(\omega_k t) &amp; i&#x3D;2k \<br>\cos(\omega_k t) &amp; i&#x3D;2k+1<br>\end{cases}$$</li><li><strong>å¯å­¦ä¹ æ¨¡å¼</strong>ï¼šéšæœºåˆå§‹åŒ–å¹¶è®­ç»ƒæ›´æ–°</li></ul><hr><h1 id="6-ä¸å…¶ä»–ç¥ç»ç½‘ç»œå¯¹æ¯”"><a href="#6-ä¸å…¶ä»–ç¥ç»ç½‘ç»œå¯¹æ¯”" class="headerlink" title="6. ä¸å…¶ä»–ç¥ç»ç½‘ç»œå¯¹æ¯”"></a>6. ä¸å…¶ä»–ç¥ç»ç½‘ç»œå¯¹æ¯”</h1><table><thead><tr><th>ç‰¹æ€§</th><th>Self-Attention</th><th>CNN</th><th>RNN</th></tr></thead><tbody><tr><td><strong>æ„Ÿå—é‡</strong></td><td>åŠ¨æ€å…¨å±€</td><td>å›ºå®šå±€éƒ¨</td><td>é¡ºåºå±€éƒ¨</td></tr><tr><td><strong>é•¿è·ç¦»ä¾èµ–</strong></td><td>å¼º</td><td>éœ€å¤šå±‚å †å </td><td>å¼±ï¼ˆæ¢¯åº¦æ¶ˆå¤±ï¼‰</td></tr><tr><td><strong>å¹¶è¡Œè®¡ç®—</strong></td><td>é«˜</td><td>é«˜</td><td>ä½</td></tr><tr><td><strong>è®¡ç®—å¤æ‚åº¦</strong></td><td>$O(n^2 d)$</td><td>$O(k n d^2)$</td><td>$O(n d^2)$</td></tr><tr><td><strong>æ•°æ®éœ€æ±‚</strong></td><td>å¤§å‹æ•°æ®é›†</td><td>ä¸­å°æ•°æ®é›†</td><td>ä¸­å°æ•°æ®é›†</td></tr></tbody></table><blockquote><ul><li><strong>ä¸CNNå…³ç³»</strong>ï¼šå¯è§†ä¸ºåŠ¨æ€æ„Ÿå—é‡çš„å¤æ‚å·ç§¯</li><li><strong>ä¸RNNå…³ç³»</strong>ï¼šè§£å†³äº†å¹¶è¡Œè®¡ç®—ä¸é•¿è·ç¦»ä¾èµ–é—®é¢˜</li></ul></blockquote><hr><h1 id="7-æ ¸å¿ƒåº”ç”¨"><a href="#7-æ ¸å¿ƒåº”ç”¨" class="headerlink" title="7. æ ¸å¿ƒåº”ç”¨"></a>7. æ ¸å¿ƒåº”ç”¨</h1><ol><li><strong>Transformer</strong>ï¼šæ„æˆæ ¸å¿ƒè¿ç®—å±‚ï¼ˆå¦‚Encoder&#x2F;Decoderï¼‰</li><li><strong>NLPé¢†åŸŸ</strong>ï¼š<ul><li>BERT&#x2F;GPTç³»åˆ—é¢„è®­ç»ƒæ¨¡å‹</li><li>æœºå™¨ç¿»è¯‘ã€æ–‡æœ¬æ‘˜è¦ã€é—®ç­”ç³»ç»Ÿ</li></ul></li><li><strong>è®¡ç®—æœºè§†è§‰</strong>ï¼š<ul><li>Vision Transformer (ViT)</li><li>ç›®æ ‡æ£€æµ‹ï¼ˆDETRï¼‰</li></ul></li><li><strong>è¯­éŸ³å¤„ç†</strong>ï¼š<ul><li>è¯­éŸ³è¯†åˆ«ï¼ˆConformerï¼‰</li><li>è¯­éŸ³åˆæˆï¼ˆTacotron 2ï¼‰</li></ul></li><li><strong>å›¾ç¥ç»ç½‘ç»œ</strong>ï¼š<ul><li>èŠ‚ç‚¹åˆ†ç±»ï¼ˆGraph Attention Networksï¼‰</li></ul></li></ol><hr><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><table><thead><tr><th>å…³é”®ç‰¹å¾</th><th>æ ¸å¿ƒä»·å€¼</th></tr></thead><tbody><tr><td><strong>åŠ¨æ€æƒé‡åˆ†é…</strong></td><td>æ ¹æ®ä¸Šä¸‹æ–‡è‡ªé€‚åº”è°ƒæ•´é‡è¦æ€§</td></tr><tr><td><strong>å…¨å±€æ„ŸçŸ¥èƒ½åŠ›</strong></td><td>å•å±‚æ•è·é•¿è·ç¦»ä¾èµ–</td></tr><tr><td><strong>é«˜åº¦å¹¶è¡ŒåŒ–</strong></td><td>åŠ é€Ÿå¤§è§„æ¨¡æ•°æ®å¤„ç†</td></tr><tr><td><strong>æ¶æ„çµæ´»æ€§</strong></td><td>é€‚ç”¨äºå¤šç§æ•°æ®ç»“æ„</td></tr><tr><td><strong>å¤šæ¨¡æ€é€‚åº”æ€§</strong></td><td>ç»Ÿä¸€å¤„ç†æ–‡æœ¬&#x2F;è¯­éŸ³&#x2F;å›¾åƒ</td></tr></tbody></table><p><code>Self-attention</code> é€šè¿‡æ¨¡æ‹Ÿäººè„‘çš„æ³¨æ„åŠ›æœºåˆ¶ï¼Œå®ç°äº†ä»<strong>å±€éƒ¨æ„ŸçŸ¥åˆ°å…¨å±€ç†è§£çš„é£è·ƒ</strong>ï¼Œæˆä¸ºç°ä»£æ·±åº¦å­¦ä¹ æ¶æ„çš„åŸºçŸ³ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Self_Attention</tag>
      
      <tag>æ³¨æ„åŠ›</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -CNN</title>
    <link href="/2025/08/19/CNN/"/>
    <url>/2025/08/19/CNN/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ æå®æ¯…æœºå™¨å­¦ä¹ æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="1-ä»€ä¹ˆæ˜¯å·ç§¯ç¥ç»ç½‘ç»œ-CNN-ï¼Ÿ"><a href="#1-ä»€ä¹ˆæ˜¯å·ç§¯ç¥ç»ç½‘ç»œ-CNN-ï¼Ÿ" class="headerlink" title="1. ä»€ä¹ˆæ˜¯å·ç§¯ç¥ç»ç½‘ç»œ (CNN)ï¼Ÿ"></a>1. ä»€ä¹ˆæ˜¯å·ç§¯ç¥ç»ç½‘ç»œ (CNN)ï¼Ÿ</h1><p>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆConvolutional Neural Network, CNNï¼‰æ˜¯ä¸€ç§ä¸“ä¸ºå¤„ç†å›¾åƒæ•°æ®è€Œè®¾è®¡çš„ç½‘ç»œæ¶æ„ å®ƒåœ¨<strong>å›¾åƒåˆ†ç±»</strong>ç­‰é¢†åŸŸè¡¨ç°å‡ºè‰²ï¼Œèƒ½å¤Ÿå°†è¾“å…¥çš„å›¾åƒè¯†åˆ«ä¸ºä¸åŒçš„ç±»åˆ«ï¼ˆä¾‹å¦‚ï¼ŒçŒ«ã€ç‹—ã€æ ‘ç­‰ï¼‰ </p><p>å…¶åŸºæœ¬å·¥ä½œæµç¨‹æ˜¯å°†ä¸€å¼ å›¾åƒä½œä¸ºè¾“å…¥ï¼Œé€šè¿‡æ¨¡å‹å¤„ç†åï¼Œè¾“å‡ºä¸€ä¸ª<strong>æ¦‚ç‡åˆ†å¸ƒå‘é‡</strong>ï¼Œè¡¨ç¤ºè¯¥å›¾åƒå±äºå„ä¸ªç±»åˆ«çš„å¯èƒ½æ€§ ã€‚æ¨¡å‹é€šè¿‡æ¯”è¾ƒé¢„æµ‹è¾“å‡ºä¸çœŸå®æ ‡ç­¾çš„å·®å¼‚ï¼ˆä¾‹å¦‚ä½¿ç”¨<code>cross-entropy</code>äº¤å‰ç†µæŸå¤±å‡½æ•°ï¼‰æ¥è¿›è¡Œå­¦ä¹ å’Œä¼˜åŒ– ã€‚</p><h1 id="2-CNNçš„æ ¸å¿ƒæ€æƒ³"><a href="#2-CNNçš„æ ¸å¿ƒæ€æƒ³" class="headerlink" title="2. CNNçš„æ ¸å¿ƒæ€æƒ³"></a>2. CNNçš„æ ¸å¿ƒæ€æƒ³</h1><p><strong>ä¼ ç»Ÿçš„å…¨è¿æ¥ç¥ç»ç½‘ç»œç›´æ¥å¤„ç†å›¾åƒæ—¶ï¼Œä¼šäº§ç”Ÿå·¨å¤§çš„å‚æ•°é‡ï¼Œå¯¼è‡´è®¡ç®—æ•ˆç‡ä½ä¸‹ä¸”éš¾ä»¥è®­ç»ƒ</strong> ã€‚CNNé€šè¿‡ä¸‰ä¸ªå…³é”®è§‚å¯Ÿç®€åŒ–äº†æ¨¡å‹ï¼Œä½¿å…¶æ›´é€‚ç”¨äºå›¾åƒå¤„ç†ï¼š</p><ul><li><p><strong>è§‚å¯Ÿ1ï¼šå±€éƒ¨æ¨¡å¼çš„é‡è¦æ€§</strong></p><ul><li>å›¾åƒä¸­çš„å…³é”®ç‰¹å¾ï¼ˆå¦‚é¸Ÿçš„çœ¼ç›æˆ–å–™ï¼‰é€šå¸¸æ¯”æ•´ä¸ªå›¾åƒå°å¾—å¤šã€‚å› æ­¤ï¼Œç¥ç»å…ƒæ— éœ€è§‚å¯Ÿæ•´ä¸ªå›¾åƒï¼Œ<strong>åªéœ€å…³æ³¨ä¸€ä¸ªå°çš„å±€éƒ¨åŒºåŸŸ</strong>ï¼Œè¿™ä¸ªåŒºåŸŸè¢«ç§°ä¸ºâ€œæ„Ÿå—é‡â€ï¼ˆ<code>Receptive Field</code>)ã€‚è¿™å¤§å¤§å‡å°‘äº†ç¥ç»å…ƒä¹‹é—´çš„è¿æ¥æ•°é‡ã€‚</li></ul></li><li><p><strong>è§‚å¯Ÿ2ï¼šæ¨¡å¼çš„é‡å¤å‡ºç°</strong></p><ul><li>åŒä¸€ä¸ªç‰¹å¾ï¼ˆå¦‚é¸Ÿå–™ï¼‰å¯èƒ½å‡ºç°åœ¨å›¾åƒçš„ä¸åŒä½ç½® ã€‚CNNåˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œè®©ä¸åŒçš„ç¥ç»å…ƒ<strong>å…±äº«åŒä¸€ç»„æƒé‡å‚æ•°</strong>æ¥æ£€æµ‹ç›¸åŒçš„æ¨¡å¼ï¼Œè¿™ä¸€æœºåˆ¶ç§°ä¸ºâ€œå‚æ•°å…±äº«â€ï¼ˆ<code>Parameter Sharing</code>ï¼‰ã€‚</li></ul></li><li><p><strong>è§‚å¯Ÿ3ï¼šä¸‹é‡‡æ ·çš„ä¸å˜æ€§</strong></p><ul><li>å¯¹å›¾åƒè¿›è¡Œ<strong>ä¸‹é‡‡æ ·</strong>ï¼ˆå³é™ä½åˆ†è¾¨ç‡ï¼‰é€šå¸¸ä¸ä¼šæ”¹å˜å›¾åƒä¸­çš„ç‰©ä½“ç±»åˆ«ã€‚</li></ul></li></ul><h1 id="3-CNNçš„å…³é”®ç»„æˆéƒ¨åˆ†"><a href="#3-CNNçš„å…³é”®ç»„æˆéƒ¨åˆ†" class="headerlink" title="3. CNNçš„å…³é”®ç»„æˆéƒ¨åˆ†"></a>3. CNNçš„å…³é”®ç»„æˆéƒ¨åˆ†</h1><p>ä¸€ä¸ªå…¸å‹çš„CNNæ¨¡å‹ç”±ä»¥ä¸‹å‡ ä¸ªä¸»è¦éƒ¨åˆ†ç»„æˆï¼š</p><h2 id="è¾“å…¥å±‚-Input-Layer"><a href="#è¾“å…¥å±‚-Input-Layer" class="headerlink" title="è¾“å…¥å±‚ (Input Layer)"></a>è¾“å…¥å±‚ (Input Layer)</h2><ul><li>è¾“å…¥çš„å›¾åƒè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªä¸‰ç»´å¼ é‡ï¼ˆtensorï¼‰ï¼Œå…¶ç»´åº¦ä¸º<br>  <code>é«˜åº¦ x å®½åº¦ x é€šé“æ•°</code>ã€‚</li><li>å¯¹äºå½©è‰²å›¾åƒï¼Œé€šå¸¸æœ‰3ä¸ªé€šé“ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰ã€‚å¯¹äºé»‘ç™½å›¾åƒï¼Œåˆ™åªæœ‰1ä¸ªé€šé“ã€‚</li><li>æ‰€æœ‰ç”¨äºåˆ†ç±»çš„è¾“å…¥å›¾åƒå°ºå¯¸å¿…é¡»ç›¸åŒã€‚</li></ul><h2 id="å·ç§¯å±‚-Convolutional-Layer"><a href="#å·ç§¯å±‚-Convolutional-Layer" class="headerlink" title="å·ç§¯å±‚ (Convolutional Layer)"></a>å·ç§¯å±‚ (Convolutional Layer)</h2><p>å·ç§¯å±‚æ˜¯CNNçš„æ ¸å¿ƒï¼Œå®ƒåŸºäºâ€œæ„Ÿå—é‡â€å’Œâ€œå‚æ•°å…±äº«â€çš„æ€æƒ³æ„å»ºã€‚å…¶å·¥ä½œæ–¹å¼æœ‰ä¸¤ç§ç­‰æ•ˆçš„ç†è§£ï¼š</p><ol><li><p><strong>ç¥ç»å…ƒè§†è§’</strong>ï¼š</p><ul><li>æ¯ä¸ªç¥ç»å…ƒåªè¿æ¥åˆ°è¾“å…¥å›¾åƒçš„ä¸€ä¸ªå±€éƒ¨åŒºåŸŸï¼ˆ<code>Receptive Field</code>ï¼‰ã€‚</li><li>ä½äºä¸åŒ<code>Receptive Field</code>ä½†ç”¨äºæ£€æµ‹ç›¸åŒç‰¹å¾çš„ç¥ç»å…ƒå…±äº«åŒä¸€å¥—æƒé‡å’Œåç½®ï¼ˆbiasï¼‰å‚æ•°ã€‚</li></ul></li><li><p>**æ»¤æ³¢å™¨è§†è§’ (Filter Version)**ï¼š</p><ul><li>å·ç§¯å±‚åŒ…å«ä¸€ç»„<strong>æ»¤æ³¢å™¨</strong>ï¼ˆä¹Ÿç§°ä½œâ€œæ ¸â€ï¼Œkernelï¼‰ï¼Œæ¯ä¸ªæ»¤æ³¢å™¨è´Ÿè´£æ£€æµ‹<strong>ä¸€ç§ç‰¹å®šçš„å±€éƒ¨æ¨¡å¼</strong>ï¼ˆå¦‚è¾¹ç¼˜ã€çº¹ç†ç­‰ï¼‰ã€‚</li><li>æ¯ä¸ªæ»¤æ³¢å™¨åœ¨æ•´ä¸ªè¾“å…¥å›¾åƒä¸Šæ»‘åŠ¨ï¼ˆå·ç§¯ï¼‰ï¼Œè®¡ç®—æ¯ä¸ªä½ç½®çš„å±€éƒ¨ç‰¹å¾ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„<br>  <strong>ç‰¹å¾å›¾</strong>ï¼ˆFeature Mapï¼‰ã€‚</li><li>å·ç§¯å±‚é€šå¸¸åŒ…å«å¤šä¸ªæ»¤æ³¢å™¨ï¼ˆä¾‹å¦‚64ä¸ªï¼‰ï¼Œä»è€Œç”Ÿæˆä¸€ä¸ªåŒ…å«å¤šä¸ªé€šé“ï¼ˆæ¯ä¸ªé€šé“å¯¹åº”ä¸€ä¸ªç‰¹å¾å›¾ï¼‰çš„æ–°â€œå›¾åƒâ€ ã€‚</li></ul></li></ol><ul><li><strong>å…³é”®å‚æ•°</strong>ï¼š<ul><li><strong>æ ¸å°ºå¯¸ (Kernel Size)</strong>: æ»¤æ³¢å™¨çš„å¤§å°ï¼Œä¾‹å¦‚ 3x3ã€‚</li><li><strong>æ­¥å¹… (Stride)</strong>: æ»¤æ³¢å™¨æ¯æ¬¡æ»‘åŠ¨çš„è·ç¦»ï¼Œä¾‹å¦‚æ­¥å¹…ä¸º2æ„å‘³ç€æ¯æ¬¡ç§»åŠ¨2ä¸ªåƒç´ ã€‚</li><li><strong>å¡«å…… (Padding)</strong>: åœ¨å›¾åƒè¾¹ç•Œæ·»åŠ é¢å¤–çš„åƒç´ ï¼Œä»¥ä¿æŒè¾“å‡ºå°ºå¯¸æˆ–å¤„ç†è¾¹ç•Œä¿¡æ¯ã€‚</li></ul></li></ul><h2 id="æ± åŒ–å±‚-Pooling-Layer"><a href="#æ± åŒ–å±‚-Pooling-Layer" class="headerlink" title="æ± åŒ–å±‚ (Pooling Layer)"></a>æ± åŒ–å±‚ (Pooling Layer)</h2><ul><li><p>æ± åŒ–å±‚åŸºäºâ€œä¸‹é‡‡æ ·â€çš„æ€æƒ³ï¼Œç”¨äºå‡å°ç‰¹å¾å›¾çš„å°ºå¯¸ã€‚</p></li><li><p><strong>æœ€å¤§æ± åŒ– (Max Pooling)</strong> æ˜¯æœ€å¸¸ç”¨çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒå°†ç‰¹å¾å›¾çš„ä¸€ä¸ªåŒºåŸŸï¼ˆä¾‹å¦‚2x2ï¼‰å‹ç¼©æˆä¸€ä¸ªå•ä¸€åƒç´ ï¼Œè¯¥åƒç´ çš„å€¼ä¸ºè¯¥åŒºåŸŸå†…çš„æœ€å¤§å€¼ã€‚</p></li><li><p><strong>ä½œç”¨</strong>ï¼š</p><ul><li>å‡å°‘è®¡ç®—é‡å’Œå‚æ•°æ•°é‡ã€‚</li><li>å¢å¼ºæ¨¡å‹çš„å¹³ç§»ä¸å˜æ€§ï¼Œå³ç‰©ä½“åœ¨å›¾åƒä¸­çš„å°å¹…ç§»åŠ¨ä¸å½±å“æœ€ç»ˆç»“æœ</li><li>å¦‚æœç®—åŠ›å……è¶³ï¼Œä¹Ÿä¸éœ€è¦æ± åŒ–</li></ul></li></ul><h2 id="æ‰å¹³åŒ–ä¸å…¨è¿æ¥å±‚-Flatten-Fully-Connected-Layers"><a href="#æ‰å¹³åŒ–ä¸å…¨è¿æ¥å±‚-Flatten-Fully-Connected-Layers" class="headerlink" title="æ‰å¹³åŒ–ä¸å…¨è¿æ¥å±‚ (Flatten &amp; Fully Connected Layers)"></a>æ‰å¹³åŒ–ä¸å…¨è¿æ¥å±‚ (Flatten &amp; Fully Connected Layers)</h2><ul><li><p>åœ¨ç»è¿‡ä¸€ç³»åˆ—å·ç§¯å’Œæ± åŒ–å±‚å¤„ç†åï¼Œå¾—åˆ°æœ€ç»ˆçš„<code>feature map</code>ç‰¹å¾å›¾ ã€‚</p></li><li><p>**æ‰å¹³åŒ– (Flatten)**ï¼šå°†å¤šç»´çš„ç‰¹å¾å›¾è½¬æ¢æˆä¸€ä¸ªä¸€ç»´å‘é‡ã€‚</p></li><li><p>**å…¨è¿æ¥å±‚ (Fully Connected Layers)**ï¼šå°†æ‰å¹³åŒ–åçš„å‘é‡é€å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡å‡†çš„å…¨è¿æ¥ç¥ç»ç½‘ç»œå±‚ã€‚</p></li><li><p><strong>è¾“å‡ºå±‚</strong>ï¼šæœ€åé€šè¿‡ä¸€ä¸ªè¾“å‡ºå±‚ï¼ˆé€šå¸¸ä½¿ç”¨<code>Softmax</code>æ¿€æ´»å‡½æ•°ï¼‰å¾—åˆ°æœ€ç»ˆçš„åˆ†ç±»æ¦‚ç‡ã€‚</p></li></ul><h1 id="4-CNNçš„å…¸å‹æ¶æ„"><a href="#4-CNNçš„å…¸å‹æ¶æ„" class="headerlink" title="4. CNNçš„å…¸å‹æ¶æ„"></a>4. CNNçš„å…¸å‹æ¶æ„</h1><p>ä¸€ä¸ªå®Œæ•´çš„CNNé€šå¸¸ç”±ä»¥ä¸‹éƒ¨åˆ†ä¸²è”è€Œæˆï¼š</p><p><strong>è¾“å…¥å›¾åƒ â†’ [å·ç§¯å±‚ â†’ æ± åŒ–å±‚] (é‡å¤å¤šæ¬¡) â†’ æ‰å¹³åŒ– â†’ å…¨è¿æ¥å±‚ â†’ è¾“å‡º (åˆ†ç±»ç»“æœ)</strong> </p><h1 id="5-CNNçš„åº”ç”¨"><a href="#5-CNNçš„åº”ç”¨" class="headerlink" title="5. CNNçš„åº”ç”¨"></a>5. CNNçš„åº”ç”¨</h1><p>CNNä¸ä»…é™äºå›¾åƒè¯†åˆ«ï¼Œå…¶æ ¸å¿ƒæ€æƒ³è¿˜å¯åº”ç”¨äºå…¶ä»–é¢†åŸŸï¼š</p><ul><li><p><strong>å›´æ£‹ (Go)</strong>: æ£‹ç›˜å¯ä»¥è¢«çœ‹ä½œä¸€ä¸ª19x19çš„å›¾åƒï¼ŒCNNèƒ½å¤Ÿè¯†åˆ«æ£‹ç›˜ä¸Šçš„å±€éƒ¨æ¨¡å¼æ¥å†³ç­–ä¸‹ä¸€æ­¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒAlphaGoå¹¶æœªä½¿ç”¨æ± åŒ–å±‚ã€‚</p></li><li><p><strong>è¯­éŸ³è¯†åˆ« (Speech)</strong>: è¯­éŸ³çš„é¢‘è°±å›¾å¯ä»¥ä½œä¸ºå›¾åƒè¾“å…¥ï¼Œä¾›CNNè¿›è¡Œåˆ†æã€‚</p></li><li><p><strong>è‡ªç„¶è¯­è¨€å¤„ç† (NLP)</strong>: å¥å­å¯ä»¥è¢«è½¬æ¢ä¸ºè¯å‘é‡çŸ©é˜µï¼ŒCNNå¯ä»¥ä»ä¸­æå–å…³é”®çŸ­è¯­ç­‰æ¨¡å¼ã€‚</p></li></ul><h1 id="6-å±€é™æ€§"><a href="#6-å±€é™æ€§" class="headerlink" title="6. å±€é™æ€§"></a>6. å±€é™æ€§</h1><ul><li><p>æ ‡å‡†çš„CNNå¯¹å›¾åƒçš„<br>  <strong>ç¼©æ”¾å’Œæ—‹è½¬</strong>å¹¶ä¸å…·æœ‰ä¸å˜æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œæ•°æ®å¢å¼ºï¼ˆData Augmentationï¼‰ã€‚</p></li><li><p>æ›´é«˜çº§çš„æŠ€æœ¯å¦‚ç©ºé—´å˜æ¢ç½‘ç»œï¼ˆSpatial Transformer Layerï¼‰ä¹Ÿå¯ä»¥ç”¨æ¥å¤„ç†è¿™ç±»å‡ ä½•å˜æ¢ã€‚</p></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ML</tag>
      
      <tag>CNN</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -HW1 Notebook</title>
    <link href="/2025/08/16/HW1%20Notebook/"/>
    <url>/2025/08/16/HW1%20Notebook/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å®Œæˆæå®æ¯…æœºå™¨å­¦ä¹ 2021ä½œä¸š1æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>ä½œä¸š1æ˜¯**HW1-COVID-19 Cases Predictionï¼ˆRegression)**ï¼Œæ˜¯ä¸€ä¸ªå›å½’ä»»åŠ¡,<a href="https://www.kaggle.com/competitions/ml2021spring-hw1/overview">kaggleé“¾æ¥</a><br>ä¸‹é¢æ˜¯ <code>strong baseline</code> çš„è¦æ±‚ï¼š</p><h1 id="Strong-Baseline"><a href="#Strong-Baseline" class="headerlink" title="Strong Baseline"></a>Strong Baseline</h1><ul><li>Feature selection (what other features are useful?)</li><li>DNN architecture (layers? dimension? activation function?)</li><li>Training (mini-batch? optimizer? learning rate?)</li><li>L2 regularization</li><li>There are some mistakes in the sample code, can you find them?</li></ul><hr><h1 id="ç‰¹å¾é€‰æ‹©"><a href="#ç‰¹å¾é€‰æ‹©" class="headerlink" title="ç‰¹å¾é€‰æ‹©"></a>ç‰¹å¾é€‰æ‹©</h1><p>æºæ•°æ®æœ‰94åˆ—ï¼Œè‚¯å®šä¸èƒ½ä¸€è‚¡è„‘åœ°å…¨æ‹¿æ¥è®­ç»ƒï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œç‰¹å¾é€‰æ‹©ã€‚æˆ‘æ˜¯ç”¨çš„æ¯”è¾ƒä¼ ç»Ÿçš„<strong>è®¡ç®—ç›¸å…³æ€§</strong>çš„æ–¹æ³•ï¼Œç„¶åæ’åºï¼Œå–å‰kä¸ªï¼Œå¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Feature Selection</span><br><br>df = pd.read_csv(tr_path)<br>target_column = <span class="hljs-number">94</span><br>top_key Â = <span class="hljs-number">14</span><br><br>y = df.iloc[:,target_column]<br>X = df.drop(columns=df.columns[target_column])<br><br><span class="hljs-built_in">print</span>(y)<br>correlations = X.corrwith(y).<span class="hljs-built_in">abs</span>().sort_values(ascending=<span class="hljs-literal">False</span>).head(top_key)<br><span class="hljs-built_in">print</span>(correlations)<br>selected_features = [df.columns.get_loc(i) - <span class="hljs-number">1</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> correlations.index]<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Selected features:\n&quot;</span>, selected_features)<br></code></pre></td></tr></table></figure><p>è¿™æ ·åšæœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯ä½ èƒ½è‡ªå·±<strong>æ¸…æ¥šåœ°æŠŠæ¡æ¯ä¸€ä¸ªç‰¹å¾çš„ç›¸å…³æ€§</strong>ï¼Œç„¶åæ ¹æ®éœ€è¦é€‰æ‹©å¤§äºæŸä¸€é˜ˆå€¼çš„ï¼Œè€Œä¸ä»…ä»…æ˜¯æœºæ¢°å¼çš„å‰å¤šå°‘å¤šå°‘ä¸ª</p><hr><h1 id="sklearn"><a href="#sklearn" class="headerlink" title="sklearn"></a>sklearn</h1><p>å½“ç„¶ï¼Œ<code>sklearn</code>åº“æ—©å·²å°è£…å¥½äº†ç›¸å…³å‡½æ•°ï¼Œä¸€èµ·æ¥å­¦ä¹ ä¸‹</p><p><code>Scikit-learn (sklearn)</code> æä¾›äº†å¤šç§ç‰¹å¾é€‰æ‹©ï¼ˆFeature Selectionï¼‰æ–¹æ³•ï¼Œç”¨äºä»åŸå§‹æ•°æ®ä¸­ç­›é€‰å‡ºæœ€æœ‰ä»·å€¼çš„ç‰¹å¾ï¼Œä»¥æé«˜æ¨¡å‹æ€§èƒ½ã€é™ä½è¿‡æ‹Ÿåˆå¹¶å‡å°‘è®¡ç®—å¼€é”€ã€‚ä»¥ä¸‹æ˜¯ sklearn ä¸­å¸¸ç”¨çš„ç‰¹å¾é€‰æ‹©æ–¹æ³•åˆ†ç±»åŠå…·ä½“å®ç°ï¼š</p><h2 id="1-ç§»é™¤ä½æ–¹å·®ç‰¹å¾ï¼ˆVarianceThresholdï¼‰"><a href="#1-ç§»é™¤ä½æ–¹å·®ç‰¹å¾ï¼ˆVarianceThresholdï¼‰" class="headerlink" title="1. ç§»é™¤ä½æ–¹å·®ç‰¹å¾ï¼ˆVarianceThresholdï¼‰"></a>1. ç§»é™¤ä½æ–¹å·®ç‰¹å¾ï¼ˆVarianceThresholdï¼‰</h2><ul><li><strong>åŸç†</strong>ï¼šç§»é™¤æ–¹å·®ä½äºé˜ˆå€¼çš„ç‰¹å¾ï¼ˆæ–¹å·®æ¥è¿‘é›¶çš„ç‰¹å¾é€šå¸¸å¯¹æ¨¡å‹æ— è´¡çŒ®ï¼‰ã€‚</li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<strong>é€‚ç”¨äºåˆ é™¤å‡ ä¹æ’å®šçš„ç‰¹å¾</strong>ï¼ˆå¦‚æ‰€æœ‰æ ·æœ¬å–å€¼ç›¸åŒï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> VarianceThreshold<br>selector = VarianceThreshold(threshold=<span class="hljs-number">0.1</span>)  <span class="hljs-comment"># ç§»é™¤æ–¹å·® &lt;0.1 çš„ç‰¹å¾</span><br>X_new = selector.fit_transform(X)<br></code></pre></td></tr></table></figure></li></ul><h2 id="2-å•å˜é‡ç‰¹å¾é€‰æ‹©ï¼ˆUnivariate-Selectionï¼‰"><a href="#2-å•å˜é‡ç‰¹å¾é€‰æ‹©ï¼ˆUnivariate-Selectionï¼‰" class="headerlink" title="2. å•å˜é‡ç‰¹å¾é€‰æ‹©ï¼ˆUnivariate Selectionï¼‰"></a>2. å•å˜é‡ç‰¹å¾é€‰æ‹©ï¼ˆUnivariate Selectionï¼‰</h2><p>åŸºäºç»Ÿè®¡æ£€éªŒæˆ–æ¨¡å‹å¯¹æ¯ä¸ªç‰¹å¾å•ç‹¬è¯„ä¼°ï¼Œé€‰æ‹©æœ€ä½³ç‰¹å¾ã€‚</p><h3 id="æ–¹æ³•ï¼š"><a href="#æ–¹æ³•ï¼š" class="headerlink" title="æ–¹æ³•ï¼š"></a>æ–¹æ³•ï¼š</h3><ul><li><strong>SelectKBest</strong>ï¼šé€‰æ‹©å¾—åˆ†æœ€é«˜çš„å‰ <code>k</code> ä¸ªç‰¹å¾ã€‚</li><li><strong>SelectPercentile</strong>ï¼šé€‰æ‹©å¾—åˆ†æœ€é«˜çš„å‰ <code>percentile%</code> ç‰¹å¾ã€‚</li><li><strong>å¸¸ç”¨ç»Ÿè®¡æ£€éªŒ</strong>ï¼š<ul><li>åˆ†ç±»é—®é¢˜ï¼š<code>chi2</code>ï¼ˆå¡æ–¹æ£€éªŒï¼‰ã€<code>f_classif</code>ï¼ˆANOVA Få€¼ï¼‰ã€<code>mutual_info_classif</code>ï¼ˆäº’ä¿¡æ¯ï¼‰ã€‚</li><li>å›å½’é—®é¢˜ï¼š<code>f_regression</code>ï¼ˆFæ£€éªŒï¼‰ã€<code>mutual_info_regression</code>ï¼ˆäº’ä¿¡æ¯ï¼‰ã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹ï¼š"><a href="#ç¤ºä¾‹ï¼š" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectKBest, chi2<br>selector = SelectKBest(chi2, k=<span class="hljs-number">10</span>)  <span class="hljs-comment"># é€‰æ‹©å¡æ–¹æ£€éªŒå¾—åˆ†æœ€é«˜çš„10ä¸ªç‰¹å¾</span><br>X_new = selector.fit_transform(X, y)<br></code></pre></td></tr></table></figure><h2 id="3-é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFE-Recursive-Feature-Eliminationï¼‰"><a href="#3-é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFE-Recursive-Feature-Eliminationï¼‰" class="headerlink" title="3. é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFE, Recursive Feature Eliminationï¼‰"></a>3. é€’å½’ç‰¹å¾æ¶ˆé™¤ï¼ˆRFE, Recursive Feature Eliminationï¼‰</h2><ul><li><strong>åŸç†</strong>ï¼šé€šè¿‡é€’å½’åœ°è®­ç»ƒæ¨¡å‹ï¼ˆå¦‚çº¿æ€§å›å½’ã€SVMï¼‰å¹¶ç§»é™¤æƒé‡æœ€ä½çš„ç‰¹å¾ï¼Œé€æ­¥ç­›é€‰ç‰¹å¾ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼šéœ€è¦æŒ‡å®šæœ€ç»ˆç‰¹å¾æ•°é‡æˆ–é€šè¿‡äº¤å‰éªŒè¯è‡ªåŠ¨é€‰æ‹©ï¼ˆ<code>RFECV</code>ï¼‰ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> RFE<br><span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression<br>model = LogisticRegression()<br>selector = RFE(model, n_features_to_select=<span class="hljs-number">5</span>)  <span class="hljs-comment"># é€‰æ‹©5ä¸ªç‰¹å¾</span><br>X_new = selector.fit_transform(X, y)<br></code></pre></td></tr></table></figure></li></ul><h2 id="4-åŸºäºæ¨¡å‹æƒé‡çš„ç‰¹å¾é€‰æ‹©"><a href="#4-åŸºäºæ¨¡å‹æƒé‡çš„ç‰¹å¾é€‰æ‹©" class="headerlink" title="4. åŸºäºæ¨¡å‹æƒé‡çš„ç‰¹å¾é€‰æ‹©"></a>4. åŸºäºæ¨¡å‹æƒé‡çš„ç‰¹å¾é€‰æ‹©</h2><ul><li><strong>åŸç†</strong>ï¼šä½¿ç”¨å…·æœ‰ç‰¹å¾é‡è¦æ€§æˆ–ç³»æ•°æƒé‡çš„æ¨¡å‹ï¼ˆå¦‚çº¿æ€§æ¨¡å‹ã€æ ‘æ¨¡å‹ï¼‰ç­›é€‰ç‰¹å¾ã€‚</li><li><strong>æ–¹æ³•</strong>ï¼š<ul><li><code>SelectFromModel</code>ï¼šæ ¹æ®æ¨¡å‹æƒé‡æˆ–é‡è¦æ€§é˜ˆå€¼é€‰æ‹©ç‰¹å¾ã€‚</li><li>é€‚ç”¨äºï¼š<code>Lasso</code>ï¼ˆå›å½’ï¼‰ã€<code>RandomForest</code>ã€<code>XGBoost</code> ç­‰ã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹ï¼š-1"><a href="#ç¤ºä¾‹ï¼š-1" class="headerlink" title="ç¤ºä¾‹ï¼š"></a>ç¤ºä¾‹ï¼š</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> sklearn.feature_selection <span class="hljs-keyword">import</span> SelectFromModel<br><span class="hljs-keyword">from</span> sklearn.ensemble <span class="hljs-keyword">import</span> RandomForestClassifier<br>model = RandomForestClassifier()<br>selector = SelectFromModel(model, threshold=<span class="hljs-string">&#x27;median&#x27;</span>)  <span class="hljs-comment"># é€‰æ‹©é‡è¦æ€§é«˜äºä¸­ä½æ•°çš„ç‰¹å¾</span><br>X_new = selector.fit_transform(X, y)<br></code></pre></td></tr></table></figure><h2 id="å®Œæ•´æµç¨‹å»ºè®®"><a href="#å®Œæ•´æµç¨‹å»ºè®®" class="headerlink" title="å®Œæ•´æµç¨‹å»ºè®®"></a>å®Œæ•´æµç¨‹å»ºè®®</h2><ol><li>é¢„å¤„ç†ï¼šå…ˆå¤„ç†ç¼ºå¤±å€¼ã€æ ‡å‡†åŒ–æ•°æ®ã€‚</li><li>åˆæ­¥ç­›é€‰ï¼šç”¨ <code>VarianceThreshold</code> æˆ–å•å˜é‡æ–¹æ³•å‡å°‘ç‰¹å¾æ•°é‡ã€‚</li><li>ç²¾ç»†ç­›é€‰ï¼šç»“åˆæ¨¡å‹ï¼ˆå¦‚ <code>SelectFromModel</code> æˆ– <code>RFE</code>ï¼‰å’Œäº¤å‰éªŒè¯ã€‚</li><li>éªŒè¯ï¼šæ¯”è¾ƒç­›é€‰å‰åæ¨¡å‹çš„æ€§èƒ½ï¼ˆå¦‚ AUCã€RMSEï¼‰ã€‚</li></ol><p>é€šè¿‡åˆç†ç»„åˆè¿™äº›æ–¹æ³•ï¼Œå¯ä»¥é«˜æ•ˆåœ°ä¼˜åŒ–ç‰¹å¾ç©ºé—´ï¼Œæå‡æ¨¡å‹æ•ˆæœã€‚</p><hr><h1 id="L1-L2-æ­£åˆ™åŒ–"><a href="#L1-L2-æ­£åˆ™åŒ–" class="headerlink" title="L1&#x2F;L2 æ­£åˆ™åŒ–"></a>L1&#x2F;L2 æ­£åˆ™åŒ–</h1><p>L1&#x2F;L2 æ­£åˆ™åŒ–æ˜¯æœºå™¨å­¦ä¹ ä¸­ç”¨äº<strong>é˜²æ­¢æ¨¡å‹è¿‡æ‹Ÿåˆ</strong>çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œé€šè¿‡<strong>å‘æŸå¤±å‡½æ•°æ·»åŠ æƒ©ç½šé¡¹</strong>æ¥çº¦æŸæ¨¡å‹å‚æ•°ã€‚ä»¥ä¸‹æ˜¯å…³é”®ç‚¹æ€»ç»“ï¼š</p><h2 id="1-L1-æ­£åˆ™åŒ–ï¼ˆLassoï¼‰"><a href="#1-L1-æ­£åˆ™åŒ–ï¼ˆLassoï¼‰" class="headerlink" title="1. L1 æ­£åˆ™åŒ–ï¼ˆLassoï¼‰"></a>1. L1 æ­£åˆ™åŒ–ï¼ˆLassoï¼‰</h2><ul><li><strong>å…¬å¼</strong>ï¼šæŸå¤±å‡½æ•° + $Î»âˆ‘|wáµ¢|$<br>Î»æ§åˆ¶æƒ©ç½šå¼ºåº¦ï¼Œwáµ¢ä¸ºæ¨¡å‹å‚æ•°ã€‚</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li><strong>ç¨€ç–æ€§</strong>ï¼š<strong>å€¾å‘äºå°†éƒ¨åˆ†å‚æ•°å‹ç¼©ä¸º0ï¼Œé€‚ç”¨äºç‰¹å¾é€‰æ‹©</strong>ã€‚</li><li><strong>é²æ£’æ€§</strong>ï¼šå¯¹å¼‚å¸¸å€¼ä¸æ•æ„Ÿã€‚</li><li><strong>ä¸å¯å¯¼æ€§</strong>ï¼šéœ€ç”¨æ¬¡æ¢¯åº¦ä¼˜åŒ–ï¼ˆå¦‚åæ ‡ä¸‹é™ï¼‰ã€‚</li></ul></li><li><strong>åœºæ™¯</strong>ï¼šé«˜ç»´æ•°æ®ã€ç‰¹å¾å†—ä½™æ—¶ï¼ˆå¦‚åŸºå› æ•°æ®ã€æ–‡æœ¬åˆ†ç±»ï¼‰ã€‚</li></ul><h2 id="2-L2-æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰"><a href="#2-L2-æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰" class="headerlink" title="2. L2 æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰"></a>2. L2 æ­£åˆ™åŒ–ï¼ˆRidgeï¼‰</h2><ul><li><strong>å…¬å¼</strong>ï¼šæŸå¤±å‡½æ•° + $Î»âˆ‘wáµ¢Â²$</li><li><strong>ç‰¹ç‚¹</strong>ï¼š<ul><li><strong>å¹³æ»‘æ”¶ç¼©</strong>ï¼šå‡åŒ€å‡å°å‚æ•°å€¼ï¼Œé¿å…<strong>æç«¯æƒé‡</strong>ã€‚</li><li><strong>å¯å¯¼æ€§</strong>ï¼šå¯ç”¨æ¢¯åº¦ä¸‹é™ä¼˜åŒ–ã€‚</li><li><strong>æŠ—å…±çº¿æ€§</strong>ï¼šç¼“è§£ç‰¹å¾ç›¸å…³æ€§å¸¦æ¥çš„ä¸ç¨³å®šã€‚</li></ul></li><li><strong>åœºæ™¯</strong>ï¼šå‚æ•°é—´ç›¸å…³æ€§é«˜ï¼ˆå¦‚çº¿æ€§å›å½’ã€ç¥ç»ç½‘ç»œï¼‰ï¼Œ <strong>çº¦æŸå‚æ•°å€¼ï¼Œé¿å…æ¨¡å‹å¯¹è®­ç»ƒæ•°æ®è¿‡åº¦æ•æ„Ÿï¼Œè¿‡åº¦ä¾èµ–æŸäº›ç‰¹å¾</strong>ã€‚</li></ul><h2 id="3-å¯¹æ¯”"><a href="#3-å¯¹æ¯”" class="headerlink" title="3. å¯¹æ¯”"></a>3. å¯¹æ¯”</h2><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>L1</strong></th><th><strong>L2</strong></th></tr></thead><tbody><tr><td><strong>ç¨€ç–æ€§</strong></td><td>æ˜¯ï¼ˆè‡ªåŠ¨ç‰¹å¾é€‰æ‹©ï¼‰</td><td>å¦</td></tr><tr><td><strong>è§£çš„å”¯ä¸€æ€§</strong></td><td>å¯èƒ½å¤šè§£ï¼ˆéä¸¥æ ¼å‡¸ï¼‰</td><td>å”¯ä¸€è§£ï¼ˆä¸¥æ ¼å‡¸ï¼‰</td></tr><tr><td><strong>ä¼˜åŒ–æ–¹æ³•</strong></td><td>åæ ‡ä¸‹é™ã€è¿‘ç«¯æ¢¯åº¦</td><td>æ¢¯åº¦ä¸‹é™ã€è§£æè§£</td></tr><tr><td><strong>æŠ—å™ªå£°</strong></td><td>å¼º</td><td>ä¸­ç­‰</td></tr></tbody></table><h2 id="4-ç»“åˆä½¿ç”¨ï¼ˆElastic-Netï¼‰"><a href="#4-ç»“åˆä½¿ç”¨ï¼ˆElastic-Netï¼‰" class="headerlink" title="4. ç»“åˆä½¿ç”¨ï¼ˆElastic Netï¼‰"></a>4. ç»“åˆä½¿ç”¨ï¼ˆElastic Netï¼‰</h2><ul><li><strong>å…¬å¼</strong>ï¼šæŸå¤±å‡½æ•° + $Î»â‚âˆ‘|wáµ¢| + Î»â‚‚âˆ‘wáµ¢Â²$<br>å¹³è¡¡L1çš„ç¨€ç–æ€§å’ŒL2çš„ç¨³å®šæ€§ï¼Œé€‚ç”¨äºç‰¹å¾ç»´åº¦æé«˜ä¸”ç›¸å…³æ€§å¼ºçš„æƒ…å†µã€‚</li></ul><h2 id="5-æ•°å­¦ç›´è§‚"><a href="#5-æ•°å­¦ç›´è§‚" class="headerlink" title="5.æ•°å­¦ç›´è§‚"></a>5.æ•°å­¦ç›´è§‚</h2><ul><li><strong>L1</strong>ï¼šè±å½¢çº¦æŸåŸŸï¼Œæœ€ä¼˜è§£å¸¸å‡ºç°åœ¨é¡¶ç‚¹ï¼ˆæŸäº›å‚æ•°ä¸º0ï¼‰ã€‚</li><li><strong>L2</strong>ï¼šåœ†å½¢çº¦æŸåŸŸï¼Œæœ€ä¼˜è§£åœ¨è¾¹ç•ŒæŸç‚¹ï¼ˆæ‰€æœ‰å‚æ•°éé›¶ä½†å°ï¼‰ã€‚</li></ul><h2 id="6-ä»£ç "><a href="#6-ä»£ç " class="headerlink" title="6.ä»£ç "></a>6.ä»£ç </h2><ul><li>L2æ­£åˆ™åŒ–å¯ä»¥<strong>åœ¨æŸå¤±å‡½æ•°ä¸­æ‰‹åŠ¨æ·»åŠ </strong><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n_epochs):<br>optimizer.zero_grad()<br>y_pred = model(X_tensor)<br>loss = nn.MSELoss()(y_pred, y_target)<br>l2_reg = torch.<span class="hljs-built_in">sum</span>(model.weight ** <span class="hljs-number">2</span>) <span class="hljs-comment"># L2æƒ©ç½šé¡¹ï¼ˆä¸åŒ…å«åç½®ï¼‰</span><br>total_loss = loss +  lambda_l2 * l2_reg <span class="hljs-comment"># æ€»æŸå¤±</span><br>total_loss.backward()<br>optimizer.step()<br></code></pre></td></tr></table></figure></li><li>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ä¼˜åŒ–å™¨ä¸­åŠ  <code>weight_decay</code> å®ç°ï¼Œæ¯”å¦‚ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">optimizer = torch.optim.Adam(model.parameters(), lr=<span class="hljs-number">1e-3</span>, weight_decay=<span class="hljs-number">1e-4</span>)<br></code></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>feature_selection</tag>
      
      <tag>L2_regularization</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>æå®æ¯…æœºå™¨å­¦ä¹ -ç±»ç¥ç»ç½‘ç»œè®­ç»ƒ</title>
    <link href="/2025/08/16/%E7%B1%BB%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E6%B3%A8%E6%84%8F/"/>
    <url>/2025/08/16/%E7%B1%BB%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E6%B3%A8%E6%84%8F/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ æœºå™¨å­¦ä¹ æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="Some-Terms"><a href="#Some-Terms" class="headerlink" title="Some Terms"></a>Some Terms</h1><h2 id="Critical-Point"><a href="#Critical-Point" class="headerlink" title="Critical Point"></a>Critical Point</h2><p>åœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œâ€œcritical pointâ€ï¼ˆå…³é”®ç‚¹&#x2F;ä¸´ç•Œç‚¹ï¼‰æŒ‡çš„æ˜¯æŸå¤±å‡½æ•°æ›²é¢ï¼ˆloss landscapeï¼‰ä¸Šæ¢¯åº¦ä¸ºé›¶çš„ç‚¹ã€‚æ•°å­¦ä¸Šï¼Œè¿™æ„å‘³ç€æŸå¤±å‡½æ•°<code>L</code>ï¼ˆé€šå¸¸æ˜¯å…³äºæ¨¡å‹å‚æ•°<code>Î¸</code>çš„å‡½æ•°ï¼‰çš„æ¢¯åº¦ï¼ˆæˆ–ä¸€é˜¶å¯¼æ•°ï¼‰<code>âˆ‡L(Î¸)</code>ç­‰äºé›¶å‘é‡ï¼š<strong>âˆ‡L(Î¸) &#x3D; 0</strong></p><p>ç„¶è€Œï¼Œå¹¶éæ‰€æœ‰çš„å…³é”®ç‚¹éƒ½æ˜¯æˆ‘ä»¬æƒ³è¦çš„å…¨å±€æœ€å°å€¼ï¼ˆGlobal Minimumï¼‰ã€‚å…³é”®ç‚¹å¯ä»¥åˆ†ä¸ºå‡ ç±»ï¼š</p><ol><li><p><strong>å±€éƒ¨æå°å€¼ç‚¹ï¼ˆLocal Minimaï¼‰ï¼š</strong></p><ul><li>åœ¨è¯¥ç‚¹çš„æŸä¸ª<strong>å±€éƒ¨é‚»åŸŸ</strong>å†…ï¼ŒæŸå¤±å‡½æ•°çš„å€¼æ˜¯æ‰€æœ‰ç‚¹ä¸­æœ€å°çš„ï¼ˆä½†å¯èƒ½æ¯”å…¨å±€æœ€å°å€¼è¦å¤§ï¼‰ã€‚</li><li>è¿™æ˜¯ä¼˜åŒ–è¿‡ç¨‹ä¸­æ¯”è¾ƒç†æƒ³çš„ç‚¹ï¼Œè™½ç„¶ä¸æ˜¯å…¨å±€æœ€ä¼˜ï¼Œä½†å¯èƒ½æ˜¯è¶³å¤Ÿå¥½çš„è§£ã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> åœ¨å±€éƒ¨æœ€ä½ç‚¹ï¼Œç±»ä¼¼äºå±±è°·åº•éƒ¨ã€‚</li></ul></li><li><p><strong>å±€éƒ¨æå¤§å€¼ç‚¹ï¼ˆLocal Maximaï¼‰ï¼š</strong></p><ul><li>åœ¨è¯¥ç‚¹çš„æŸä¸ª<strong>å±€éƒ¨é‚»åŸŸ</strong>å†…ï¼ŒæŸå¤±å‡½æ•°çš„å€¼æ˜¯æ‰€æœ‰ç‚¹ä¸­æœ€å¤§çš„ã€‚</li><li>åœ¨æœ€å°åŒ–æŸå¤±å‡½æ•°çš„é—®é¢˜ä¸­ï¼ˆå‡ ä¹æ‰€æœ‰æ·±åº¦å­¦ä¹ ä»»åŠ¡éƒ½æ˜¯ï¼‰ï¼Œæå¤§å€¼ç‚¹æ˜¯æˆ‘ä»¬æƒ³è¦<strong>é¿å¼€</strong>çš„ç‚¹ã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> åœ¨å±€éƒ¨æœ€é«˜ç‚¹ï¼Œç±»ä¼¼äºå±±é¡¶ï¼ˆä½†æŸå¤±é«˜ï¼Œæ€§èƒ½å·®ï¼‰ã€‚</li><li><strong>åœ¨æ·±åº¦å­¦ä¹ ä¸­çš„ç°å®æ€§ï¼š</strong> ç”±äºç¥ç»ç½‘ç»œé€šå¸¸å…·æœ‰éå¸¸é«˜çš„ç»´åº¦ï¼ˆå‚æ•°ä¼—å¤šï¼‰ï¼Œä¸”æŸå¤±å‡½æ•°é€šå¸¸æ— ç•Œå‘ä¸Šï¼Œ<strong>å±€éƒ¨æå¤§å€¼ç‚¹åœ¨æ·±åº¦å­¦ä¹ çš„é«˜ç»´ç©ºé—´ä¸­æå…¶ç½•è§</strong>ã€‚æ›´å¸¸è§çš„æ˜¯â€œåâ€æ–¹å‘çš„â€”â€”éç‚¹ã€‚</li></ul></li><li><p><strong>éç‚¹ï¼ˆSaddle Pointsï¼‰ï¼š</strong></p><ul><li>è¿™æ˜¯æ·±åº¦å­¦ä¹ ä¸­æœ€æ™®éã€ä¹Ÿæœ€å…·æŒ‘æˆ˜æ€§çš„å…³é”®ç‚¹ç±»å‹ã€‚</li><li>è¯¥ç‚¹ä¸æ˜¯å±€éƒ¨æå°å€¼ç‚¹ä¹Ÿä¸æ˜¯å±€éƒ¨æå¤§å€¼ç‚¹ã€‚</li><li>åœ¨é€šè¿‡è¯¥ç‚¹çš„<strong>æŸäº›æ–¹å‘</strong>ä¸Šï¼ŒæŸå¤±å‡½æ•°<strong>ä¸Šå‡</strong>ï¼›åœ¨<strong>å¦ä¸€äº›æ–¹å‘</strong>ä¸Šï¼ŒæŸå¤±å‡½æ•°<strong>ä¸‹é™</strong>ã€‚</li><li><strong>ç‰¹ç‚¹ï¼š</strong> å½¢çŠ¶ç±»ä¼¼äºé©¬éâ€”â€”åœ¨æŸäº›æ–¹å‘æ˜¯â€œè°·åº•â€ï¼Œåœ¨æŸäº›æ–¹å‘æ˜¯â€œå±±é¡¶â€ã€‚</li><li><strong>åœ¨é«˜ç»´ç©ºé—´ä¸­çš„æ™®éæ€§ï¼š</strong> éšç€æ¨¡å‹å‚æ•°ç»´åº¦çš„å¢åŠ ï¼ˆè¿™æ­£æ˜¯æ·±åº¦ç¥ç»ç½‘ç»œçš„ç‰¹ç‚¹ï¼‰ï¼ŒæŸå¤±å‡½æ•°æ›²é¢çš„éç‚¹æ•°é‡ä¼š<strong>æŒ‡æ•°çº§åœ°å¤šäºå±€éƒ¨æå°å€¼ç‚¹</strong>ã€‚ç ”ç©¶è¡¨æ˜ï¼Œåœ¨æ·±åº¦å­¦ä¹ ä¸­ï¼Œ<strong>é˜»ç¢è®­ç»ƒæ”¶æ•›çš„ä¸»è¦éšœç¢ç‰©æ›´å¯èƒ½æ˜¯éç‚¹è€Œä¸æ˜¯å±€éƒ¨æå°å€¼</strong>ã€‚</li><li><strong>å½±å“ï¼š</strong> åœ¨éç‚¹å¤„ï¼Œæ¢¯åº¦ä¸ºé›¶ï¼Œæ ‡å‡†çš„ä¼˜åŒ–ç®—æ³•å¯èƒ½ä¼šåœæ»ä¸å‰ã€‚å¦‚æœä¸‹é™æ–¹å‘â€œè¢«å›°â€åœ¨éç‚¹çš„å¹³å¦åŒºåŸŸæˆ–ä¸Šå‡æ–¹å‘ï¼ŒæŸå¤±å¾ˆé•¿æ—¶é—´ä¸ä¼šä¸‹é™ï¼Œå­¦ä¹ å˜å¾—éå¸¸ç¼“æ…¢ï¼Œç±»ä¼¼äºâ€œé«˜åŸç°è±¡â€ã€‚ä½†åœ¨æ­£ç¡®çš„æ–¹å‘ä¸Šï¼ŒæŸå¤±æ˜¯å¯ä»¥ç»§ç»­ä¸‹é™çš„ã€‚</li></ul></li></ol><p><strong>å¦‚ä½•åº”å¯¹å…³é”®ç‚¹ï¼ˆå°¤å…¶æ˜¯éç‚¹ï¼‰ï¼Ÿ</strong></p><ul><li><strong>ä½¿ç”¨å¸¦åŠ¨é‡ï¼ˆMomentumï¼‰çš„ä¼˜åŒ–å™¨ï¼š</strong> å¦‚SGD with Momentum, Adam, RMSPropç­‰ã€‚åŠ¨é‡å¯ä»¥å¸®åŠ©å‚æ•°æ›´æ–°â€œå†²è¿‡â€éç‚¹ä¸­å¹³å¦æˆ–è½»å¾®ä¸Šå‡çš„åŒºåŸŸï¼Œå› ä¸ºå®ƒç§¯ç´¯äº†ä¹‹å‰æ¢¯åº¦çš„æ–¹å‘ã€‚</li><li><strong>è‡ªé€‚åº”å­¦ä¹ ç‡ï¼š</strong> åƒAdamè¿™æ ·çš„ä¼˜åŒ–å™¨ä¼šè°ƒæ•´æ¯ä¸ªå‚æ•°çš„å­¦ä¹ ç‡ï¼Œæœ‰åŠ©äºæ›´å¿«åœ°é€ƒç¦»éç‚¹æ²¿ç€ä¸‹é™æ–¹å‘å‰è¿›ã€‚</li><li><strong>æ‰¹å½’ä¸€åŒ–ï¼ˆBatch Normalizationï¼‰ç­‰æŠ€å·§ï¼š</strong> é€šè¿‡å¹³æ»‘æŸå¤±å‡½æ•°æ›²é¢ï¼Œå¯èƒ½æœ‰åŠ©äºå‡å°‘éç‚¹å¸¦æ¥çš„å½±å“ã€‚</li><li><strong>åˆé€‚çš„åˆå§‹åŒ–ï¼š</strong> å¥½çš„å‚æ•°åˆå§‹åŒ–ç­–ç•¥ï¼ˆå¦‚Xavier, He Initï¼‰å¯ä»¥è®©ç½‘ç»œä»æ›´å®¹æ˜“ä¼˜åŒ–çš„ä½ç½®å¼€å§‹ã€‚</li><li><strong>éšæœºæ€§ï¼š</strong> SGDæœ¬èº«å›ºæœ‰çš„éšæœºæ€§ï¼ˆåŸºäºå°æ‰¹é‡æ ·æœ¬è®¡ç®—æ¢¯åº¦ï¼‰æœ‰åŠ©äºé€ƒç¦»æŸäº›éç‚¹ã€‚</li></ul><h2 id="Batch-Size"><a href="#Batch-Size" class="headerlink" title="Batch Size"></a>Batch Size</h2><ul><li>Smaller batch requires longer time for one epoch</li><li>Smaller batch size has better performance</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250814214719943.png"><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250814214645424.png"></p><h1 id="Better-Optimization"><a href="#Better-Optimization" class="headerlink" title="Better Optimization"></a>Better Optimization</h1><h2 id="Momentum"><a href="#Momentum" class="headerlink" title="Momentum"></a>Momentum</h2><p>Momentum introduces a weighted sum of previous gradients to accelerate gradient descent. The movement is defined as the movement of the last step minus the gradient at the present step. The process is as follows:</p><p>$$<br>\begin{align}<br>m^0 &amp;&#x3D; 0 \<br>m^1 &amp;&#x3D; -\eta g^0 \<br>m^2 &amp;&#x3D; \lambda m^1 - \eta g^1 \<br>&amp;\vdots \<br>\theta^{t+1} &amp;&#x3D; \theta^t + m^t<br>\end{align}<br>$$</p><p>where:<br>    $m^t$ is the movement at step,<br>    $\lambda$ is the momentum coefficient (0 &lt; $\lambda$ &lt; 1),<br>    $\eta$ is the learning rate,<br>    $g^t$ is the gradient at step.</p><p>This method ensures the movement is not just based on the current gradient but also on the <strong>previous movement</strong>, improving convergence.</p><h1 id="Adaptive-Learning-rate"><a href="#Adaptive-Learning-rate" class="headerlink" title="Adaptive Learning rate"></a>Adaptive Learning rate</h1><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250814210238642.png"><br>æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹Optimizationçš„å…¬å¼ï¼Œç”±å…¬å¼1æ›¿æ¢ä¸ºå…¬å¼2ï¼Œ$Ïƒ_i^t$ æ˜¯ä¸€ä¸ªä¸æ—¶é—´ã€ç‰¹å¾éƒ½æœ‰å…³ç³»çš„é‡ã€‚<br>$$<br>\begin{align}<br>Î¸_i^{t+1}â†Î¸_i^tâˆ’Î·g_i^t \<br>Î¸_i^{t+1}â†Î¸_i^tâˆ’\frac Î·{Ïƒ_i^t}g_i^t \<br>\end{align}<br>$$<br>å…·ä½“çš„æ›´æ–°è¿‡ç¨‹å¯ä»¥æœ‰å‡ ç§æ–¹å¼</p><h2 id="RMS"><a href="#RMS" class="headerlink" title="RMS"></a>RMS</h2><p>$$<br>\begin{align}<br>Î¸_i^1&amp;â†Î¸_i^0âˆ’\frac Î·{Ïƒ_i^0}g_i^0 &amp; Ïƒ_i^0&amp;&#x3D;\sqrt{(g_i^0)^2} &#x3D; |g_i^0| \<br>Î¸_i^2&amp;â†Î¸_i^1âˆ’\frac Î·{Ïƒ_i^1}g_i^1 &amp; Ïƒ_i^1&amp;&#x3D;\sqrt{\frac1 2(g_i^1)^2 + (g_i^0)^2} \<br>Î¸_i^3&amp;â†Î¸_i^2âˆ’\frac Î·{Ïƒ_i^2}g_i^2 &amp; Ïƒ_i^2&amp;&#x3D;\sqrt{\frac1 3(g_i^2)^2 + (g_i^1)^2 + (g_i^0)^2} \<br>\vdots &amp;&amp;&amp; \<br>\end{align}<br>$$<br>ä½†æ˜¯RMSçš„é—®é¢˜æ˜¯æ‰€æœ‰çš„æ¢¯åº¦å…·æœ‰ä¸€æ ·çš„æƒé‡ï¼Œä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œ<strong>ä¸åŒæ—¶é—´æ­¥çš„æ¢¯åº¦å¯èƒ½å·®å¼‚æå¤§</strong>ï¼ˆä¾‹å¦‚æŸäº›å‚æ•°æ¢¯åº¦å¤§ï¼ŒæŸäº›æ¢¯åº¦å°ï¼‰ï¼Œ<strong>é™æ€ RMS æ— æ³•è‡ªé€‚åº”è°ƒæ•´å­¦ä¹ ç‡</strong>ï¼Œä¹Ÿå°±æ˜¯æ— æ³•æ•é”æ•æ‰å½“å‰æ¢¯åº¦çš„å˜åŒ–è¶‹åŠ¿ï¼Œå¯èƒ½é€ æˆéœ‡è¡ã€‚å› æ­¤è¯ç”Ÿäº†RMS Prop</p><h2 id="RMS-Prop"><a href="#RMS-Prop" class="headerlink" title="RMS Prop"></a>RMS Prop</h2><p>è‡ªé€‚åº”è°ƒæ•´<br>$$<br>\begin{align}<br>\theta_i^1 &amp;\leftarrow \theta_i^0 - \frac{\eta}{\sigma_i^0} g_i^0 &amp; \sigma_i^0 &amp;&#x3D; \sqrt{(g_i^0)^2} \quad 0 &lt; \alpha &lt; 1 \<br>\theta_i^2 &amp;\leftarrow \theta_i^1 - \frac{\eta}{\sigma_i^1} g_i^1 &amp; \sigma_i^1 &amp;&#x3D; \sqrt{\alpha (\sigma_i^0)^2 + (1 - \alpha) (g_i^1)^2} \<br>\theta_i^3 &amp;\leftarrow \theta_i^2 - \frac{\eta}{\sigma_i^2} g_i^2 &amp; \sigma_i^2 &amp;&#x3D; \sqrt{\alpha (\sigma_i^1)^2 + (1 - \alpha) (g_i^2)^2} \<br>\vdots &amp;&amp;&amp; \<br>\theta_i^{t+1} &amp;\leftarrow \theta_i^t - \frac{\eta}{\sigma_i^t} g_i^t &amp; \sigma_i^t &amp;&#x3D; \sqrt{\alpha (\sigma_i^{t-1})^2 + (1 - \alpha) (g_i^t)^2}<br>\end{align}<br>$$</p><h2 id="Adam"><a href="#Adam" class="headerlink" title="Adam"></a>Adam</h2><p><strong>Adam: RMSProp + Momentum</strong></p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒRMSProp å’Œ Momentum éƒ½æ¶‰åŠåˆ°äº†å†å²æ¢¯åº¦ï¼Œæ˜¯å¦é‡å¤å‘¢ï¼Ÿéä¹Ÿ<br>å› ä¸ºRMSè®¡ç®—çš„æ˜¯ä¸€ä¸ªå¹³å‡¡æ ¹ï¼Œæ˜¯ä¸€ä¸ª<code>scalar</code><br>è€Œ<strong>Momentumåˆ™æ˜¯å‰ä¸€æ­¥ç§»åŠ¨çš„å‘é‡ç›¸åŠ ï¼Œä¸ä»…ä¼šæœ‰å¤§å°è¿˜ä¼šæœ‰æ–¹å‘ä¸Šçš„å½±å“</strong>ã€‚</p><h2 id="Learning-Rate-Scheduling"><a href="#Learning-Rate-Scheduling" class="headerlink" title="Learning Rate Scheduling"></a>Learning Rate Scheduling</h2><p>å°†å‚æ•°$\eta$ä¹Ÿéšæ—¶é—´æ”¹å˜ï¼Œå˜åŒ–çš„æ–¹å¼æœ‰ä¸¤ç§<br>$$<br>\begin{align}<br>\eta&amp;\leftarrow\eta^t \ \theta_i^{t+1} &amp;\leftarrow \theta_i^t - \frac{\eta^t}{\sigma_i^t} g_i^t<br>\end{align}<br>$$</p><h3 id="Decay"><a href="#Decay" class="headerlink" title="Decay"></a>Decay</h3><h3 id="Warm-up"><a href="#Warm-up" class="headerlink" title="Warm up"></a>Warm up</h3><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250814214435975.png"></p><h1 id="Batch-Normalization"><a href="#Batch-Normalization" class="headerlink" title="Batch Normalization"></a>Batch Normalization</h1><h2 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h2><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250822100430383.png"></p><ul><li>å½“ä¸åŒfeatureçš„åˆ†å¸ƒä¸å€¼å¤§å°å·®åˆ«å¾ˆå¤§æ—¶ï¼Œä¸åŒçš„weights å˜åŒ–ç¨‹åº¦å·®å¼‚å¤§ï¼Œå¯¼è‡´<code>error surface</code> æ¯”è¾ƒå´å²–ï¼Œéš¾ä»¥è®­ç»ƒã€æ”¶æ•›ï¼Œå› æ­¤éœ€è¦å°†æ•°æ®å½’ä¸€åŒ–</li></ul>]]></content>
    
    
    <categories>
      
      <category>ML&amp;DL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>Adam</tag>
      
      <tag>RMS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytorch Tutorial-Training Models</title>
    <link href="/2025/08/12/Training%20Models/"/>
    <url>/2025/08/12/Training%20Models/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Pytorchæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>In past sections, weâ€™ve discussed and demonstrated:</p><ul><li>Building models with the <code>neural network layers</code> and functions of the <code>torch.nn module</code></li><li>The mechanics of <code>automated gradient computation</code>, which is central to gradient-based model training</li><li>Using <code>TensorBoard</code> to visualize training progress and other activities</li></ul><p>In this section, weâ€™ll be adding some new tools to your inventory:</p><ul><li>Weâ€™ll get familiar with the <code>dataset and dataloader</code> abstractions, and how they ease the process of feeding data to your model during a training loop</li><li>Weâ€™ll discuss specific <code>loss functions</code> and when to use them</li><li>Weâ€™ll look at <code>PyTorch optimizers</code>, which implement algorithms to adjust model weights based on the outcome of a loss function</li></ul><p>Finally, weâ€™ll pull all of these together and see a full PyTorch training loop in action.</p><h1 id="Dataset-and-DataLoader"><a href="#Dataset-and-DataLoader" class="headerlink" title="Dataset and DataLoader"></a>Dataset and DataLoader<a href="http://localhost:8888/notebooks/Video+6+-+Model+Training+with+PyTorch.ipynb#Dataset-and-DataLoader"></a></h1><p>TheÂ <code>Dataset</code>Â andÂ <code>DataLoader</code>Â classes encapsulate the process of pulling your data from storage and exposing it to your training loop in batches.</p><p>TheÂ <code>Dataset</code>Â is responsible for accessing and processing single instances of data.</p><p>TheÂ <code>DataLoader</code>Â pulls instances of data from theÂ <code>Dataset</code>Â (either automatically or with a sampler that you define), collects them in batches, and returns them <strong>for consumption by your training</strong> loop. TheÂ <code>DataLoader</code>Â works with all kinds of datasets, regardless of the type of data they contain.</p><p>For this tutorial, weâ€™ll be using the Fashion-MNIST dataset provided by TorchVision. </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><span class="hljs-keyword">import</span> torchvision<br><span class="hljs-keyword">import</span> torchvision.transforms <span class="hljs-keyword">as</span> transforms<br><br><span class="hljs-comment"># PyTorch TensorBoard support</span><br><span class="hljs-keyword">from</span> torch.utils.tensorboard <span class="hljs-keyword">import</span> SummaryWriter<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><br>transform = transforms.Compose(<br>    [transforms.ToTensor(),<br>    transforms.Normalize((<span class="hljs-number">0.5</span>,), (<span class="hljs-number">0.5</span>,))])<br><br><span class="hljs-comment"># Create datasets for training &amp; validation, download if necessary</span><br>training_set = torchvision.datasets.FashionMNIST(<span class="hljs-string">&#x27;./data&#x27;</span>, train=<span class="hljs-literal">True</span>, transform=transform, download=<span class="hljs-literal">True</span>)<br>validation_set = torchvision.datasets.FashionMNIST(<span class="hljs-string">&#x27;./data&#x27;</span>, train=<span class="hljs-literal">False</span>, transform=transform, download=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># Create data loaders for our datasets; shuffle for training, not for validation</span><br>training_loader = torch.utils.data.DataLoader(training_set, batch_size=<span class="hljs-number">4</span>, shuffle=<span class="hljs-literal">True</span>, num_workers=<span class="hljs-number">2</span>)<br>validation_loader = torch.utils.data.DataLoader(validation_set, batch_size=<span class="hljs-number">4</span>, shuffle=<span class="hljs-literal">False</span>, num_workers=<span class="hljs-number">2</span>)<br><br><span class="hljs-comment"># Class labels</span><br>classes = (<span class="hljs-string">&#x27;T-shirt/top&#x27;</span>, <span class="hljs-string">&#x27;Trouser&#x27;</span>, <span class="hljs-string">&#x27;Pullover&#x27;</span>, <span class="hljs-string">&#x27;Dress&#x27;</span>, <span class="hljs-string">&#x27;Coat&#x27;</span>,<br>        <span class="hljs-string">&#x27;Sandal&#x27;</span>, <span class="hljs-string">&#x27;Shirt&#x27;</span>, <span class="hljs-string">&#x27;Sneaker&#x27;</span>, <span class="hljs-string">&#x27;Bag&#x27;</span>, <span class="hljs-string">&#x27;Ankle Boot&#x27;</span>)<br><br><span class="hljs-comment"># Report split sizes</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Training set has &#123;&#125; instances&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(training_set)))<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Validation set has &#123;&#125; instances&#x27;</span>.<span class="hljs-built_in">format</span>(<span class="hljs-built_in">len</span>(validation_set)))<br>Training <span class="hljs-built_in">set</span> has <span class="hljs-number">60000</span> instances<br>Validation <span class="hljs-built_in">set</span> has <span class="hljs-number">10000</span> instances<br></code></pre></td></tr></table></figure><p><strong>As always, letâ€™s visualize the data as a sanity check:</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># Helper function for inline image display</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">matplotlib_imshow</span>(<span class="hljs-params">img, one_channel=<span class="hljs-literal">False</span></span>):<br>    <span class="hljs-keyword">if</span> one_channel:<br>        img = img.mean(dim=<span class="hljs-number">0</span>)<br>    img = img / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>     <span class="hljs-comment"># unnormalize</span><br>    npimg = img.numpy()<br>    <span class="hljs-keyword">if</span> one_channel:<br>        plt.imshow(npimg, cmap=<span class="hljs-string">&quot;Greys&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        plt.imshow(np.transpose(npimg, (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)))<br><br>dataiter = <span class="hljs-built_in">iter</span>(training_loader)<br>images, labels = dataiter.<span class="hljs-built_in">next</span>()<br><br><span class="hljs-comment"># Create a grid from the images and show them</span><br>img_grid = torchvision.utils.make_grid(images)<br>matplotlib_imshow(img_grid, one_channel=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;  &#x27;</span>.join(classes[labels[j]] <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>)))<br></code></pre></td></tr></table></figure><ul><li><code>make_grid</code> æ˜¯ PyTorch ä¸­ç”¨äºå°†å¤šå¼ å›¾åƒæ‹¼æ¥æˆç½‘æ ¼çš„å·¥å…·ï¼Œå¸¸ç”¨äºå¯è§†åŒ–æ‰¹æ¬¡æ•°æ®æˆ–ç‰¹å¾å›¾</li></ul><h1 id="The-Model"><a href="#The-Model" class="headerlink" title="The Model"></a>The Model</h1><p>The model weâ€™ll use in this example is a <code>variant of LeNet-5</code> - it should be familiar if youâ€™ve watched the previous videos in this series.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn<br><span class="hljs-keyword">import</span> torch.nn.functional <span class="hljs-keyword">as</span> F<br><br><span class="hljs-comment"># PyTorch models inherit from torch.nn.Module</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GarmentClassifier</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(GarmentClassifier, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.conv1 = nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-variable language_">self</span>.pool = nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<br>        <span class="hljs-variable language_">self</span>.conv2 = nn.Conv2d(<span class="hljs-number">6</span>, <span class="hljs-number">16</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-variable language_">self</span>.fc1 = nn.Linear(<span class="hljs-number">16</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>, <span class="hljs-number">120</span>)<br>        <span class="hljs-variable language_">self</span>.fc2 = nn.Linear(<span class="hljs-number">120</span>, <span class="hljs-number">84</span>)<br>        <span class="hljs-variable language_">self</span>.fc3 = nn.Linear(<span class="hljs-number">84</span>, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = <span class="hljs-variable language_">self</span>.pool(F.relu(<span class="hljs-variable language_">self</span>.conv1(x)))<br>        x = <span class="hljs-variable language_">self</span>.pool(F.relu(<span class="hljs-variable language_">self</span>.conv2(x)))<br>        x = x.view(-<span class="hljs-number">1</span>, <span class="hljs-number">16</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>)<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc1(x))<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc2(x))<br>        x = <span class="hljs-variable language_">self</span>.fc3(x)<br>        <span class="hljs-keyword">return</span> x<br>    <br><br>model = GarmentClassifier()<br></code></pre></td></tr></table></figure><h1 id="Loss-Funtion"><a href="#Loss-Funtion" class="headerlink" title="Loss Funtion"></a>Loss Funtion</h1><p>For this example, weâ€™ll be using a <code>cross-entropy loss</code>. For demonstration purposes, weâ€™ll create batches of <strong>dummy output and label values</strong>, run them through the loss function, and examine the result.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">loss_fn = torch.nn.CrossEntropyLoss()<br><br><span class="hljs-comment"># NB: Loss functions expect data in batches, so we&#x27;re creating batches of 4</span><br><span class="hljs-comment"># Represents the model&#x27;s confidence in each of the 10 classes for a given input</span><br>dummy_outputs = torch.rand(<span class="hljs-number">4</span>, <span class="hljs-number">10</span>)<br><span class="hljs-comment"># Represents the correct class among the 10 being tested</span><br>dummy_labels = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>])<br>    <br><span class="hljs-built_in">print</span>(dummy_outputs)<br><span class="hljs-built_in">print</span>(dummy_labels)<br><br>loss = loss_fn(dummy_outputs, dummy_labels)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Total loss for this batch: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(loss.item()))<br><br>tensor([[<span class="hljs-number">0.7915</span>, <span class="hljs-number">0.4766</span>, <span class="hljs-number">0.3735</span>, <span class="hljs-number">0.5340</span>, <span class="hljs-number">0.0799</span>, <span class="hljs-number">0.9948</span>, <span class="hljs-number">0.1870</span>, <span class="hljs-number">0.0507</span>, <span class="hljs-number">0.1183</span>,<br>         <span class="hljs-number">0.9106</span>],<br>        [<span class="hljs-number">0.9666</span>, <span class="hljs-number">0.3765</span>, <span class="hljs-number">0.4324</span>, <span class="hljs-number">0.7354</span>, <span class="hljs-number">0.1953</span>, <span class="hljs-number">0.8906</span>, <span class="hljs-number">0.6882</span>, <span class="hljs-number">0.1925</span>, <span class="hljs-number">0.7076</span>,<br>         <span class="hljs-number">0.8777</span>],<br>        [<span class="hljs-number">0.4412</span>, <span class="hljs-number">0.0325</span>, <span class="hljs-number">0.4886</span>, <span class="hljs-number">0.9350</span>, <span class="hljs-number">0.9792</span>, <span class="hljs-number">0.5580</span>, <span class="hljs-number">0.6199</span>, <span class="hljs-number">0.2478</span>, <span class="hljs-number">0.3619</span>,<br>         <span class="hljs-number">0.8307</span>],<br>        [<span class="hljs-number">0.3287</span>, <span class="hljs-number">0.8571</span>, <span class="hljs-number">0.6046</span>, <span class="hljs-number">0.6719</span>, <span class="hljs-number">0.5982</span>, <span class="hljs-number">0.0540</span>, <span class="hljs-number">0.7193</span>, <span class="hljs-number">0.4764</span>, <span class="hljs-number">0.7451</span>,<br>         <span class="hljs-number">0.8345</span>]])<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>])<br>Total loss <span class="hljs-keyword">for</span> this batch: <span class="hljs-number">2.196722984313965</span><br></code></pre></td></tr></table></figure><h1 id="Optimizer"><a href="#Optimizer" class="headerlink" title="Optimizer"></a>Optimizer</h1><p>For this example, weâ€™ll be using simpleÂ <a href="https://pytorch.org/docs/stable/optim.html">stochastic gradient descent</a>Â with momentum.</p><p>It can be instructive to try some variations on this optimization scheme:</p><ul><li><code>Learning rate</code> determines theÂ sizeÂ of the steps the optimizer takes. What does a different learning rate do to the your training results, in terms of <strong>accuracy and convergence time</strong>?</li><li><code>Momentum</code> nudges the optimizer in the direction of strongest gradient over multiple steps. What does changing this value do to your results?</li><li>Try some different optimization algorithms, such as <code>averaged SGD</code>, <code>Adagrad</code>, or <code>Adam</code>. How do your results differ?</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Optimizers specified in the torch.optim package</span><br>optimizer = torch.optim.SGD(model.parameters(), lr=<span class="hljs-number">0.001</span>, momentum=<span class="hljs-number">0.9</span>)<br></code></pre></td></tr></table></figure><p><code>torch.optim.SGD</code> æ˜¯ PyTorch ä¸­å®ç° <strong>éšæœºæ¢¯åº¦ä¸‹é™ï¼ˆStochastic Gradient Descentï¼‰</strong> çš„ä¼˜åŒ–å™¨ï¼Œæ”¯æŒåŸºç¡€çš„ SGD å’Œå¸¦åŠ¨é‡çš„ SGDï¼ˆMomentum SGDï¼‰ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒå‚æ•°ã€æ•°å­¦åŸç†å’Œä½¿ç”¨æ–¹æ³•ã€‚</p><hr><h2 id="1-æ ¸å¿ƒå‚æ•°"><a href="#1-æ ¸å¿ƒå‚æ•°" class="headerlink" title="1. æ ¸å¿ƒå‚æ•°"></a>1. æ ¸å¿ƒå‚æ•°</h2><table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>params</code></td><td>iterable</td><td>-</td><td>å¾…ä¼˜åŒ–çš„æ¨¡å‹å‚æ•°ï¼ˆé€šå¸¸ä¸º <code>model.parameters()</code>ï¼‰ã€‚</td></tr><tr><td><code>lr</code></td><td>float</td><td>-</td><td><strong>å­¦ä¹ ç‡</strong>ï¼ˆå¿…é¡»æŒ‡å®šï¼‰ï¼Œæ§åˆ¶å‚æ•°æ›´æ–°æ­¥é•¿ã€‚</td></tr><tr><td><code>momentum</code></td><td>float</td><td>0</td><td>åŠ¨é‡å› å­ï¼ˆ0 è¡¨ç¤ºæ™®é€š SGDï¼‰ï¼ŒåŠ é€Ÿæ”¶æ•›å¹¶å‡å°‘éœ‡è¡ã€‚</td></tr><tr><td><code>dampening</code></td><td>float</td><td>0</td><td>åŠ¨é‡é˜»å°¼ï¼ˆé€šå¸¸ä¸ <code>momentum</code> é…åˆä½¿ç”¨ï¼‰ã€‚</td></tr><tr><td><code>weight_decay</code></td><td>float</td><td>0</td><td>L2 æ­£åˆ™åŒ–ç³»æ•°ï¼ˆé˜²æ­¢è¿‡æ‹Ÿåˆï¼‰ã€‚</td></tr><tr><td><code>nesterov</code></td><td>bool</td><td>False</td><td>æ˜¯å¦å¯ç”¨ <strong>Nesterov åŠ¨é‡</strong>ï¼ˆéœ€ <code>momentum &gt; 0</code>ï¼‰ã€‚</td></tr></tbody></table><h2 id="2-æ•°å­¦åŸç†"><a href="#2-æ•°å­¦åŸç†" class="headerlink" title="2. æ•°å­¦åŸç†"></a>2. æ•°å­¦åŸç†</h2><h3 id="1-æ™®é€š-SGDï¼ˆæ— åŠ¨é‡ï¼‰"><a href="#1-æ™®é€š-SGDï¼ˆæ— åŠ¨é‡ï¼‰" class="headerlink" title="(1) æ™®é€š SGDï¼ˆæ— åŠ¨é‡ï¼‰"></a>(1) æ™®é€š SGDï¼ˆæ— åŠ¨é‡ï¼‰</h3><p>å‚æ•°æ›´æ–°å…¬å¼ï¼š<br>$$<br>\theta_{t+1} &#x3D; \theta_t - \eta \cdot \nabla_\theta J(\theta_t)<br>$$</p><ul><li>$\theta_t$ï¼šç¬¬ $t$ æ­¥çš„å‚æ•°ã€‚</li><li>$\eta$ï¼šå­¦ä¹ ç‡ï¼ˆ<code>lr</code>ï¼‰ã€‚</li><li>$\nabla_\theta J(\theta_t)$ï¼šæŸå¤±å‡½æ•°å¯¹å‚æ•°çš„æ¢¯åº¦ã€‚</li></ul><h3 id="2-å¸¦åŠ¨é‡çš„-SGD"><a href="#2-å¸¦åŠ¨é‡çš„-SGD" class="headerlink" title="(2) å¸¦åŠ¨é‡çš„ SGD"></a>(2) å¸¦åŠ¨é‡çš„ SGD</h3><p>å¼•å…¥åŠ¨é‡é¡¹ $v_t$ï¼š<br>$$<br>\begin{align}v_{t+1} &amp;&#x3D; \mu \cdot v_t + \nabla_\theta J(\theta_t)   \<br>\theta_{t+1} &amp;&#x3D; \theta_t - \eta \cdot v_{t+1}\end{align}<br>$$</p><ul><li>$\mu$ï¼šåŠ¨é‡ç³»æ•°ï¼ˆ<code>momentum</code>ï¼Œé€šå¸¸è®¾ä¸º 0.9ï¼‰ã€‚</li><li><strong>åŠ¨é‡é€šè¿‡ç´¯ç§¯å†å²æ¢¯åº¦æ–¹å‘ï¼ŒåŠ é€Ÿæ”¶æ•›å¹¶æŠ‘åˆ¶éœ‡è¡</strong>ã€‚</li></ul><h3 id="3-Nesterov-åŠ¨é‡"><a href="#3-Nesterov-åŠ¨é‡" class="headerlink" title="(3) Nesterov åŠ¨é‡"></a>(3) Nesterov åŠ¨é‡</h3><p>åœ¨è®¡ç®—æ¢¯åº¦æ—¶å…ˆè¿›è¡Œâ€œè¯•æ¢æ€§â€æ›´æ–°ï¼š<br>$$<br>v_{t+1} &#x3D; \mu \cdot v_t + \nabla_\theta J(\theta_t - \eta \mu v_t) \<br>\theta_{t+1} &#x3D; \theta_t - \eta \cdot v_{t+1}<br>$$</p><ul><li>ç›¸æ¯”æ™®é€šåŠ¨é‡ï¼ŒNesterov åŠ¨é‡å¯¹æ¢¯åº¦æ–¹å‘æ›´æ•æ„Ÿï¼Œæ”¶æ•›æ›´å¿«ã€‚</li></ul><hr><h2 id="3-é€‚ç”¨åœºæ™¯"><a href="#3-é€‚ç”¨åœºæ™¯" class="headerlink" title="3. é€‚ç”¨åœºæ™¯"></a>3. é€‚ç”¨åœºæ™¯</h2><table><thead><tr><th>åœºæ™¯</th><th>æ¨èé…ç½®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ç®€å•ä»»åŠ¡</strong></td><td><code>lr=0.01</code>, <code>momentum=0</code></td><td>æ•°æ®é‡å°ã€æ¨¡å‹ç®€å•æ—¶ï¼Œæ™®é€š SGD è¶³å¤Ÿã€‚</td></tr><tr><td><strong>æ·±å±‚ç½‘ç»œè®­ç»ƒ</strong></td><td><code>lr=0.1</code>, <code>momentum=0.9</code></td><td>åŠ¨é‡å¸®åŠ©åŠ é€Ÿæ”¶æ•›ï¼Œé¿å…é™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚</td></tr><tr><td><strong>å¯¹æŠ—è®­ç»ƒ</strong></td><td><code>lr=0.01</code>, <code>momentum=0.9</code>, <code>nesterov=True</code></td><td>Nesterov åŠ¨é‡æå‡å¯¹æŠ—æ ·æœ¬ç”Ÿæˆæ•ˆæœã€‚</td></tr><tr><td><strong>ç¨€ç–æ•°æ®</strong></td><td><code>lr=0.001</code>, <code>weight_decay=1e-4</code></td><td>L2 æ­£åˆ™åŒ–é˜²æ­¢è¿‡æ‹Ÿåˆã€‚</td></tr></tbody></table><hr><h2 id="6-ä¸å…¶ä»–ä¼˜åŒ–å™¨å¯¹æ¯”"><a href="#6-ä¸å…¶ä»–ä¼˜åŒ–å™¨å¯¹æ¯”" class="headerlink" title="6. ä¸å…¶ä»–ä¼˜åŒ–å™¨å¯¹æ¯”"></a>6. ä¸å…¶ä»–ä¼˜åŒ–å™¨å¯¹æ¯”</h2><table><thead><tr><th>ä¼˜åŒ–å™¨</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>SGD</strong></td><td>ç†è®ºæ”¶æ•›æ€§å¥½ï¼Œè°ƒå‚ç®€å•ã€‚</td><td>éœ€æ‰‹åŠ¨è°ƒå­¦ä¹ ç‡ï¼Œå¯èƒ½æ”¶æ•›æ…¢ã€‚</td></tr><tr><td><strong>Adam</strong></td><td>è‡ªé€‚åº”å­¦ä¹ ç‡ï¼Œé€‚åˆå¤§å¤šæ•°ä»»åŠ¡ã€‚</td><td>å¯èƒ½åœ¨æŸäº›ä»»åŠ¡ä¸Šæ³›åŒ–æ€§å·®ã€‚</td></tr><tr><td><strong>RMSprop</strong></td><td>é€‚åˆéå¹³ç¨³ç›®æ ‡ï¼ˆå¦‚ RNNï¼‰ã€‚</td><td>å¯¹è¶…å‚æ•°æ•æ„Ÿã€‚</td></tr></tbody></table><hr><p>é€šè¿‡åˆç†é…ç½® <code>torch.optim.SGD</code>ï¼Œä½ å¯ä»¥åœ¨<strong>è®­ç»ƒé€Ÿåº¦å’Œæ¨¡å‹æ€§èƒ½ä¹‹é—´å–å¾—å¹³è¡¡</strong>ã€‚å¯¹äºå¤æ‚ä»»åŠ¡ï¼Œå»ºè®®å°è¯• <code>Adam</code> æˆ– <code>SGD + åŠ¨é‡</code> å¹¶å¯¹æ¯”æ•ˆæœã€‚</p><h1 id="The-Training-Loop"><a href="#The-Training-Loop" class="headerlink" title="The Training Loop"></a>The Training Loop</h1><p>Below, we have a function that performs one training epoch. It enumerates data from the DataLoader, and on each pass of the loop does the following:</p><ul><li>Gets a batch of training data from the DataLoader</li><li>Zeros the optimizerâ€™s gradients</li><li>Performs an inference - that is, gets predictions from the model for an input batch</li><li>Calculates the loss for that set of predictions vs. the labels on the dataset</li><li>Calculates the backward gradients over the learning weights</li><li>Tells the optimizer to perform one learning step - that is, adjust the modelâ€™s learning weights based on the observed gradients for this batch, according to the optimization algorithm we chose</li><li>It reports on the loss for every 1000 batches.</li><li>Finally, it reports the average per-batch loss for the last 1000 batches, for comparison with a validation run</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">train_one_epoch</span>(<span class="hljs-params">epoch_index, tb_writer</span>):<br>    running_loss = <span class="hljs-number">0.</span><br>    last_loss = <span class="hljs-number">0.</span><br>    <br>    <span class="hljs-comment"># Here, we use enumerate(training_loader) instead of</span><br>    <span class="hljs-comment"># iter(training_loader) so that we can track the batch</span><br>    <span class="hljs-comment"># index and do some intra-epoch reporting</span><br>    <span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(training_loader):<br>        <span class="hljs-comment"># Every data instance is an input + label pair</span><br>        inputs, labels = data<br>        <br>        <span class="hljs-comment"># Zero your gradients for every batch!</span><br>        optimizer.zero_grad()<br>        <br>        <span class="hljs-comment"># Make predictions for this batch</span><br>        outputs = model(inputs)<br>        <br>        <span class="hljs-comment"># Compute the loss and its gradients</span><br>        loss = loss_fn(outputs, labels)<br>        loss.backward()<br>        <br>        <span class="hljs-comment"># Adjust learning weights</span><br>        optimizer.step()<br>        <br>        <span class="hljs-comment"># Gather data and report</span><br>        running_loss += loss.item()<br>        <span class="hljs-keyword">if</span> i % <span class="hljs-number">1000</span> == <span class="hljs-number">999</span>:<br>            last_loss = running_loss / <span class="hljs-number">1000</span> <span class="hljs-comment"># loss per batch</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;  batch &#123;&#125; loss: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i + <span class="hljs-number">1</span>, last_loss))<br>            tb_x = epoch_index * <span class="hljs-built_in">len</span>(training_loader) + i + <span class="hljs-number">1</span><br>            tb_writer.add_scalar(<span class="hljs-string">&#x27;Loss/train&#x27;</span>, last_loss, tb_x)<br>            running_loss = <span class="hljs-number">0.</span><br>            <br>    <span class="hljs-keyword">return</span> last_loss<br></code></pre></td></tr></table></figure><h2 id="Per-Epoch-Activity"><a href="#Per-Epoch-Activity" class="headerlink" title="Per-Epoch Activity"></a>Per-Epoch Activity</h2><p>There are a couple of things weâ€™ll want to do once per epoch:</p><ul><li><strong>Perform validation</strong> by checking our relative loss on a set of data that was not used for training, and report this</li><li><strong>Save a copy of the model</strong></li></ul><p>Here, weâ€™ll do our reporting in TensorBoard. This will require going to the command line to start TensorBoard, and opening it in another browser tab.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Initializing in a separate cell so we can easily add more epochs to the same run</span><br>timestamp = datetime.now().strftime(<span class="hljs-string">&#x27;%Y%m%d_%H%M%S&#x27;</span>)<br>writer = SummaryWriter(<span class="hljs-string">&#x27;runs/fashion_trainer_&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(timestamp))<br>epoch_number = <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python">EPOCHS = <span class="hljs-number">5</span><br><br>best_vloss = <span class="hljs-number">1_000_000.</span><br><br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(EPOCHS):<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;EPOCH &#123;&#125;:&#x27;</span>.<span class="hljs-built_in">format</span>(epoch_number + <span class="hljs-number">1</span>))<br>    <br>    <span class="hljs-comment"># Make sure gradient tracking is on, and do a pass over the data</span><br>    model.train(<span class="hljs-literal">True</span>)<br>    avg_loss = train_one_epoch(epoch_number, writer)<br>    <br>    <span class="hljs-comment"># We don&#x27;t need gradients on to do reporting</span><br>    model.train(<span class="hljs-literal">False</span>)<br>    <br>    running_vloss = <span class="hljs-number">0.0</span><br>    <span class="hljs-keyword">for</span> i, vdata <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(validation_loader):<br>        vinputs, vlabels = vdata<br>        voutputs = model(vinputs)<br>        vloss = loss_fn(voutputs, vlabels)<br>        running_vloss += vloss<br>    <br>    avg_vloss = running_vloss / (i + <span class="hljs-number">1</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;LOSS train &#123;&#125; valid &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(avg_loss, avg_vloss))<br>    <br>    <span class="hljs-comment"># Log the running loss averaged per batch</span><br>    <span class="hljs-comment"># for both training and validation</span><br>    writer.add_scalars(<span class="hljs-string">&#x27;Training vs. Validation Loss&#x27;</span>,<br>                    &#123; <span class="hljs-string">&#x27;Training&#x27;</span> : avg_loss, <span class="hljs-string">&#x27;Validation&#x27;</span> : avg_vloss &#125;,<br>                    epoch_number + <span class="hljs-number">1</span>)<br>    writer.flush()<br>    <br>    <span class="hljs-comment"># Track best performance, and save the model&#x27;s state</span><br>    <span class="hljs-keyword">if</span> avg_vloss &lt; best_vloss:<br>        best_vloss = avg_vloss<br>        model_path = <span class="hljs-string">&#x27;model_&#123;&#125;_&#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(timestamp, epoch_number)<br>        torch.save(model.state_dict(), model_path)<br>    <br>    epoch_number += <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure><p>To load a saved version of the model:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">saved_model = GarmentClassifier()<br>saved_model.load_state_dict(torch.load(PATH))<br></code></pre></td></tr></table></figure><p>Once youâ€™ve loaded the model, itâ€™s ready for whatever you need it for - more training, inference, or analysis.</p><p>Note that if your model has constructor parameters that affect model structure, youâ€™ll need to provide them and configure the model identically to the state in which it was saved.</p><h1 id="Other-Resources"><a href="#Other-Resources" class="headerlink" title="Other Resources"></a>Other Resources</h1><ul><li>Docs on theÂ <a href="https://pytorch.org/docs/stable/data.html">data utilities</a>, including Dataset and DataLoader, at pytorch.org</li><li>AÂ <a href="https://pytorch.org/docs/stable/notes/cuda.html#cuda-memory-pinning">note on the use of pinned memory</a>Â for GPU training</li><li>Documentation on the datasets available inÂ <a href="https://pytorch.org/docs/stable/torchvision/datasets.html">TorchVision</a>,Â <a href="https://pytorch.org/text/datasets.html">TorchText</a>, andÂ <a href="https://pytorch.org/audio/datasets.html">TorchAudio</a></li><li>Documentation on theÂ <a href="https://pytorch.org/docs/stable/nn.html#loss-functions">loss functions</a>Â available in PyTorch</li><li>Documentation on theÂ <a href="https://pytorch.org/docs/stable/optim.html">torch.optim package</a>, which includes optimizers and related tools, such as learning rate scheduling</li><li>A detailedÂ <a href="https://pytorch.org/tutorials/beginner/saving_loading_models.html">tutorial on saving and loading models</a></li><li>TheÂ <a href="https://pytorch.org/tutorials/">Tutorials section of pytorch.org</a>Â contains tutorials on a broad variety of training tasks, including classification in different domains, generative adversarial networks, reinforcement learning, and more</li></ul>]]></content>
    
    
    <categories>
      
      <category>Pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>SGD</tag>
      
      <tag>Optimizer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytorch Tutorial-TensorBoard</title>
    <link href="/2025/08/12/TensorBoard/"/>
    <url>/2025/08/12/TensorBoard/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Pytorchæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>TensorBoard æ˜¯ <strong>TensorFlow</strong> æä¾›çš„å¯è§†åŒ–å·¥å…·ï¼Œç”¨äºå¸®åŠ©å¼€å‘è€… <strong>ç†è§£ã€è°ƒè¯•å’Œä¼˜åŒ–</strong> æ·±åº¦å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒè¿‡ç¨‹ã€‚å®ƒæœ€åˆæ˜¯ä¸º TensorFlow è®¾è®¡çš„ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡é€‚é…å™¨ï¼ˆå¦‚ <code>PyTorch</code> çš„ <code>TensorBoardX</code> æˆ–å®˜æ–¹ <code>torch.utils.tensorboard</code>ï¼‰æ”¯æŒ PyTorch</p><p><code>SummaryWriter</code> æ˜¯ PyTorch ä¸­ <strong>TensorBoard</strong> çš„æ—¥å¿—è®°å½•å·¥å…·ï¼Œç”¨äºå°†è®­ç»ƒè¿‡ç¨‹ä¸­çš„æ•°æ®ï¼ˆå¦‚æ ‡é‡ã€å›¾åƒã€æ¨¡å‹ç»“æ„ç­‰ï¼‰ä¿å­˜åˆ°æŒ‡å®šç›®å½•ï¼Œæ–¹ä¾¿é€šè¿‡ TensorBoard å¯è§†åŒ–åˆ†æï¼Œæ¯”å¦‚<code>writer = SummaryWriter(&#39;runs/fashion_mnist_experiment_1&#39;)</code>ã€‚æœ¬èŠ‚æ¶‰åŠåˆ°çš„<code>method()</code>:</p><table><thead><tr><th>æ–¹æ³•</th><th>å¸¸ç”¨å‚æ•°</th><th>ä¸»è¦ç”¨é€”</th><th>é€‚ç”¨åœºæ™¯ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong><code>add_image()</code></strong></td><td><code>tag</code>ï¼ˆæ ‡ç­¾åï¼‰, <code>img_tensor</code>ï¼ˆå›¾åƒå¼ é‡ï¼‰</td><td>è®°å½•å•å¼ å›¾åƒæˆ–å›¾åƒç½‘æ ¼ï¼ˆå¦‚è¾“å…¥æ•°æ®ã€ç‰¹å¾å›¾ã€GANç”Ÿæˆç»“æœï¼‰</td><td>- å¯è§†åŒ–è®­ç»ƒæ ·æœ¬<br>- æ˜¾ç¤ºå·ç§¯å±‚çš„ç‰¹å¾å›¾</td></tr><tr><td><strong><code>add_scalars()</code></strong></td><td><code>main_tag</code>ï¼ˆä¸»æ ‡ç­¾ï¼‰, <code>tag_scalar_dict</code>ï¼ˆå­æ ‡ç­¾-å€¼å­—å…¸ï¼‰, <code>global_step</code></td><td>åŒæ—¶è®°å½•å¤šä¸ªæ ‡é‡ï¼ˆå¦‚è®­ç»ƒ&#x2F;éªŒè¯æŸå¤±ã€å‡†ç¡®ç‡ï¼‰</td><td>- ç›‘æ§è®­ç»ƒå’ŒéªŒè¯æŸå¤±æ›²çº¿<br>- å¯¹æ¯”ä¸åŒè¶…å‚æ•°çš„æ•ˆæœ</td></tr><tr><td><strong><code>add_graph()</code></strong></td><td><code>model</code>ï¼ˆæ¨¡å‹ï¼‰, <code>input_to_model</code>ï¼ˆç¤ºä¾‹è¾“å…¥ï¼‰</td><td>å¯è§†åŒ–æ¨¡å‹çš„è®¡ç®—å›¾ï¼ˆåŒ…æ‹¬ç½‘ç»œç»“æ„å’Œæ•°æ®æµï¼‰</td><td>- è°ƒè¯•æ¨¡å‹ç»“æ„<br>- æ£€æŸ¥è¾“å…¥&#x2F;è¾“å‡ºç»´åº¦æ˜¯å¦åŒ¹é…</td></tr><tr><td><strong><code>add_embedding()</code></strong></td><td><code>mat</code>ï¼ˆç‰¹å¾çŸ©é˜µï¼‰, <code>metadata</code>ï¼ˆæ ‡ç­¾åˆ—è¡¨ï¼‰, <code>label_img</code>ï¼ˆå¯¹åº”å›¾åƒï¼‰</td><td>å°†é«˜ç»´æ•°æ®ï¼ˆå¦‚è¯å‘é‡ã€éšç©ºé—´ï¼‰é™ç»´å¯è§†åŒ–ï¼ˆPCA&#x2F;t-SNEï¼‰</td><td>- è¯åµŒå…¥å¯è§†åŒ–ï¼ˆWord2Vecï¼‰<br>- è‡ªç¼–ç å™¨éšç©ºé—´åˆ†æ</td></tr></tbody></table><hr><p>In this notebook, weâ€™ll be training a variant of <code>LeNet-5</code> against the <code>Fashion-MNIST</code> dataset. <code>Fashion-MNIST</code> is a set of image tiles depicting various garments, with ten class labels indicating the type of garment depicted.</p><h1 id="Showing-Images"><a href="#Showing-Images" class="headerlink" title="Showing Images"></a>Showing Images</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Gather datasets and prepare them for consumption</span><br>transform = transforms.Compose(<br>    [transforms.ToTensor(),<br>    transforms.Normalize((<span class="hljs-number">0.5</span>,), (<span class="hljs-number">0.5</span>,))])<br><br><span class="hljs-comment"># Store separate training and validations splits in ./data</span><br>training_set = torchvision.datasets.FashionMNIST(<span class="hljs-string">&#x27;./data&#x27;</span>,<br>    download=<span class="hljs-literal">True</span>,<br>    train=<span class="hljs-literal">True</span>,<br>    transform=transform)<br>validation_set = torchvision.datasets.FashionMNIST(<span class="hljs-string">&#x27;./data&#x27;</span>,<br>    download=<span class="hljs-literal">True</span>,<br>    train=<span class="hljs-literal">False</span>,<br>    transform=transform)<br><br>training_loader = torch.utils.data.DataLoader(training_set,<br>                                              batch_size=<span class="hljs-number">4</span>,<br>                                              shuffle=<span class="hljs-literal">True</span>,<br>                                              num_workers=<span class="hljs-number">2</span>)<br><br><br>validation_loader = torch.utils.data.DataLoader(validation_set,<br>                                                batch_size=<span class="hljs-number">4</span>,<br>                                                shuffle=<span class="hljs-literal">False</span>,<br>                                                num_workers=<span class="hljs-number">2</span>)<br><br><span class="hljs-comment"># Class labels</span><br>classes = (<span class="hljs-string">&#x27;T-shirt/top&#x27;</span>, <span class="hljs-string">&#x27;Trouser&#x27;</span>, <span class="hljs-string">&#x27;Pullover&#x27;</span>, <span class="hljs-string">&#x27;Dress&#x27;</span>, <span class="hljs-string">&#x27;Coat&#x27;</span>,<br>        <span class="hljs-string">&#x27;Sandal&#x27;</span>, <span class="hljs-string">&#x27;Shirt&#x27;</span>, <span class="hljs-string">&#x27;Sneaker&#x27;</span>, <span class="hljs-string">&#x27;Bag&#x27;</span>, <span class="hljs-string">&#x27;Ankle Boot&#x27;</span>)<br><br><span class="hljs-comment"># Helper function for inline image display</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">matplotlib_imshow</span>(<span class="hljs-params">img, one_channel=<span class="hljs-literal">False</span></span>):<br>    <span class="hljs-keyword">if</span> one_channel:<br>        img = img.mean(dim=<span class="hljs-number">0</span>)<br>    img = img / <span class="hljs-number">2</span> + <span class="hljs-number">0.5</span>     <span class="hljs-comment"># unnormalize</span><br>    npimg = img.numpy()<br>    <span class="hljs-keyword">if</span> one_channel:<br>        plt.imshow(npimg, cmap=<span class="hljs-string">&quot;Greys&quot;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        plt.imshow(np.transpose(npimg, (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>)))<br>        <br><span class="hljs-comment"># Extract a batch of 4 images</span><br>dataiter = <span class="hljs-built_in">iter</span>(training_loader)<br>images, labels = <span class="hljs-built_in">next</span>(dataiter)<br><br><span class="hljs-comment"># Create a grid from the images and show them</span><br>img_grid = torchvision.utils.make_grid(images)<br>matplotlib_imshow(img_grid, one_channel=<span class="hljs-literal">True</span>)<br><br><span class="hljs-comment"># Default log_dir argument is &quot;runs&quot; - but it&#x27;s good to be specific</span><br><span class="hljs-comment"># torch.utils.tensorboard.SummaryWriter is imported above</span><br>writer = SummaryWriter(<span class="hljs-string">&#x27;runs/fashion_mnist_experiment_1&#x27;</span>)<br><br><span class="hljs-comment"># Write image data to TensorBoard log dir</span><br>writer.add_image(<span class="hljs-string">&#x27;Four Fashion-MNIST Images&#x27;</span>, img_grid)<br>writer.flush()<br><br><span class="hljs-comment"># To view, start TensorBoard on the command line with:</span><br><span class="hljs-comment">#   tensorboard --logdir=runs</span><br><span class="hljs-comment"># ...and open a browser tab to http://localhost:6006/</span><br></code></pre></td></tr></table></figure><ul><li><p><strong>start TensorBoard at the command line and open it in a new browser tab (usually atÂ localhost:6006), you should see the image grid under the IMAGES tab.</strong></p></li><li><p><code>transforms.Compose</code>å®šä¹‰äº†ä¸€ä¸ª <strong>PyTorch æ•°æ®é¢„å¤„ç†æµæ°´çº¿</strong>ï¼Œç”¨äºå°†è¾“å…¥æ•°æ®ï¼ˆå¦‚å›¾åƒï¼‰è½¬æ¢ä¸ºå¼ é‡å¹¶è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†</p></li></ul><table><thead><tr><th align="center">æ­¥éª¤</th><th align="center">æ•°æ®èŒƒå›´</th><th align="center">æ•°æ®å½¢çŠ¶</th></tr></thead><tbody><tr><td align="center">åŸå§‹å›¾åƒï¼ˆPILï¼‰</td><td align="center">[0, 255]</td><td align="center">HÃ—WÃ—C (28Ã—28Ã—1)</td></tr><tr><td align="center"><code>ToTensor</code> å</td><td align="center">[0.0, 1.0]</td><td align="center">CÃ—HÃ—W (1Ã—28Ã—28)</td></tr><tr><td align="center"><code>Normalize</code> å</td><td align="center">[-1.0, 1.0]</td><td align="center">CÃ—HÃ—W (1Ã—28Ã—28)</td></tr></tbody></table><h1 id="Graphing-Scalars-to-Visualize-Training"><a href="#Graphing-Scalars-to-Visualize-Training" class="headerlink" title="Graphing Scalars to Visualize Training"></a>Graphing Scalars to Visualize Training</h1><p>TensorBoard is useful for <strong>tracking the progress and efficacy of your training.</strong> Below, weâ€™ll run a training loop, track some metrics, and save the data for TensorBoardâ€™s consumption.</p><p>Letâ€™s define a model to <strong>categorize</strong> our image tiles, and an <strong>optimizer</strong> and <strong>loss function</strong> for training:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Net</span>(nn.Module):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(Net, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.conv1 = nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-variable language_">self</span>.pool = nn.MaxPool2d(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<br>        <span class="hljs-variable language_">self</span>.conv2 = nn.Conv2d(<span class="hljs-number">6</span>, <span class="hljs-number">16</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-variable language_">self</span>.fc1 = nn.Linear(<span class="hljs-number">16</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>, <span class="hljs-number">120</span>)<br>        <span class="hljs-variable language_">self</span>.fc2 = nn.Linear(<span class="hljs-number">120</span>, <span class="hljs-number">84</span>)<br>        <span class="hljs-variable language_">self</span>.fc3 = nn.Linear(<span class="hljs-number">84</span>, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = <span class="hljs-variable language_">self</span>.pool(F.relu(<span class="hljs-variable language_">self</span>.conv1(x)))<br>        x = <span class="hljs-variable language_">self</span>.pool(F.relu(<span class="hljs-variable language_">self</span>.conv2(x)))<br>        x = x.view(-<span class="hljs-number">1</span>, <span class="hljs-number">16</span> * <span class="hljs-number">4</span> * <span class="hljs-number">4</span>)<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc1(x))<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc2(x))<br>        x = <span class="hljs-variable language_">self</span>.fc3(x)<br>        <span class="hljs-keyword">return</span> x<br>    <br><br>net = Net()<br>criterion = nn.CrossEntropyLoss()<br>optimizer = optim.SGD(net.parameters(), lr=<span class="hljs-number">0.001</span>, momentum=<span class="hljs-number">0.9</span>)<br></code></pre></td></tr></table></figure><ul><li>Now letâ€™s train a single epoch, and evaluate the training vs. validation set losses every 1000 batches:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(validation_loader))<br><span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>):  <span class="hljs-comment"># loop over the dataset multiple times</span><br>    running_loss = <span class="hljs-number">0.0</span><br><br>    <span class="hljs-keyword">for</span> i, data <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(training_loader, <span class="hljs-number">0</span>):<br>        <span class="hljs-comment"># basic training loop</span><br>        inputs, labels = data<br>        optimizer.zero_grad()<br>        outputs = net(inputs)<br>        loss = criterion(outputs, labels)<br>        loss.backward()<br>        optimizer.step()<br><br>        running_loss += loss.item()<br>        <span class="hljs-keyword">if</span> i % <span class="hljs-number">1000</span> == <span class="hljs-number">999</span>:    <span class="hljs-comment"># Every 1000 mini-batches...</span><br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Batch &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(i + <span class="hljs-number">1</span>))<br>            <span class="hljs-comment"># Check against the validation set</span><br>            running_vloss = <span class="hljs-number">0.0</span><br>            <br>            net.train(<span class="hljs-literal">False</span>) <span class="hljs-comment"># Don&#x27;t need to track gradents for validation</span><br>            <span class="hljs-keyword">for</span> j, vdata <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(validation_loader, <span class="hljs-number">0</span>):<br>                vinputs, vlabels = vdata<br>                voutputs = net(vinputs)<br>                vloss = criterion(voutputs, vlabels)<br>                running_vloss += vloss.item()<br>            net.train(<span class="hljs-literal">True</span>) <span class="hljs-comment"># Turn gradients back on for training</span><br>            <br>            avg_loss = running_loss / <span class="hljs-number">1000</span><br>            avg_vloss = running_vloss / <span class="hljs-built_in">len</span>(validation_loader)<br>            <br>            <span class="hljs-comment"># Log the running loss averaged per batch</span><br>            writer.add_scalars(<span class="hljs-string">&#x27;Training vs. Validation Loss&#x27;</span>,<br>                            &#123; <span class="hljs-string">&#x27;Training&#x27;</span> : avg_loss, <span class="hljs-string">&#x27;Validation&#x27;</span> : avg_vloss &#125;,<br>                            epoch * <span class="hljs-built_in">len</span>(training_loader) + i)<br><br>            running_loss = <span class="hljs-number">0.0</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Finished Training&#x27;</span>)<br><br>writer.flush()<br><br><span class="hljs-number">2500</span><br>Batch <span class="hljs-number">1000</span><br>Batch <span class="hljs-number">2000</span><br>â€¦â€¦<br>Batch <span class="hljs-number">14000</span><br>Batch <span class="hljs-number">15000</span><br>Finished Training<br></code></pre></td></tr></table></figure></li><li><strong>Switch to your open TensorBoard and have a look at the SCALARS tab.</strong><br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250810182045760.svg"></li></ul><h1 id="Visualizing-Your-Model"><a href="#Visualizing-Your-Model" class="headerlink" title="Visualizing Your Model"></a>Visualizing Your Model</h1><p>TensorBoard can also be used to examine the data flow within your model. To do this, call theÂ <code>add_graph()</code>Â method with a model and sample input.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Again, grab a single mini-batch of images</span><br>dataiter = <span class="hljs-built_in">iter</span>(training_loader)<br>images, labels = <span class="hljs-built_in">next</span>(dataiter)<br><br><span class="hljs-comment"># add_graph() will trace the sample input through your model,</span><br><span class="hljs-comment"># and render it as a graph.</span><br>writer.add_graph(net, images)<br>writer.flush()<br></code></pre></td></tr></table></figure><p><strong>add_graph() will trace the sample input through your model</strong><br>When you switch over to TensorBoard, you should see a GRAPHS tab. Double-click the â€œNETâ€ node to see the <strong>layers and data flow</strong> within your model.<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250810181729149.png"></p><h1 id="Visualizing-Your-Dataset"><a href="#Visualizing-Your-Dataset" class="headerlink" title="Visualizing Your Dataset"></a>Visualizing Your Dataset</h1><p>The 28-by-28 image tiles weâ€™re using can be modeled as 784-dimensional vectors (28 * 28 &#x3D; 784). It can be instructive to <strong>project this to a lower-dimensional representation</strong>. TheÂ <code>add_embedding()</code>Â method will project a set of data onto the <strong>three dimensions with highest variance</strong>, and display them as an <strong>interactive 3D chart</strong>. TheÂ <code>add_embedding()</code>Â method does this automatically by projecting to the three dimensions with highest variance.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># Select a random subset of data and corresponding labels</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">select_n_random</span>(<span class="hljs-params">data, labels, n=<span class="hljs-number">100</span></span>):<br>    <span class="hljs-keyword">assert</span> <span class="hljs-built_in">len</span>(data) == <span class="hljs-built_in">len</span>(labels)<br><br>    perm = torch.randperm(<span class="hljs-built_in">len</span>(data))<br>    <span class="hljs-keyword">return</span> data[perm][:n], labels[perm][:n]<br><br><span class="hljs-comment"># Extract a random subset of data</span><br>images, labels = select_n_random(training_set.data, training_set.targets)<br><br><span class="hljs-comment"># get the class labels for each image</span><br>class_labels = [classes[label] <span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> labels]<br><br><span class="hljs-comment"># log embeddings</span><br>features = images.view(-<span class="hljs-number">1</span>, <span class="hljs-number">28</span> * <span class="hljs-number">28</span>)<br>writer.add_embedding(features,<br>                    metadata=class_labels,<br>                    label_img=images.unsqueeze(<span class="hljs-number">1</span>))<br>writer.flush()<br>writer.close()<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250811102153098.png"></p><h1 id="Other-Resources"><a href="#Other-Resources" class="headerlink" title="Other Resources"></a>Other Resources</h1><p>For more information, have a look at:</p><ul><li><a href="https://pytorch.org/docs/stable/tensorboard.html?highlight=summarywriter">PyTorch documentation onÂ <code>torch.utils.tensorboard.SummaryWriter</code></a>Â onÂ <a href="https://pytorch.org/">PyTorch.org</a></li><li>Tensorboard tutorial content in theÂ <a href="https://pytorch.org/tutorials/">PyTorch.org Tutorials</a></li><li>For more information about TensorBoard, see theÂ <a href="https://www.tensorflow.org/tensorboard">TensorBoard documentation</a></li></ul>]]></content>
    
    
    <categories>
      
      <category>Pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>SummaryWritter</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytorch Tutorial-Building models</title>
    <link href="/2025/08/12/Building%20models/"/>
    <url>/2025/08/12/Building%20models/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Pytorchæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="torch-nn-Module-torch-nn-Parameter"><a href="#torch-nn-Module-torch-nn-Parameter" class="headerlink" title="torch.nn.Module &amp; torch.nn.Parameter"></a>torch.nn.Module &amp; torch.nn.Parameter</h1><p>In this section, weâ€™ll be discussing some of the tools PyTorch makes available for building deep learning networks.</p><p>Except forÂ <code>Parameter</code>, the classes we discuss in this section are all subclasses ofÂ <code>torch.nn.Module</code>. This is the PyTorch base class meant to encapsulate(å°è£…) behaviors specific to PyTorch Models and their components.</p><p>One important behavior ofÂ <code>torch.nn.Module</code>Â is <strong>registering parameters</strong>. If a particularÂ <code>Module</code>Â subclass has learning weights, these weights are expressed as instances ofÂ <code>torch.nn.Parameter</code>. TheÂ <code>Parameter</code>Â class is a subclass ofÂ <code>torch.Tensor</code>, with the special behavior that when they are assigned as attributes of aÂ <code>Module</code>, they are added to the list of that modules parameters. These parameters may be accessed through theÂ <code>parameters()</code>Â method on theÂ <code>Module</code>Â class.</p><p>As a simple example, hereâ€™s a very simple model with two linear layers and an activation function. Weâ€™ll create an instance of it and ask it to report on its parameters:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TinyModel</span>(torch.nn.Module):<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(TinyModel, <span class="hljs-variable language_">self</span>).__init__()<br>        <br>        <span class="hljs-variable language_">self</span>.linear1 = torch.nn.Linear(<span class="hljs-number">100</span>, <span class="hljs-number">200</span>)<br>        <span class="hljs-variable language_">self</span>.activation = torch.nn.ReLU()<br>        <span class="hljs-variable language_">self</span>.linear2 = torch.nn.Linear(<span class="hljs-number">200</span>, <span class="hljs-number">10</span>)<br>        <span class="hljs-variable language_">self</span>.softmax = torch.nn.Softmax()<br>    <br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        x = <span class="hljs-variable language_">self</span>.linear1(x)<br>        x = <span class="hljs-variable language_">self</span>.activation(x)<br>        x = <span class="hljs-variable language_">self</span>.linear2(x)<br>        x = <span class="hljs-variable language_">self</span>.softmax(x)<br>        <span class="hljs-keyword">return</span> x<br><br>tinymodel = TinyModel()<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The model:&#x27;</span>)<br><span class="hljs-built_in">print</span>(tinymodel)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n\nJust one layer:&#x27;</span>)<br><span class="hljs-built_in">print</span>(tinymodel.linear2)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n\nModel params:&#x27;</span>)<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> tinymodel.parameters():<br>    <span class="hljs-built_in">print</span>(param)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n\nLayer params:&#x27;</span>)<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> tinymodel.linear2.parameters():<br>    <span class="hljs-built_in">print</span>(param)<br><br>The model:<br>TinyModel(<br>  (linear1): Linear(in_features=<span class="hljs-number">100</span>, out_features=<span class="hljs-number">200</span>, bias=<span class="hljs-literal">True</span>)<br>  (activation): ReLU()<br>  (linear2): Linear(in_features=<span class="hljs-number">200</span>, out_features=<span class="hljs-number">10</span>, bias=<span class="hljs-literal">True</span>)<br>  (softmax): Softmax(dim=<span class="hljs-literal">None</span>)<br>)<br><br>Just one layer:<br>Linear(in_features=<span class="hljs-number">200</span>, out_features=<span class="hljs-number">10</span>, bias=<span class="hljs-literal">True</span>)<br><br>Model params:<br>Parameter containing:<br>tensor([[-<span class="hljs-number">0.0897</span>,  <span class="hljs-number">0.0595</span>,  <span class="hljs-number">0.0172</span>,  ...,  <span class="hljs-number">0.0947</span>, -<span class="hljs-number">0.0384</span>, -<span class="hljs-number">0.0024</span>],<br>        [ <span class="hljs-number">0.0102</span>, -<span class="hljs-number">0.0393</span>, -<span class="hljs-number">0.0865</span>,  ...,  <span class="hljs-number">0.0961</span>,  <span class="hljs-number">0.0694</span>,  <span class="hljs-number">0.0555</span>],<br>        [-<span class="hljs-number">0.0251</span>, -<span class="hljs-number">0.0372</span>,  <span class="hljs-number">0.0264</span>,  ...,  <span class="hljs-number">0.0535</span>, -<span class="hljs-number">0.0535</span>,  <span class="hljs-number">0.0745</span>],<br>        ...,<br>        [-<span class="hljs-number">0.0554</span>, -<span class="hljs-number">0.0434</span>, -<span class="hljs-number">0.0032</span>,  ..., -<span class="hljs-number">0.0441</span>, -<span class="hljs-number">0.0671</span>,  <span class="hljs-number">0.0100</span>],<br>        [ <span class="hljs-number">0.0469</span>, -<span class="hljs-number">0.0174</span>,  <span class="hljs-number">0.0883</span>,  ..., -<span class="hljs-number">0.0825</span>, -<span class="hljs-number">0.0478</span>,  <span class="hljs-number">0.0232</span>],<br>        [ <span class="hljs-number">0.0877</span>, -<span class="hljs-number">0.0416</span>, -<span class="hljs-number">0.0567</span>,  ..., -<span class="hljs-number">0.0455</span>, -<span class="hljs-number">0.0185</span>, -<span class="hljs-number">0.0559</span>]],<br>       requires_grad=<span class="hljs-literal">True</span>)<br>Parameter containing:<br>tensor([ <span class="hljs-number">0.0692</span>, -<span class="hljs-number">0.0213</span>,  <span class="hljs-number">0.0033</span>,  <span class="hljs-number">0.0528</span>,  <span class="hljs-number">0.0394</span>, -<span class="hljs-number">0.0518</span>, -<span class="hljs-number">0.0535</span>, -<span class="hljs-number">0.0269</span>,<br>         <span class="hljs-number">0.0172</span>, -<span class="hljs-number">0.0897</span>,  <span class="hljs-number">0.0809</span>,  <span class="hljs-number">0.0125</span>, -<span class="hljs-number">0.0566</span>, -<span class="hljs-number">0.0490</span>, -<span class="hljs-number">0.0566</span>,  <span class="hljs-number">0.0478</span>,<br>        -<span class="hljs-number">0.0488</span>,  <span class="hljs-number">0.0989</span>, -<span class="hljs-number">0.0641</span>, -<span class="hljs-number">0.0068</span>,  <span class="hljs-number">0.0420</span>,  <span class="hljs-number">0.0358</span>,  <span class="hljs-number">0.0186</span>,  <span class="hljs-number">0.0748</span>,<br>        -<span class="hljs-number">0.0308</span>,  <span class="hljs-number">0.0472</span>,  <span class="hljs-number">0.0568</span>,  <span class="hljs-number">0.0026</span>, -<span class="hljs-number">0.0920</span>, -<span class="hljs-number">0.0553</span>,  <span class="hljs-number">0.0737</span>,  <span class="hljs-number">0.0881</span>,<br>        -<span class="hljs-number">0.0992</span>,  <span class="hljs-number">0.0300</span>, -<span class="hljs-number">0.0234</span>, -<span class="hljs-number">0.0443</span>,  <span class="hljs-number">0.0221</span>, -<span class="hljs-number">0.0552</span>, -<span class="hljs-number">0.0067</span>,  <span class="hljs-number">0.0612</span>,<br>         <span class="hljs-number">0.0281</span>, -<span class="hljs-number">0.0199</span>, -<span class="hljs-number">0.0818</span>,  <span class="hljs-number">0.0608</span>,  <span class="hljs-number">0.0975</span>, -<span class="hljs-number">0.0069</span>,  <span class="hljs-number">0.0923</span>, -<span class="hljs-number">0.0741</span>,<br>         <span class="hljs-number">0.0516</span>, -<span class="hljs-number">0.0787</span>, -<span class="hljs-number">0.0593</span>, -<span class="hljs-number">0.0303</span>,  <span class="hljs-number">0.0115</span>,  <span class="hljs-number">0.0701</span>, -<span class="hljs-number">0.0171</span>,  <span class="hljs-number">0.0291</span>,<br>         <span class="hljs-number">0.0152</span>,  <span class="hljs-number">0.0424</span>, -<span class="hljs-number">0.0106</span>, -<span class="hljs-number">0.0568</span>,  <span class="hljs-number">0.0689</span>,  <span class="hljs-number">0.0308</span>,  <span class="hljs-number">0.0863</span>, -<span class="hljs-number">0.0436</span>,<br>         <span class="hljs-number">0.0061</span>,  <span class="hljs-number">0.0822</span>, -<span class="hljs-number">0.0556</span>, -<span class="hljs-number">0.0668</span>,  <span class="hljs-number">0.0828</span>,  <span class="hljs-number">0.0758</span>,  <span class="hljs-number">0.0888</span>, -<span class="hljs-number">0.0535</span>,<br>         <span class="hljs-number">0.0648</span>,  <span class="hljs-number">0.0160</span>, -<span class="hljs-number">0.0932</span>,  <span class="hljs-number">0.0787</span>,  <span class="hljs-number">0.0546</span>, -<span class="hljs-number">0.0973</span>,  <span class="hljs-number">0.0973</span>,  <span class="hljs-number">0.0908</span>,<br>         <span class="hljs-number">0.0108</span>, -<span class="hljs-number">0.0090</span>,  <span class="hljs-number">0.0644</span>,  <span class="hljs-number">0.0990</span>,  <span class="hljs-number">0.0384</span>,  <span class="hljs-number">0.0852</span>,  <span class="hljs-number">0.0864</span>,  <span class="hljs-number">0.0565</span>,<br>        -<span class="hljs-number">0.0974</span>,  <span class="hljs-number">0.0768</span>,  <span class="hljs-number">0.0337</span>,  <span class="hljs-number">0.0590</span>, -<span class="hljs-number">0.0362</span>,  <span class="hljs-number">0.0914</span>,  <span class="hljs-number">0.0038</span>,  <span class="hljs-number">0.0516</span>,<br>        -<span class="hljs-number">0.0632</span>, -<span class="hljs-number">0.0569</span>, -<span class="hljs-number">0.0475</span>, -<span class="hljs-number">0.0564</span>, -<span class="hljs-number">0.0192</span>,  <span class="hljs-number">0.0279</span>, -<span class="hljs-number">0.0243</span>, -<span class="hljs-number">0.0621</span>,<br>        -<span class="hljs-number">0.0559</span>,  <span class="hljs-number">0.0921</span>, -<span class="hljs-number">0.0583</span>, -<span class="hljs-number">0.0508</span>,  <span class="hljs-number">0.0401</span>,  <span class="hljs-number">0.0414</span>, -<span class="hljs-number">0.0770</span>, -<span class="hljs-number">0.0378</span>,<br>        -<span class="hljs-number">0.0786</span>, -<span class="hljs-number">0.0110</span>, -<span class="hljs-number">0.0289</span>, -<span class="hljs-number">0.0778</span>,  <span class="hljs-number">0.0427</span>, -<span class="hljs-number">0.0105</span>,  <span class="hljs-number">0.0680</span>,  <span class="hljs-number">0.0146</span>,<br>        -<span class="hljs-number">0.0859</span>,  <span class="hljs-number">0.0440</span>, -<span class="hljs-number">0.0420</span>,  <span class="hljs-number">0.0613</span>,  <span class="hljs-number">0.0321</span>,  <span class="hljs-number">0.0289</span>,  <span class="hljs-number">0.0668</span>, -<span class="hljs-number">0.0028</span>,<br>        -<span class="hljs-number">0.0421</span>, -<span class="hljs-number">0.0372</span>,  <span class="hljs-number">0.0391</span>,  <span class="hljs-number">0.0479</span>, -<span class="hljs-number">0.0232</span>, -<span class="hljs-number">0.0610</span>, -<span class="hljs-number">0.0355</span>, -<span class="hljs-number">0.0896</span>,<br>         <span class="hljs-number">0.0864</span>,  <span class="hljs-number">0.0345</span>, -<span class="hljs-number">0.0252</span>, -<span class="hljs-number">0.0385</span>,  <span class="hljs-number">0.0832</span>,  <span class="hljs-number">0.0868</span>, -<span class="hljs-number">0.0514</span>,  <span class="hljs-number">0.0178</span>,<br>         <span class="hljs-number">0.0716</span>,  <span class="hljs-number">0.0796</span>, -<span class="hljs-number">0.0794</span>, -<span class="hljs-number">0.0538</span>, -<span class="hljs-number">0.0163</span>, -<span class="hljs-number">0.0929</span>, -<span class="hljs-number">0.0643</span>,  <span class="hljs-number">0.0782</span>,<br>        -<span class="hljs-number">0.0047</span>,  <span class="hljs-number">0.0024</span>, -<span class="hljs-number">0.0610</span>, -<span class="hljs-number">0.0259</span>,  <span class="hljs-number">0.0719</span>,  <span class="hljs-number">0.0840</span>,  <span class="hljs-number">0.0946</span>, -<span class="hljs-number">0.0291</span>,<br>         <span class="hljs-number">0.0131</span>, -<span class="hljs-number">0.0157</span>,  <span class="hljs-number">0.0309</span>, -<span class="hljs-number">0.0375</span>, -<span class="hljs-number">0.0800</span>, -<span class="hljs-number">0.0594</span>, -<span class="hljs-number">0.0233</span>, -<span class="hljs-number">0.0928</span>,<br>        -<span class="hljs-number">0.0028</span>, -<span class="hljs-number">0.0729</span>,  <span class="hljs-number">0.0889</span>, -<span class="hljs-number">0.0377</span>, -<span class="hljs-number">0.0685</span>,  <span class="hljs-number">0.0974</span>, -<span class="hljs-number">0.0860</span>, -<span class="hljs-number">0.0819</span>,<br>        -<span class="hljs-number">0.0918</span>, -<span class="hljs-number">0.0750</span>, -<span class="hljs-number">0.0327</span>, -<span class="hljs-number">0.0245</span>, -<span class="hljs-number">0.0058</span>, -<span class="hljs-number">0.0875</span>, -<span class="hljs-number">0.0667</span>, -<span class="hljs-number">0.0569</span>,<br>         <span class="hljs-number">0.0075</span>,  <span class="hljs-number">0.0986</span>,  <span class="hljs-number">0.0977</span>, -<span class="hljs-number">0.0291</span>,  <span class="hljs-number">0.0081</span>,  <span class="hljs-number">0.0127</span>,  <span class="hljs-number">0.0544</span>,  <span class="hljs-number">0.0711</span>,<br>         <span class="hljs-number">0.0910</span>,  <span class="hljs-number">0.0522</span>, -<span class="hljs-number">0.0874</span>, -<span class="hljs-number">0.0217</span>,  <span class="hljs-number">0.0454</span>, -<span class="hljs-number">0.0726</span>,  <span class="hljs-number">0.0791</span>, -<span class="hljs-number">0.0459</span>],<br>       requires_grad=<span class="hljs-literal">True</span>)<br>Parameter containing:<br>tensor([[-<span class="hljs-number">0.0508</span>,  <span class="hljs-number">0.0529</span>,  <span class="hljs-number">0.0234</span>,  ..., -<span class="hljs-number">0.0385</span>,  <span class="hljs-number">0.0078</span>, -<span class="hljs-number">0.0030</span>],<br>        [ <span class="hljs-number">0.0281</span>,  <span class="hljs-number">0.0437</span>, -<span class="hljs-number">0.0461</span>,  ..., -<span class="hljs-number">0.0655</span>, -<span class="hljs-number">0.0253</span>, -<span class="hljs-number">0.0222</span>],<br>        [ <span class="hljs-number">0.0243</span>,  <span class="hljs-number">0.0178</span>, -<span class="hljs-number">0.0009</span>,  ...,  <span class="hljs-number">0.0383</span>, -<span class="hljs-number">0.0507</span>, -<span class="hljs-number">0.0083</span>],<br>        ...,<br>        [-<span class="hljs-number">0.0700</span>, -<span class="hljs-number">0.0090</span>,  <span class="hljs-number">0.0153</span>,  ...,  <span class="hljs-number">0.0161</span>,  <span class="hljs-number">0.0610</span>,  <span class="hljs-number">0.0687</span>],<br>        [-<span class="hljs-number">0.0509</span>, -<span class="hljs-number">0.0291</span>, -<span class="hljs-number">0.0591</span>,  ...,  <span class="hljs-number">0.0173</span>, -<span class="hljs-number">0.0191</span>, -<span class="hljs-number">0.0705</span>],<br>        [-<span class="hljs-number">0.0090</span>,  <span class="hljs-number">0.0428</span>, -<span class="hljs-number">0.0528</span>,  ...,  <span class="hljs-number">0.0278</span>, -<span class="hljs-number">0.0153</span>, -<span class="hljs-number">0.0266</span>]],<br>       requires_grad=<span class="hljs-literal">True</span>)<br>Parameter containing:<br>tensor([-<span class="hljs-number">0.0357</span>, -<span class="hljs-number">0.0617</span>,  <span class="hljs-number">0.0027</span>, -<span class="hljs-number">0.0098</span>, -<span class="hljs-number">0.0083</span>, -<span class="hljs-number">0.0461</span>, -<span class="hljs-number">0.0076</span>,  <span class="hljs-number">0.0510</span>,<br>        -<span class="hljs-number">0.0564</span>,  <span class="hljs-number">0.0298</span>], requires_grad=<span class="hljs-literal">True</span>)<br><br>Layer params:<br>Parameter containing:<br>tensor([[-<span class="hljs-number">0.0508</span>,  <span class="hljs-number">0.0529</span>,  <span class="hljs-number">0.0234</span>,  ..., -<span class="hljs-number">0.0385</span>,  <span class="hljs-number">0.0078</span>, -<span class="hljs-number">0.0030</span>],<br>        [ <span class="hljs-number">0.0281</span>,  <span class="hljs-number">0.0437</span>, -<span class="hljs-number">0.0461</span>,  ..., -<span class="hljs-number">0.0655</span>, -<span class="hljs-number">0.0253</span>, -<span class="hljs-number">0.0222</span>],<br>        [ <span class="hljs-number">0.0243</span>,  <span class="hljs-number">0.0178</span>, -<span class="hljs-number">0.0009</span>,  ...,  <span class="hljs-number">0.0383</span>, -<span class="hljs-number">0.0507</span>, -<span class="hljs-number">0.0083</span>],<br>        ...,<br>        [-<span class="hljs-number">0.0700</span>, -<span class="hljs-number">0.0090</span>,  <span class="hljs-number">0.0153</span>,  ...,  <span class="hljs-number">0.0161</span>,  <span class="hljs-number">0.0610</span>,  <span class="hljs-number">0.0687</span>],<br>        [-<span class="hljs-number">0.0509</span>, -<span class="hljs-number">0.0291</span>, -<span class="hljs-number">0.0591</span>,  ...,  <span class="hljs-number">0.0173</span>, -<span class="hljs-number">0.0191</span>, -<span class="hljs-number">0.0705</span>],<br>        [-<span class="hljs-number">0.0090</span>,  <span class="hljs-number">0.0428</span>, -<span class="hljs-number">0.0528</span>,  ...,  <span class="hljs-number">0.0278</span>, -<span class="hljs-number">0.0153</span>, -<span class="hljs-number">0.0266</span>]],<br>       requires_grad=<span class="hljs-literal">True</span>)<br>Parameter containing:<br>tensor([-<span class="hljs-number">0.0357</span>, -<span class="hljs-number">0.0617</span>,  <span class="hljs-number">0.0027</span>, -<span class="hljs-number">0.0098</span>, -<span class="hljs-number">0.0083</span>, -<span class="hljs-number">0.0461</span>, -<span class="hljs-number">0.0076</span>,  <span class="hljs-number">0.0510</span>,<br>        -<span class="hljs-number">0.0564</span>,  <span class="hljs-number">0.0298</span>], requires_grad=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure><ul><li><strong>This shows the fundamental structure of a PyTorch model: there is anÂ <code>__init__()</code>Â method that defines the layers and other components of a model, and aÂ <code>forward()</code>Â method where the computation gets done. Note that we can print the model, or any of its submodules, to learn about its structure.</strong></li></ul><h1 id="Common-Layer-Types"><a href="#Common-Layer-Types" class="headerlink" title="Common Layer Types"></a>Common Layer Types</h1><h2 id="Linear-Layers"><a href="#Linear-Layers" class="headerlink" title="Linear Layers"></a>Linear Layers</h2><p>The most basic type of neural network layer is aÂ <em>linear</em>Â orÂ <em>fully connected</em>Â layer. This is a layer where <strong>every input influences every output</strong> of the layer to a degree specified by the layerâ€™s <code>weights</code>. If a model hasÂ <em>m</em>Â inputs andÂ <em>n</em>Â outputs, the weights will be anÂ <em>m *Â n</em>Â matrix. For example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">lin = torch.nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<br>x = torch.rand(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Input:&#x27;</span>)<br><span class="hljs-built_in">print</span>(x)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n\nWeight and Bias parameters:&#x27;</span>)<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> lin.parameters():<br>    <span class="hljs-built_in">print</span>(param)<br><br>y = lin(x)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n\nOutput:&#x27;</span>)<br><span class="hljs-built_in">print</span>(y)<br><br>Input:<br>tensor([[<span class="hljs-number">0.2807</span>, <span class="hljs-number">0.5842</span>, <span class="hljs-number">0.7967</span>]])<br><br>Weight <span class="hljs-keyword">and</span> Bias parameters:<br>Parameter containing:<br>tensor([[-<span class="hljs-number">0.1719</span>,  <span class="hljs-number">0.4691</span>, -<span class="hljs-number">0.0654</span>],<br>        [-<span class="hljs-number">0.2522</span>,  <span class="hljs-number">0.5453</span>, -<span class="hljs-number">0.5438</span>]], requires_grad=<span class="hljs-literal">True</span>)<br>Parameter containing:<br>tensor([<span class="hljs-number">0.2956</span>, <span class="hljs-number">0.2001</span>], requires_grad=<span class="hljs-literal">True</span>)<br><br>Output:<br>tensor([[<span class="hljs-number">0.4693</span>, <span class="hljs-number">0.0146</span>]], grad_fn=&lt;AddmmBackward&gt;)<br></code></pre></td></tr></table></figure><ul><li>Parameterä¼šè‡ªåŠ¨å¼€å¯<code>autograd</code></li><li>Linear layers are used widely in deep learning models. One of the most common places youâ€™ll see them is in <code>classifier models</code></li></ul><hr><h2 id="Convolutional-Layers"><a href="#Convolutional-Layers" class="headerlink" title="Convolutional Layers"></a>Convolutional Layers</h2><ul><li><em>Convolutional</em>Â layers are built to handle data with <strong>a high degree of spatial correlation</strong>. They are very commonly used in computer vision, where they detect close groupings of features which the compose into higher-level features. They pop up in other contexts too - for example, in NLP applications, where the a wordâ€™s immediate context (that is, the other words nearby in the sequence) can affect the meaning of a sentence.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch.functional <span class="hljs-keyword">as</span> F<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LeNet</span>(torch.nn.Module):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">super</span>(LeNet, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-comment"># 1 input image channel (black &amp; white), 6 output channels, 3x3 square convolution</span><br>        <span class="hljs-comment"># kernel</span><br>        <span class="hljs-variable language_">self</span>.conv1 = torch.nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>)<br>        <span class="hljs-variable language_">self</span>.conv2 = torch.nn.Conv2d(<span class="hljs-number">6</span>, <span class="hljs-number">16</span>, <span class="hljs-number">3</span>)<br>        <span class="hljs-comment"># an affine operation: y = Wx + b</span><br>        <span class="hljs-variable language_">self</span>.fc1 = torch.nn.Linear(<span class="hljs-number">16</span> * <span class="hljs-number">6</span> * <span class="hljs-number">6</span>, <span class="hljs-number">120</span>)  <span class="hljs-comment"># 6*6 from image dimension</span><br>        <span class="hljs-variable language_">self</span>.fc2 = torch.nn.Linear(<span class="hljs-number">120</span>, <span class="hljs-number">84</span>)<br>        <span class="hljs-variable language_">self</span>.fc3 = torch.nn.Linear(<span class="hljs-number">84</span>, <span class="hljs-number">10</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):<br>        <span class="hljs-comment"># Max pooling over a (2, 2) window</span><br>        x = F.max_pool2d(F.relu(<span class="hljs-variable language_">self</span>.conv1(x)), (<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))<br>        <span class="hljs-comment"># If the size is a square you can only specify a single number</span><br>        x = F.max_pool2d(F.relu(<span class="hljs-variable language_">self</span>.conv2(x)), <span class="hljs-number">2</span>)<br>        x = x.view(-<span class="hljs-number">1</span>, <span class="hljs-variable language_">self</span>.num_flat_features(x))<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc1(x))<br>        x = F.relu(<span class="hljs-variable language_">self</span>.fc2(x))<br>        x = <span class="hljs-variable language_">self</span>.fc3(x)<br>        <span class="hljs-keyword">return</span> x<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">num_flat_features</span>(<span class="hljs-params">self, x</span>):<br>        size = x.size()[<span class="hljs-number">1</span>:]  <span class="hljs-comment"># all dimensions except the batch dimension</span><br>        num_features = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> size:<br>            num_features *= s<br>        <span class="hljs-keyword">return</span> num_features<br></code></pre></td></tr></table></figure><ul><li>å·ç§¯å±‚æ„é€ å‡½æ•°çš„<strong>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¾“å…¥é€šé“çš„æ•°é‡</strong>ï¼Œ<strong>ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¾“å‡ºç‰¹å¾çš„æ•°é‡</strong>ï¼Œ<strong>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯çª—å£æˆ–<code>kernel</code>å†…æ ¸å¤§å°</strong></li></ul><hr><p>å…³äºå·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ä¸­ <strong>å·ç§¯å±‚ï¼ˆConvolutional Layerï¼‰</strong>ã€<strong>ReLUæ¿€æ´»å‡½æ•°</strong> å’Œ <strong>æœ€å¤§æ± åŒ–å±‚ï¼ˆMax Pooling Layerï¼‰</strong> çš„å¤„ç†æµç¨‹åŠå…¶ä½œç”¨ã€‚ä»¥ä¸‹æ˜¯é€æ­¥è§£æï¼š</p><h3 id="1-å·ç§¯å±‚ï¼ˆConvolutional-Layerï¼‰çš„è¾“å‡º"><a href="#1-å·ç§¯å±‚ï¼ˆConvolutional-Layerï¼‰çš„è¾“å‡º" class="headerlink" title="1. å·ç§¯å±‚ï¼ˆConvolutional Layerï¼‰çš„è¾“å‡º"></a>1. å·ç§¯å±‚ï¼ˆConvolutional Layerï¼‰çš„è¾“å‡º</h3><ul><li><strong>è¾“å…¥å‡è®¾</strong>ï¼šå‡è®¾è¾“å…¥æ˜¯ä¸€ä¸ªå•é€šé“ï¼ˆç°åº¦ï¼‰çš„ <code>32x32</code> å›¾åƒï¼Œç»è¿‡ç¬¬ä¸€å±‚å·ç§¯æ“ä½œï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-variable language_">self</span>.conv1 = torch.nn.Conv2d(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">5</span>)  <span class="hljs-comment"># è¾“å…¥é€šé“1ï¼Œè¾“å‡ºé€šé“6ï¼Œå·ç§¯æ ¸5x5</span><br></code></pre></td></tr></table></figure></li><li><strong>è¾“å‡ºå°ºå¯¸</strong>ï¼š<br>å·ç§¯åè¾“å‡ºçš„å°ºå¯¸è®¡ç®—å…¬å¼ä¸ºï¼š<br>$$<br>\text{è¾“å‡ºå°ºå¯¸} &#x3D; \left\lfloor \frac{\text{è¾“å…¥å°ºå¯¸} - \text{å·ç§¯æ ¸å°ºå¯¸} + 2 \times \text{å¡«å……}}{\text{æ­¥é•¿}} \right\rfloor + 1<br>$$<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>padding=0</code>ï¼ˆæ— å¡«å……ï¼‰ï¼Œ<code>stride=1</code>ï¼ˆæ­¥é•¿ä¸º1ï¼‰ï¼Œå› æ­¤ï¼š32 - 5 + 1 &#x3D; 28<ul><li><strong>è¾“å‡ºå¼ é‡å½¢çŠ¶</strong>ï¼š<code>[batch_size, 6, 28, 28]</code><br>ï¼ˆ6ä¸ªé€šé“ï¼Œæ¯ä¸ªé€šé“çš„æ¿€æ´»å›¾å¤§å°ä¸º <code>28x28</code>ï¼‰ã€‚</li></ul></li></ul><h3 id="2-ReLUæ¿€æ´»å‡½æ•°çš„ä½œç”¨"><a href="#2-ReLUæ¿€æ´»å‡½æ•°çš„ä½œç”¨" class="headerlink" title="2. ReLUæ¿€æ´»å‡½æ•°çš„ä½œç”¨"></a>2. ReLUæ¿€æ´»å‡½æ•°çš„ä½œç”¨</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">F.relu(<span class="hljs-variable language_">self</span>.conv1(x))<br></code></pre></td></tr></table></figure><ul><li><strong>ReLUï¼ˆRectified Linear Unitï¼‰</strong>ï¼šå®šä¹‰ä¸º  $\text{ReLU}(x) &#x3D; \max(0, x)$ ã€‚</li><li><strong>åŠŸèƒ½</strong>ï¼š<ol><li><strong>å¼•å…¥éçº¿æ€§</strong>ï¼šä½¿æ¨¡å‹èƒ½å¤Ÿå­¦ä¹ å¤æ‚çš„éçº¿æ€§å…³ç³»ã€‚</li><li><strong>ç¨€ç–æ¿€æ´»</strong>ï¼šå°†è´Ÿå€¼ç½®é›¶ï¼Œä¿ç•™æ­£å€¼ï¼Œå¢å¼ºæ¨¡å‹çš„ç¨€ç–æ€§ã€‚</li><li><strong>ç¼“è§£æ¢¯åº¦æ¶ˆå¤±</strong>ï¼šç›¸æ¯” Sigmoid&#x2F;Tanhï¼ŒReLU çš„æ¢¯åº¦åœ¨æ­£åŒºé—´æ’ä¸º1ï¼Œé¿å…æ¢¯åº¦æ¶ˆå¤±é—®é¢˜ã€‚</li></ol></li><li><strong>è¾“å‡ºå½¢çŠ¶</strong>ï¼šä¸è¾“å…¥ç›¸åŒï¼Œä»ä¸º <code>[batch_size, 6, 28, 28]</code>ã€‚</li></ul><h3 id="3-æœ€å¤§æ± åŒ–å±‚ï¼ˆMax-Poolingï¼‰çš„ç»†èŠ‚"><a href="#3-æœ€å¤§æ± åŒ–å±‚ï¼ˆMax-Poolingï¼‰çš„ç»†èŠ‚" class="headerlink" title="3. æœ€å¤§æ± åŒ–å±‚ï¼ˆMax Poolingï¼‰çš„ç»†èŠ‚"></a>3. æœ€å¤§æ± åŒ–å±‚ï¼ˆMax Poolingï¼‰çš„ç»†èŠ‚</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">F.max_pool2d(..., (<span class="hljs-number">2</span>, <span class="hljs-number">2</span>))  <span class="hljs-comment"># 2x2çš„æ± åŒ–çª—å£</span><br></code></pre></td></tr></table></figure><ul><li><strong>ç›®çš„</strong>ï¼šé™ä½ç©ºé—´ç»´åº¦ï¼ˆä¸‹é‡‡æ ·ï¼‰ï¼Œå‡å°‘è®¡ç®—é‡å¹¶å¢å¼ºå¹³ç§»ä¸å˜æ€§ã€‚</li><li><strong>æ“ä½œè§„åˆ™</strong>ï¼š<ul><li>å°†è¾“å…¥æ¿€æ´»å›¾åˆ’åˆ†ä¸ºä¸é‡å çš„ <code>2x2</code> åŒºåŸŸã€‚</li><li>å¯¹æ¯ä¸ªåŒºåŸŸå–æœ€å¤§å€¼ï¼Œä½œä¸ºè¾“å‡ºã€‚</li><li><strong>æ­¥é•¿é»˜è®¤ç­‰äºæ± åŒ–çª—å£å¤§å°</strong>ï¼ˆå³ <code>stride=2</code>ï¼‰ï¼Œå› æ­¤è¾“å‡ºå°ºå¯¸å‡åŠã€‚</li></ul></li><li><strong>è®¡ç®—ç¤ºä¾‹</strong>ï¼š<ul><li>è¾“å…¥å°ºå¯¸ï¼š<code>[batch_size, 6, 28, 28]</code>ã€‚</li><li>è¾“å‡ºå°ºå¯¸ï¼š<br>$\left\lfloor \frac{28 - 2}{2} \right\rfloor + 1 &#x3D; 14$</li><li><strong>è¾“å‡ºå¼ é‡å½¢çŠ¶</strong>ï¼š<code>[batch_size, 6, 14, 14]</code>ã€‚</li></ul></li></ul><h4 id="ä¸ºä»€ä¹ˆé€‰æ‹©æœ€å¤§å€¼ï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©æœ€å¤§å€¼ï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹©æœ€å¤§å€¼ï¼Ÿ"></a>ä¸ºä»€ä¹ˆé€‰æ‹©æœ€å¤§å€¼ï¼Ÿ</h4><ul><li><strong>ä¿ç•™æœ€æ˜¾è‘—ç‰¹å¾</strong>ï¼šæœ€å¤§å€¼ä»£è¡¨è¯¥åŒºåŸŸæœ€å¼ºçƒˆçš„æ¿€æ´»å“åº”ï¼Œæœ‰åŠ©äºä¿ç•™é‡è¦ç‰¹å¾ï¼ˆå¦‚è¾¹ç¼˜ã€çº¹ç†ï¼‰ã€‚</li><li><strong>æŠ‘åˆ¶å™ªå£°</strong>ï¼šå¿½ç•¥éæœ€å¤§å€¼ï¼Œé™ä½å™ªå£°å¹²æ‰°ã€‚</li></ul><h3 id="4-ç»´åº¦å˜åŒ–çš„ç›´è§‚ç†è§£"><a href="#4-ç»´åº¦å˜åŒ–çš„ç›´è§‚ç†è§£" class="headerlink" title="4. ç»´åº¦å˜åŒ–çš„ç›´è§‚ç†è§£"></a>4. ç»´åº¦å˜åŒ–çš„ç›´è§‚ç†è§£</h3><table><thead><tr><th>æ“ä½œ</th><th>è¾“å…¥å½¢çŠ¶</th><th>è¾“å‡ºå½¢çŠ¶</th><th>å…³é”®ä½œç”¨</th></tr></thead><tbody><tr><td>å·ç§¯ï¼ˆConv1ï¼‰</td><td><code>[1, 1, 32, 32]</code></td><td><code>[1, 6, 28, 28]</code></td><td>æå–å±€éƒ¨ç‰¹å¾ï¼Œå¢åŠ é€šé“æ•°</td></tr><tr><td>ReLU</td><td><code>[1, 6, 28, 28]</code></td><td><code>[1, 6, 28, 28]</code></td><td>å¼•å…¥éçº¿æ€§ï¼Œè¿‡æ»¤è´Ÿå€¼</td></tr><tr><td>æœ€å¤§æ± åŒ–</td><td><code>[1, 6, 28, 28]</code></td><td><code>[1, 6, 14, 14]</code></td><td>é™ä½åˆ†è¾¨ç‡ï¼Œå¢å¼ºé²æ£’æ€§</td></tr></tbody></table><h3 id="5-ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ­¥éª¤ï¼Ÿ"><a href="#5-ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ­¥éª¤ï¼Ÿ" class="headerlink" title="5. ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ­¥éª¤ï¼Ÿ"></a>5. ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›æ­¥éª¤ï¼Ÿ</h3><ol><li><strong>å·ç§¯å±‚</strong>ï¼š<ul><li>é€šè¿‡å±€éƒ¨æ„Ÿå—é‡<strong>æå–ç©ºé—´ç‰¹å¾</strong>ï¼ˆå¦‚è¾¹ç¼˜ã€è§’ç‚¹ï¼‰ã€‚</li><li>ä½¿ç”¨å¤šä¸ªå·ç§¯æ ¸ï¼ˆé€šé“ï¼‰<strong>æ•æ‰ä¸åŒç‰¹å¾æ¨¡å¼</strong>ã€‚</li></ul></li><li><strong>ReLU</strong>ï¼š<ul><li>è§£å†³çº¿æ€§æ¨¡å‹çš„å±€é™æ€§ï¼Œä½¿ç½‘ç»œèƒ½<strong>æ‹Ÿåˆå¤æ‚å‡½æ•°</strong>ã€‚</li></ul></li><li><strong>æ± åŒ–å±‚</strong>ï¼š<ul><li>å‡å°‘å‚æ•°æ•°é‡ï¼Œ<strong>é˜²æ­¢è¿‡æ‹Ÿåˆ</strong></li><li>ä½¿æ¨¡å‹å¯¹è¾“å…¥çš„å°å¹³ç§»&#x2F;å½¢å˜æ›´é²æ£’ï¼ˆâ€œè¿‘ä¼¼ä¸å˜æ€§â€ï¼‰ã€‚</li></ul></li></ol><ul><li>There are convolutional layers for addressing 1D, 2D, and 3D tensors. There are also many more optional arguments for a conv layer constructor, including <code>stride length</code>(e.g., only <strong>scanning every second or every third position</strong>) in the input, <code>padding</code> (so you can <strong>scan out to the edges of the input</strong>), and more. See theÂ <a href="https://pytorch.org/docs/stable/nn.html#convolution-layers">documentation</a>Â for more information.</li></ul><hr><h2 id="Recurrent-Layers"><a href="#Recurrent-Layers" class="headerlink" title="Recurrent Layers"></a>Recurrent Layers</h2><ul><li><em>Recurrent neural networks</em>Â (orÂ <em>RNNs)</em>Â are used for <code>sequential data</code> - anything from <strong>time-series measurements</strong> from a scientific instrument to natural language sentences to DNA nucleotides. An RNN does this by maintaining aÂ <em>hidden state</em>Â that acts as a sort of memory for what it has seen in the sequence so far.</li><li>The internal structure of an RNN layer - or its variants, the <code>LSTM</code> (long short-term memory) and <code>GRU</code> (gated recurrent unit) - is moderately complex and beyond the scope of this video, but weâ€™ll show you what one looks like in action with an <code>LSTM-based part-of-speech tagger</code> (a type of classifier that tells you if a word is a noun, verb, etc.):</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LSTMTagger</span>(torch.nn.Module):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, embedding_dim, hidden_dim, vocab_size, tagset_size</span>):<br>        <span class="hljs-built_in">super</span>(LSTMTagger, <span class="hljs-variable language_">self</span>).__init__()<br>        <span class="hljs-variable language_">self</span>.hidden_dim = hidden_dim<br><br>        <span class="hljs-variable language_">self</span>.word_embeddings = torch.nn.Embedding(vocab_size, embedding_dim)<br><br>        <span class="hljs-comment"># The LSTM takes word embeddings as inputs, and outputs hidden states</span><br>        <span class="hljs-comment"># with dimensionality hidden_dim.</span><br>        <span class="hljs-variable language_">self</span>.lstm = torch.nn.LSTM(embedding_dim, hidden_dim)<br><br>        <span class="hljs-comment"># The linear layer that maps from hidden state space to tag space</span><br>        <span class="hljs-variable language_">self</span>.hidden2tag = torch.nn.Linear(hidden_dim, tagset_size)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, sentence</span>):<br>        embeds = <span class="hljs-variable language_">self</span>.word_embeddings(sentence)<br>        lstm_out, _ = <span class="hljs-variable language_">self</span>.lstm(embeds.view(<span class="hljs-built_in">len</span>(sentence), <span class="hljs-number">1</span>, -<span class="hljs-number">1</span>))<br>        tag_space = <span class="hljs-variable language_">self</span>.hidden2tag(lstm_out.view(<span class="hljs-built_in">len</span>(sentence), -<span class="hljs-number">1</span>))<br>        tag_scores = F.log_softmax(tag_space, dim=<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> tag_scores<br></code></pre></td></tr></table></figure><ul><li><p>The constructor has four arguments:</p></li><li><p><code>vocab_size</code>Â is the number of words in the input vocabulary. Each word is a <code>one-hot vector</code> (or unit vector) in aÂ <code>vocab_size</code>-dimensional space.</p></li><li><p><code>tagset_size</code>Â is the number of tags in the output set.</p></li><li><p><code>embedding_dim</code>Â is theÂ sizeÂ of theÂ <em>embedding</em>Â space for the vocabulary. An embedding <strong>maps a vocabulary onto a low-dimensional space</strong>, where words with similar meanings are close together in the space.</p></li><li><p><code>hidden_dim</code>Â is theÂ sizeÂ of the LSTMâ€™s memory.</p></li></ul><p>The input will be a sentence with the <strong>words represented as indices  of one-hot vectors</strong>. The embedding layer will then map these down to anÂ <code>embedding_dim</code>-dimensional space. The LSTM takes this sequence of embeddings and iterates over it, fielding an output vector of lengthÂ <code>hidden_dim</code>. The final linear layer <strong>acts as a classifier</strong>; applyingÂ <code>log_softmax()</code>Â to the output of the final layer converts the output into <strong>a normalized set of estimated probabilities</strong> that a given word maps to a given tag.</p><p>If youâ€™d like to see this network in action, check out theÂ <a href="https://pytorch.org/tutorials/beginner/nlp/sequence_models_tutorial.html">Sequence Models and LSTM Networks</a>Â tutorial on pytorch.org.</p><hr><h2 id="Transformers"><a href="#Transformers" class="headerlink" title="Transformers"></a>Transformers</h2><p><em>Transformers</em>Â are multi-purpose networks that have taken over the state of the art in NLP with models like <code>BERT</code>. A discussion of transformer architecture is beyond the scope of this video, but PyTorch has aÂ <code>Transformer</code>Â class that allows you to <strong>define the overall parameters of a transformer model</strong> - the number of attention heads, the number of encoder &amp; decoder layers, dropout and activation functions, etc. (You can even build the BERT model from this single class, with the right parameters!) TheÂ <code>torch.nn.Transformer</code>Â class also has classes to encapsulate the individual components (<code>TransformerEncoder</code>,Â <code>TransformerDecoder</code>) and subcomponents (<code>TransformerEncoderLayer</code>,Â <code>TransformerDecoderLayer</code>). For details, check out theÂ <a href="https://pytorch.org/docs/stable/nn.html#transformer">documentation</a>Â on transformer classes, and the relevantÂ <a href="https://pytorch.org/tutorials/beginner/transformer_tutorial.html">tutorial</a>Â on pytorch.org.</p><h1 id="Other-Layers-and-Functions"><a href="#Other-Layers-and-Functions" class="headerlink" title="Other Layers and Functions"></a>Other Layers and Functions</h1><h2 id="Data-Manipulation-Layers"><a href="#Data-Manipulation-Layers" class="headerlink" title="Data Manipulation Layers"></a>Data Manipulation Layers</h2><p>There are other layer types that perform important functions in models, but donâ€™t participate in the learning process themselves.</p><h3 id="Max-pooling"><a href="#Max-pooling" class="headerlink" title="Max pooling"></a>Max pooling</h3><p><code>Max pooling</code>Â (and its twin, <code>min pooling</code>) <strong>reduce a tensor by combining cells, and assigning the maximum value</strong> of the input cells to the output cell. (We saw this ) For example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">my_tensor = torch.rand(<span class="hljs-number">1</span>, <span class="hljs-number">6</span>, <span class="hljs-number">6</span>)<br><span class="hljs-built_in">print</span>(my_tensor)<br>maxpool_layer = torch.nn.MaxPool2d(<span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(maxpool_layer(my_tensor))<br><br>tensor([[[<span class="hljs-number">0.8160</span>, <span class="hljs-number">0.1406</span>, <span class="hljs-number">0.5950</span>, <span class="hljs-number">0.0883</span>, <span class="hljs-number">0.5464</span>, <span class="hljs-number">0.3993</span>],<br>         [<span class="hljs-number">0.0623</span>, <span class="hljs-number">0.6626</span>, <span class="hljs-number">0.3991</span>, <span class="hljs-number">0.4878</span>, <span class="hljs-number">0.7548</span>, <span class="hljs-number">0.2426</span>],<br>         [<span class="hljs-number">0.9081</span>, <span class="hljs-number">0.4207</span>, <span class="hljs-number">0.8590</span>, <span class="hljs-number">0.3784</span>, <span class="hljs-number">0.6931</span>, <span class="hljs-number">0.5609</span>],<br>         [<span class="hljs-number">0.6182</span>, <span class="hljs-number">0.8588</span>, <span class="hljs-number">0.3766</span>, <span class="hljs-number">0.9734</span>, <span class="hljs-number">0.9662</span>, <span class="hljs-number">0.9880</span>],<br>         [<span class="hljs-number">0.0599</span>, <span class="hljs-number">0.8338</span>, <span class="hljs-number">0.6750</span>, <span class="hljs-number">0.0829</span>, <span class="hljs-number">0.3554</span>, <span class="hljs-number">0.3998</span>],<br>         [<span class="hljs-number">0.6159</span>, <span class="hljs-number">0.7129</span>, <span class="hljs-number">0.8945</span>, <span class="hljs-number">0.8717</span>, <span class="hljs-number">0.9930</span>, <span class="hljs-number">0.9059</span>]]])<br>tensor([[[<span class="hljs-number">0.9081</span>, <span class="hljs-number">0.7548</span>],<br>         [<span class="hljs-number">0.8945</span>, <span class="hljs-number">0.9930</span>]]])<br></code></pre></td></tr></table></figure><p>If you look closely at the values above, youâ€™ll see that each of the values in the maxpooled output is the maximum value of each quadrant of the 6x6 input.</p><h3 id="Normalization-layers"><a href="#Normalization-layers" class="headerlink" title="Normalization layers"></a>Normalization layers</h3><p><code>Normalization layers</code>Â <strong>re-center and normalize the output</strong> of one layer before feeding it to another. <strong>Centering  and scaling</strong> the intermediate tensors has a number of beneficial effects, such as letting you <strong>use higher learning rates without exploding&#x2F;vanishing gradients</strong>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">my_tensor = torch.rand(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>) * <span class="hljs-number">20</span> + <span class="hljs-number">5</span><br><span class="hljs-built_in">print</span>(my_tensor)<br><span class="hljs-built_in">print</span>(my_tensor.mean())<br>norm_layer = torch.nn.BatchNorm1d(<span class="hljs-number">4</span>)<br>normed_tensor = norm_layer(my_tensor)<br><span class="hljs-built_in">print</span>(normed_tensor)<br><span class="hljs-built_in">print</span>(normed_tensor.mean())<br><br>tensor([[[<span class="hljs-number">18.0634</span>,  <span class="hljs-number">5.6720</span>,  <span class="hljs-number">5.7805</span>, <span class="hljs-number">12.3243</span>],<br>         [ <span class="hljs-number">9.3712</span>, <span class="hljs-number">19.7366</span>,  <span class="hljs-number">6.4853</span>, <span class="hljs-number">22.8629</span>],<br>         [<span class="hljs-number">14.6223</span>, <span class="hljs-number">21.5803</span>, <span class="hljs-number">17.8267</span>, <span class="hljs-number">20.3997</span>],<br>         [<span class="hljs-number">21.7664</span>,  <span class="hljs-number">5.0936</span>, <span class="hljs-number">19.5952</span>, <span class="hljs-number">11.8554</span>]]])<br>tensor(<span class="hljs-number">14.5647</span>)<br>tensor([[[ <span class="hljs-number">1.4762</span>, -<span class="hljs-number">0.9296</span>, -<span class="hljs-number">0.9086</span>,  <span class="hljs-number">0.3619</span>],<br>         [-<span class="hljs-number">0.7650</span>,  <span class="hljs-number">0.7475</span>, -<span class="hljs-number">1.1862</span>,  <span class="hljs-number">1.2037</span>],<br>         [-<span class="hljs-number">1.4918</span>,  <span class="hljs-number">1.1130</span>, -<span class="hljs-number">0.2922</span>,  <span class="hljs-number">0.6710</span>],<br>         [ <span class="hljs-number">1.0893</span>, -<span class="hljs-number">1.4371</span>,  <span class="hljs-number">0.7603</span>, -<span class="hljs-number">0.4125</span>]]],<br>       grad_fn=&lt;NativeBatchNormBackward&gt;)<br>tensor(<span class="hljs-number">1.3039e-08</span>, grad_fn=&lt;MeanBackward0&gt;)<br></code></pre></td></tr></table></figure><p>Running the cell above, weâ€™ve added <strong>a large scaling factor and offset</strong> to an input tensor; you should see the input tensorâ€™sÂ <code>mean()</code>Â somewhere in the neighborhood of 15. After running it through the normalization layer, you can see that <strong>the values are smaller, and grouped around zero</strong> - in fact, the mean should be very small (&gt; 1e-8).</p><p>This is beneficial because many activation functions (discussed below) have their strongest gradients near 0, but sometimes <strong>suffer from</strong> vanishing or exploding gradients for inputs that <strong>drive them far away from zero</strong>. Keeping the data centered around the area of steepest gradient will tend to mean <strong>faster, better learning and higher feasible learning rates</strong>.</p><h3 id="Dropout-layers"><a href="#Dropout-layers" class="headerlink" title="Dropout layers"></a>Dropout layers</h3><p><strong>Dropout layers</strong>Â are a tool for encouragingÂ <em>sparse representations</em> ç¨€ç–è¡¨ç¤ºÂ in your model - that is, pushing it to do inference with less data.</p><p>Dropout layers work by <strong>randomly setting</strong> parts of the input tensorÂ <strong>zero</strong> <em>during training</em>Â - dropout layers are always turned off for inference æ¨ç†. This forces the model to learn against this <strong>masked or reduced dataset</strong>. For example:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">my_tensor = torch.rand(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>)<br>dropout = torch.nn.Dropout(p=<span class="hljs-number">0.4</span>)<br><span class="hljs-built_in">print</span>(dropout(my_tensor))<br><span class="hljs-built_in">print</span>(dropout(my_tensor))<br><br>tensor([[[<span class="hljs-number">0.0000</span>, <span class="hljs-number">1.1702</span>, <span class="hljs-number">0.5911</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.1932</span>, <span class="hljs-number">1.4928</span>, <span class="hljs-number">1.2912</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.1236</span>, <span class="hljs-number">1.3672</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>]]])<br>tensor([[[<span class="hljs-number">1.5033</span>, <span class="hljs-number">1.1702</span>, <span class="hljs-number">0.5911</span>, <span class="hljs-number">0.9341</span>],<br>         [<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">1.5020</span>],<br>         [<span class="hljs-number">0.1236</span>, <span class="hljs-number">1.3672</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.4993</span>, <span class="hljs-number">0.9576</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">1.6664</span>]]])<br></code></pre></td></tr></table></figure><p>Above, you can see the effect of dropout on a sample tensor. You can use the optionalÂ <code>p</code>Â argument to set the probability of an individual weight dropping out; if you donâ€™t it defaults to 0.5.</p><hr><h2 id="Activation-Functions"><a href="#Activation-Functions" class="headerlink" title="Activation Functions"></a>Activation Functions</h2><p>Activation functions make deep learning possible. <strong>A neural network is really a program</strong> - with many parameters - thatÂ <em>simulatesÂ a mathematical function</em>. If all we did was multiple tensors by layer weights repeatedly, we could onlyÂ simulateÂ <em>linear functions;</em>Â further, there would be no point to having many layers, as the whole network  could be reduced to a single matrix multiplication. InsertingÂ <em>non-linear</em>Â activation functions between layers is what allows a deep learning model toÂ <strong>simulateÂ any function, rather than just linear ones.</strong></p><p><code>torch.nn.Module</code>Â has objects encapsulating å°è£… all of the major activation functions including <code>ReLU</code> and its many variants, <code>Tanh</code>, <code>Hardtanh</code>, <code>sigmoid</code>, and more. It also includes other functions, such as <code>Softmax</code>, that are most useful at the output stage of a model.</p><hr><h2 id="Loss-Functions"><a href="#Loss-Functions" class="headerlink" title="Loss Functions"></a>Loss Functions</h2><p>Loss functions tell us how far a modelâ€™s prediction is from the correct answer. PyTorch contains a variety of loss functions, including common <code>MSE</code> (mean squared error &#x3D; L2 norm), <code>Cross Entropy Loss</code> and <code>Negative Likelihood Loss</code> (useful for classifiers), and others.</p><h1 id="Advanced-Replacing-Layers"><a href="#Advanced-Replacing-Layers" class="headerlink" title="Advanced: Replacing Layers"></a>Advanced: Replacing Layers</h1><ul><li>waiting to be updatedğŸ˜€</li></ul>]]></content>
    
    
    <categories>
      
      <category>Pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>CNN</tag>
      
      <tag>RNN</tag>
      
      <tag>ReLU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytorch Tutorial-Autograd</title>
    <link href="/2025/08/12/Autograd/"/>
    <url>/2025/08/12/Autograd/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Pytorchæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><h1 id="Autograd"><a href="#Autograd" class="headerlink" title="Autograd"></a>Autograd</h1><blockquote><p>autograd çš„ç”¨æ­¦ä¹‹åœ°ï¼šå®ƒè·Ÿè¸ªæ¯æ¬¡è®¡ç®—çš„å†å²è®°å½•ã€‚PyTorch æ¨¡å‹ä¸­çš„æ¯ä¸ªè®¡ç®—å¼ é‡éƒ½å¸¦æœ‰å…¶è¾“å…¥å¼ é‡å’Œç”¨äºåˆ›å»ºå¼ é‡çš„å‡½æ•°çš„å†å²è®°å½•ã€‚ç»“åˆç”¨äºä½œç”¨äºå¼ é‡çš„ PyTorch å‡½æ•°ï¼Œæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä¸€ä¸ªç”¨äºè®¡ç®—è‡ªå·±çš„å¯¼æ•°çš„å†…ç½®å®ç°ï¼Œè¿™å¤§å¤§åŠ å¿«äº†å­¦ä¹ æ‰€éœ€çš„å±€éƒ¨å¯¼æ•°çš„è®¡ç®—é€Ÿåº¦ã€‚</p></blockquote><h2 id="ä¸¾ä¾‹"><a href="#ä¸¾ä¾‹" class="headerlink" title="ä¸¾ä¾‹"></a>ä¸¾ä¾‹</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python">%matplotlib inline<br><span class="hljs-keyword">import</span> torch<br><br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><span class="hljs-keyword">import</span> matplotlib.ticker <span class="hljs-keyword">as</span> ticker<br><span class="hljs-keyword">import</span> math<br><br>a = torch.linspace(<span class="hljs-number">0.</span>, <span class="hljs-number">2.</span> * math.pi, steps=<span class="hljs-number">25</span>, requires_grad=<span class="hljs-literal">True</span>)<br><span class="hljs-built_in">print</span>(a)<br>tensor([<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.2618</span>, <span class="hljs-number">0.5236</span>, <span class="hljs-number">0.7854</span>, <span class="hljs-number">1.0472</span>, <span class="hljs-number">1.3090</span>, <span class="hljs-number">1.5708</span>, <span class="hljs-number">1.8326</span>, <span class="hljs-number">2.0944</span>,<br>        <span class="hljs-number">2.3562</span>, <span class="hljs-number">2.6180</span>, <span class="hljs-number">2.8798</span>, <span class="hljs-number">3.1416</span>, <span class="hljs-number">3.4034</span>, <span class="hljs-number">3.6652</span>, <span class="hljs-number">3.9270</span>, <span class="hljs-number">4.1888</span>, <span class="hljs-number">4.4506</span>,<br>        <span class="hljs-number">4.7124</span>, <span class="hljs-number">4.9742</span>, <span class="hljs-number">5.2360</span>, <span class="hljs-number">5.4978</span>, <span class="hljs-number">5.7596</span>, <span class="hljs-number">6.0214</span>, <span class="hljs-number">6.2832</span>],<br>       requires_grad=<span class="hljs-literal">True</span>)<br>       <br>b = torch.sin(a)<br>c = <span class="hljs-number">2</span> * b<br>d = c + <span class="hljs-number">1</span><br>out = d.<span class="hljs-built_in">sum</span>()<br>out.backward()<br><span class="hljs-built_in">print</span>(a.grad)<br>plt.plot(a.detach(), a.grad.detach())<br><br>tensor([ <span class="hljs-number">2.0000e+00</span>,  <span class="hljs-number">1.9319e+00</span>,  <span class="hljs-number">1.7321e+00</span>,  <span class="hljs-number">1.4142e+00</span>,  <span class="hljs-number">1.0000e+00</span>,<br>         <span class="hljs-number">5.1764e-01</span>, -<span class="hljs-number">8.7423e-08</span>, -<span class="hljs-number">5.1764e-01</span>, -<span class="hljs-number">1.0000e+00</span>, -<span class="hljs-number">1.4142e+00</span>,<br>        -<span class="hljs-number">1.7321e+00</span>, -<span class="hljs-number">1.9319e+00</span>, -<span class="hljs-number">2.0000e+00</span>, -<span class="hljs-number">1.9319e+00</span>, -<span class="hljs-number">1.7321e+00</span>,<br>        -<span class="hljs-number">1.4142e+00</span>, -<span class="hljs-number">1.0000e+00</span>, -<span class="hljs-number">5.1764e-01</span>,  <span class="hljs-number">2.3850e-08</span>,  <span class="hljs-number">5.1764e-01</span>,<br>         <span class="hljs-number">1.0000e+00</span>,  <span class="hljs-number">1.4142e+00</span>,  <span class="hljs-number">1.7321e+00</span>,  <span class="hljs-number">1.9319e+00</span>,  <span class="hljs-number">2.0000e+00</span>])<br></code></pre></td></tr></table></figure><p>Be aware than onlyÂ <em>leaf nodes</em>Â of the computation have their gradients computed. If you tried, for example,Â <code>print(c.grad)</code>Â youâ€™d get backÂ <code>None</code>. In this simple example, only the input is a leaf node, so only it has gradients computed.</p><h2 id="Jacobian"><a href="#Jacobian" class="headerlink" title="Jacobian"></a>Jacobian</h2><p>If you have a function with anÂ <code>n-dimensional input</code> and <code>m-dimensional output</code>,Â , the complete gradient is a matrix of the derivative of <strong>every output with respect to every input</strong>, called theÂ <em>Jacobian:</em><br>$$<br>\begin{align}J&#x3D;\left(\begin{array}{ccc}<br>   \frac{\partial y_{1}}{\partial x_{1}} &amp; \cdots &amp; \frac{\partial y_{1}}{\partial x_{n}}\<br>   \vdots &amp; \ddots &amp; \vdots\<br>   \frac{\partial y_{m}}{\partial x_{1}} &amp; \cdots &amp; \frac{\partial y_{m}}{\partial x_{n}}<br>   \end{array}\right)\end{align}<br>$$<br>If you have a second function, $l&#x3D;g\left(\vec{y}\right)$ that takes <code>m-dimensional input</code> (that is, the same dimensionality as the output above), and returns a <code>scalar output</code>, you can <strong>express its gradients</strong> with respect to $\vec{y}$ as a column vector, $v&#x3D;\left(\begin{array}{ccc}\frac{\partial l}{\partial y_{1}} &amp; \cdots &amp; \frac{\partial l}{\partial y_{m}}\end{array}\right)^{T}$ - which is really just a one-column Jacobian.</p><p>More concretely, imagine the first function as your <code>PyTorch model</code> (with potentially many inputs and many outputs) and the second function as a <code>loss function</code> (with the modelâ€™s output as input, and the loss value as the scalar output).</p><p>If we multiply the first functionâ€™s Jacobian by the gradient of the second function, and a<strong>pply the chain rule</strong>, we get:</p><p>$$<br>\begin{align}J^{T}\cdot v&#x3D;\left(\begin{array}{ccc}<br>   \frac{\partial y_{1}}{\partial x_{1}} &amp; \cdots &amp; \frac{\partial y_{m}}{\partial x_{1}}\<br>   \vdots &amp; \ddots &amp; \vdots\<br>   \frac{\partial y_{1}}{\partial x_{n}} &amp; \cdots &amp; \frac{\partial y_{m}}{\partial x_{n}}<br>   \end{array}\right)\left(\begin{array}{c}<br>   \frac{\partial l}{\partial y_{1}}\<br>   \vdots\<br>   \frac{\partial l}{\partial y_{m}}<br>   \end{array}\right)&#x3D;\left(\begin{array}{c}<br>   \frac{\partial l}{\partial x_{1}}\<br>   \vdots\<br>   \frac{\partial l}{\partial x_{n}}<br>   \end{array}\right)\end{align}<br>$$</p><p><em>Note: You could also use the equivalent operation $v^{T}\cdot J$, and get back a row vector.</em></p><p>The resulting column vector is the <em>gradient of the second function with respect to the inputs of the first</em> - or in the case of our model and loss function, <em>the gradient of the loss with respect to the model inputs</em>.</p><p><strong><code>torch.autograd</code> is an engine for computing these products.</strong> This is how we accumulate the gradients over the learning weights during the backward pass.</p><p>For this reason, the <code>backward()</code> call can <em>also</em> take an optional vector input. This vector represents a set of gradients over the tensor, which are multiplied by the Jacobian of the autograd-traced tensor that precedes it. Letâ€™s try a specific example with a small vector:</p><p>å—¯ï¼Œè¿™ä¹Ÿå°±æ˜¯åé¢çš„<strong>ç¤ºä¾‹2</strong>æ‰€æ¼”ç¤ºçš„ï¼Œ<a href="#AI%E6%80%BB%E7%BB%93##3.%E7%A4%BA%E4%BE%8B%E8%AF%A6%E8%A7%A3">æˆ³æˆ‘ç›´è¾¾</a></p><h2 id="High-Level-API"><a href="#High-Level-API" class="headerlink" title="High-Level API"></a>High-Level API</h2><p>There is an API on autograd that gives you direct access to important differential matrix and vector operations. In particular, it allows you to calculate the <em>Jacobian</em> and theÂ <em>Hessian</em>Â matrices of a particular function for particular inputs. (The Hessian is like the Jacobian, but expresses all partialÂ <em>second</em>Â derivatives.) It also provides methods for taking vector products with these matrices.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">exp_adder</span>(<span class="hljs-params">x, y</span>):<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">2</span> * x.exp() + <span class="hljs-number">3</span> * y<br><br>inputs = (torch.rand(<span class="hljs-number">1</span>), torch.rand(<span class="hljs-number">1</span>)) <span class="hljs-comment"># arguments for the function</span><br><span class="hljs-built_in">print</span>(inputs)<br>torch.autograd.functional.jacobian(exp_adder, inputs)<br>(tensor([<span class="hljs-number">0.7327</span>]), tensor([<span class="hljs-number">0.8072</span>]))<br>(tensor([[<span class="hljs-number">4.1616</span>]]), tensor([[<span class="hljs-number">3.</span>]]))<br><br><br>inputs = (torch.rand(<span class="hljs-number">3</span>), torch.rand(<span class="hljs-number">3</span>)) <span class="hljs-comment"># arguments for the function</span><br><span class="hljs-built_in">print</span>(inputs)<br>torch.autograd.functional.jacobian(exp_adder, inputs)<br>(tensor([<span class="hljs-number">0.3723</span>, <span class="hljs-number">0.7282</span>, <span class="hljs-number">0.0756</span>]), tensor([<span class="hljs-number">0.9602</span>, <span class="hljs-number">0.6986</span>, <span class="hljs-number">0.2260</span>]))<br><br>(tensor([[<span class="hljs-number">2.9022</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.0000</span>, <span class="hljs-number">4.1428</span>, <span class="hljs-number">0.0000</span>],<br>         [<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.0000</span>, <span class="hljs-number">2.1570</span>]]),<br> tensor([[<span class="hljs-number">3.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<br>         [<span class="hljs-number">0.</span>, <span class="hljs-number">3.</span>, <span class="hljs-number">0.</span>],<br>         [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">3.</span>]]))<br></code></pre></td></tr></table></figure><ul><li>è¿˜æœ‰èƒ½å¤Ÿç›´æ¥è®¡ç®—å‘é‡-é›…å„æ¯”ä¹˜ç§¯çš„functionï¼šTheÂ <code>torch.autograd.functional.jvp()</code>Â method performs the same matrix multiplication asÂ <code>vjp()</code>Â with the operands reversed</li></ul><hr><ul><li>å…¨æ–‡é‡ç‚¹æ„Ÿè§‰ä¸å¤Ÿçªå‡ºï¼Œæˆ‘è®©AIç»™äº†ä¸€ä»½ç¬”è®°</li></ul><h1 id="AIæ€»ç»“"><a href="#AIæ€»ç»“" class="headerlink" title="AIæ€»ç»“"></a>AIæ€»ç»“</h1><h2 id="PyTorch-Autograd-åŠŸèƒ½æ€»ç»“"><a href="#PyTorch-Autograd-åŠŸèƒ½æ€»ç»“" class="headerlink" title="PyTorch Autograd åŠŸèƒ½æ€»ç»“"></a><strong>PyTorch Autograd åŠŸèƒ½æ€»ç»“</strong></h2><p>PyTorch çš„ <code>autograd</code>ï¼ˆè‡ªåŠ¨å¾®åˆ†ï¼‰æ˜¯å…¶æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œç”¨äº <strong>è‡ªåŠ¨è®¡ç®—å¼ é‡çš„æ¢¯åº¦</strong>ï¼Œæ”¯æŒåŠ¨æ€è®¡ç®—å›¾ï¼ˆDynamic Computation Graphï¼‰ï¼Œæ˜¯è®­ç»ƒç¥ç»ç½‘ç»œçš„åŸºç¡€ã€‚ä»¥ä¸‹æ˜¯å…³é”®ç‚¹æ€»ç»“å’Œç¤ºä¾‹ï¼š</p><hr><h2 id="1-Autograd-çš„æ ¸å¿ƒæœºåˆ¶"><a href="#1-Autograd-çš„æ ¸å¿ƒæœºåˆ¶" class="headerlink" title="1. Autograd çš„æ ¸å¿ƒæœºåˆ¶"></a><strong>1. Autograd çš„æ ¸å¿ƒæœºåˆ¶</strong></h2><table><thead><tr><th>åŠŸèƒ½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åŠ¨æ€è®¡ç®—å›¾</strong></td><td>åœ¨è¿è¡Œæ—¶æ„å»ºè®¡ç®—å›¾ï¼Œçµæ´»æ”¯æŒæ§åˆ¶æµï¼ˆå¦‚å¾ªç¯ã€æ¡ä»¶è¯­å¥ï¼‰ã€‚</td></tr><tr><td><strong>è‡ªåŠ¨æ¢¯åº¦è®¡ç®—</strong></td><td>é€šè¿‡ <code>backward()</code> è‡ªåŠ¨è®¡ç®—æ¢¯åº¦ï¼Œå­˜å‚¨åœ¨ <code>.grad</code> å±æ€§ä¸­ã€‚</td></tr><tr><td><strong>å¶å­å¼ é‡</strong></td><td>ç›´æ¥åˆ›å»ºçš„å¼ é‡ï¼ˆå¦‚ <code>torch.tensor()</code>ï¼‰æ˜¯å¶å­èŠ‚ç‚¹ï¼Œå¯ç´¯ç§¯æ¢¯åº¦ã€‚</td></tr><tr><td><strong>éå¶å­å¼ é‡</strong></td><td>ç”±è¿ç®—äº§ç”Ÿçš„å¼ é‡ï¼Œé»˜è®¤ä¸ä¿ç•™æ¢¯åº¦ï¼ˆé™¤éæ˜¾å¼è®¾ç½® <code>retain_grad()</code>ï¼‰ã€‚</td></tr></tbody></table><hr><h2 id="2-å…³é”®å‡½æ•°ä¸æ–¹æ³•"><a href="#2-å…³é”®å‡½æ•°ä¸æ–¹æ³•" class="headerlink" title="2. å…³é”®å‡½æ•°ä¸æ–¹æ³•"></a><strong>2. å…³é”®å‡½æ•°ä¸æ–¹æ³•</strong></h2><table><thead><tr><th>æ–¹æ³•&#x2F;ç±»</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>requires_grad=True</code></td><td>å¯ç”¨æ¢¯åº¦è¿½è¸ª</td><td><code>x = torch.tensor(1.0, requires_grad=True)</code></td></tr><tr><td><code>backward()</code></td><td>åå‘ä¼ æ’­è®¡ç®—æ¢¯åº¦</td><td><code>y.backward()</code></td></tr><tr><td><code>grad</code> å±æ€§</td><td>å­˜å‚¨æ¢¯åº¦å€¼</td><td><code>x.grad</code></td></tr><tr><td><code>torch.no_grad()</code></td><td>ä¸´æ—¶ç¦ç”¨æ¢¯åº¦è®¡ç®—</td><td><code>with torch.no_grad():</code></td></tr><tr><td><code>detach()</code></td><td>åˆ†ç¦»å¼ é‡ï¼Œé˜»æ­¢æ¢¯åº¦ä¼ æ’­</td><td><code>y_detached = y.detach()</code></td></tr><tr><td><code>torch.autograd.grad()</code></td><td>ç›´æ¥è®¡ç®—æ¢¯åº¦ï¼ˆä¸ä¿®æ”¹ <code>.grad</code>ï¼‰</td><td><code>grad = torch.autograd.grad(y, x)</code></td></tr></tbody></table><hr><h2 id="3-ç¤ºä¾‹è¯¦è§£"><a href="#3-ç¤ºä¾‹è¯¦è§£" class="headerlink" title="3. ç¤ºä¾‹è¯¦è§£"></a><strong>3. ç¤ºä¾‹è¯¦è§£</strong></h2><h3 id="ç¤ºä¾‹-1ï¼šåŸºæœ¬æ¢¯åº¦è®¡ç®—"><a href="#ç¤ºä¾‹-1ï¼šåŸºæœ¬æ¢¯åº¦è®¡ç®—" class="headerlink" title="ç¤ºä¾‹ 1ï¼šåŸºæœ¬æ¢¯åº¦è®¡ç®—"></a><strong>ç¤ºä¾‹ 1ï¼šåŸºæœ¬æ¢¯åº¦è®¡ç®—</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> torch<br><br><span class="hljs-comment"># å®šä¹‰å¶å­å¼ é‡ï¼ˆå¯ç”¨æ¢¯åº¦ï¼‰</span><br>x = torch.tensor(<span class="hljs-number">2.0</span>, requires_grad=<span class="hljs-literal">True</span>)<br>y = x ** <span class="hljs-number">2</span> + <span class="hljs-number">3</span> * x  <span class="hljs-comment"># y = xÂ² + 3x</span><br><br><span class="hljs-comment"># è®¡ç®—æ¢¯åº¦</span><br>y.backward()  <span class="hljs-comment"># dy/dx = 2x + 3</span><br><br><span class="hljs-built_in">print</span>(x.grad)  <span class="hljs-comment"># è¾“å‡º: tensor(7.0) ï¼ˆx=2æ—¶ï¼Œdy/dx=2*2+3=7ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-2ï¼šéæ ‡é‡è¾“å‡ºçš„æ¢¯åº¦ï¼ˆéœ€æŒ‡å®š-gradient-å‚æ•°ï¼‰"><a href="#ç¤ºä¾‹-2ï¼šéæ ‡é‡è¾“å‡ºçš„æ¢¯åº¦ï¼ˆéœ€æŒ‡å®š-gradient-å‚æ•°ï¼‰" class="headerlink" title="ç¤ºä¾‹ 2ï¼šéæ ‡é‡è¾“å‡ºçš„æ¢¯åº¦ï¼ˆéœ€æŒ‡å®š gradient å‚æ•°ï¼‰"></a><strong>ç¤ºä¾‹ 2ï¼šéæ ‡é‡è¾“å‡ºçš„æ¢¯åº¦ï¼ˆéœ€æŒ‡å®š <code>gradient</code> å‚æ•°ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.tensor([<span class="hljs-number">1.0</span>, <span class="hljs-number">2.0</span>], requires_grad=<span class="hljs-literal">True</span>)<br>y = x * <span class="hljs-number">2</span>  <span class="hljs-comment"># y = [2.0, 4.0]</span><br><br><span class="hljs-comment"># å®šä¹‰æ¢¯åº¦æƒé‡ï¼ˆæ¨¡æ‹ŸæŸå¤±å¯¹å„åˆ†é‡çš„æ•æ„Ÿåº¦ï¼‰</span><br>gradient = torch.tensor([<span class="hljs-number">0.1</span>, <span class="hljs-number">0.01</span>])<br>y.backward(gradient)  <span class="hljs-comment"># ç­‰ä»·äºåŠ æƒæ±‚å’Œåçš„åå‘ä¼ æ’­</span><br><br><span class="hljs-built_in">print</span>(x.grad)  <span class="hljs-comment"># è¾“å‡º: tensor([0.2000, 0.0200]) ï¼ˆ2*0.1=0.2, 2*0.01=0.02ï¼‰</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-3ï¼šå†»ç»“éƒ¨åˆ†å‚æ•°ï¼ˆdetach-æˆ–-requires-grad-Falseï¼‰"><a href="#ç¤ºä¾‹-3ï¼šå†»ç»“éƒ¨åˆ†å‚æ•°ï¼ˆdetach-æˆ–-requires-grad-Falseï¼‰" class="headerlink" title="ç¤ºä¾‹ 3ï¼šå†»ç»“éƒ¨åˆ†å‚æ•°ï¼ˆdetach æˆ– requires_grad=Falseï¼‰"></a><strong>ç¤ºä¾‹ 3ï¼šå†»ç»“éƒ¨åˆ†å‚æ•°ï¼ˆ<code>detach</code> æˆ– <code>requires_grad=False</code>ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># åœºæ™¯ï¼šå†»ç»“æ¨¡å‹çš„ä¸€éƒ¨åˆ†å‚æ•°</span><br>model = torch.nn.Linear(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<br><span class="hljs-keyword">for</span> param <span class="hljs-keyword">in</span> model.parameters():<br>    param.requires_grad = <span class="hljs-literal">False</span>  <span class="hljs-comment"># å†»ç»“æ‰€æœ‰å‚æ•°</span><br><br><span class="hljs-comment"># æˆ–è€…åˆ†ç¦»ä¸­é—´å¼ é‡</span><br>x = torch.tensor(<span class="hljs-number">1.0</span>, requires_grad=<span class="hljs-literal">True</span>)<br>y = x * <span class="hljs-number">2</span><br>z = y.detach()  <span class="hljs-comment"># z ä¸å‚ä¸æ¢¯åº¦è®¡ç®—</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-4ï¼šé«˜é˜¶å¯¼æ•°ï¼ˆcreate-graph-Trueï¼‰"><a href="#ç¤ºä¾‹-4ï¼šé«˜é˜¶å¯¼æ•°ï¼ˆcreate-graph-Trueï¼‰" class="headerlink" title="ç¤ºä¾‹ 4ï¼šé«˜é˜¶å¯¼æ•°ï¼ˆcreate_graph=Trueï¼‰"></a><strong>ç¤ºä¾‹ 4ï¼šé«˜é˜¶å¯¼æ•°ï¼ˆ<code>create_graph=True</code>ï¼‰</strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.tensor(<span class="hljs-number">3.0</span>, requires_grad=<span class="hljs-literal">True</span>)<br>y = x ** <span class="hljs-number">3</span>  <span class="hljs-comment"># y = xÂ³</span><br><br><span class="hljs-comment"># ä¸€é˜¶å¯¼æ•°</span><br>grad1 = torch.autograd.grad(y, x, create_graph=<span class="hljs-literal">True</span>)  <span class="hljs-comment"># dy/dx = 3xÂ² â†’ 27</span><br><span class="hljs-comment"># äºŒé˜¶å¯¼æ•°</span><br>grad2 = torch.autograd.grad(grad1, x)               <span class="hljs-comment"># dÂ²y/dxÂ² = 6x â†’ 18</span><br><span class="hljs-built_in">print</span>(grad2[<span class="hljs-number">0</span>])  <span class="hljs-comment"># è¾“å‡º: tensor(18.0)</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹-5ï¼šæ¢¯åº¦æ¸…é›¶ä¸ç´¯åŠ "><a href="#ç¤ºä¾‹-5ï¼šæ¢¯åº¦æ¸…é›¶ä¸ç´¯åŠ " class="headerlink" title="ç¤ºä¾‹ 5ï¼šæ¢¯åº¦æ¸…é›¶ä¸ç´¯åŠ "></a><strong>ç¤ºä¾‹ 5ï¼šæ¢¯åº¦æ¸…é›¶ä¸ç´¯åŠ </strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.tensor(<span class="hljs-number">1.0</span>, requires_grad=<span class="hljs-literal">True</span>)<br>y = x ** <span class="hljs-number">2</span><br><br><span class="hljs-comment"># ç¬¬ä¸€æ¬¡åå‘ä¼ æ’­</span><br>y.backward()<br><span class="hljs-built_in">print</span>(x.grad)  <span class="hljs-comment"># è¾“å‡º: tensor(2.0) ï¼ˆdy/dx=2xï¼‰</span><br><br><span class="hljs-comment"># æ¢¯åº¦ä¼šç´¯åŠ ï¼</span><br>y.backward()<br><span class="hljs-built_in">print</span>(x.grad)  <span class="hljs-comment"># è¾“å‡º: tensor(4.0) ï¼ˆ2.0 + 2.0ï¼‰</span><br><br><span class="hljs-comment"># æ‰‹åŠ¨æ¸…é›¶æ¢¯åº¦</span><br>x.grad.zero_()<br></code></pre></td></tr></table></figure><hr><h2 id="4-Autograd-çš„æ³¨æ„äº‹é¡¹"><a href="#4-Autograd-çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="4. Autograd çš„æ³¨æ„äº‹é¡¹"></a><strong>4. Autograd çš„æ³¨æ„äº‹é¡¹</strong></h2><ol><li><p><strong>å†…å­˜ç®¡ç†</strong>ï¼š</p><ul><li>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>backward()</code> ä¼šé‡Šæ”¾è®¡ç®—å›¾ã€‚è‹¥éœ€å¤šæ¬¡åå‘ä¼ æ’­ï¼Œéœ€è®¾ç½® <code>retain_graph=True</code>ã€‚</li><li>ç¤ºä¾‹ï¼š<code>loss.backward(retain_graph=True)</code>ã€‚</li></ul></li><li><p><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š</p><ul><li>æ¨ç†æ—¶ç”¨ <code>torch.no_grad()</code> ç¦ç”¨æ¢¯åº¦ä»¥èŠ‚çœå†…å­˜ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">with</span> torch.no_grad():<br>    output = model(<span class="hljs-built_in">input</span>)<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>æ¢¯åº¦æˆªæ–­</strong>ï¼š</p><ul><li>é˜²æ­¢æ¢¯åº¦çˆ†ç‚¸ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.nn.utils.clip_grad_norm_(model.parameters(), max_norm=<span class="hljs-number">1.0</span>)<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>éå¶å­å¼ é‡çš„æ¢¯åº¦</strong>ï¼š</p><ul><li>é»˜è®¤ä¸ä¿ç•™ï¼Œå¦‚éœ€ä¿ç•™éœ€è°ƒç”¨ <code>retain_grad()</code>ï¼š<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">y = x * <span class="hljs-number">2</span><br>y.retain_grad()  <span class="hljs-comment"># ä¿ç•™ y çš„æ¢¯åº¦</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><hr><h2 id="5-åŠ¨æ€è®¡ç®—å›¾çš„ä¼˜åŠ¿"><a href="#5-åŠ¨æ€è®¡ç®—å›¾çš„ä¼˜åŠ¿" class="headerlink" title="5. åŠ¨æ€è®¡ç®—å›¾çš„ä¼˜åŠ¿"></a><strong>5. åŠ¨æ€è®¡ç®—å›¾çš„ä¼˜åŠ¿</strong></h2><ul><li><p><strong>æ”¯æŒæ§åˆ¶æµ</strong>ï¼šè®¡ç®—å›¾åœ¨è¿è¡Œæ—¶åŠ¨æ€æ„å»ºï¼Œå¯åŒ…å« <code>if</code>ã€<code>for</code> ç­‰è¯­å¥ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.tensor(<span class="hljs-number">1.0</span>, requires_grad=<span class="hljs-literal">True</span>)<br><span class="hljs-keyword">if</span> x &gt; <span class="hljs-number">0</span>:<br>    y = x ** <span class="hljs-number">2</span><br><span class="hljs-keyword">else</span>:<br>    y = x ** <span class="hljs-number">3</span><br>y.backward()  <span class="hljs-comment"># è‡ªåŠ¨å¤„ç†åˆ†æ”¯</span><br></code></pre></td></tr></table></figure></li><li><p><strong>çµæ´»æ€§</strong>ï¼šé€‚ç”¨äºå˜é•¿è¾“å…¥ï¼ˆå¦‚RNNï¼‰æˆ–å¤æ‚æ¶æ„ï¼ˆå¦‚åŠ¨æ€ç½‘ç»œï¼‰ã€‚</p></li></ul><hr><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><table><thead><tr><th>åœºæ™¯</th><th>æ“ä½œ</th><th>ä»£ç ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>åŸºæœ¬æ¢¯åº¦è®¡ç®—</strong></td><td><code>backward()</code></td><td><code>y.backward()</code></td></tr><tr><td><strong>éæ ‡é‡è¾“å‡º</strong></td><td><code>backward(gradient=...)</code></td><td><code>y.backward(torch.tensor([0.1, 0.01]))</code></td></tr><tr><td><strong>å†»ç»“å‚æ•°</strong></td><td><code>detach()</code> æˆ– <code>requires_grad=False</code></td><td><code>param.detach()</code></td></tr><tr><td><strong>é«˜é˜¶å¯¼æ•°</strong></td><td><code>create_graph=True</code></td><td><code>torch.autograd.grad(..., create_graph=True)</code></td></tr><tr><td><strong>é¿å…æ¢¯åº¦ç´¯åŠ </strong></td><td><code>zero_grad()</code></td><td><code>optimizer.zero_grad()</code></td></tr></tbody></table><p>PyTorch çš„ <code>autograd</code> é€šè¿‡åŠ¨æ€è®¡ç®—å›¾å’Œè‡ªåŠ¨å¾®åˆ†ï¼Œæå¤§ç®€åŒ–äº†æ¢¯åº¦è®¡ç®—è¿‡ç¨‹ï¼Œæ˜¯æ·±åº¦å­¦ä¹ æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒå·¥å…·ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>Autograd</tag>
      
      <tag>Tensor</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Pytorch Tutorial-Tensors</title>
    <link href="/2025/08/03/Tensors/"/>
    <url>/2025/08/03/Tensors/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å­¦ä¹ Pytorchæ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><ul><li>You will sometimes see aÂ 1-dimensional tensor called aÂ <em>vector.</em></li><li>Likewise, a 2-dimensional tensor is often referred to as aÂ <em>matrix.</em></li><li>Anything with more than two dimensions is generally just called a tensor</li></ul><h1 id="Creating-Tensors"><a href="#Creating-Tensors" class="headerlink" title="Creating Tensors"></a>Creating Tensors</h1><ul><li>using factory methods<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.empty(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(x)) <span class="hljs-comment"># &lt;class &#x27;torch.Tensor&#x27;&gt;</span><br><br>zeros = torch.zeros(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(zeros)<br><br>ones = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(ones)<br><br>torch.manual_seed(<span class="hljs-number">1729</span>)<br>random = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(random)<br><br><span class="hljs-comment"># The output</span><br>tensor([[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<br>        [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]])<br>tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<br>        [<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]])<br>tensor([[<span class="hljs-number">0.3126</span>, <span class="hljs-number">0.3791</span>, <span class="hljs-number">0.3087</span>],<br>        [<span class="hljs-number">0.0736</span>, <span class="hljs-number">0.4216</span>, <span class="hljs-number">0.0691</span>]])<br></code></pre></td></tr></table></figure></li></ul><h2 id="Random-Tensors-and-Seeding"><a href="#Random-Tensors-and-Seeding" class="headerlink" title="Random Tensors and Seeding"></a>Random Tensors and Seeding</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">torch.manual_seed(<span class="hljs-number">1729</span>)<br>random1 = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(random1)<br><br>random2 = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(random2)<br><br>torch.manual_seed(<span class="hljs-number">1729</span>)<br>random3 = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(random3)<br><br>random4 = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(random4)<br><br>tensor([[<span class="hljs-number">0.3126</span>, <span class="hljs-number">0.3791</span>, <span class="hljs-number">0.3087</span>],<br>        [<span class="hljs-number">0.0736</span>, <span class="hljs-number">0.4216</span>, <span class="hljs-number">0.0691</span>]])<br>tensor([[<span class="hljs-number">0.2332</span>, <span class="hljs-number">0.4047</span>, <span class="hljs-number">0.2162</span>],<br>        [<span class="hljs-number">0.9927</span>, <span class="hljs-number">0.4128</span>, <span class="hljs-number">0.5938</span>]])<br>tensor([[<span class="hljs-number">0.3126</span>, <span class="hljs-number">0.3791</span>, <span class="hljs-number">0.3087</span>],<br>        [<span class="hljs-number">0.0736</span>, <span class="hljs-number">0.4216</span>, <span class="hljs-number">0.0691</span>]])<br>tensor([[<span class="hljs-number">0.2332</span>, <span class="hljs-number">0.4047</span>, <span class="hljs-number">0.2162</span>],<br>        [<span class="hljs-number">0.9927</span>, <span class="hljs-number">0.4128</span>, <span class="hljs-number">0.5938</span>]])<br></code></pre></td></tr></table></figure><ul><li>å¯ä»¥å‘ç°random1,2 ä¸ 3,4å®Œå…¨ä¸€è‡´ï¼Œéšæœºæ•°ç”Ÿæˆå™¨çš„ç§å­éƒ½æ˜¯1729ï¼Œè¿™æ ·å¯ä»¥ä¿è¯â€œç»“æœå¯å¤ç°â€</li><li>r1ä¸r2çš„å€¼ä¸åŒï¼Œå› ä¸ºç”Ÿæˆr1åéšæœºæ•°ç”Ÿæˆå™¨çš„çŠ¶æ€æ›´æ–°äº†ï¼Œè€Œr3ç›¸å½“äºé‡ç½®äº†ï¼Œç±»ä¼¼äºexecve</li></ul><h2 id="Tensor-Shapes"><a href="#Tensor-Shapes" class="headerlink" title="Tensor Shapes"></a>Tensor Shapes</h2><ul><li>Â when youâ€™re performing operations on two or more tensors, they will <strong>need to be of the sameÂ <em>shape</em></strong>Â - that is, having the same number of dimensions and the same number of cells in each dimension. For that, we have theÂ <code>torch.*_like()</code>Â methods:</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python">x = torch.empty(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(x.shape)<br><span class="hljs-built_in">print</span>(x)<br><br>empty_like_x = torch.empty_like(x)<br><span class="hljs-built_in">print</span>(empty_like_x.shape)<br><span class="hljs-built_in">print</span>(empty_like_x)<br><br>zeros_like_x = torch.zeros_like(x)<br><span class="hljs-built_in">print</span>(zeros_like_x.shape)<br><span class="hljs-built_in">print</span>(zeros_like_x)<br><br>rand_like_x = torch.rand_like(x)<br><span class="hljs-built_in">print</span>(rand_like_x.shape)<br><span class="hljs-built_in">print</span>(rand_like_x)<br><br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>tensor([[[ <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">1.0842e-19</span>,  <span class="hljs-number">4.9628e-26</span>],<br>         [-<span class="hljs-number">2.5250e-29</span>,  <span class="hljs-number">9.8091e-45</span>,  <span class="hljs-number">0.0000e+00</span>]],<br><br>        [[ <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">0.0000e+00</span>],<br>         [ <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">0.0000e+00</span>]]])<br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>tensor([[[ <span class="hljs-number">2.5776e-33</span>,  <span class="hljs-number">1.4013e-45</span>,         nan],<br>         [ <span class="hljs-number">0.0000e+00</span>,  <span class="hljs-number">1.4013e-45</span>,  <span class="hljs-number">0.0000e+00</span>]],<br><br>        [[ <span class="hljs-number">4.9477e-26</span>, -<span class="hljs-number">3.6902e+19</span>,  <span class="hljs-number">2.6082e-33</span>],<br>         [ <span class="hljs-number">1.4013e-45</span>,  <span class="hljs-number">4.9633e-26</span>, -<span class="hljs-number">8.5920e+09</span>]]])<br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>tensor([[[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<br>         [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]],<br><br>        [[<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>],<br>         [<span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>]]])<br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])<br>tensor([[[<span class="hljs-number">0.6128</span>, <span class="hljs-number">0.1519</span>, <span class="hljs-number">0.0453</span>],<br>         [<span class="hljs-number">0.5035</span>, <span class="hljs-number">0.9978</span>, <span class="hljs-number">0.3884</span>]],<br><br>        [[<span class="hljs-number">0.6929</span>, <span class="hljs-number">0.1703</span>, <span class="hljs-number">0.1384</span>],<br>         [<span class="hljs-number">0.4759</span>, <span class="hljs-number">0.7481</span>, <span class="hljs-number">0.0361</span>]]])<br></code></pre></td></tr></table></figure><ul><li>Below that, we call theÂ <code>.empty_like()</code>,Â <code>.zeros_like()</code>,Â  andÂ <code>.rand_like()</code>Â methods. Using theÂ <code>.shape</code>Â property, we can verify that <strong>each of these methods returns a tensor of identical dimensionality and extent</strong>.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python">some_integers = torch.tensor((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">17</span>, <span class="hljs-number">19</span>))<br><span class="hljs-built_in">print</span>(some_integers)<br><br>more_integers = torch.tensor(((<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>), [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>]))<br><span class="hljs-built_in">print</span>(more_integers)<br><br>tensor([ <span class="hljs-number">2</span>,  <span class="hljs-number">3</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">7</span>, <span class="hljs-number">11</span>, <span class="hljs-number">13</span>, <span class="hljs-number">17</span>, <span class="hljs-number">19</span>])<br>tensor([[<span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>],<br>        [<span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>]])<br></code></pre></td></tr></table></figure><ul><li>UsingÂ <code>torch.tensor()</code>Â is the most straightforward way to create a tensor if you already have data in a Python tuple or list. As shown above, nesting the collections will result in a multi-dimensional tensor.(åµŒå¥—é›†åˆå°†äº§ç”Ÿå¤šç»´å¼ é‡)<br><em>Note:Â <code>torch.tensor()</code>Â creates a copy of the data.</em></li></ul><h2 id="Tensor-Data-Types"><a href="#Tensor-Data-Types" class="headerlink" title="Tensor Data Types"></a>Tensor Data Types</h2><p>é»˜è®¤æ˜¯<code>float32,</code> Available data types include:  </p><ul><li><code>torch.bool</code></li><li><code>torch.int8</code></li><li><code>torch.uint8</code></li><li><code>torch.int16</code></li><li><code>torch.int32</code></li><li><code>torch.int64</code></li><li><code>torch.half</code></li><li><code>torch.float</code></li><li><code>torch.double</code></li><li><code>torch.bfloat</code></li></ul><p>è®¾ç½®æ•°æ®ç±»å‹æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€æ˜¯åœ¨åˆ›å»ºæ—¶è®¾ç½®ï¼ŒäºŒæ˜¯ä½¿ç”¨<code>.to()</code>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.ones((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), dtype=torch.int16)<br><span class="hljs-built_in">print</span>(a)<br><br>b = torch.rand((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>), dtype=torch.float64) * <span class="hljs-number">20.</span><br><span class="hljs-built_in">print</span>(b)<br><br>c = b.to(torch.int32)<br><span class="hljs-built_in">print</span>(c)<br><br>tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],<br>        [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]], dtype=torch.int16) <span class="hljs-comment"># è¿™é‡Œå¦‚æœä¸æŒ‡å®šæ•°æ®ç±»å‹ä¼šæ˜¾ç¤º 1.</span><br>tensor([[ <span class="hljs-number">0.9956</span>,  <span class="hljs-number">1.4148</span>,  <span class="hljs-number">5.8364</span>],<br>        [<span class="hljs-number">11.2406</span>, <span class="hljs-number">11.2083</span>, <span class="hljs-number">11.6692</span>]], dtype=torch.float64)<br>tensor([[ <span class="hljs-number">0</span>,  <span class="hljs-number">1</span>,  <span class="hljs-number">5</span>],<br>        [<span class="hljs-number">11</span>, <span class="hljs-number">11</span>, <span class="hljs-number">11</span>]], dtype=torch.int32)<br></code></pre></td></tr></table></figure><h1 id="Math-Logic-with-Tensors"><a href="#Math-Logic-with-Tensors" class="headerlink" title="Math &amp; Logic with Tensors"></a>Math &amp; Logic with Tensors</h1><ul><li>å¤§éƒ¨åˆ†è¿ç®—éƒ½å’Œä½ çš„ç›´è§‰å·®ä¸å¤šï¼Œè€Œä¸”æ¯”è¾ƒâ€œèªæ˜â€<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python">ones = torch.zeros(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) + <span class="hljs-number">1</span><br>twos = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) * <span class="hljs-number">2</span><br>threes = (torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) * <span class="hljs-number">7</span> - <span class="hljs-number">1</span>) / <span class="hljs-number">2</span><br>fours = twos ** <span class="hljs-number">2</span><br>sqrt2s = twos ** <span class="hljs-number">0.5</span><br><br>tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<br>        [<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]])<br>tensor([[<span class="hljs-number">2.</span>, <span class="hljs-number">2.</span>],<br>        [<span class="hljs-number">2.</span>, <span class="hljs-number">2.</span>]])<br>tensor([[<span class="hljs-number">3.</span>, <span class="hljs-number">3.</span>],<br>        [<span class="hljs-number">3.</span>, <span class="hljs-number">3.</span>]])<br>tensor([[<span class="hljs-number">4.</span>, <span class="hljs-number">4.</span>],<br>        [<span class="hljs-number">4.</span>, <span class="hljs-number">4.</span>]])<br>tensor([[<span class="hljs-number">1.4142</span>, <span class="hljs-number">1.4142</span>],<br>        [<span class="hljs-number">1.4142</span>, <span class="hljs-number">1.4142</span>]])<br>        <br>powers2 = twos ** torch.tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])<br><span class="hljs-built_in">print</span>(powers2)<br><br>fives = ones + fours<br><span class="hljs-built_in">print</span>(fives)<br><br>dozens = threes * fours<br><span class="hljs-built_in">print</span>(dozens)<br>tensor([[ <span class="hljs-number">2.</span>,  <span class="hljs-number">4.</span>],<br>        [ <span class="hljs-number">8.</span>, <span class="hljs-number">16.</span>]])<br>tensor([[<span class="hljs-number">5.</span>, <span class="hljs-number">5.</span>],<br>        [<span class="hljs-number">5.</span>, <span class="hljs-number">5.</span>]])<br>tensor([[<span class="hljs-number">12.</span>, <span class="hljs-number">12.</span>],<br>        [<span class="hljs-number">12.</span>, <span class="hljs-number">12.</span>]])<br></code></pre></td></tr></table></figure></li></ul><h2 id="In-Brief-Tensor-Broadcasting"><a href="#In-Brief-Tensor-Broadcasting" class="headerlink" title="In Brief: Tensor Broadcasting"></a>In Brief: Tensor Broadcasting</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">rand = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)<br>doubled = rand * (torch.ones(<span class="hljs-number">1</span>, <span class="hljs-number">4</span>) * <span class="hljs-number">2</span>)<br><br><span class="hljs-built_in">print</span>(rand)<br><span class="hljs-built_in">print</span>(doubled)<br><br>tensor([[<span class="hljs-number">0.2024</span>, <span class="hljs-number">0.5731</span>, <span class="hljs-number">0.7191</span>, <span class="hljs-number">0.4067</span>],<br>        [<span class="hljs-number">0.7301</span>, <span class="hljs-number">0.6276</span>, <span class="hljs-number">0.7357</span>, <span class="hljs-number">0.0381</span>]])<br>tensor([[<span class="hljs-number">0.4049</span>, <span class="hljs-number">1.1461</span>, <span class="hljs-number">1.4382</span>, <span class="hljs-number">0.8134</span>],<br>        [<span class="hljs-number">1.4602</span>, <span class="hljs-number">1.2551</span>, <span class="hljs-number">1.4715</span>, <span class="hljs-number">0.0762</span>]])<br></code></pre></td></tr></table></figure><p><strong>The rules for broadcasting are:</strong></p><ul><li>Each tensor must have at least one dimension - no empty tensors.</li><li>Comparing the dimensionÂ sizesÂ of the two tensors,Â <em>going from last to first ä»åå¾€å‰:</em><ul><li>Each dimension must be equal,Â <em>or</em></li><li>One of the dimensions must be ofÂ sizeÂ 1,Â <em>or</em></li><li>The dimension does not exist in one of the tensors</li></ul></li><li>some correct examples:<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">a =     torch.ones(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<br><br>b = a * torch.rand(   <span class="hljs-number">3</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># 3rd &amp; 2nd dims identical to a, dim 1 absent</span><br><span class="hljs-built_in">print</span>(b)<br><br>c = a * torch.rand(   <span class="hljs-number">3</span>, <span class="hljs-number">1</span>) <span class="hljs-comment"># 3rd dim = 1, 2nd dim identical to a</span><br><span class="hljs-built_in">print</span>(c)<br><br>d = a * torch.rand(   <span class="hljs-number">1</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># 3rd dim identical to a, 2nd dim = 1</span><br><span class="hljs-built_in">print</span>(d)<br></code></pre></td></tr></table></figure>For more information on broadcasting, see theÂ <a href="https://pytorch.org/docs/stable/notes/broadcasting.html">PyTorch documentation</a>Â on the topic.</li></ul><h2 id="More-Math-with-Tensors"><a href="#More-Math-with-Tensors" class="headerlink" title="More Math with Tensors"></a>More Math with Tensors</h2><p>This is a small sample of For more details and the full inventory of math functions, have a look at theÂ <a href="https://pytorch.org/docs/stable/torch.html#math-operations">documentation</a>.<br>ç»™å‡ºä¸€äº›ç»å…¸ç¤ºä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># common functions</span><br>a = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>) * <span class="hljs-number">2</span> - <span class="hljs-number">1</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Common functions:&#x27;</span>)<br><span class="hljs-built_in">print</span>(a)<br><span class="hljs-built_in">print</span>(torch.<span class="hljs-built_in">abs</span>(a))<br><span class="hljs-built_in">print</span>(torch.ceil(a))<br><span class="hljs-built_in">print</span>(torch.floor(a))<br><span class="hljs-built_in">print</span>(torch.clamp(a, -<span class="hljs-number">0.5</span>, <span class="hljs-number">0.5</span>)) <span class="hljs-comment"># `torch.clamp()` æ˜¯ä¸€ä¸ªå¼ é‡è£å‰ªå‡½æ•°ï¼Œç”¨äºé™åˆ¶å¼ é‡ `a` ä¸­çš„å…ƒç´ å€¼åœ¨æŒ‡å®šçš„èŒƒå›´å†… `[min, max]`</span><br><br><span class="hljs-comment"># trigonometric functions and their inverses</span><br>angles = torch.tensor([<span class="hljs-number">0</span>, math.pi / <span class="hljs-number">4</span>, math.pi / <span class="hljs-number">2</span>, <span class="hljs-number">3</span> * math.pi / <span class="hljs-number">4</span>])<br>sines = torch.sin(angles)<br>inverses = torch.asin(sines)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nSine and arcsine:&#x27;</span>)<br><span class="hljs-built_in">print</span>(angles)<br><span class="hljs-built_in">print</span>(sines)<br><span class="hljs-built_in">print</span>(inverses)<br><br><span class="hljs-comment"># bitwise operations</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nBitwise XOR:&#x27;</span>)<br>b = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">5</span>, <span class="hljs-number">11</span>])<br>c = torch.tensor([<span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">10</span>])<br><span class="hljs-built_in">print</span>(torch.bitwise_xor(b, c))<br><br><span class="hljs-comment"># comparisons:</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nBroadcasted, element-wise equality comparison:&#x27;</span>)<br>d = torch.tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>], [<span class="hljs-number">3.</span>, <span class="hljs-number">4.</span>]])<br>e = torch.ones(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># many comparison ops support broadcasting!</span><br><span class="hljs-built_in">print</span>(torch.eq(d, e)) <span class="hljs-comment"># returns a tensor of type bool</span><br><br><span class="hljs-comment"># reductions:</span><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nReduction ops:&#x27;</span>)<br><span class="hljs-built_in">print</span>(torch.<span class="hljs-built_in">max</span>(d))        <span class="hljs-comment"># returns a single-element tensor</span><br><span class="hljs-built_in">print</span>(torch.<span class="hljs-built_in">max</span>(d).item()) <span class="hljs-comment"># extracts the value from the returned tensor</span><br><span class="hljs-built_in">print</span>(torch.mean(d))       <span class="hljs-comment"># average</span><br><span class="hljs-built_in">print</span>(torch.std(d))        <span class="hljs-comment"># standard deviation æ ‡å‡†å·®</span><br><span class="hljs-built_in">print</span>(torch.prod(d))       <span class="hljs-comment"># product of all numbers æ‰€æœ‰å…ƒç´ ç›¸ä¹˜</span><br><span class="hljs-built_in">print</span>(torch.unique(torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]))) <span class="hljs-comment"># filter unique elements</span><br><br><span class="hljs-comment"># vector and linear algebra operations</span><br>v1 = torch.tensor([<span class="hljs-number">1.</span>, <span class="hljs-number">0.</span>, <span class="hljs-number">0.</span>])         <span class="hljs-comment"># x unit vector</span><br>v2 = torch.tensor([<span class="hljs-number">0.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">0.</span>])         <span class="hljs-comment"># y unit vector</span><br>m1 = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)                   <span class="hljs-comment"># random matrix</span><br>m2 = torch.tensor([[<span class="hljs-number">3.</span>, <span class="hljs-number">0.</span>], [<span class="hljs-number">0.</span>, <span class="hljs-number">3.</span>]]) <span class="hljs-comment"># three times identity matrix</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\nVectors &amp; Matrices:&#x27;</span>)<br><span class="hljs-built_in">print</span>(torch.cross(v2, v1)) <span class="hljs-comment"># negative of z unit vector å‰ä¹˜</span><br><span class="hljs-built_in">print</span>(m1)<br>m3 = torch.matmul(m1, m2)  <span class="hljs-comment"># mm: matrix multiplication</span><br><span class="hljs-built_in">print</span>(m3)                  <span class="hljs-comment"># 3 times m1</span><br><span class="hljs-built_in">print</span>(torch.svd(m3))       <span class="hljs-comment"># singular value decomposition,å¥‡å¼‚å€¼åˆ†è§£</span><br><br><br>Common functions:<br>tensor([[ <span class="hljs-number">0.2719</span>,  <span class="hljs-number">0.1760</span>,  <span class="hljs-number">0.8550</span>,  <span class="hljs-number">0.0404</span>],<br>        [-<span class="hljs-number">0.5709</span>,  <span class="hljs-number">0.4227</span>, -<span class="hljs-number">0.9504</span>, -<span class="hljs-number">0.8692</span>]])<br>tensor([[<span class="hljs-number">0.2719</span>, <span class="hljs-number">0.1760</span>, <span class="hljs-number">0.8550</span>, <span class="hljs-number">0.0404</span>],<br>        [<span class="hljs-number">0.5709</span>, <span class="hljs-number">0.4227</span>, <span class="hljs-number">0.9504</span>, <span class="hljs-number">0.8692</span>]])<br>tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<br>        [-<span class="hljs-number">0.</span>, <span class="hljs-number">1.</span>, -<span class="hljs-number">0.</span>, -<span class="hljs-number">0.</span>]])<br>tensor([[ <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>],<br>        [-<span class="hljs-number">1.</span>,  <span class="hljs-number">0.</span>, -<span class="hljs-number">1.</span>, -<span class="hljs-number">1.</span>]])<br>tensor([[ <span class="hljs-number">0.2719</span>,  <span class="hljs-number">0.1760</span>,  <span class="hljs-number">0.5000</span>,  <span class="hljs-number">0.0404</span>],<br>        [-<span class="hljs-number">0.5000</span>,  <span class="hljs-number">0.4227</span>, -<span class="hljs-number">0.5000</span>, -<span class="hljs-number">0.5000</span>]])<br><br>Sine <span class="hljs-keyword">and</span> arcsine:<br>tensor([<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.7854</span>, <span class="hljs-number">1.5708</span>, <span class="hljs-number">2.3562</span>])<br>tensor([<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.7071</span>, <span class="hljs-number">1.0000</span>, <span class="hljs-number">0.7071</span>]) <span class="hljs-comment"># xæ¯”è¾ƒå°çš„æ—¶å€™å’Œsinxå·®ä¸å¤š</span><br>tensor([<span class="hljs-number">0.0000</span>, <span class="hljs-number">0.7854</span>, <span class="hljs-number">1.5708</span>, <span class="hljs-number">0.7854</span>])<br><br>Bitwise XOR:<br>tensor([<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>])<br><br>Broadcasted, element-wise equality comparison:<br>tensor([[ <span class="hljs-literal">True</span>, <span class="hljs-literal">False</span>],<br>        [<span class="hljs-literal">False</span>, <span class="hljs-literal">False</span>]])<br><br>Reduction ops:<br>tensor(<span class="hljs-number">4.</span>)<br><span class="hljs-number">4.0</span><br>tensor(<span class="hljs-number">2.5000</span>)<br>tensor(<span class="hljs-number">1.2910</span>)<br>tensor(<span class="hljs-number">24.</span>)<br>tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>])<br><br>Vectors &amp; Matrices:<br>tensor([ <span class="hljs-number">0.</span>,  <span class="hljs-number">0.</span>, -<span class="hljs-number">1.</span>])<br>tensor([[<span class="hljs-number">0.8629</span>, <span class="hljs-number">0.6615</span>],<br>        [<span class="hljs-number">0.8881</span>, <span class="hljs-number">0.5365</span>]])<br>tensor([[<span class="hljs-number">2.5888</span>, <span class="hljs-number">1.9844</span>],<br>        [<span class="hljs-number">2.6643</span>, <span class="hljs-number">1.6095</span>]])<br>torch.return_types.svd(<br>U=tensor([[-<span class="hljs-number">0.7236</span>, -<span class="hljs-number">0.6903</span>],<br>        [-<span class="hljs-number">0.6903</span>,  <span class="hljs-number">0.7236</span>]]),<br>S=tensor([<span class="hljs-number">4.5019</span>, <span class="hljs-number">0.2488</span>]),<br>V=tensor([[-<span class="hljs-number">0.8246</span>,  <span class="hljs-number">0.5657</span>],<br>        [-<span class="hljs-number">0.5657</span>, -<span class="hljs-number">0.8246</span>]]))<br></code></pre></td></tr></table></figure><h1 id="Copying-Tensors"><a href="#Copying-Tensors" class="headerlink" title="Copying Tensors"></a>Copying Tensors</h1><ul><li>clone()<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<br>b = a.clone()<br><br><span class="hljs-keyword">assert</span> b <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> a      <span class="hljs-comment"># different objects in memory...</span><br><span class="hljs-built_in">print</span>(torch.eq(a, b))  <span class="hljs-comment"># ...but still with the same contents!</span><br><br>a[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">561</span>          <span class="hljs-comment"># a changes...</span><br><span class="hljs-built_in">print</span>(b)               <span class="hljs-comment"># ...but b is still all ones</span><br></code></pre></td></tr></table></figure></li><li><strong>There is an important thing to be aware of when usingÂ <code>clone()</code>.</strong>Â If your source tensor has autograd, enabled then so will the clone.Â <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, requires_grad=<span class="hljs-literal">True</span>) <span class="hljs-comment"># turn on autograd</span><br><span class="hljs-built_in">print</span>(a)<br><br>b = a.clone()<br><span class="hljs-built_in">print</span>(b)<br><br>c = a.detach().clone()<br><span class="hljs-built_in">print</span>(c)<br><br><span class="hljs-built_in">print</span>(a)<br><br>tensor([[<span class="hljs-number">0.5461</span>, <span class="hljs-number">0.5396</span>],<br>        [<span class="hljs-number">0.3053</span>, <span class="hljs-number">0.1973</span>]], requires_grad=<span class="hljs-literal">True</span>)<br>tensor([[<span class="hljs-number">0.5461</span>, <span class="hljs-number">0.5396</span>],<br>        [<span class="hljs-number">0.3053</span>, <span class="hljs-number">0.1973</span>]], grad_fn=&lt;CloneBackward&gt;)<br>tensor([[<span class="hljs-number">0.5461</span>, <span class="hljs-number">0.5396</span>],<br>        [<span class="hljs-number">0.3053</span>, <span class="hljs-number">0.1973</span>]])<br>tensor([[<span class="hljs-number">0.5461</span>, <span class="hljs-number">0.5396</span>],<br>        [<span class="hljs-number">0.3053</span>, <span class="hljs-number">0.1973</span>]], requires_grad=<span class="hljs-literal">True</span>)<br></code></pre></td></tr></table></figure></li><li>TheÂ <code>detach()</code>Â methodÂ <em>detaches the tensor from its computation history.</em>Â It says, â€œdo whatever comes next as if autograd was off.â€ It does thisÂ <em>without</em>Â changingÂ <code>a</code>Â - you can see that when we printÂ <code>a</code>Â again at the end, it retains itsÂ <code>requires_grad=True</code>Â property.</li></ul><h1 id="Moving-to-GPU"><a href="#Moving-to-GPU" class="headerlink" title="Moving to GPU"></a>Moving to GPU</h1><p>å¼•å…¥ï¼šOne of the major advantages of PyTorch is its robust acceleration on CUDA-compatible Nvidia GPUs. (â€œCUDAâ€ stands forÂ <em>Compute Unified Device Architecture</em>, which is Nvidiaâ€™s platform for parallel computing.) So far, everything weâ€™ve done has been on CPU. How do we move to the faster hardware?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> torch.cuda.is_available():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;We have a GPU!&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Sorry, CPU only.&#x27;</span>)<br></code></pre></td></tr></table></figure><p>CPUåœ¨RAMä¸­è¿›è¡Œè®¡ç®—ï¼Œè€ŒGPUæä¾›äº†é™„åŠ å†…å­˜ï¼Œç”¨GPUè®¡ç®—æ—¶éœ€è¦å°†æ•°æ®è¿ç§»åˆ°GPU</p><h2 id="åˆ›å»ºæ—¶è¿ç§»"><a href="#åˆ›å»ºæ—¶è¿ç§»" class="headerlink" title="åˆ›å»ºæ—¶è¿ç§»"></a>åˆ›å»ºæ—¶è¿ç§»</h2><ul><li><p>å¼ é‡é»˜è®¤åˆ›å»ºåœ¨CPUä¸Šï¼Œä½ å¯ä»¥ä½¿ç”¨<code>device</code>æ¥åˆ¶å®šè®¾å¤‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> torch.cuda.is_available():<br>    gpu_rand = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, device=<span class="hljs-string">&#x27;cuda&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(gpu_rand)<br><span class="hljs-keyword">else</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Sorry, CPU only.&#x27;</span>)<br></code></pre></td></tr></table></figure></li><li><p>ä¸€ä¸ªå¥½çš„ä¹ æƒ¯æ˜¯ä½¿ç”¨<code>my_device</code>æ¥è¡¨å¾è‡ªå·±çš„è®¾å¤‡ï¼Œè€Œä¸ç›´æ¥ä½¿ç”¨å­—ç¬¦ä¸²</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">if</span> torch.cuda.is_available():<br>    my_device = torch.device(<span class="hljs-string">&#x27;cuda&#x27;</span>)<br><span class="hljs-keyword">else</span>:<br>    my_device = torch.device(<span class="hljs-string">&#x27;cpu&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Device: &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(my_device))<br></code></pre></td></tr></table></figure></li></ul><h2 id="to-è¿ç§»"><a href="#to-è¿ç§»" class="headerlink" title="to()è¿ç§»"></a>to()è¿ç§»</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">y = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<br>y = y.to(my_device)<br></code></pre></td></tr></table></figure><p><strong>It is important to know that</strong> in order to do computation involving two or more tensors,Â <em>all of the tensors must be on the same device</em>.</p><h1 id="Manipulating-Tensor-Shapes"><a href="#Manipulating-Tensor-Shapes" class="headerlink" title="Manipulating Tensor Shapes"></a>Manipulating Tensor Shapes</h1><p>PyTorch models generally expectÂ <em>batches</em>Â of input.For example, imagine having a model that works on 3 x 226 x 226 images - a 226-pixel square with 3 color channels. When you load and transform it, youâ€™ll get a tensor of shapeÂ <code>(3, 226, 226)</code>. Your model, though, is expecting input of shapeÂ <code>(N, 3, 226, 226)</code>, whereÂ <code>N</code>Â is the number of images in the batch. So how do you make a batch of one?</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.rand(<span class="hljs-number">3</span>, <span class="hljs-number">226</span>, <span class="hljs-number">226</span>)<br>b = a.unsqueeze(<span class="hljs-number">0</span>)<br><br><span class="hljs-built_in">print</span>(a.shape)<br><span class="hljs-built_in">print</span>(b.shape)<br><br>torch.Size([<span class="hljs-number">3</span>, <span class="hljs-number">226</span>, <span class="hljs-number">226</span>])<br>torch.Size([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">226</span>, <span class="hljs-number">226</span>])<br></code></pre></td></tr></table></figure><ul><li>TheÂ <code>unsqueeze()</code>Â method adds a dimension of extentÂ 1.Â <code>unsqueeze(0)</code>Â adds it as a new zeroth dimension - now you have a batch of one!</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.rand(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>)<br><span class="hljs-built_in">print</span>(a.shape)<br><span class="hljs-built_in">print</span>(a)<br><br>b = a.squeeze(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(b.shape)<br><span class="hljs-built_in">print</span>(b)<br><br>c = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)<br><span class="hljs-built_in">print</span>(c.shape)<br><br>d = c.squeeze(<span class="hljs-number">0</span>)<br><span class="hljs-built_in">print</span>(d.shape)<br><br>torch.Size([<span class="hljs-number">1</span>, <span class="hljs-number">20</span>])<br>tensor([[<span class="hljs-number">0.4887</span>, <span class="hljs-number">0.8625</span>, <span class="hljs-number">0.6191</span>, <span class="hljs-number">0.9935</span>, <span class="hljs-number">0.1844</span>, <span class="hljs-number">0.6138</span>, <span class="hljs-number">0.6854</span>, <span class="hljs-number">0.0438</span>, <span class="hljs-number">0.0636</span>,<br>         <span class="hljs-number">0.2884</span>, <span class="hljs-number">0.4362</span>, <span class="hljs-number">0.2368</span>, <span class="hljs-number">0.1394</span>, <span class="hljs-number">0.1721</span>, <span class="hljs-number">0.1751</span>, <span class="hljs-number">0.3851</span>, <span class="hljs-number">0.0732</span>, <span class="hljs-number">0.3118</span>,<br>         <span class="hljs-number">0.9180</span>, <span class="hljs-number">0.7293</span>]])<br>torch.Size([<span class="hljs-number">20</span>])<br>tensor([<span class="hljs-number">0.4887</span>, <span class="hljs-number">0.8625</span>, <span class="hljs-number">0.6191</span>, <span class="hljs-number">0.9935</span>, <span class="hljs-number">0.1844</span>, <span class="hljs-number">0.6138</span>, <span class="hljs-number">0.6854</span>, <span class="hljs-number">0.0438</span>, <span class="hljs-number">0.0636</span>,<br>        <span class="hljs-number">0.2884</span>, <span class="hljs-number">0.4362</span>, <span class="hljs-number">0.2368</span>, <span class="hljs-number">0.1394</span>, <span class="hljs-number">0.1721</span>, <span class="hljs-number">0.1751</span>, <span class="hljs-number">0.3851</span>, <span class="hljs-number">0.0732</span>, <span class="hljs-number">0.3118</span>,<br>        <span class="hljs-number">0.9180</span>, <span class="hljs-number">0.7293</span>])<br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>])<br>torch.Size([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>])<br></code></pre></td></tr></table></figure><ul><li>å…¶å®å¢åŠ æˆ–å‡å°‘ä¸€ä¸ªèŒƒå›´ä¸º1çš„ç»´åº¦ï¼Œå…¶å®å¯¹æ•°æ®æœ¬èº«å¹¶æ²¡æœ‰å½±å“ï¼Œè¿™ä¹Ÿèƒ½æç¤ºæˆ‘ä»¬ï¼šÂ Calls toÂ <code>squeeze()</code>Â andÂ <code>unsqueeze()</code>Â can only act on dimensions of extentÂ 1Â because to do otherwise would change the number of elements in the tensor.</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">a = torch.ones(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<br>b = torch.rand(   <span class="hljs-number">3</span>)     <span class="hljs-comment"># trying to multiply a * b will give a runtime error</span><br>c = b.unsqueeze(<span class="hljs-number">1</span>)       <span class="hljs-comment"># change to a 2-dimensional tensor, adding new dim at the end</span><br><span class="hljs-built_in">print</span>(c.shape)<br><span class="hljs-built_in">print</span>(a * c)             <span class="hljs-comment"># broadcasting works again!</span><br></code></pre></td></tr></table></figure><p>Sometimes youâ€™ll want to change the shape of a tensor more radically, while still preserving the number of elements and their contents. One case where this happens is at the interface between a convolutional layer of a model and a linear layer of the model - this is common in image classification models. A convolution kernel will yield an output tensor of shapeÂ <em>features x width x height,</em>Â but the following linear layer expects aÂ 1-dimensional input.Â <code>reshape()</code>Â will do this for you, provided that the dimensions you request yield the same number of elements as the input tensor has:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">output3d = torch.rand(<span class="hljs-number">6</span>, <span class="hljs-number">20</span>, <span class="hljs-number">20</span>)<br><span class="hljs-built_in">print</span>(output3d.shape)<br><br>input1d = output3d.reshape(<span class="hljs-number">6</span> * <span class="hljs-number">20</span> * <span class="hljs-number">20</span>)<br><span class="hljs-built_in">print</span>(input1d.shape)<br><br><span class="hljs-comment"># can also call it as a method on the torch module:</span><br><span class="hljs-built_in">print</span>(torch.reshape(output3d, (<span class="hljs-number">6</span> * <span class="hljs-number">20</span> * <span class="hljs-number">20</span>,)).shape)<br><br>torch.Size([<span class="hljs-number">6</span>, <span class="hljs-number">20</span>, <span class="hljs-number">20</span>])<br>torch.Size([<span class="hljs-number">2400</span>])<br>torch.Size([<span class="hljs-number">2400</span>])<br></code></pre></td></tr></table></figure><h1 id="NumPy-Bridge"><a href="#NumPy-Bridge" class="headerlink" title="NumPy Bridge"></a>NumPy Bridge</h1><p>NumPy æœ‰å’Œå¼ é‡æ¯”è¾ƒæƒ³é€šçš„åœ°æ–¹ï¼Œæ¯”å¦‚<code>Broadcast</code>ï¼Œæ‰€ä»¥åœ¨äºŒè€…ä¹‹é—´è½¬æ¢å¾ˆå®¹æ˜“</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br>numpy_array = np.ones((<span class="hljs-number">2</span>, <span class="hljs-number">3</span>))<br><span class="hljs-built_in">print</span>(numpy_array)<br><br>pytorch_tensor = torch.from_numpy(numpy_array)<br><span class="hljs-built_in">print</span>(pytorch_tensor)<br><br>[[<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]<br> [<span class="hljs-number">1.</span> <span class="hljs-number">1.</span> <span class="hljs-number">1.</span>]]<br>tensor([[<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>],<br>        [<span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>, <span class="hljs-number">1.</span>]], dtype=torch.float64)<br></code></pre></td></tr></table></figure><ul><li>PyTorch åˆ›å»ºäº†ä¸€ä¸ªä¸ NumPy æ•°ç»„å…·æœ‰ç›¸åŒå½¢çŠ¶å¹¶åŒ…å«ç›¸åŒæ•°æ®çš„å¼ é‡ï¼Œç”šè‡³ä¿ç•™äº† NumPy é»˜è®¤çš„ 64 ä½æµ®ç‚¹æ•°æ®ç±»å‹ã€‚</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">pytorch_rand = torch.rand(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-built_in">print</span>(pytorch_rand)<br><br>numpy_rand = pytorch_rand.numpy()<br><span class="hljs-built_in">print</span>(numpy_rand)<br></code></pre></td></tr></table></figure><p>è¿™äº›éƒ½ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯è¦çŸ¥é“<strong>è¿™äº›è½¬æ¢åçš„å¯¹è±¡ä½¿ç”¨ä¸å…¶æºå¯¹è±¡æœ‰ç›¸åŒçš„åº•å±‚å†…å­˜_Â ï¼Œè¿™æ„å‘³ç€å¯¹ä¸€ä¸ªå¯¹è±¡çš„æ›´æ”¹ä¼šåæ˜ åœ¨å¦ä¸€ä¸ªå¯¹è±¡ä¸­</strong>ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">numpy_array[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>] = <span class="hljs-number">23</span><br><span class="hljs-built_in">print</span>(pytorch_tensor)<br><br>pytorch_rand[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>] = <span class="hljs-number">17</span><br><span class="hljs-built_in">print</span>(numpy_rand)<br><br>tensor([[ <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>,  <span class="hljs-number">1.</span>],<br>        [ <span class="hljs-number">1.</span>, <span class="hljs-number">23.</span>,  <span class="hljs-number">1.</span>]], dtype=torch.float64)<br>[[ <span class="hljs-number">0.5646949</span>   <span class="hljs-number">0.91600937</span>  <span class="hljs-number">0.77828014</span>]<br> [ <span class="hljs-number">0.82769746</span> <span class="hljs-number">17.</span>          <span class="hljs-number">0.6381657</span> ]]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Pytorch</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Pytorch</tag>
      
      <tag>Python</tag>
      
      <tag>ML</tag>
      
      <tag>Tensor</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>TUHæ•°æ®é›†ä¸‹è½½</title>
    <link href="/2025/07/30/TUH%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD/"/>
    <url>/2025/07/30/TUH%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p> å¦‚æœä½ æ­£åœ¨ä»äº‹EEG&#x2F;BCI ç­‰æ–¹å‘çš„ç ”ç©¶ï¼Œæˆ–è®¸ä¼šç”¨åˆ°TUHçš„æ•°æ®é›†ï¼Œlike TUSZ\TUEG\TUABâ€¦â€¦<br>æœ¬æ–‡æ—¨åœ¨æä¾›æä¾›ä¸€ç‚¹ä¸ªäººç»éªŒï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š </p>          </div><p>ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸ªæ•°æ®é›†ä¸‹è½½ç¡®å®è´¹äº†æˆ‘è€åŠå¤©åŠ²ğŸ˜­</p><ul><li>æ•°æ®é›†å®˜ç½‘ç½‘å€ï¼š<a href="https://isip.piconepress.com/projects/nedc/html/tuh_eeg/">this site</a></li><li>å¯æä¾›ä¸‹è½½çš„èµ„æºï¼š<img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/20250730100734556.png"></li><li>æ¥ä¸‹æ¥æˆ‘å°±åˆ†å‡ æ­¥æ¥è¯´è¯´äº†</li></ul><h1 id="è´¦å·ç”³è¯·"><a href="#è´¦å·ç”³è¯·" class="headerlink" title="è´¦å·ç”³è¯·"></a>è´¦å·ç”³è¯·</h1><p>è¿›å…¥ä¸»é¡µç¬¬ä¸€æ®µä¾¿æ˜¯ï¼š</p><blockquote><p>To request access to the TUH EEG Corpus, please fill outÂ <a href="https://isip.piconepress.com/projects/nedc/forms/tuh_eeg.pdf">this form</a>Â and email a signed copy toÂ <a href="mailto:help@nedcdata.org?Subject=Download%20The%20TUH%20EEG%20Corpus">help@nedcdata.org</a>. Please include â€œDownload The TUH EEG Corpusâ€ in the subject line or click on thisÂ <a href="mailto:help@nedcdata.org?Subject=Download%20The%20TUH%20EEG%20Corpus">link</a>.</p></blockquote><p>ä½ è¦ä¸‹è½½æ•°æ®é›†ï¼Œåé¢éœ€è¦ä¸€ä¸ªè´¦å·ç™»å½•ï¼Œæ‰€ä»¥å…ˆç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œå¤§è‡´éœ€è¦æˆ‘ä»¬å®Œæˆä»¥ä¸‹å‡ æ­¥ï¼š</p><ul><li>å¡«å†™è¡¨æ ¼</li><li>æ’å…¥ç­¾å</li><li>å‘é€é‚®ä»¶</li></ul><p>å½“ä½ ä¸‹è½½é™„ä»¶åï¼Œå¯ä»¥çœ‹åˆ°çœŸæ­£æ„ä¹‰ä¸Šçš„è¡¨æ ¼å‰é¢çš„å…¨éƒ¨æ˜¯æ³¨æ„äº‹é¡¹ã€‚ä¹Ÿæ„å‘³ç€è¡¨æ ¼çš„å¡«å†™å¿…é¡»<code>formatted correctly</code>ï¼Œ<strong>äººå·¥å®¡æ ¸æ¯”è¾ƒä¸¥è‹›</strong>ï¼Œæˆ‘ç¬¬ä¸€è½®å°±è¢«rejectäº†ï¼Œè¿™é‡Œè¯´ä¸€ä¸‹ï¼š</p><table><thead><tr><th>Your Legal Name</th><th>å¡«å†™ä½ çš„è‹±æ–‡å</th></tr></thead><tbody><tr><td>Your Institutional Affiliation<br>(Complete Name â€“ No Abbreviations)</td><td>ä½ æ‰€åœ¨çš„æœºæ„åç§°ï¼Œå¡«å®Œæ•´åå­—ï¼Œæ¯”å¦‚<br>Beihang University, Beijing, China</td></tr><tr><td>Your Personal Post Office Address At<br>The Above Institution</td><td>è¿™ä¸ªæœ€éº»çƒ¦ï¼Œå®˜æ–¹ç»™äº†ä¸€ä¸ªæ¨¡æ¿ï¼Œå¯ä»¥æ”¹æˆè‡ªå·±çš„</td></tr><tr><td>Telephone Number<br>(Include Your Country Code)</td><td>éœ€è¦æ·»åŠ å›½å®¶ä»£ç ï¼ŒCNå°±æ˜¯+86 ä½ çš„ç”µè¯</td></tr><tr><td>Email Address</td><td>æœ€å¥½å¡«å­¦æ ¡æˆ–è€…æœºæ„çš„é‚®ç®±ï¼Œåˆ°æ—¶å€™ä¹Ÿç”¨è¿™ä¸ªé‚®ç®±å‘</td></tr><tr><td>ç¬¬ä¸‰åˆ—éœ€è¦æˆ‘ä»¬æä¾›åœ¨æœºæ„ä¸­çš„<strong>éå¸¸è¯¦ç»†çš„ä¸ªäººåŠå…¬ä½ç½®</strong>æˆ–è€…å«ä¸ªäººé‚®å±€ä½ç½®ï¼Œä½œè€…ç»™å‡ºçš„ç¤ºä¾‹æ˜¯è‡ªå·±ï¼š</td><td></td></tr></tbody></table><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">Joseph Picone<br>ENGR 718<br>College of Engineering<br>Temple University<br>1947 North 12th Street<br>Philadelphia, Pennsylvania, USA 19111<br></code></pre></td></tr></table></figure><p>å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è¡Œå¡«åå­—ï¼Œç¬¬äºŒè¡Œéœ€è¦å¡«ä½ çš„åŠå…¬å®¤ä½ç½®ï¼Œæˆ‘è¿™é‡Œå°±å¡«çš„å®éªŒå®¤ä½ç½®ï¼Œç¬¬ä¸‰è¡Œå¡«å­¦é™¢ï¼Œç¬¬å››è¡Œå¡«å­¦æ ¡ï¼Œ<strong>æœ€åä¸¤è¡Œå¡«å…·ä½“ä½ç½®ä¸é‚®ç¼–ï¼Œè¿™ä¸ªéœ€è¦éå¸¸å‡†ç¡®ä¸”æ­£å¼ï¼ŒæŠŠæ¡ä¸å‡†çš„è¯å¯ä»¥é—®ä¸€ä¸‹å¸ˆé•¿</strong>ã€‚å¯ä»¥å‘ç°ï¼Œå€’ç€è¿èµ·æ¥å°±æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå®šä½ä½ çš„ç²¾ç¡®ä½ç½®ã€‚è¿™é‡Œä¹Ÿç»™å‡ºæˆ‘çš„ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs text">å¸…å“¥ä¸€æš<br>New Main Building G720<br>School of Computer Science and Engineering<br>Beihang University<br>37 Xueyuan Road, Haidian District,<br>Beijing, P.R.China, 100191<br></code></pre></td></tr></table></figure><p>æœ€åæ’å…¥æ—¥æœŸä»¥åŠä½ çš„ç­¾åå°±å¥½äº†ï¼Œç„¶åæŠŠè¿™ä¸ªä½œä¸ºé™„ä»¶ï¼Œå‘ä¸€å°ä¸»é¢˜ä¸ºâ€Download The TUH EEG Corpusâ€œçš„é‚®ä»¶ç»™ <a href="mailto:&#x68;&#101;&#x6c;&#x70;&#x40;&#x6e;&#x65;&#100;&#x63;&#x64;&#97;&#x74;&#x61;&#46;&#x6f;&#x72;&#x67;">&#x68;&#101;&#x6c;&#x70;&#x40;&#x6e;&#x65;&#100;&#x63;&#x64;&#97;&#x74;&#x61;&#46;&#x6f;&#x72;&#x67;</a> å°±å¥½ï¼Œå¤§æ¦‚ä¸€ä¸¤å¤©å°±ä¼šç»™ä½ å›å¤ï¼Œè¿™æ ·ä½ å°±æœ‰ä¸€ä¸ªè´¦å·å¯†ç äº†ã€‚</p><h1 id="windowsä¸‹è½½å™¨å®‰è£…"><a href="#windowsä¸‹è½½å™¨å®‰è£…" class="headerlink" title="windowsä¸‹è½½å™¨å®‰è£…"></a>windowsä¸‹è½½å™¨å®‰è£…</h1><p>&#x3D;&#x3D;Note: å¦‚æœä½ æ˜¯ Linux&#x2F;Mac ç”¨æˆ·ï¼Œè·³è¿‡è¿™ä¸€æ­¥ï¼Œå½“ç„¶æˆ‘ä¼°è®¡å¤§éƒ¨åˆ†æœ‹å‹è¿˜æ˜¯ç”¨çš„æœåŠ¡å™¨&#x3D;&#x3D;</p><p>winç”¨æˆ·éœ€è¦ä¸‹è½½MobaXterm,from <a href="https://mobaxterm.mobatek.net/">this site</a> ã€‚è¿™æ˜¯ä¸€æ¬¾ <strong>åŠŸèƒ½å¼ºå¤§çš„ Windows è¿œç¨‹ç®¡ç†å·¥å…·</strong>ï¼Œé›†æˆäº†å¤šç§ç½‘ç»œå·¥å…·ï¼ˆSSHã€X11ã€RDPã€VNCã€FTPã€SFTP ç­‰ï¼‰ï¼Œå¹¶å†…ç½®äº† <strong>Linux å‘½ä»¤ç¯å¢ƒ</strong>ï¼ˆCygwinï¼‰<br>è§£å‹åéšä¾¿å®‰è£…ï¼Œç„¶åæ‰“å¼€ï¼Œç„¶åæ‰“å¼€æœ¬åœ°ç»ˆç«¯ï¼Œå¥½åƒå°±è¿™æ ·</p><h1 id="ä¸‹è½½å‘½ä»¤"><a href="#ä¸‹è½½å‘½ä»¤" class="headerlink" title="ä¸‹è½½å‘½ä»¤"></a>ä¸‹è½½å‘½ä»¤</h1><p>Linuxç”¨æˆ·ç›´æ¥æ‰“å¼€ç»ˆç«¯å³å¯ï¼Œå®˜ç½‘å…ˆç»™äº†ä¸€ä¸ªæµ‹è¯•æŒ‡ä»¤ï¼Œçœ‹çœ‹è¿æ¥æœ‰æ— é—®é¢˜ï¼Œå›è½¦åè¾“å…¥å¯†ç ï¼Œå°±æ˜¯ä½ å…ˆå‰è´¦å·çš„å¯†ç å³å¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rsync -auxvL nedc-tuh-eeg@www.isip.piconepress.com:data/tuh_eeg/TEST<br></code></pre></td></tr></table></figure><p>å¦‚æœä¸‹è½½æˆåŠŸï¼Œé‚£ä¹ˆå¯ä»¥ç»§ç»­<br>ä¸€ä¸ªå¸¸è§çš„ä¸‹è½½æŒ‡ä»¤å°±æ˜¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rsync -auxvL nedc-tuh-eeg@www.isip.piconepress.com:data/tuh_eeg/AAAA/<br></code></pre></td></tr></table></figure><p>ä½ å¯ä»¥æŠŠä½ æƒ³è¦ä¸‹è½½çš„æ•°æ®é›†æ›¿æ¢AAAAå³å¯ï¼Œè¿™é‡Œæœ‰ä¸ªå‘ï¼Œæ¯”å¦‚ä½ æƒ³ä¸‹è½½TUSZï¼Œä¸èƒ½ç›´æ¥æ›¿æ¢ï¼Œè€Œæ˜¯è¦åœ¨<a href="https://isip.piconepress.com/projects/nedc/data/tuh_eeg/">è¿™é‡Œ</a>æ‰¾åˆ°å…¨åæ›¿æ¢ï¼Œå…¶ä»–ä¹Ÿæ˜¯ã€‚ç„¶åä½ åº”è¯¥ä¸æƒ³ä¿å­˜åˆ°é»˜è®¤ç›®å½•ï¼Œè¿˜å¯ä»¥å†åé¢åŠ ä¸Šä½ æƒ³è¦ä¸‹è½½çš„ç›®å½•ã€‚æœ€åçš„å®Œæ•´çš„æŒ‡ä»¤å°±æ˜¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rsync -auxvL nedc-tuh-eeg@www.isip.piconepress.com:data/tuh_eeg/tuh_eeg_seizure/    your/path/for/data<br></code></pre></td></tr></table></figure><p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®å®˜ç½‘ä¸Šçš„ç›®å½•ç»“æ„é€‰æ‹©åªä¸‹è½½æŸç‰ˆæœ¬æˆ–æŸæ–‡ä»¶å¤¹ï¼Œå˜æ¢è·¯å¾„å³å¯</p><h1 id="ä¹‹å"><a href="#ä¹‹å" class="headerlink" title="ä¹‹å"></a>ä¹‹å</h1><p>å¦‚æœæ•°æ®é›†æ¯”è¾ƒå¤§ï¼Œä½ å°±å¯ä»¥å¼€å§‹æ— å°½åœ°ç­‰å¾…äº†ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨çš„è¯ï¼ŒæŒ‚ç€å°±è¡Œï¼Œåæ­£æˆ‘å½“æ—¶è¿˜ä¸‹äº†æŒºä¹…ã€‚ã€‚<br>å¦å¤–æˆ‘æ²¡ç”¨ğŸªœï¼Œä¹Ÿæ²¡æ–­è¿</p><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://blog.csdn.net/JY_Wang1996/article/details/147655277?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522a3f06aac17bebaa9234d98994c0f46a6%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=a3f06aac17bebaa9234d98994c0f46a6&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-1-147655277-null-null.142%5Ev102%5Epc_search_result_base1&utm_term=TUH%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD&spm=1018.2226.3001.4187">Fergieeee</a><br><a href="https://blog.csdn.net/weixin_54050455/article/details/146293617?ops_request_misc=%257B%2522request%255Fid%2522%253A%252281d56fdea1baa3a666ea38e7125a780f%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=81d56fdea1baa3a666ea38e7125a780f&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-146293617-null-null.142%5Ev102%5Epc_search_result_base1&utm_term=TUH%E6%95%B0%E6%8D%AE%E9%9B%86%E4%B8%8B%E8%BD%BD&spm=1018.2226.3001.4187">å˜»å˜»å“ˆå“ˆå¥½å¥½ç”Ÿæ´»</a></p>]]></content>
    
    
    <categories>
      
      <category>å—‘ç›</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å—‘ç›</tag>
      
      <tag>æ•°æ®é›†</tag>
      
      <tag>EEG</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>SQL</title>
    <link href="/2025/07/20/SQL/"/>
    <url>/2025/07/20/SQL/</url>
    
    <content type="html"><![CDATA[<p>æœ¬ç¬”è®°æ—¨åœ¨å…¨é¢æ¢³ç†SQLçš„æ ¸å¿ƒæ¦‚å¿µï¼Œä»æ•°æ®å®šä¹‰ã€åŸºç¡€æŸ¥è¯¢åˆ°å¤æ‚çš„å¤šè¡¨è¿æ¥ã€å­æŸ¥è¯¢åŠé«˜çº§ç‰¹æ€§ã€‚æ‰€æœ‰æ¦‚å¿µå‡ç»“åˆäº†è¯¾ç¨‹è®²ä¹‰ä¸­çš„ç†è®ºå’Œé¡¹ç›®å®è·µä¸­çš„å…·ä½“åº”ç”¨ã€‚</p><h1 id="ä¸€ã€-SQLä¸å…³ç³»æ¨¡å‹æ¦‚è¿°"><a href="#ä¸€ã€-SQLä¸å…³ç³»æ¨¡å‹æ¦‚è¿°" class="headerlink" title="ä¸€ã€ SQLä¸å…³ç³»æ¨¡å‹æ¦‚è¿°"></a>ä¸€ã€ SQLä¸å…³ç³»æ¨¡å‹æ¦‚è¿°</h1><h2 id="1-SQLçš„å†å²ä¸åœ°ä½"><a href="#1-SQLçš„å†å²ä¸åœ°ä½" class="headerlink" title="1. SQLçš„å†å²ä¸åœ°ä½"></a>1. SQLçš„å†å²ä¸åœ°ä½</h2><ul><li><p><strong>èµ·æº</strong>: SQL (Structured Query Language) äº20ä¸–çºª70å¹´ä»£åœ¨IBMçš„System Ré¡¹ç›®ä¸­è¯ç”Ÿã€‚</p></li><li><p><strong>æŒä¹…æ€§</strong>: å°½ç®¡ç»å†äº†é¢å‘å¯¹è±¡ã€XMLå’ŒNoSQLç­‰æŠ€æœ¯çš„æŒ‘æˆ˜ï¼ŒSQLå‡­å€Ÿå…¶å¼ºå¤§çš„åŠŸèƒ½å’Œæ ‡å‡†åŒ–ï¼Œè‡³ä»Šä»æ˜¯æ•°æ®æŸ¥è¯¢é¢†åŸŸçš„æ ¸å¿ƒè¯­è¨€ã€‚</p></li><li><p><strong>æ ¸å¿ƒä¼˜åŠ¿</strong>: SQLæ˜¯ä¸€ç§<strong>å£°æ˜å¼</strong>è¯­è¨€ï¼Œç”¨æˆ·åªéœ€è¯´æ˜â€œæƒ³è¦ä»€ä¹ˆâ€ï¼Œè€Œæ— éœ€å…³å¿ƒâ€œå¦‚ä½•è·å–â€ï¼Œå…·ä½“çš„æ‰§è¡Œç­–ç•¥ç”±æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰è´Ÿè´£ä¼˜åŒ–ã€‚</p></li></ul><h2 id="2-å…³ç³»æ¨¡å‹æœ¯è¯­"><a href="#2-å…³ç³»æ¨¡å‹æœ¯è¯­" class="headerlink" title="2. å…³ç³»æ¨¡å‹æœ¯è¯­"></a>2. å…³ç³»æ¨¡å‹æœ¯è¯­</h2><ul><li><p><strong>æ•°æ®åº“ (Database)</strong>: ä¸€ç³»åˆ—å‘½åè¡¨ï¼ˆRelationï¼‰çš„é›†åˆã€‚</p></li><li><p><strong>è¡¨ (Table&#x2F;Relation)</strong>: ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š</p><ul><li><p><strong>æ¨¡å¼ (Schema)</strong>: å¯¹è¡¨çš„ç»“æ„æè¿°ï¼Œå³å…ƒæ•°æ®ï¼Œå®šä¹‰äº†åˆ—åå’Œæ•°æ®ç±»å‹ã€‚ä¾‹å¦‚<code>people</code>è¡¨å‚¨å­˜äº†çƒå‘˜ä¿¡æ¯ã€‚</p></li><li><p><strong>å®ä¾‹ (Instance)</strong>: åœ¨æŸä¸€æ—¶åˆ»ï¼Œè¡¨ä¸­å­˜å‚¨çš„å…·ä½“æ•°æ®ï¼Œæ˜¯è¡Œçš„é›†åˆã€‚</p></li></ul></li><li><p><strong>åˆ— (Column&#x2F;Attribute&#x2F;Field)</strong>: è¡¨çš„å‚ç›´éƒ¨åˆ†ï¼Œå…·æœ‰å”¯ä¸€çš„åç§°å’ŒåŸå­æ•°æ®ç±»å‹ï¼ˆå¦‚<code>INTEGER</code>, <code>TEXT</code>, <code>FLOAT</code>ï¼‰ã€‚</p></li><li><p><strong>è¡Œ (Row&#x2F;Tuple&#x2F;Record)</strong>: è¡¨çš„æ°´å¹³éƒ¨åˆ†ï¼Œä»£è¡¨ä¸€æ¡å…·ä½“çš„è®°å½•ã€‚</p></li><li><p><strong>å¤šé‡é›† (Multiset)</strong>: å…³ç³»æ•°æ®åº“ä¸­çš„è¡¨æ˜¯è¡Œçš„â€œå¤šé‡é›†â€ï¼Œæ„å‘³ç€å…è®¸å­˜åœ¨å®Œå…¨ç›¸åŒçš„è¡Œï¼ˆé‡å¤å…ƒç»„ï¼‰ã€‚</p></li></ul><h2 id="3-SQLè¯­è¨€çš„ç»„æˆ"><a href="#3-SQLè¯­è¨€çš„ç»„æˆ" class="headerlink" title="3. SQLè¯­è¨€çš„ç»„æˆ"></a>3. SQLè¯­è¨€çš„ç»„æˆ</h2><ul><li><p><strong>DDL (Data Definition Language)</strong>: æ•°æ®å®šä¹‰è¯­è¨€ï¼Œç”¨äºåˆ›å»ºå’Œä¿®æ”¹æ•°æ®åº“çš„æ¨¡å¼ã€‚</p><ul><li><strong><code>CREATE TABLE</code></strong>: å®šä¹‰æ–°è¡¨çš„ç»“æ„ã€‚</li></ul></li><li><p><strong>DML (Data Manipulation Language)</strong>: æ•°æ®æ“ä½œè¯­è¨€ï¼Œç”¨äºæŸ¥è¯¢å’Œä¿®æ”¹æ•°æ®ã€‚</p><ul><li>**<code>SELECT</code>, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>**ã€‚</li></ul></li></ul><h1 id="äºŒã€-DDL-å®šä¹‰æ•°æ®ç»“æ„"><a href="#äºŒã€-DDL-å®šä¹‰æ•°æ®ç»“æ„" class="headerlink" title="äºŒã€ DDL: å®šä¹‰æ•°æ®ç»“æ„"></a>äºŒã€ DDL: å®šä¹‰æ•°æ®ç»“æ„</h1><p>ä½¿ç”¨<code>CREATE TABLE</code>æ¥å®šä¹‰è¡¨çš„æ¨¡å¼ï¼ŒåŒ…æ‹¬åˆ—åã€æ•°æ®ç±»å‹å’Œçº¦æŸã€‚åœ¨<code>proj1.sql</code>çš„é¢˜ç›®æè¿°ä¸­ï¼Œå°±ç»™å‡ºäº†<code>dogs</code>å’Œ<code>users</code>è¡¨çš„åˆ›å»ºè¯­å¥ã€‚</p><p><strong>å®Œæ•´ç¤ºä¾‹</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users (<br>    userid <span class="hljs-type">INTEGER</span>,<br>    name <span class="hljs-type">VARCHAR</span>,<br>    age <span class="hljs-type">INTEGER</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (userid)<br>);<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> dogs (<br>    dogid <span class="hljs-type">INTEGER</span>,<br>    ownerid <span class="hljs-type">INTEGER</span>,<br>    name <span class="hljs-type">VARCHAR</span>,<br>    breed <span class="hljs-type">VARCHAR</span>,<br>    age <span class="hljs-type">INTEGER</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (dogid),<br>    <span class="hljs-keyword">FOREIGN</span> KEY (ownerid) <span class="hljs-keyword">REFERENCES</span> users (userid)<br>);<br></code></pre></td></tr></table></figure><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>:</p><ul><li><p><strong><code>PRIMARY KEY</code> (ä¸»é”®)</strong>: ç”¨äºå”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„æ¯ä¸€è¡Œã€‚ä¸»é”®åˆ—çš„å€¼ä¸èƒ½é‡å¤ï¼Œä¹Ÿä¸èƒ½ä¸º<code>NULL</code>ã€‚å¯ä»¥ç”±å•ä¸ªåˆ—æˆ–å¤šä¸ªåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰ç»„æˆã€‚</p></li><li><p><strong><code>FOREIGN KEY</code> (å¤–é”®)</strong>: åœ¨ä¸€ä¸ªè¡¨ä¸­å»ºç«‹ä¸å¦ä¸€ä¸ªè¡¨ä¸»é”®çš„å¼•ç”¨é“¾æ¥ã€‚ç”¨äºå¼ºåˆ¶è¡¨é—´çš„å¼•ç”¨å®Œæ•´æ€§ï¼Œç¡®ä¿å…³è”æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p></li></ul><h1 id="ä¸‰ã€-DML-åŸºç¡€æŸ¥è¯¢ä¸å•è¡¨æ“ä½œ"><a href="#ä¸‰ã€-DML-åŸºç¡€æŸ¥è¯¢ä¸å•è¡¨æ“ä½œ" class="headerlink" title="ä¸‰ã€ DML: åŸºç¡€æŸ¥è¯¢ä¸å•è¡¨æ“ä½œ"></a>ä¸‰ã€ DML: åŸºç¡€æŸ¥è¯¢ä¸å•è¡¨æ“ä½œ</h1><h2 id="1-åŸºç¡€æŸ¥è¯¢ç»“æ„-SELECT-å’Œ-FROM"><a href="#1-åŸºç¡€æŸ¥è¯¢ç»“æ„-SELECT-å’Œ-FROM" class="headerlink" title="1. åŸºç¡€æŸ¥è¯¢ç»“æ„: SELECT å’Œ FROM"></a>1. åŸºç¡€æŸ¥è¯¢ç»“æ„: <code>SELECT</code> å’Œ <code>FROM</code></h2><p>è¿™æ˜¯æ‰€æœ‰æŸ¥è¯¢çš„åŸºçŸ³ï¼Œç”¨äºæŒ‡å®šä»å“ªä¸ªè¡¨ä¸­é€‰å–å“ªäº›åˆ—çš„æ•°æ®ã€‚</p><p><strong>è¯­æ³•</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">&lt;</span>columns<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span><span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹</strong>: ä»<code>people</code>è¡¨ä¸­é€‰å–çƒå‘˜çš„IDã€åå’Œå§“ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- &quot;proj1.sql&quot; ä¸­çš„ä¸€ä¸ªåŸºç¡€æ“ä½œ</span><br><span class="hljs-keyword">SELECT</span> playerid, namefirst, namelast <span class="hljs-keyword">FROM</span> people;<br></code></pre></td></tr></table></figure><h2 id="2-è¿‡æ»¤æ•°æ®-WHERE-å­å¥"><a href="#2-è¿‡æ»¤æ•°æ®-WHERE-å­å¥" class="headerlink" title="2. è¿‡æ»¤æ•°æ®: WHERE å­å¥"></a>2. è¿‡æ»¤æ•°æ®: <code>WHERE</code> å­å¥</h2><p><code>WHERE</code>å­å¥ç”¨äºæ ¹æ®æŒ‡å®šçš„æ¡ä»¶ï¼ˆè°“è¯ï¼‰ç­›é€‰å‡ºæˆ‘ä»¬æ„Ÿå…´è¶£çš„è¡Œã€‚</p><p><strong>è¯­æ³•</strong>:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">&lt;</span>columns<span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">FROM</span> <span class="hljs-operator">&lt;</span><span class="hljs-keyword">table</span><span class="hljs-operator">&gt;</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-operator">&lt;</span>predicate<span class="hljs-operator">&gt;</span>;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q1i</code>ä¸­ï¼ŒæŸ¥è¯¢ä½“é‡è¶…è¿‡300ç£…çš„çƒå‘˜ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Query from q1i</span><br><span class="hljs-keyword">SELECT</span> namefirst, namelast, birthyear<br><span class="hljs-keyword">FROM</span> people p<br><span class="hljs-keyword">WHERE</span> p.weight <span class="hljs-operator">&gt;</span> <span class="hljs-number">300</span>;<br></code></pre></td></tr></table></figure><p><code>WHERE</code>å­å¥ä¸­è¿˜å¯ä»¥ä½¿ç”¨å¸ƒå°”è¿ç®—ç¬¦ <code>AND</code>, <code>OR</code>, <code>NOT</code> æ¥ç»„åˆå¤šä¸ªæ¡ä»¶ã€‚å»ºè®®ä½¿ç”¨æ‹¬å·<code>()</code>æ˜ç¡®æŒ‡å®šè¿ç®—ä¼˜å…ˆçº§ã€‚</p><h2 id="3-ç»“æœæ’åº-ORDER-BY"><a href="#3-ç»“æœæ’åº-ORDER-BY" class="headerlink" title="3. ç»“æœæ’åº: ORDER BY"></a>3. ç»“æœæ’åº: <code>ORDER BY</code></h2><p><code>ORDER BY</code> ç”¨äºå¯¹è¾“å‡ºç»“æœè¿›è¡Œæ’åºã€‚é»˜è®¤ä¸ºå‡åº (<code>ASC</code>)ï¼Œå¯æŒ‡å®šé™åº (<code>DESC</code>)ã€‚å¯ä»¥æŒ‰å¤šä¸ªåˆ—æ’åºã€‚</p><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q2i</code>ä¸­ï¼Œå°†åäººå ‚æˆå‘˜æŒ‰å…¥é€‰å¹´ä»½é™åºæ’åˆ—ï¼Œå¹´ä»½ç›¸åŒæ—¶æŒ‰çƒå‘˜IDå‡åºæ’åˆ—ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-comment">-- Query from q2i</span><br><span class="hljs-keyword">SELECT</span> namefirst, namelast, p.playerid, yearid<br>...<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> yearid <span class="hljs-keyword">DESC</span>, p.playerid;<br></code></pre></td></tr></table></figure><h2 id="4-é™åˆ¶è¾“å‡ºè¡Œæ•°-LIMIT"><a href="#4-é™åˆ¶è¾“å‡ºè¡Œæ•°-LIMIT" class="headerlink" title="4. é™åˆ¶è¾“å‡ºè¡Œæ•°: LIMIT"></a>4. é™åˆ¶è¾“å‡ºè¡Œæ•°: <code>LIMIT</code></h2><p><code>LIMIT</code> å­å¥ç”¨äºé™åˆ¶æŸ¥è¯¢è¿”å›çš„è¡Œæ•°ï¼Œå¸¸ä¸ <code>ORDER BY</code> ç»“åˆä½¿ç”¨ä»¥è·å–â€œTop Nâ€ç»“æœã€‚</p><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q3i</code>ä¸­ï¼Œè·å–å•èµ›å­£æ‰“å‡»ç‡ï¼ˆslgï¼‰æ’åå‰10çš„è®°å½•ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q3i</span><br><span class="hljs-keyword">SELECT</span> P.playerid, namefirst, namelast, yearid, slg<br>...<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> slg <span class="hljs-keyword">DESC</span>, yearid, P.playerid<br>LIMIT <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><h1 id="å››ã€-åˆ†ç»„ä¸èšåˆ"><a href="#å››ã€-åˆ†ç»„ä¸èšåˆ" class="headerlink" title="å››ã€ åˆ†ç»„ä¸èšåˆ"></a>å››ã€ åˆ†ç»„ä¸èšåˆ</h1><h2 id="1-èšåˆå‡½æ•°"><a href="#1-èšåˆå‡½æ•°" class="headerlink" title="1. èšåˆå‡½æ•°"></a>1. èšåˆå‡½æ•°</h2><p>SQLæä¾›äº†ä¸€ç³»åˆ—å†…ç½®çš„èšåˆå‡½æ•°ï¼Œç”¨äºå¯¹ä¸€ç»„å€¼è¿›è¡Œè®¡ç®—å¹¶è¿”å›å•ä¸ªå€¼ã€‚</p><ul><li><p><strong><code>COUNT()</code></strong>: <code>COUNT(*)</code>è®¡ç®—æ‰€æœ‰è¡Œæ•°ï¼Œ<code>COUNT(&lt;column&gt;)</code>è®¡ç®—è¯¥åˆ—é<code>NULL</code>å€¼çš„æ•°é‡ã€‚</p></li><li><p><strong><code>SUM()</code></strong>, <strong><code>AVG()</code></strong>, <strong><code>MAX()</code></strong>, **<code>MIN()</code>**ã€‚</p></li><li><p>é™¤<code>COUNT(*)</code>å¤–ï¼Œæ‰€æœ‰èšåˆå‡½æ•°éƒ½ä¼šå¿½ç•¥<code>NULL</code>å€¼ã€‚</p></li></ul><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q0</code>ä¸­ï¼ŒæŸ¥æ‰¾å†å²æœ€é«˜è‡ªè´£åˆ†ç‡ï¼ˆeraï¼‰ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q0</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(era)<br><span class="hljs-keyword">FROM</span> pitching;<br></code></pre></td></tr></table></figure><h2 id="2-GROUP-BY-ä¸-HAVING"><a href="#2-GROUP-BY-ä¸-HAVING" class="headerlink" title="2. GROUP BY ä¸ HAVING"></a>2. <code>GROUP BY</code> ä¸ <code>HAVING</code></h2><ul><li><p><strong><code>GROUP BY</code></strong>: å°†æ•°æ®æŒ‰æŒ‡å®šåˆ—çš„å€¼è¿›è¡Œåˆ†ç»„ï¼Œä»¥ä¾¿å¯¹æ¯ä¸ªç»„ç‹¬ç«‹è¿›è¡Œèšåˆè®¡ç®—ã€‚</p></li><li><p><strong><code>HAVING</code></strong>: åœ¨æ•°æ®åˆ†ç»„åï¼Œå¯¹è¿™äº›ç»„è¿›è¡Œè¿‡æ»¤ã€‚<code>WHERE</code>è¿‡æ»¤è¡Œï¼Œ<code>HAVING</code>è¿‡æ»¤ç»„ï¼ˆèšåˆä¹‹åå…¶å®ä¹Ÿæ˜¯è¡ŒğŸ˜€ï¼‰</p></li></ul><p>é‡è¦è§„åˆ™ (<code>The Aggregation Rule</code>) :</p><p><strong>å¦‚æœæŸ¥è¯¢ä¸­ä½¿ç”¨äº†GROUP BYï¼Œé‚£ä¹ˆSELECTå­å¥ä¸­åªèƒ½åŒ…å«åˆ†ç»„åˆ—å’Œèšåˆå‡½æ•°ã€‚</strong></p><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q1iv</code>ä¸­ï¼Œæ‰¾å‡ºå¹³å‡èº«é«˜å¤§äº70çš„å‡ºç”Ÿå¹´ä»½ç»„ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q1iv</span><br><span class="hljs-keyword">SELECT</span> birthyear, <span class="hljs-built_in">AVG</span>(height), <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>)<br><span class="hljs-keyword">FROM</span> people<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> birthyear<br><span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">AVG</span>(height) <span class="hljs-operator">&gt;</span> <span class="hljs-number">70</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> birthyear;<br></code></pre></td></tr></table></figure><h1 id="äº”ã€-å¤šè¡¨æŸ¥è¯¢-Joins"><a href="#äº”ã€-å¤šè¡¨æŸ¥è¯¢-Joins" class="headerlink" title="äº”ã€ å¤šè¡¨æŸ¥è¯¢: Joins"></a>äº”ã€ å¤šè¡¨æŸ¥è¯¢: Joins</h1><p>å½“æ‰€éœ€ä¿¡æ¯åˆ†å¸ƒåœ¨å¤šä¸ªè¡¨ä¸­æ—¶ï¼Œéœ€è¦ä½¿ç”¨ <code>JOIN</code> å°†å®ƒä»¬è¿æ¥èµ·æ¥ã€‚</p><h2 id="1-è¿æ¥çš„ç±»å‹ä¸è¯­æ³•"><a href="#1-è¿æ¥çš„ç±»å‹ä¸è¯­æ³•" class="headerlink" title="1. è¿æ¥çš„ç±»å‹ä¸è¯­æ³•"></a>1. è¿æ¥çš„ç±»å‹ä¸è¯­æ³•</h2><table><thead><tr><th>è¿æ¥ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>å†…è¿æ¥ (INNER JOIN)</strong></td><td>(é»˜è®¤è¿æ¥ç±»å‹) åªè¿”å›ä¸¤ä¸ªè¡¨ä¸­è¿æ¥é”®èƒ½åŒ¹é…ä¸Šçš„è¡Œã€‚</td></tr><tr><td><strong>å·¦å¤–è¿æ¥ (LEFT OUTER JOIN)</strong></td><td>ä¿ç•™å·¦è¡¨çš„æ‰€æœ‰è¡Œã€‚è‹¥å³è¡¨æ— åŒ¹é…ï¼Œåˆ™å³è¡¨åˆ—å¡«å……ä¸º<code>NULL</code>ã€‚</td></tr><tr><td><strong>å³å¤–è¿æ¥ (RIGHT OUTER JOIN)</strong></td><td>ä¿ç•™å³è¡¨çš„æ‰€æœ‰è¡Œã€‚è‹¥å·¦è¡¨æ— åŒ¹é…ï¼Œåˆ™å·¦è¡¨åˆ—å¡«å……ä¸º<code>NULL</code>ã€‚</td></tr><tr><td><strong>å…¨å¤–è¿æ¥ (FULL OUTER JOIN)</strong></td><td>ä¿ç•™ä¸¤ä¸ªè¡¨çš„æ‰€æœ‰è¡Œï¼Œåœ¨æ— åŒ¹é…å¤„ç”¨<code>NULL</code>å¡«å……ã€‚</td></tr></tbody></table><p><strong>ç¤ºä¾‹ (INNER JOIN)</strong>: åœ¨<code>proj1.sql</code>çš„<code>q2i</code>ä¸­ï¼Œè¿æ¥<code>people</code>å’Œ<code>halloffame</code>è¡¨æ‰¾å‡ºåäººå ‚æˆå‘˜ã€‚</p><ul><li><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå…¶å®FROMå¤šä¸ªè¡¨é»˜è®¤çš„å°±æ˜¯ INNER JOIN</strong>ï¼Œ<code>INNER / OUTER</code> å¯çœç•¥</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q2i (implicit syntax)</span><br><span class="hljs-keyword">SELECT</span> namefirst, namelast, p.playerid, yearid<br><span class="hljs-keyword">FROM</span> people p, halloffame ha<br><span class="hljs-keyword">WHERE</span> p.playerid <span class="hljs-operator">=</span> ha.playerid <span class="hljs-keyword">AND</span> ha.inducted <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;Y&#x27;</span>;<br></code></pre></td></tr></table></figure><p><strong>ç¤ºä¾‹ (LEFT OUTER JOIN)</strong>: åœ¨<code>proj1.sql</code>çš„<code>q2iii</code>ä¸­ï¼ŒæŸ¥è¯¢æ‰€æœ‰åäººå ‚æˆå‘˜åŠå…¶å­¦æ ¡ï¼Œå³ä½¿æ²¡æœ‰ä¸Šè¿‡å¤§å­¦ä¹Ÿè¦åŒ…æ‹¬ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q2iii</span><br><span class="hljs-keyword">SELECT</span> q2i.playerid, namefirst, namelast, schoolid<br><span class="hljs-keyword">FROM</span> q2i<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">OUTER</span> <span class="hljs-keyword">JOIN</span> collegeplaying C <span class="hljs-keyword">ON</span> C.playerid <span class="hljs-operator">=</span> q2i.playerid<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> q2i.playerid <span class="hljs-keyword">DESC</span>, schoolid;<br></code></pre></td></tr></table></figure><h2 id="2-è‡ªè¿æ¥-Self-Join"><a href="#2-è‡ªè¿æ¥-Self-Join" class="headerlink" title="2. è‡ªè¿æ¥ (Self-Join)"></a>2. è‡ªè¿æ¥ (Self-Join)</h2><p>å°†ä¸€ä¸ªè¡¨ä¸å…¶è‡ªèº«è¿›è¡Œè¿æ¥ï¼Œé€šå¸¸éœ€è¦ä½¿ç”¨è¡¨åˆ«åæ¥åŒºåˆ†ã€‚</p><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q4iii</code>ä¸­ï¼Œé€šè¿‡è‡ªè¿æ¥<code>q4i</code>è§†å›¾è®¡ç®—æ¯å¹´è–ªèµ„ç›¸å¯¹äºä¸Šä¸€å¹´çš„å˜åŒ–ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q4iii</span><br><span class="hljs-keyword">SELECT</span> Q2.yearid, Q2.min <span class="hljs-operator">-</span> Q1.min, Q2.max <span class="hljs-operator">-</span> Q1.max, Q2.avg <span class="hljs-operator">-</span> Q1.avg<br><span class="hljs-keyword">FROM</span> q4i Q1, q4i Q2<br><span class="hljs-keyword">WHERE</span> Q1.yearid <span class="hljs-operator">+</span> <span class="hljs-number">1</span> <span class="hljs-operator">=</span> Q2.yearid<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Q2.yearid;<br></code></pre></td></tr></table></figure><h1 id="å…­ã€-å­æŸ¥è¯¢ã€é›†åˆè¿ç®—ä¸CTE"><a href="#å…­ã€-å­æŸ¥è¯¢ã€é›†åˆè¿ç®—ä¸CTE" class="headerlink" title="å…­ã€ å­æŸ¥è¯¢ã€é›†åˆè¿ç®—ä¸CTE"></a>å…­ã€ å­æŸ¥è¯¢ã€é›†åˆè¿ç®—ä¸CTE</h1><h2 id="1-å­æŸ¥è¯¢-Subquery"><a href="#1-å­æŸ¥è¯¢-Subquery" class="headerlink" title="1. å­æŸ¥è¯¢ (Subquery)"></a>1. å­æŸ¥è¯¢ (Subquery)</h2><p>å­æŸ¥è¯¢æ˜¯åµŒå¥—åœ¨å¦ä¸€ä¸ªSQLæŸ¥è¯¢ä¸­çš„æŸ¥è¯¢ã€‚</p><ul><li><p><strong>åœ¨ <code>WHERE</code> &#x2F; <code>HAVING</code> ä¸­</strong>: å¸¸ç”¨äºæ ¹æ®ä¸€ä¸ªèšåˆç»“æœè¿›è¡Œè¿‡æ»¤ã€‚</p></li><li><p><strong>åœ¨ <code>FROM</code> ä¸­</strong>: å­æŸ¥è¯¢çš„ç»“æœå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸´æ—¶çš„ã€å¯ä¾›å¤–éƒ¨æŸ¥è¯¢çš„è¡¨ã€‚</p></li><li><p><strong>ç›¸å…³å­æŸ¥è¯¢ (Correlated Subquery)</strong>: å­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºä¸»æŸ¥è¯¢å½“å‰å¤„ç†çš„è¡Œã€‚</p></li></ul><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q3iii</code>ä¸­ï¼ŒæŸ¥æ‰¾ç»ˆèº«æ‰“å‡»ç‡æ¯”ç‰¹å®šçƒå‘˜<code>&#39;mayswi01&#39;</code>æ›´é«˜çš„çƒå‘˜ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Snippet from q3iii</span><br>... <span class="hljs-keyword">WHERE</span> L.lslg <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> lslg <span class="hljs-keyword">FROM</span> goat)<br></code></pre></td></tr></table></figure><p>è¿™é‡Œçš„ <code>(SELECT lslg FROM goat)</code> å°±æ˜¯ä¸€ä¸ªå­æŸ¥è¯¢ã€‚</p><h2 id="2-é›†åˆè¿ç®—-Set-Operations"><a href="#2-é›†åˆè¿ç®—-Set-Operations" class="headerlink" title="2. é›†åˆè¿ç®— (Set Operations)"></a>2. é›†åˆè¿ç®— (Set Operations)</h2><p>ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª<code>SELECT</code>è¯­å¥çš„ç»“æœé›†ã€‚</p><ul><li><p><strong><code>UNION</code></strong>: åˆå¹¶ç»“æœé›†å¹¶<strong>ç§»é™¤é‡å¤è¡Œ</strong>ã€‚</p></li><li><p><strong><code>UNION ALL</code></strong>: åˆå¹¶ç»“æœé›†å¹¶<strong>ä¿ç•™æ‰€æœ‰è¡Œ</strong>ã€‚</p></li><li><p><strong><code>INTERSECT</code></strong>: è¿”å›ä¸¤ä¸ªç»“æœé›†çš„äº¤é›†ã€‚</p></li><li><p><strong><code>EXCEPT</code></strong>: è¿”å›åœ¨ç¬¬ä¸€ä¸ªç»“æœé›†ä¸­å­˜åœ¨ï¼Œä½†åœ¨ç¬¬äºŒä¸ªç»“æœé›†ä¸­ä¸å­˜åœ¨çš„è¡Œã€‚</p></li></ul><h2 id="3-é€šç”¨è¡¨è¡¨è¾¾å¼-Common-Table-Expression-CTE"><a href="#3-é€šç”¨è¡¨è¡¨è¾¾å¼-Common-Table-Expression-CTE" class="headerlink" title="3. é€šç”¨è¡¨è¡¨è¾¾å¼ (Common Table Expression - CTE)"></a>3. é€šç”¨è¡¨è¡¨è¾¾å¼ (Common Table Expression - CTE)</h2><p>ä½¿ç”¨ <code>WITH</code> å…³é”®å­—å®šä¹‰çš„ä¸´æ—¶å‘½åç»“æœé›†ã€‚CTEå¯ä»¥æå¤§åœ°æé«˜å¤æ‚æŸ¥è¯¢çš„<strong>å¯è¯»æ€§å’Œæ¨¡å—åŒ–ç¨‹åº¦</strong>ï¼Œåœ¨<code>proj1.sql</code>ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q3i</code>ä¸­ï¼Œå…ˆç”¨CTE (<code>slg_cal</code>) è®¡ç®—æ‰“å‡»ç‡ï¼Œå†ä»è¿™ä¸ªä¸´æ—¶ç»“æœä¸­æŸ¥è¯¢ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q3i</span><br><span class="hljs-keyword">WITH</span> slg_cal <span class="hljs-keyword">AS</span> (<br>  <span class="hljs-keyword">SELECT</span> playerid, yearid, ((H <span class="hljs-operator">-</span> H2B <span class="hljs-operator">-</span> H3B <span class="hljs-operator">-</span> HR) <span class="hljs-operator">+</span> <span class="hljs-number">2</span><span class="hljs-operator">*</span>H2B <span class="hljs-operator">+</span> <span class="hljs-number">3</span><span class="hljs-operator">*</span>H3B <span class="hljs-operator">+</span> <span class="hljs-number">4</span><span class="hljs-operator">*</span>HR) <span class="hljs-operator">/</span> <span class="hljs-built_in">CAST</span>(AB <span class="hljs-keyword">AS</span> <span class="hljs-type">FLOAT</span>) <span class="hljs-keyword">AS</span> slg<br>  <span class="hljs-keyword">FROM</span> batting<br>  <span class="hljs-keyword">WHERE</span> AB <span class="hljs-operator">&gt;</span> <span class="hljs-number">50</span><br>)<br><span class="hljs-keyword">SELECT</span> P.playerid, namefirst, namelast, yearid, slg<br><span class="hljs-keyword">FROM</span> people P, slg_cal S<br><span class="hljs-keyword">WHERE</span> P.playerid <span class="hljs-operator">=</span> S.playerid<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> slg <span class="hljs-keyword">DESC</span>, yearid, P.playerid<br>LIMIT <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><h1 id="ä¸ƒã€-å…¶ä»–é‡è¦æ¦‚å¿µ"><a href="#ä¸ƒã€-å…¶ä»–é‡è¦æ¦‚å¿µ" class="headerlink" title="ä¸ƒã€ å…¶ä»–é‡è¦æ¦‚å¿µ"></a>ä¸ƒã€ å…¶ä»–é‡è¦æ¦‚å¿µ</h1><h2 id="1-NULLå€¼ä¸ä¸‰å€¼é€»è¾‘"><a href="#1-NULLå€¼ä¸ä¸‰å€¼é€»è¾‘" class="headerlink" title="1. NULLå€¼ä¸ä¸‰å€¼é€»è¾‘"></a>1. <code>NULL</code>å€¼ä¸ä¸‰å€¼é€»è¾‘</h2><ul><li><p><strong><code>NULL</code>çš„å«ä¹‰</strong>: ä»£è¡¨â€œæœªçŸ¥â€ã€â€œç¼ºå¤±â€æˆ–â€œä¸é€‚ç”¨â€çš„å€¼ã€‚</p></li><li><p><strong>ä¸‰å€¼é€»è¾‘ (Three-Valued Logic)</strong>: <code>WHERE</code>å­å¥åªä¿ç•™è®¡ç®—ç»“æœä¸º<code>TRUE</code>çš„è¡Œï¼Œ<code>FALSE</code>å’Œ<code>NULL</code>çš„è¡Œéƒ½ä¼šè¢«ä¸¢å¼ƒã€‚</p></li><li><p><strong>æ£€æŸ¥<code>NULL</code></strong>: å¿…é¡»ä½¿ç”¨ <code>IS NULL</code> æˆ– <code>IS NOT NULL</code>ã€‚</p></li></ul><h2 id="2-ç±»å‹è½¬æ¢-CAST"><a href="#2-ç±»å‹è½¬æ¢-CAST" class="headerlink" title="2. ç±»å‹è½¬æ¢: CAST"></a>2. ç±»å‹è½¬æ¢: <code>CAST</code></h2><p>è¿™æ˜¯ä¸€ä¸ª<strong>ç±»å‹è½¬æ¢</strong>çš„å…³é”®å­— or å…³é”®å‡½æ•° ï¼Ÿï¼Œç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå¦‚ä¸‹ç¤ºä¾‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-built_in">CAST</span>(expression <span class="hljs-keyword">AS</span> target_type)<br><br><span class="hljs-comment">-- å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•´æ•°</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-string">&#x27;123&#x27;</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">INTEGER</span>);<br><br><span class="hljs-comment">-- å°†æµ®ç‚¹æ•°è½¬æ¢ä¸ºæ•´æ•°ï¼ˆä¼šæˆªæ–­å°æ•°éƒ¨åˆ†ï¼‰</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">3.14</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">INT</span>);<br><br><span class="hljs-comment">-- å°†æ•´æ•°è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼ˆé¿å…æ•´æ•°é™¤æ³•é—®é¢˜ï¼‰</span><br><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(<span class="hljs-number">5</span> <span class="hljs-keyword">AS</span> <span class="hljs-type">FLOAT</span>) <span class="hljs-operator">/</span> <span class="hljs-number">2</span>; <span class="hljs-comment">-- ç»“æœæ˜¯2.5</span><br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-number">5</span> <span class="hljs-operator">/</span> <span class="hljs-number">2</span>;                <span class="hljs-comment">-- ç»“æœæ˜¯2ï¼ˆæ•´æ•°é™¤æ³•ï¼‰</span><br></code></pre></td></tr></table></figure><h2 id="3-æ¨¡å¼åŒ¹é…-LIKE-and"><a href="#3-æ¨¡å¼åŒ¹é…-LIKE-and" class="headerlink" title="3. æ¨¡å¼åŒ¹é…: LIKE and ~"></a>3. æ¨¡å¼åŒ¹é…: <code>LIKE</code> and <code>~</code></h2><p><code>LIKE</code> æ“ä½œç¬¦ç”¨äºåœ¨<code>WHERE</code>å­å¥ä¸­æœç´¢åˆ—ä¸­çš„æŒ‡å®šæ¨¡å¼ã€‚</p><ul><li><p><code>%</code>: åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ã€‚</p></li><li><p><code>_</code>: åŒ¹é…å•ä¸ªå­—ç¬¦ã€‚</p></li></ul><p><strong>ç¤ºä¾‹</strong>: åœ¨<code>proj1.sql</code>çš„<code>q1ii</code>ä¸­ï¼ŒæŸ¥æ‰¾<code>namefirst</code>å­—æ®µä¸­åŒ…å«ç©ºæ ¼çš„çƒå‘˜ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- Query from q1ii</span><br>... <span class="hljs-keyword">WHERE</span> namefirst <span class="hljs-keyword">LIKE</span> <span class="hljs-string">&#x27;% %&#x27;</span> ...<br></code></pre></td></tr></table></figure><h3 id="SQLite"><a href="#SQLite" class="headerlink" title="SQLite"></a>SQLite</h3><p>åœ¨SQLiteä¸­ï¼Œå¹¶æ²¡æœ‰<code>~</code>è¿™ä¸€ç§åŒ¹é…æ¨¡å¼ï¼Œè€Œå®ƒæ˜¯ä½¿ç”¨[[UNIX_Review_2#^1 | æ­£åˆ™è¡¨è¾¾å¼]] åŒ¹é…çš„ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-comment">-- åŒ¹é…ä»¥æ•°å­—ç»“å°¾çš„çƒå‘˜ID</span><br><br><span class="hljs-number">2</span><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> players <span class="hljs-keyword">WHERE</span> player_id <span class="hljs-operator">~</span> <span class="hljs-string">&#x27;[0-9]$&#x27;</span>;<br></code></pre></td></tr></table></figure><h2 id="4-è§†å›¾-CREATE-VIEW"><a href="#4-è§†å›¾-CREATE-VIEW" class="headerlink" title="4. è§†å›¾: CREATE VIEW"></a>4. è§†å›¾: <code>CREATE VIEW</code></h2><p>è§†å›¾æ˜¯ä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œå…¶å†…å®¹ç”±æŸ¥è¯¢å®šä¹‰ã€‚<code>proj1.sql</code>ä¸­çš„æ‰€æœ‰é—®é¢˜éƒ½æ˜¯é€šè¿‡åˆ›å»ºè§†å›¾æ¥è§£ç­”çš„ï¼Œè¿™å…è®¸å°†å¤æ‚çš„æŸ¥è¯¢ä¿å­˜ä¸ºå‘½åçš„ã€å¯é‡ç”¨çš„å¯¹è±¡ã€‚</p><p><strong>ç¤ºä¾‹</strong>: <code>proj1.sql</code>çš„<code>q0</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> q0(era)<br><span class="hljs-keyword">AS</span><br>  <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(era)<br>  <span class="hljs-keyword">FROM</span> pitching;<br></code></pre></td></tr></table></figure><h1 id="å…«ã€-SQLæŸ¥è¯¢é€»è¾‘æ‰§è¡Œé¡ºåº"><a href="#å…«ã€-SQLæŸ¥è¯¢é€»è¾‘æ‰§è¡Œé¡ºåº" class="headerlink" title="å…«ã€ SQLæŸ¥è¯¢é€»è¾‘æ‰§è¡Œé¡ºåº"></a>å…«ã€ SQLæŸ¥è¯¢é€»è¾‘æ‰§è¡Œé¡ºåº</h1><p>ç†è§£é€»è¾‘æ‰§è¡Œé¡ºåºæœ‰åŠ©äºç¼–å†™å’Œè°ƒè¯•å¤æ‚æŸ¥è¯¢ã€‚</p><ol><li><p><strong><code>FROM</code></strong>: å¤„ç†<code>FROM</code>å­å¥åŠæ‰€æœ‰<code>JOIN</code>æ“ä½œã€‚</p></li><li><p><strong><code>WHERE</code></strong>: è¿‡æ»¤è¡Œã€‚</p></li><li><p><strong><code>GROUP BY</code></strong>: å°†è¿‡æ»¤åçš„è¡Œåˆ†ç»„ã€‚</p></li><li><p><strong><code>HAVING</code></strong>: è¿‡æ»¤åˆ†ç»„ã€‚</p></li><li><p><strong><code>SELECT</code></strong>: è®¡ç®—<code>SELECT</code>åˆ—è¡¨ä¸­çš„è¡¨è¾¾å¼ã€‚</p></li><li><p><strong><code>DISTINCT</code></strong>: ç§»é™¤ç»“æœé›†ä¸­çš„é‡å¤è¡Œã€‚</p></li><li><p><strong><code>ORDER BY</code></strong>: å¯¹æœ€ç»ˆç»“æœé›†è¿›è¡Œæ’åºã€‚</p></li><li><p><strong><code>LIMIT</code></strong>: ä»æ’åºåçš„ç»“æœé›†ä¸­é€‰å–æŒ‡å®šæ•°é‡çš„è¡Œã€‚</p></li></ol>]]></content>
    
    
    <categories>
      
      <category>CS-186</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SQL</tag>
      
      <tag>MySQL</tag>
      
      <tag>æ•°æ®åº“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¤§äºŒä¸‹æ€»ç»“</title>
    <link href="/2025/07/10/%E5%A4%A7%E4%BA%8C%E4%B8%8B%E6%80%BB%E7%BB%93/"/>
    <url>/2025/07/10/%E5%A4%A7%E4%BA%8C%E4%B8%8B%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æœ¬äººå¤§äºŒä¸‹å­¦æœŸçš„æ€»ç»“ ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/%E9%BE%99%E7%8C%AB3.jpg"></p><p><strong>å­¦é•¿å­¦å§ä»¬å£ä¸­é­”é¬¼èˆ¬çš„å¤§äºŒä¸‹å­¦æœŸæ€»ç®—æ˜¯ç»“æŸäº†ï¼Œè¿™æ˜¯ä¸€ä¸ªæåº¦åŠ³ç´¯æåº¦å……å®çš„å­¦æœŸã€‚åœ¨è¿™å­¦æœŸé‡Œï¼Œæˆ‘å®Œæˆäº†è¯¸å¤šä»»åŠ¡ä¸æŒ‘æˆ˜ï¼Œä¹Ÿå­¦ä¹ æ”¶è·äº†å¾ˆå¤šæ–°çš„çŸ¥è¯†ï¼ŒåŒæ—¶æŠ—å‹èƒ½åŠ›up up up !</strong></p><h1 id="OO-OS"><a href="#OO-OS" class="headerlink" title="OO &amp; OS"></a>OO &amp; OS</h1><ul><li><p>å…¶å®è¿™ä¸¤é—¨è¯¾åœ¨è¯¾ä¸Šå­¦ä¹ é˜¶æ®µï¼Œä½“éªŒéƒ½è¿˜æŒºä¸é”™çš„ï¼Œwtyè€å¸ˆæ€»æ˜¯ç»†è‡´å…¥å¾®åœ°è®²è§£æ¯ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼Œrwgè€å¸ˆæ€»æ˜¯å¹½é»˜é£è¶£åœ°é€—å¤§å®¶å¼€å¿ƒã€‚</p></li><li><p>OSè¯¾ä¸‹å‘äº†å®˜æ–¹ç­”æ¡ˆï¼Œæˆ‘ä¸€èˆ¬ä¹Ÿéƒ½æ˜¯è¾¹æŠ„è¾¹ç†è§£è¾¹çœ‹å­¦é•¿åšå®¢è¾¹é—®AIï¼Œå¤§æ¦‚éœ€è¦ä¸€å¤©æ—¶é—´å®Œæˆå¹¶ç†è§£è¯¾ä¸‹å†…å®¹ï¼Œ<strong>è¯¾ä¸Šæµ‹è¯•çš„è¯</strong>ï¼Œexamçº¯ç¿»è¯‘å³å¯ï¼Œextraå°±éšç¼˜äº†ï¼Œæœ‰å‡ æ¬¡éƒ½éå¸¸å›°éš¾ã€‚æœ€åå¯¹æ•´ä¸ªMOSçš„æ¡†æ¶ä»¥åŠå…·ä½“çš„ç»†èŠ‚è¿˜æ˜¯å¾ˆä¸æ¸…æ¥šï¼ŒOS-Challengeä¹Ÿæ˜¯å®Œæˆçš„éå¸¸åƒåŠ›ï¼Œæœ€åä¸€é¡¿å€Ÿé‰´æ‰å¾—ä»¥é€šè¿‡ã€‚ç†è®ºçš„è¯å…¶å®æˆ‘è¿˜æ˜¯å¾ˆæ„Ÿå…´è¶£çš„ï¼Œä»æœ€æ—©çš„Multicsåˆ°UNIXå†åˆ°Linuxï¼Œæˆ‘æƒŠå¹äºä»–ä»¬çš„å¤©æ‰æ™ºæ…§ä¸æƒŠäººçš„åˆ›é€ åŠ›ï¼Œä¹Ÿè¢«æ“ä½œç³»ç»Ÿçš„å¤æ‚æ€§ã€ç¥ç§˜æ€§ã€å…¼å®¹æ€§æ‰€å¸å¼•ã€‚<strong>åªå¯æƒœæœ€åçš„æˆç»©ä¸å¤ªå¦‚æ„â€¦â€¦ğŸ˜­</strong></p></li><li><p>OOçš„è¯<strong>ç¬¬ä¸€å•å…ƒè¿‡å¾—éå¸¸ç—›è‹¦</strong>ï¼Œå‰ä¸¤æ¬¡å› ä¸ºæå…¶æ„šè ¢çš„bugæ²¡èƒ½è¿›äº’æµ‹ï¼Œå½“æ—¶å¯¹Javaçš„è¯­æ³•è¿˜æœ‰ç‰¹æ€§ä¹Ÿä¸ç†Ÿæ‚‰ï¼Œæ›´æ˜¯æ²¡æ—¶é—´é€ è¯„æµ‹æœºï¼Œæ•´ä¸ªå•å…ƒéƒ½è¢«ç¡¬æ§ã€‚<strong>ç¬¬äºŒå•å…ƒè¿˜æ˜¯å¾ˆå–œæ¬¢çš„</strong>ï¼Œä¸è¿‡å‰ä¸¤æ¬¡ä¹Ÿæ˜¯å› ä¸ºä¸€äº›å°bugï¼Œæ¯”å¦‚æœªæ§åˆ¶è½¿å¢äººæ•°ã€æ‰“å°é¡ºåºï¼Œå¼ºæµ‹å¯„çš„æ¯”è¾ƒæƒ¨ï¼Œæœ€åbugä¿®å¤å´èƒ½ç¨å¾®éœ€æ”¹ä¸¤ä¸‰è¡Œå°±é€šè¿‡ï¼Œå½“æ—¶ç®€ç›´è¦æ°”æ­»æˆ‘äº†ğŸ˜¤ğŸ˜¤ç¬¬ä¸‰å•å…ƒä¹Ÿè¿˜ä¸é”™ï¼Œä¸è¿‡Junitæµ‹è¯•æ¯”è¾ƒé˜´é—´ï¼Œæœ€åçš„ç¬¬å››å•å…ƒåä¸¤æ¬¡éƒ½æ˜¯ç”¨çš„cursorï¼Œæ²¡æ—¶é—´æ•´äº†ã€‚</p></li><li><p>ä»å½“åˆå¯¹Javaï¼Œå¯¹OOPä¸€æ— æ‰€çŸ¥ï¼Œåˆ°ç°åœ¨èƒ½å†™å‡ºä¸€ä¸ªç®€å•çš„é¢ç›¸å¯¹è±¡ä»£ç çš„å°å‹ç³»ç»Ÿï¼Œæˆ‘ä»OOè¯¾ä¸­å­¦åˆ°äº†å¾ˆå¤šï¼Œä¹Ÿæå¤§æå‡äº†è‡ªå·±çš„æŠ—å‹èƒ½åŠ›ï¼Œ<strong>æˆ‘å¤§æ¦‚æ°¸è¿œä¸ä¼šå¿˜è®°U2é€šå®µçš„é‚£äº›å‘¨äº”çš„å¤œæ™š</strong>ğŸ˜€</p></li></ul><h1 id="å…¶ä»–è¯¾ç¨‹"><a href="#å…¶ä»–è¯¾ç¨‹" class="headerlink" title="å…¶ä»–è¯¾ç¨‹"></a>å…¶ä»–è¯¾ç¨‹</h1><ul><li>MLè¿™é—¨è¯¾æ¯”è¾ƒéš¾è¯„ï¼Œåœ¨è¿™æ ·é«˜å‹çš„å­¦æœŸä¸­å†å¡è¿›æ¥ä¸€é—¨æœºå™¨å­¦ä¹ ï¼Œå¹¶ä¸”è¯•å›¾åœ¨çŸ­æ—¶é—´å†…æ•™ä¼šæˆ‘ä»¬æµ·é‡çš„å†…å®¹ï¼Œå¥½åœ¨æœ€åè€ƒè¯•çš„æ—¶å€™è¿˜æ˜¯åŸºæœ¬æ‹Ÿåˆäº†å¾€å¹´é¢˜ï¼Œ<strong>ä¸è¿‡å…¶å®æˆ‘å•¥ä¹Ÿæ²¡å­¦åˆ°</strong>â€¦â€¦</li><li>å…¶ä»–çš„å¯ï¼Œæ¯”å¦‚èˆªæ¦‚å†›ç†ç­‰ï¼Œä¹Ÿéƒ½æ˜¯æœŸæœ«çªå‡»èƒŒä¸€ä¸‹ï¼Œç„¶åè€ƒè¯•äº†ï¼Œå…¶å®æˆ‘å¤ä¹ çš„è¿˜ä¸é”™ï¼Œä¸è¿‡æœ€ååˆ†æ•°ä¸å°½äººæ„ï¼ŒÎµ&#x3D;(Â´Î¿ï½€*)))å”‰</li></ul><h1 id="å­¦ä¹ ä»¥å¤–"><a href="#å­¦ä¹ ä»¥å¤–" class="headerlink" title="å­¦ä¹ ä»¥å¤–"></a>å­¦ä¹ ä»¥å¤–</h1><p>å…¶å®è¿™å­¦æœŸè¿˜æ˜¯æœ‰å¾ˆå¤šå…¶ä»–æ”¶è·çš„</p><ul><li>å®è·µé˜Ÿå–å¾—å¯’å‡å®è·µå›¢é˜Ÿä¸€ç­‰å¥–</li><li>å†¯å¦‚æ¯å“²ç¤¾ç»„ä¸´å±å—å‘½å‡†å¤‡PPTã€å‚åŠ ç­”è¾©</li><li>ç¾èµ›è¢«é˜Ÿå‹å¸¦é£ï¼Œäº”ä¸€å‡ºæˆç»©ï¼šFå¥–</li><li>æ”¿æ²»èº«ä»½è½¬å˜ï¼Œæˆä¸ºä¸€åé¢„å¤‡dang yuan</li><li>ç­”è¾©è·å¾—è®¡é™¢æ ‡å…µå›¢æ”¯éƒ¨</li></ul><p>ç§ç§è¿™äº›ï¼Œè®©æˆ‘å–å¾—äº†ä¸å°çš„è¿›æ­¥ï¼Œä¹Ÿæ”¶è·äº†ä¸ä¸€æ ·çš„æˆé•¿ï¼Œ<strong>æœŸå¾…æ˜å¤©ä¼šæ›´å¥½ ï¼</strong>ğŸ˜</p><h1 id="æ‹›ç”Ÿæ´»åŠ¨"><a href="#æ‹›ç”Ÿæ´»åŠ¨" class="headerlink" title="æ‹›ç”Ÿæ´»åŠ¨"></a>æ‹›ç”Ÿæ´»åŠ¨</h1><ul><li><p>å‚åŠ äº†æ³¥èˆªçš„æ¹–å—æ‹›ç”Ÿç»„ï¼Œå‰å‡ å¤©å›æ¯æ ¡æ‹›ç”Ÿåæˆ‘å›å®¶ä¼‘æ¯äº†ä¸¤å¤©ï¼Œä¹‹åå¯ç¨‹é•¿æ²™ï¼Œå‚ä¸åé˜¶æ®µçš„æ‹›ç”Ÿå·¥ä½œï¼Œä¸å„ä½äº²çˆ±çš„å¯¼å¯¼ä»¬ä¸€èµ·å¥‹æˆ˜åœ¨æ‹›ç”Ÿä¸€çº¿ã€‚</p></li><li><p>æˆ‘ä»¬å¸¸å¸¸å¿™ç¢Œåˆ°æ™šä¸Šä¹åç‚¹æ‰åƒæ™šé¥­ï¼Œä¹‹åæ‰å¼€å§‹ä¸€å¤©çš„å¨±ä¹æ´»åŠ¨ï¼Œä¸å¤§å®¶ä¸€èµ·é—²é€›äº”ä¸€å¹¿åœºï¼Œæ¼«æ­¥æ©˜å­æ´²å¤´ï¼Œç™»ä¸´å²³éº“å±±é¡¶â€¦â€¦<strong>å„ä½å¯¼å¯¼ä»¬äº²åˆ‡å‹å¥½ã€å¹½é»˜é£è¶£ã€æ´»åŠ›åè¶³ï¼Œä¹Ÿæ·±æ·±åœ°æ„ŸæŸ“äº†æˆ‘</strong>ğŸ˜ŠğŸ˜Š</p></li></ul><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><ul><li><p>å…¶å®è¿™å­¦æœŸæˆç»©å¾ˆç³Ÿç³•<del>ï¼ˆå¥½å§ï¼Œæœ¬æ¥å°±æŒºç³Ÿç³•çš„ï¼‰</del>ï¼Œä¹Ÿå› æ­¤ç„¦è™‘äº†ä¸å°‘æ—¶é—´ï¼Œ<strong>ä½†æƒ³æƒ³ååˆè§‰å¾—å¯ç¬‘</strong>ï¼Œæˆ‘ä»€ä¹ˆæ—¶å€™ä¹Ÿå˜æˆåˆ†å¥´äº†ï¼Œæˆ‘ä»€ä¹ˆæ—¶å€™ä¹Ÿå˜æˆè‡ªå·±æ›¾ç»æœ€è®¨åŒçš„æ¨¡æ ·äº†ï¼Ÿæˆ‘åªæƒ³å€Ÿç”¨å‡ å¥è¯ä¸å¤§å®¶å…±å‹‰ï¼š</p><ul><li><strong>ä½•é¡»å¤šè™‘ç›ˆäºäº‹ï¼Œç»ˆå½’å°æ»¡èƒœä¸‡å…¨</strong></li><li><strong>ä½†è¡Œå¥½äº‹ï¼Œè«é—®å‰ç¨‹</strong></li></ul></li><li><p><strong>å…¶å®è¿˜æœ‰å¾ˆå¤šå¾ˆå¤šè¯æƒ³å†™ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šäººå’Œäº‹å€¼å¾—å†™ï¼Œä½†æ•…äº‹æ€»è¦åœåœ¨æŸä¸ªé€—å·ï¼Œè®©æœªå®Œçš„æ€ç»ªåƒè’²å…¬è‹±èˆ¬æ•£å¼€ï¼Œé£˜å‘è¯»è€…å¿ƒé‡Œçš„é‚£ç‰‡è‡ªç•™åœ°ï¼Œå¦‚åŒæš®è‰²ä¸­æ¸æ¸éšå»çš„å±±å³¦è½®å»“ï¼Œç•™ç»™ä¸–ç•Œä¸€ä¸ªæ¸©æŸ”çš„æ‚¬å¿µâ€¦â€¦</strong></p></li><li><p><strong>ç»§ç»­å¥”è·‘ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œå°‘å¹´ï¼</strong>ğŸ˜ŠğŸ˜Š</p></li></ul><h1 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h1><ul><li>2025.7.12  Update:  æ˜¨æ™šwtyè€å¸ˆè”ç³»æˆ‘è¯´åˆ†æ•°å·²æ›´æ–°ï¼Œä»Šå¤©æ•™åŠ¡å®¡æ ¸è¿‡åï¼ŒOSåŠ äº†5åˆ†ï¼Œ<strong>æˆ‘å®£å¸ƒwtyè€å¸ˆå°±æ˜¯æˆ‘çš„ç”·ç¥</strong>ğŸ˜ğŸ˜†</li><li>æƒ³èµ·ä¹‹å‰çœ‹çš„æ–—ç ´è‹ç©¹é‡Œçš„ä¸€å¥è¯ï¼šâ€œ<strong>é”¦ä¸Šæ·»èŠ±å›ºç„¶å¯å–œï¼Œä½†é›ªä¸­é€ç‚­æ–¹æ‰æ˜¯çœŸæ­£çš„éš¾èƒ½å¯è´µ</strong>â€</li></ul>]]></content>
    
    
    <categories>
      
      <category>æ—¥å¸¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>æ€»ç»“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BUAA-OO-Unit4</title>
    <link href="/2025/06/15/BUAA-OO-Unit4/"/>
    <url>/2025/06/15/BUAA-OO-Unit4/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯åŒ—èˆª2025OOè¯¾ç¨‹çš„æ€»ç»“ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><blockquote><p>[!TIP]</p><p><strong>é’ˆå¯¹ç¬¬å››å•å…ƒçš„ä¸‰æ¬¡ä½œä¸šå’Œ2025OOè¯¾ç¨‹å…¨éƒ¨å†…å®¹ï¼Œæ’°å†™æŠ€æœ¯åšå®¢</strong></p><ul><li>æ€»ç»“æœ¬å•å…ƒæ‰€å®è·µçš„æ­£å‘å»ºæ¨¡ä¸å¼€å‘</li><li>æ€»ç»“æœ¬å•å…ƒä½œä¸šçš„æ¶æ„è®¾è®¡ï¼Œå¹¶å¯¹æ¯”åˆ†ææœ€ç»ˆçš„ä»£ç è®¾è®¡å’ŒUMLæ¨¡å‹è®¾è®¡ä¹‹é—´çš„è¿½è¸ªå…³ç³»</li><li>æ ¹æ®ä½¿ç”¨å¤§æ¨¡å‹è¾…åŠ©æ­£å‘å»ºæ¨¡çš„ä½“éªŒï¼Œæ€»ç»“åˆ†æå¦‚ä½•å¼•å¯¼å¤§æ¨¡å‹åœ¨å¤æ‚åœºæ™¯ä¸­å®Œæˆæ¶æ„è®¾è®¡ä»»åŠ¡</li><li>æ€»ç»“è‡ªå·±åœ¨å››ä¸ªå•å…ƒä¸­æ¶æ„è®¾è®¡æ€ç»´çš„æ¼”è¿›</li><li>æ€»ç»“è‡ªå·±åœ¨å››ä¸ªå•å…ƒä¸­æµ‹è¯•æ€ç»´çš„æ¼”è¿›</li><li>æ€»ç»“è‡ªå·±çš„è¯¾ç¨‹æ”¶è·</li></ul><p><strong>æ³¨æ„ï¼š</strong>åœ¨ç¼–å†™å®Œåšå®¢å¹¶å‘å¸ƒåœ¨CSDNä¹‹åï¼Œè¯·åœ¨<a href="https://bbs.csdn.net/topics/619745505">å¯¹åº”ä½œä¸šå¤„</a>é€‰æ‹©è¦ä½œä¸ºä½œä¸šæäº¤çš„åšå®¢ï¼Œç‚¹å‡»æäº¤ã€‚</p></blockquote><h1 id="ç»“æŸäº†ï¼"><a href="#ç»“æŸäº†ï¼" class="headerlink" title="ç»“æŸäº†ï¼"></a>ç»“æŸäº†ï¼</h1><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/%E9%BE%99%E7%8C%AB3.jpg"></p><h1 id="æœ¬å•å…ƒçš„æ­£å‘å»ºæ¨¡ä¸å¼€å‘"><a href="#æœ¬å•å…ƒçš„æ­£å‘å»ºæ¨¡ä¸å¼€å‘" class="headerlink" title="æœ¬å•å…ƒçš„æ­£å‘å»ºæ¨¡ä¸å¼€å‘"></a>æœ¬å•å…ƒçš„æ­£å‘å»ºæ¨¡ä¸å¼€å‘</h1><ul><li>æœ¬å•å…ƒçš„æ­£å‘å»ºæ¨¡éœ€è¦æˆ‘ä»¬åœ¨å…·ä½“å†™ä»£ç ä¹‹å‰è®¾è®¡å¥½æ¶æ„ï¼Œå¹¶ç”±æ­¤ç”»å‡ºç±»å›¾ï¼Œè¿™éœ€è¦æˆ‘ä»¬åœ¨åˆå§‹è¿›è¡Œå……åˆ†çš„æ€è€ƒï¼Œè®¾è®¡å‡ºä¸€ä¸ªç›¸å¯¹çµæ´»æ‰©å±•æ€§é«˜çš„æ¶æ„</li><li>ä½†åœ¨å…·ä½“å®è·µè¿‡ç¨‹ä¸­æ¯”è¾ƒå›°éš¾ï¼Œå› ä¸ºå¾ˆéš¾åœ¨ä¸€å¼€å§‹å°±è®¾è®¡å‡ºæ¯”è¾ƒå¥½çš„æ¶æ„ï¼Œåœ¨å®é™…å†™ä»£ç è¿‡ç¨‹ä¸­è¿˜éœ€è¦ä¸æ–­åœ°ä¿®æ”¹å®Œå–„</li></ul><h1 id="æ¶æ„è®¾è®¡æ€ç»´"><a href="#æ¶æ„è®¾è®¡æ€ç»´" class="headerlink" title="æ¶æ„è®¾è®¡æ€ç»´"></a>æ¶æ„è®¾è®¡æ€ç»´</h1><ul><li>é™¤äº†Unit3ï¼Œæ¯å•å…ƒçš„ç¬¬ä¸€æ¬¡ä½œä¸šéƒ½éœ€è¦æˆ‘ä»¬ä»0å¼€å§‹æ„å»ºèµ·ä¸€ä¸ªåŸºæœ¬çš„æ¡†æ¶ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬åœ¨åŠ¨æ‰‹codingå‰å¿…é¡»è¦è¿›è¡Œå……åˆ†åˆç†çš„è®¾è®¡ï¼Œè®¾è®¡å‡ºä¸€ä¸ªå‹å¥½çš„æ‰©å±•æ€§å¼ºçš„æ¶æ„ï¼Œä»¥é€‚åº”æœªæ¥çš„è¿­ä»£å¼€å‘éœ€æ±‚ã€‚</li><li>åœ¨æˆ‘å®Œæˆå„å•å…ƒæ¶æ„è®¾è®¡çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€èˆ¬é‡‡å–â€é˜…è¯»æŒ‡å¯¼ä¹¦ &gt; åˆ†æç†æ¸…éœ€æ±‚ä¸ç›®æ ‡ &gt; é˜…è¯»å­¦é•¿åšå®¢å­¦ä¹ ä¼˜ç§€æ¶æ„ &gt;  æ ¹æ®ä½œä¸šå˜åŒ–ä¸è¦æ±‚è®¾è®¡å‡ºè‡ªå·±çš„æ¶æ„ â€œè¿™æ ·çš„ä¸€å¥—æµç¨‹æ¥å®Œæˆå•å…ƒæ¶æ„çš„è®¾è®¡ï¼Œæ—¢ç«™åœ¨äº†â€œå­¦é•¿çš„è‚©è†€ä¸Šâ€ï¼Œä¹Ÿæœ‰è‡ªå·±ç‹¬ç‰¹åˆ›æ–°çš„è®¾è®¡</li></ul><h2 id="Unit1"><a href="#Unit1" class="headerlink" title="Unit1"></a>Unit1</h2><ul><li>Unit1çš„æ¶æ„è®¾è®¡æˆ‘ä¸»è¦å‚è€ƒçš„æ˜¯ç¬¬ä¸€æ¬¡å®éªŒä»¥åŠOOpreçš„æœ€åä¸€æ¬¡ä»£ç ä½œä¸šï¼Œä¸ºäº†å®ç°é€’å½’ä¸‹é™è§£æï¼Œæˆ‘æ²¿ç”¨äº†å®éªŒå’Œä½œä¸šçš„â€lexer-parserâ€ç»“æ„ï¼Œè‡ªé¡¶å‘ä¸‹ï¼Œä»è¡¨è¾¾å¼åˆ°é¡¹å†åˆ°å› å­ï¼›è€Œä¸ºäº†å°†ä¸åŒçš„å› å­ç»Ÿä¸€èµ·æ¥ï¼Œå½’ä¸€åŒ–å¤„ç†ï¼Œæˆ‘ä½¿ç”¨äº†å•é¡¹å¼-å¤šé¡¹å¼çš„è¡¨å¾æ–¹å¼ï¼Œå°†å„ç§å› å­è½¬åŒ–ä¸ºå¤šé¡¹å¼å†åŒ–ç®€ã€‚æœ€ç»ˆè®¾è®¡å‡ºâ€Lexer &gt; Parser &gt; Poly &gt; Optimizerâ€çš„å››ç»´ç»“æ„ï¼Œå®ç°æ–‡æ³•è§£æåˆ°è¯­æ³•æ ‘è§£æï¼Œå¤šé¡¹å¼è½¬åŒ–åˆ°åˆå¹¶è¾“å‡ºä¼˜åŒ–çš„æµç¨‹ï¼Œä»è€Œæ„å»ºèµ·æ¥ä¸€ä¸ªç›¸å¯¹åˆç†çš„é€’å½’ä¸‹é™ä¸å½’ä¸€å¤„ç†çš„ä»£ç æ¶æ„</li></ul><h2 id="Unit2"><a href="#Unit2" class="headerlink" title="Unit2"></a>Unit2</h2><ul><li>Unit2æˆ‘æ˜¯åŸºäºå®éªŒä»£ç å’Œç”Ÿäº§è€…-æ¶ˆè´¹è€…æ¨¡å¼æ­å»ºçš„ï¼ŒåŒæ—¶å¤§èƒ†åˆç†åœ°æ¨æµ‹è¿­ä»£éœ€æ±‚ï¼Œä¼šä»â€œæŒ‡å®šç”µæ¢¯â€æ¼”å˜ä¸ºâ€œè‡ªå®šä¹‰ç­–ç•¥â€ï¼Œå› æ­¤ä¸€å¼€å§‹è®¾è®¡æ¶æ„å°±è€ƒè™‘äº†<code>Dispatcher</code>è¿™ä¸€ä¸ªå½“æ—¶çœ‹èµ·æ¥æ²¡æœ‰ä»»ä½•ä½œç”¨çš„ç±»ï¼ŒåŒæ—¶ä¹Ÿå°†ç”µæ¢¯è¿è¡Œç­–ç•¥è¿›è¡Œè§£è€¦ï¼Œå‚è€ƒ<a href="https://hyggge.github.io/2022/03/24/oo/oo-di-yi-dan-yuan-zong-jie/">hygggeçš„åšå®¢</a>å­¦ä¹ å¹¶é‡‡ç”¨äº†LOOKç®—æ³•ï¼Œå°†è¾“å…¥ã€åˆ†æ´¾ã€å†³ç­–ã€æ‰§è¡Œå››ä¸ªé€»è¾‘è¿›è¡Œäº†è§£è€¦ä¸åˆ†ç¦»ã€‚</li></ul><h2 id="Unit3"><a href="#Unit3" class="headerlink" title="Unit3"></a>Unit3</h2><ul><li>æ ¹æ®jmlå®ç°æŒ‡å®šçš„ç±»å’Œæ–¹æ³•å³å¯ï¼Œå¹¶ä¸éœ€è¦è‡ªå·±è¿›è¡Œæ¶æ„è®¾è®¡ï¼Œä¸»è¦å…³æ³¨ç‚¹è¿˜æ˜¯åœ¨æ€§èƒ½ã€ç®—æ³•çš„ä¼˜åŒ–ä¸Šé¢</li></ul><h2 id="Unit4"><a href="#Unit4" class="headerlink" title="Unit4"></a>Unit4</h2><ul><li>ç¬¬å››å•å…ƒæˆ‘æ˜¯ç›´æ¥æ ¹æ®æŒ‡å¯¼ä¹¦ï¼Œç„¶åè‡ªå·±æ„æ€äº†ä¸€ä¸‹ï¼Œå°†ç”¨æˆ·ã€ä¹¦ã€ä¹¦æ¶ã€å€Ÿè¿˜å°ç­‰è®¾è®¡ä¸ºå•ç‹¬çš„ç±»ï¼Œç„¶åä¸€ç‚¹ä¸€ç‚¹æ ¹æ®æŒ‡å¯¼ä¹¦å’Œå®˜æ–¹åŒ…å®Œæˆè‡ªå·±çš„è®¾è®¡</li></ul><h1 id="æµ‹è¯•æ€ç»´"><a href="#æµ‹è¯•æ€ç»´" class="headerlink" title="æµ‹è¯•æ€ç»´"></a>æµ‹è¯•æ€ç»´</h1><ul><li>æˆ‘çš„æµ‹è¯•ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µ<ul><li>å†™å®Œä»£ç åç”¨é¢˜é¢æ•°æ®å’Œè‡ªå·±æé€ çš„æ•°æ®è¿›è¡Œæœ€åŸºæœ¬çš„æµ‹è¯•</li><li>åˆ©ç”¨ä¸­æµ‹æ•°æ®è¿›è¡Œè¿›ä¸€æ­¥çš„æµ‹è¯•</li><li>åˆ©ç”¨è¯„æµ‹æœºå¯¹ç¨‹åºè¿›è¡Œæ›´åŠ å…¨é¢çš„æµ‹è¯•</li></ul></li><li>è¿™é‡Œä¸»è¦è¯´ä¸€è¯´æˆ‘çš„<strong>æ•°æ®æ„é€ ç­–ç•¥</strong></li><li>çº¯éšæœºç”Ÿæˆæˆ–è€…ç•¥åŠ é™å®šçš„éšæœºç”Ÿæˆï¼Œç”Ÿæˆçš„æ•°æ®å¼ºåº¦ä½ï¼Œæ— æ³•<strong>æµ‹è¯•æé™æƒ…å†µã€è¾¹ç•Œæƒ…å†µ</strong>ï¼Œä¹Ÿæ— æ³•å¯¹ç¨‹åºè¿›è¡Œ<strong>å‹åŠ›æµ‹è¯•</strong>ï¼Œæ£€éªŒç¨‹åºçš„æ€§èƒ½ï¼Œå› æ­¤æˆ‘çš„æ•°æ®ç”Ÿæˆä¼š<strong>è®¾å®šä¸€å®šçš„é€»è¾‘</strong>ã€‚</li><li>æ ¹æ®ä¸åŒå•å…ƒçš„ç‰¹ç‚¹é€‰æ‹©éªŒè¯æ­£ç¡®æ€§çš„ç¨‹åºï¼Œæ¯”å¦‚Unit1å¯ä»¥å€ŸåŠ©ç°æœ‰çš„<code>sympy</code>åº“æ¥è¿›è¡ŒåŒ–ç®€æ¯”è¾ƒï¼Œç„¶åå’ŒåŒå­¦å¯¹æ‹å³å¯ï¼›Unit2çš„è¾“å‡ºå› äººè€Œå¼‚ï¼Œæ— æ³•å¯¹æ‹ï¼Œå› æ­¤éœ€è¦è‡ªè¡Œè®¾è®¡éªŒè¯ç¨‹åºæ¥åˆ¤æ–­è¾“å‡ºæ˜¯å¦æ­£ç¡®ï¼›Unit3çš„è¾“å‡ºåŸºæœ¬å›ºå®šï¼Œå¯ä»¥ç›´æ¥å’Œå¥½å‹è¿›è¡Œå¯¹æ‹ã€‚</li><li>ä¸ºäº†ä¾¿äºä¿®æ”¹æ•°æ®å‚æ•°ï¼ˆæ•°æ®æ¡æ•°ï¼Œå„ç§å¸¸æ•°é™åˆ¶ç­‰ï¼‰ï¼Œæˆ‘ä¼šé€‰æ‹©å°†è¿™äº›å¸¸æ•°å®šä¹‰åœ¨æ–‡ä»¶çš„å¼€å¤´</li></ul><h2 id="Unit2-1"><a href="#Unit2-1" class="headerlink" title="Unit2"></a>Unit2</h2><h3 id="å¸¸è§„æµ‹è¯•"><a href="#å¸¸è§„æµ‹è¯•" class="headerlink" title="å¸¸è§„æµ‹è¯•"></a>å¸¸è§„æµ‹è¯•</h3><ul><li>æˆ‘é€‰æ‹©åˆ†ç»„å¤šæ¬¡ç”Ÿæˆï¼Œæ¯ç»„ç”Ÿæˆ8-12æ¡è¯·æ±‚ï¼Œç»„å†…è¯·æ±‚é—´éš”éšæœºåœ¨1så†…ï¼Œç»„é—´é—´éš”éšæœºåœ¨0.1 - 6så†…</li><li>å¯¹äºæ¯ä¸€ç»„æ•°æ®ï¼Œæˆ‘è®¾ç½®äº†å‡ ç§åœºæ™¯ï¼Œé€šè¿‡æŒ‡å®šä¸åŒçš„æ¦‚ç‡æ¥éšæœºé€‰æ‹©åœºæ™¯è¿›è¡Œç”Ÿæˆ<ul><li><code>high_concurrent</code>ï¼šé«˜å¹¶å‘ï¼Œæ§åˆ¶è¿™ä¸€ç»„çš„è¯·æ±‚å…¨éƒ¨åœ¨åŒä¸€æ—¶é—´æŠ•æ”¾</li><li><code>high_concentration</code>ï¼šé«˜é›†ä¸­ï¼šæ‰€æœ‰è¯·æ±‚æ¥è‡ªåŒä¸€æ¥¼å±‚æˆ–è€…å‰å¾€åŒä¸€æ¥¼å±‚</li><li><code>high_burst</code>ï¼šå°†5éƒ¨ç”µæ¢¯å…¨éƒ¨ä¸´æ—¶è°ƒåº¦ï¼Œç„¶åç”Ÿæˆå…¶ä»–è¯·æ±‚</li><li><code>random</code>ï¼šéšæœºé€‰æ‹©è¯·æ±‚</li><li><code>multi_update</code>ï¼šè¿›è¡Œ3æ¬¡æ”¹é€ ï¼Œç„¶åç”Ÿæˆå…¶ä»–è¯·æ±‚</li></ul></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">SCENARIO_PROBS = &#123;<br>    <span class="hljs-string">&#x27;high_concurrent&#x27;</span>: <span class="hljs-number">0.3</span>,<br>    <span class="hljs-string">&#x27;high_concentration&#x27;</span>: <span class="hljs-number">0.2</span>,<br>    <span class="hljs-string">&#x27;high_burst&#x27;</span>: <span class="hljs-number">0.15</span>,<br>    <span class="hljs-string">&#x27;random&#x27;</span>: <span class="hljs-number">0.2</span>,<br>    <span class="hljs-string">&#x27;multi_update&#x27;</span>: <span class="hljs-number">0.15</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="æç«¯æµ‹è¯•"><a href="#æç«¯æµ‹è¯•" class="headerlink" title="æç«¯æµ‹è¯•"></a>æç«¯æµ‹è¯•</h3><ul><li><strong>é’ˆå¯¹é«˜å¹¶å‘åœºæ™¯</strong>ï¼Œæˆ‘è¿˜è®¾è®¡äº†å¦å¤–ä¸€ä¸ªæ•°æ®ç”Ÿæˆå™¨ï¼Œå…¨éƒ¨è¯·æ±‚åœ¨åŒä¸€æ—¶é—´æˆ–è€…é—´éš”ä¸è¶…è¿‡2så†…ç»™å‡ºï¼Œä»¥æ¨¡æ‹ŸçœŸå®åœºæ™¯ä¸‹çš„é«˜å¹¶å‘æŒ‘æˆ˜</li><li>åæ¥å‘ç°ï¼Œå¼ºæµ‹æ•°æ®ä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„ä¸“é—¨é’ˆå¯¹é«˜å¹¶å‘çš„æµ‹è¯•ç‚¹</li></ul><h3 id="å¹¶è¡Œæµ‹è¯•"><a href="#å¹¶è¡Œæµ‹è¯•" class="headerlink" title="å¹¶è¡Œæµ‹è¯•"></a>å¹¶è¡Œæµ‹è¯•</h3><ul><li>å› ä¸ºä¸€æ¬¡æµ‹è¯•çš„æ—¶é—´å¾€å¾€åœ¨50sä»¥ä¸Šï¼Œç”šè‡³é«˜è¾¾90sï¼Œæ‰€ä»¥å•ä¸ªcaseä¸²è¡Œæµ‹è¯•çš„æ•ˆç‡æä½ï¼Œæˆ‘ä»¬éœ€è¦ç”¨å¤šçº¿ç¨‹æ¥æµ‹è¯•æˆ‘ä»¬çš„å¤šçº¿ç¨‹ç¨‹åº</li><li>å› ä¸ºç¨‹åºè¿è¡Œä¸¥æ ¼ä¾èµ–<code>datainput_student_win64</code>ï¼Œæˆ‘æ˜¯é‡‡ç”¨è‡ªåŠ¨åŒ–æµç¨‹å»ºç«‹åä¸ªå­æ–‡ä»¶å¤¹ï¼Œç„¶åå¯åŠ¨åä¸ªçº¿ç¨‹åˆ†åˆ«åœ¨å­æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œæµ‹è¯•</li></ul><h2 id="Unit3-1"><a href="#Unit3-1" class="headerlink" title="Unit3"></a>Unit3</h2><ul><li>é™¤äº†å¸¸è§„çš„æœ‰é™åˆ¶çš„éšæœºæ•°æ®å¤–ï¼Œæˆ‘é‡ç‚¹é’ˆå¯¹éœ€è¦ä¼˜åŒ–çš„åœ°æ–¹è®¾è®¡äº†å‡ ç§æµ‹è¯•æ¨¡å¼</li><li><code>special_qtvs</code>ï¼šä¸“é—¨é’ˆå¯¹<code>qtvs</code>çš„ç”Ÿæˆæ¨¡å¼ã€‚é¦–å…ˆåˆ›å»ºç”¨æˆ·ï¼Œæ¥ç€å»ºç«‹æ‰€æœ‰å…¶ä»–äººä¸1å·äººç‰©çš„å…³ç³»ï¼Œå¹¶éšæœºæ·»åŠ ä¸€äº›å…³ç³»ï¼Œç„¶åå…¨éƒ¨åŠ å…¥1å·äººç‰©çš„æ ‡ç­¾ä¸­ï¼Œç„¶ååˆ†2é˜¶æ®µæµ‹è¯•ï¼Œç¬¬ä¸€é˜¶æ®µåœ¨ç½‘ç»œä¸­éšæœºä¿®æ”¹å…³ç³»ï¼Œæ·»åŠ å…³ç³»ï¼Œå°æ¦‚ç‡æŸ¥è¯¢qtvsï¼›ç¬¬äºŒé˜¶æ®µï¼Œæ·»åŠ äº†æŒ‡ä»¤<code>dft</code>ï¼Œä»¥åŠå¢åŠ äº†æŸ¥è¯¢<code>qtvs</code> çš„æ¦‚ç‡ã€‚</li><li><code>special_qba</code>ï¼šä¸“é—¨é’ˆå¯¹<code>qba</code>çš„æµ‹è¯•ã€‚é¦–å…ˆå»ºç«‹ä¸€ä¸ªæ€»äººæ•°20%çš„æ ¸å¿ƒç”¨æˆ·ç¾¤ï¼Œç„¶ååœ¨æ ¸å¿ƒç”¨æˆ·ä¸­æ¯ä¸ªç”¨æˆ·éšæœºæ·»åŠ 2-3ä¸ªå…³ç³»ï¼Œç„¶åå¼€å§‹ç¬¬äºŒé˜¶æ®µï¼Œæ··åˆæµ‹è¯•ï¼š40%æ¦‚ç‡æ‰§è¡ŒqbaæŸ¥è¯¢ï¼Œå¹¶ä¸”80%æ¦‚ç‡æŸ¥è¯¢æ ¸å¿ƒç”¨æˆ·ï¼Œ20%æ¦‚ç‡æŸ¥è¯¢å…¶ä»–ç”¨æˆ·ï¼›30%æ¦‚ç‡æ–°å¢æˆ–ä¿®æ”¹æ ¸å¿ƒç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·ä¹‹é—´çš„å…³ç³»ï¼›30%æ¦‚ç‡æ–°å¢ç”¨æˆ·å’Œå…³ç³»å€¼ï¼Œ</li><li><code>special_account</code>ï¼šç¬¬ä¸€é˜¶æ®µï¼šæ·»åŠ ç”¨æˆ·å’Œå…³ç³»ï¼›ç¬¬äºŒé˜¶æ®µï¼šæ·»åŠ å…¬ä¼—å·ï¼Œå¹¶æ·»åŠ ä¸€äº›å…³æ³¨å’Œæ–‡ç« ï¼›ç¬¬ä¸‰é˜¶æ®µï¼šæµ·é‡çš„æ•°æ®æ¥éšæœºè¿›è¡Œä»¥ä¸‹å‡ ç§æ“ä½œï¼šè´¡çŒ®æ–‡ç« ã€åˆ é™¤æ–‡ç« ã€æ·»åŠ å…³æ³¨ã€åˆ é™¤å…¬ä¼—å·ã€æŸ¥è¯¢æ¥å—æ–‡ç« ã€æŸ¥è¯¢æœ€ä½³è´¡çŒ®è€…</li></ul><h2 id="Unit4-1"><a href="#Unit4-1" class="headerlink" title="Unit4"></a>Unit4</h2><ul><li>æ‘†äº†ï¼Œç”¨çš„åˆ«äººçš„è¯„æµ‹æœº</li></ul><h1 id="è¾…åŠ©å·¥å…·"><a href="#è¾…åŠ©å·¥å…·" class="headerlink" title="è¾…åŠ©å·¥å…·"></a>è¾…åŠ©å·¥å…·</h1><h2 id="å¤§æ¨¡å‹"><a href="#å¤§æ¨¡å‹" class="headerlink" title="å¤§æ¨¡å‹"></a>å¤§æ¨¡å‹</h2><ul><li>åœ¨å­¦ä¹ OOçš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥<strong>ç»“åˆå¤§æ¨¡å‹æ¥è¾…åŠ©è‡ªå·±</strong>ï¼Œæ¯”å¦‚æˆ‘åœ¨Unit3ä¸­ä¼šå°†å¤§æ®µå¤æ‚æ™¦æ¶©çš„<code>jml</code>æè¿°æŠ•å–‚ç»™å¤§æ¨¡å‹ï¼Œè®©å…¶è¿›è¡Œåˆ†æä¸è§£é‡Šï¼Œä¹Ÿä¼šé€šè¿‡å¤§æ¨¡å‹æ¥å­¦ä¹ ä¸€äº›çŸ¥è¯†ï¼šæ¯”å¦‚å¹¶æŸ¥é›†ã€åŒå‘BFSç­‰</li><li>å¤§æ¨¡å‹å¯¹äºæ˜ç¡®çš„ç»™å®šä»»åŠ¡å®Œæˆåœ°ç›¸å½“å‡ºè‰²ï¼Œæ¯”å¦‚è¯´ï¼šè¯·ä½ å‘Šè¯‰æˆ‘ä»€ä¹ˆæ˜¯<code>Dijkstra</code>ç®—æ³•å¹¶ç”¨javaè¯­è¨€ç»™å‡ºä¸€ä¸ªç¤ºä¾‹ï¼Œè¿™ç§ä»»åŠ¡å¤§æ¨¡å‹èƒ½å¤Ÿéå¸¸è¿…é€Ÿåœ°ç»™å‡ºå‡†ç¡®ç­”æ¡ˆ</li><li>å¤§æ¨¡å‹ç†è§£<strong>å¤æ‚ä¸šåŠ¡éœ€æ±‚</strong>çš„èƒ½åŠ›æœ‰é™ï¼Œæ¯”å¦‚ä½ ç›´æ¥å°†ä½œä¸šæŒ‡å¯¼ä¹¦ç»™å®ƒï¼Œé‚£ä¹ˆå®ƒç”Ÿæˆçš„ç¨‹åºä¼šæœ‰å¾ˆå¤§çš„æ¼æ´ï¼Œä½†å¦‚æœä½ æ˜¯å°†ä¸€ä¸ªç±»çš„jmlæè¿°ç»™å®ƒï¼Œé‚£ä¹ˆå®ƒç”Ÿæˆçš„ä»£ç çš„æ­£ç¡®æ€§åˆ™ä¼šæœ‰è¾ƒå¤§çš„æå‡</li><li>å½“ç„¶ï¼Œç°åœ¨æœ‰å¾ˆå¼ºçš„ç¼–ç¨‹è¾…åŠ©æ™ºèƒ½ä½“ï¼šcursor + claude4ï¼Œç¼–ç¨‹èƒ½åŠ›ç–‘ä¼¼è¶…è¶Šç»å¤§éƒ¨åˆ†ç¨‹åºçŒ¿ï¼Œä¸è¿‡å¾ˆå¤šå…¬å¸ä¹Ÿä¸å…è®¸ä½¿ç”¨ï¼Œå…¶ä»–çš„å¤§æ¨¡å‹ä¹Ÿæ˜¯ä¸å…è®¸ç”¨çš„ï¼ŒåŸå› ä¹‹ä¸€åœ¨äºä¿æŠ¤ä¸šåŠ¡çš„å®‰å…¨ï¼Œé˜²æ­¢æ•°æ®æ³„éœ²ï¼›å¦ä¸€æ–¹é¢ï¼Œå¯¹äºä¸€äº›å¤§å‹çš„ä»£ç ï¼ŒAIå‡ºæ‰‹å¯èƒ½ä¼šé€‚å¾—å…¶å</li></ul><h2 id="github"><a href="#github" class="headerlink" title="github"></a>github</h2><ul><li>æ±‡èšäº†å…¨ä¸–ç•Œå¼€å‘è€…çš„å¼€æºç¤¾åŒºï¼Œé‡Œé¢èƒ½æ‰¾åˆ°ä¸€äº›æ„Ÿå…´è¶£çš„é¡¹ç›®ï¼Œä»¥åŠå­¦é•¿çš„ä»£ç ï¼Œç”šè‡³æœ‰è¯„æµ‹æœº</li><li>ç»´æŠ¤å¥½è‡ªå·±çš„githubè´¦å·ï¼Œå¯ä»¥å°†è‡ªå·±çš„ä»£ç å’Œè¯„æµ‹æœºä¹Ÿä¸Šä¼ ä¸Šå»ï¼Œå®ç°å¼€æºä¸ä¼ æ‰¿</li></ul><h1 id="è¯¾ç¨‹æ”¶è·"><a href="#è¯¾ç¨‹æ”¶è·" class="headerlink" title="è¯¾ç¨‹æ”¶è·"></a>è¯¾ç¨‹æ”¶è·</h1><ul><li>ä»å½“åˆOOpreè¯¾ç¨‹å¯¹Jé¢å‘å¯¹è±¡<strong>ä¸€æ— æ‰€çŸ¥</strong>åˆ°ç°åœ¨å­¦ä¹ äº†è§£äº†è®¸å¤šæ–°çŸ¥è¯†ï¼Œæ¯”å¦‚ï¼šå°è£…ç»§æ‰¿å¤šæ€<strong>ä¸‰å¤§ç‰¹æ€§</strong>ã€é€’å½’ä¸‹é™ã€å¤šçº¿ç¨‹ç¼–ç¨‹ã€è§„æ ¼åŒ–è®¾è®¡ã€å¥‘çº¦å¼ç¼–ç¨‹ç­‰ï¼Œä¸€è·¯èµ°æ¥ï¼Œæˆ‘æ—¢æ”¶è·äº†çŸ¥è¯†ï¼Œä¹Ÿäº«å—è¿™ä»½<strong>å­¦ä¹ çš„ä¹è¶£</strong>ğŸ˜</li><li>æŠ—å‹èƒ½åŠ›å¤§å¹…æå‡ï¼Œç¬¬äºŒå•å…ƒä½œä¸šæ¯å‘¨å‘¨äº”ç†¬å¤œdebugï¼Œç¬¬äºŒæ¬¡ä½œä¸šå æ®äº†æˆ‘æ•´ä¸ªæ¸…æ˜å‡æœŸï¼Œç¬¬ä¸‰æ¬¡ä½œä¸šdebugåˆ°äº†ç¬¬äºŒå¤©æ—©ä¸Š5ç‚¹ï¼Œè¿™äº›åœºæ™¯æˆ‘<strong>ç»ˆç”Ÿéš¾å¿˜</strong>ğŸ˜€</li><li>å­¦ä¹ OOçš„è¿‡ç¨‹ï¼Œæˆ‘ä¹Ÿç»“è¯†äº†è®¸å¤šæœ‹å‹ä¸ä¼˜ç§€çš„å­¦é•¿å­¦å§ï¼Œè¿™ç§æ”¶è·æ˜¯<strong>æ— ä»·ä¹‹å®</strong></li><li>ä¸€è·¯èµ°æ¥ï¼Œæˆ‘ä¹Ÿæ”¶è·äº†å¯¹ç¼–ç¨‹å¯¹å¼€å‘çš„çƒ­çˆ±ï¼Œé¢å‘å¯¹è±¡ä¸ä»…ä»…æ˜¯ä¸€ç§å¼€å‘æ–¹å¼ï¼Œæ›´æ˜¯ä¸€ç§æ€ç»´æ–¹å¼ï¼Œå®ƒå°†æŒ‡å¯¼åœ¨ç¼–ç¨‹çš„é“è·¯ä¸Šç»§ç»­å¥‹å‹‡å‰è¿›ï¼Œå‹‡å¾€ç›´å‰ï¼</li></ul><h1 id="é¸£è°¢"><a href="#é¸£è°¢" class="headerlink" title="é¸£è°¢"></a>é¸£è°¢</h1><ul><li>æ„Ÿè°¢è¯¾ç¨‹ç»„çš„è€å¸ˆä¸åŠ©æ•™ä»¬çš„è¾›å‹¤ä»˜å‡ºâ¤ï¸</li></ul>]]></content>
    
    
    <categories>
      
      <category>OO</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OO</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UNIXç³»ç»Ÿå¤ä¹ -4</title>
    <link href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/"/>
    <url>/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-4/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><h1 id="Shellç¼–ç¨‹"><a href="#Shellç¼–ç¨‹" class="headerlink" title="Shellç¼–ç¨‹"></a>Shellç¼–ç¨‹</h1><h2 id="ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰"><a href="#ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰" class="headerlink" title="ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰"></a>ä¸€ã€Shellç¼–ç¨‹çš„æ„ä¹‰</h2><ol><li><p><strong>å°†å‘½ä»¤ç»„åˆæˆå®ç”¨å·¥å…·</strong></p><ul><li>ç¤ºä¾‹ï¼šåˆ›å»ºæ˜¾ç¤ºç›®å½•çš„è„šæœ¬<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># lsdirè„šæœ¬å†…å®¹</span><br><span class="hljs-built_in">ls</span> -l | sed -n <span class="hljs-string">&#x27;/^d/p&#x27;</span><br> <br><span class="hljs-comment"># ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-built_in">chmod</span> +x lsdir<br>./lsdir<br></code></pre></td></tr></table></figure></li></ul></li><li><p><strong>å¿«é€Ÿç¼–å†™å®ç”¨è½¯ä»¶</strong></p><ul><li>ç¤ºä¾‹ï¼šå¸¦è¡Œå·çš„æ–‡ä»¶æŸ¥çœ‹å™¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># mycatè„šæœ¬å†…å®¹</span><br>awk <span class="hljs-string">&#x27;&#123;print NR, &quot;: &quot;, $0&#125;&#x27;</span> <span class="hljs-variable">$1</span><br> <br><span class="hljs-comment"># ä½¿ç”¨æ–¹å¼</span><br><span class="hljs-built_in">chmod</span> +x mycat<br>./mycat filename<br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="äºŒã€ä½ç½®å‚æ•°"><a href="#äºŒã€ä½ç½®å‚æ•°" class="headerlink" title="äºŒã€ä½ç½®å‚æ•°"></a>äºŒã€ä½ç½®å‚æ•°</h2><ol><li><p><strong>åŸºæœ¬ä½ç½®å‚æ•°</strong></p><ul><li><code>$0</code>ï¼šè„šæœ¬åç§°</li><li><code>$1</code>, <code>$2</code>, â€¦ï¼šç¬¬1ã€2ä¸ªå‚æ•°ç­‰</li><li><code>$#</code>ï¼šå‚æ•°ä¸ªæ•°</li><li><code>$*</code>ï¼šæ‰€æœ‰å‚æ•°é›†åˆ</li></ul></li><li><p><strong>å‚æ•°é‡ç½®ä¸ç§»åŠ¨</strong></p><ul><li>ä½¿ç”¨<code>set</code>é‡ç½®å‚æ•°ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">set</span> new1 new2  <span class="hljs-comment"># é‡ç½®$1ä¸ºnew1ï¼Œ$2ä¸ºnew2</span><br></code></pre></td></tr></table></figure></li><li>ä½¿ç”¨<code>shift</code>ç§»åŠ¨å‚æ•°ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">shift</span>    <span class="hljs-comment"># å·¦ç§»1ä½ï¼Œä¸¢å¼ƒ$1</span><br><span class="hljs-built_in">shift</span> 2  <span class="hljs-comment"># å·¦ç§»2ä½</span><br></code></pre></td></tr></table></figure></li></ul></li></ol><h2 id="ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„"><a href="#ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„" class="headerlink" title="ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„"></a>ä¸‰ã€Shellå‘½ä»¤è¡Œç»“æ„</h2><ol><li><p><strong>å‘½ä»¤ç»„åˆ</strong></p><ul><li>é¡ºåºæ‰§è¡Œï¼š<code>cmd1; cmd2</code></li><li>ç®¡é“ï¼š<code>cmd1 | cmd2</code></li><li>åå°æ‰§è¡Œï¼š<code>cmd &amp;</code></li></ul></li><li><p><strong>å‘½ä»¤åˆ†ç»„</strong></p><ul><li>å­shellæ‰§è¡Œï¼š<code>(cmd1; cmd2)</code></li><li>å½“å‰shellæ‰§è¡Œï¼š<code>&#123; cmd1; cmd2; &#125;</code></li></ul></li></ol><h2 id="å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦"><a href="#å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦" class="headerlink" title="å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦"></a>å››ã€å‘½ä»¤è¡Œæ¨¡å¼ä¸å…ƒå­—ç¬¦</h2><table><thead><tr><th>å…ƒå­—ç¬¦</th><th>åŠŸèƒ½æè¿°</th></tr></thead><tbody><tr><td><code>&gt;</code></td><td>è¾“å‡ºé‡å®šå‘</td></tr><tr><td><code>&gt;&gt;</code></td><td>è¿½åŠ è¾“å‡º</td></tr><tr><td><code>&lt;</code></td><td>è¾“å…¥é‡å®šå‘</td></tr><tr><td><code>|</code></td><td>ç®¡é“</td></tr><tr><td><code>*</code></td><td>é€šé…ç¬¦</td></tr><tr><td><code>?</code></td><td>å•å­—ç¬¦åŒ¹é…</td></tr><tr><td><code>[a-z]</code></td><td>å­—ç¬¦èŒƒå›´åŒ¹é…</td></tr><tr><td><code>;</code></td><td>å‘½ä»¤åˆ†éš”ç¬¦</td></tr><tr><td><code>&amp;</code></td><td>åå°æ‰§è¡Œ</td></tr><tr><td><code>`</code></td><td>å‘½ä»¤æ›¿æ¢</td></tr><tr><td><code>$()</code></td><td>å‘½ä»¤æ›¿æ¢(æ¨è)</td></tr><tr><td><code>#</code></td><td>æ³¨é‡Š</td></tr></tbody></table><h2 id="äº”ã€å¼•å·ä½¿ç”¨"><a href="#äº”ã€å¼•å·ä½¿ç”¨" class="headerlink" title="äº”ã€å¼•å·ä½¿ç”¨"></a>äº”ã€å¼•å·ä½¿ç”¨</h2><ol><li><p><strong>å•å¼•å·</strong>ï¼šå®Œå…¨åŸæ ·è¾“å‡º</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&#x27;$USER `date`&#x27;</span>  <span class="hljs-comment"># è¾“å‡º: $USER `date`</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åŒå¼•å·</strong>ï¼šå…è®¸å˜é‡å’Œå‘½ä»¤æ›¿æ¢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$USER</span> `date`&quot;</span>  <span class="hljs-comment"># è¾“å‡ºå½“å‰ç”¨æˆ·å’Œæ—¥æœŸ</span><br></code></pre></td></tr></table></figure></li><li><p><strong>åå¼•å·</strong>ï¼šå‘½ä»¤æ›¿æ¢(å·²è¿‡æ—¶ï¼Œæ¨èä½¿ç”¨$())</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is `date`&quot;</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Today is <span class="hljs-subst">$(date)</span>&quot;</span>  <span class="hljs-comment"># æ¨èå†™æ³•</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="å…­ã€é‡å®šå‘"><a href="#å…­ã€é‡å®šå‘" class="headerlink" title="å…­ã€é‡å®šå‘"></a>å…­ã€é‡å®šå‘</h2><ol><li><p><strong>æ ‡å‡†é‡å®šå‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd &gt; file    <span class="hljs-comment"># è¾“å‡ºé‡å®šå‘</span><br>cmd &gt;&gt; file   <span class="hljs-comment"># è¿½åŠ è¾“å‡º</span><br>cmd &lt; file    <span class="hljs-comment"># è¾“å…¥é‡å®šå‘</span><br></code></pre></td></tr></table></figure></li><li><p><strong>é”™è¯¯é‡å®šå‘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmd 2&gt; error.log          <span class="hljs-comment"># é”™è¯¯è¾“å‡ºåˆ°æ–‡ä»¶</span><br>cmd &gt; output.log 2&gt;&amp;1     <span class="hljs-comment"># æ ‡å‡†å’Œé”™è¯¯éƒ½è¾“å‡ºåˆ°æ–‡ä»¶</span><br>cmd &amp;&gt; all_output.log     <span class="hljs-comment"># åŒä¸Š(æ›´ç®€æ´)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>Here Document</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> &lt;&lt;<span class="hljs-string">EOF</span><br><span class="hljs-string">å¤šè¡Œæ–‡æœ¬</span><br><span class="hljs-string">å¯ä»¥ç›´æ¥è¾“å…¥</span><br><span class="hljs-string">EOF</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="ä¸ƒã€Shellç¨‹åºç»“æ„"><a href="#ä¸ƒã€Shellç¨‹åºç»“æ„" class="headerlink" title="ä¸ƒã€Shellç¨‹åºç»“æ„"></a>ä¸ƒã€Shellç¨‹åºç»“æ„</h2><ol><li><strong>åŸºæœ¬ç»“æ„</strong>ï¼šå‘½ä»¤åºåˆ—</li><li><strong>ä¸»è¦å‘½ä»¤ç±»å‹</strong>ï¼š<ul><li>æ™®é€šå‘½ä»¤</li><li>èµ‹å€¼å‘½ä»¤</li><li>è¿ç®—å‘½ä»¤</li><li>æµç¨‹æ§åˆ¶(if&#x2F;case&#x2F;for&#x2F;while)</li></ul></li></ol><h2 id="å…«ã€æµç¨‹æ§åˆ¶"><a href="#å…«ã€æµç¨‹æ§åˆ¶" class="headerlink" title="å…«ã€æµç¨‹æ§åˆ¶"></a>å…«ã€æµç¨‹æ§åˆ¶</h2><ol><li><p><strong>ifè¯­å¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">elif</span> [ condition ]; <span class="hljs-keyword">then</span><br>  commands<br><span class="hljs-keyword">else</span><br>  commands<br><span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure></li><li><p><strong>caseè¯­å¥</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">case</span> <span class="hljs-variable">$var</span> <span class="hljs-keyword">in</span><br>  pattern1) commands ;;<br>  pattern2) commands ;;<br>  *) default commands ;;<br><span class="hljs-keyword">esac</span><br></code></pre></td></tr></table></figure></li><li><p><strong>forå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å½¢å¼1</span><br><span class="hljs-keyword">for</span> var <span class="hljs-keyword">in</span> list; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br> <br><span class="hljs-comment"># å½¢å¼2(Cé£æ ¼)</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-number">0</span>; i&lt;<span class="hljs-number">10</span>; i++)); <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>whileå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">while</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li><li><p><strong>untilå¾ªç¯</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">until</span> [ condition ]; <span class="hljs-keyword">do</span><br>  commands<br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­"><a href="#ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­" class="headerlink" title="ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­"></a>ä¹ã€testå‘½ä»¤ä¸æ¡ä»¶åˆ¤æ–­</h2><p>test </p><ol><li><p><strong>æ–‡ä»¶æµ‹è¯•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -e file ]    <span class="hljs-comment"># æ–‡ä»¶å­˜åœ¨</span><br>[ -f file ]    <span class="hljs-comment"># æ˜¯æ™®é€šæ–‡ä»¶</span><br>[ -d file ]    <span class="hljs-comment"># æ˜¯ç›®å½•</span><br>[ -s file ]    <span class="hljs-comment"># æ–‡ä»¶éç©º</span><br></code></pre></td></tr></table></figure></li><li><p><strong>å­—ç¬¦ä¸²æµ‹è¯•</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ -z <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># å­—ç¬¦ä¸²ä¸ºç©º</span><br>[ -n <span class="hljs-string">&quot;<span class="hljs-variable">$str</span>&quot;</span> ]  <span class="hljs-comment"># å­—ç¬¦ä¸²éç©º</span><br>[ <span class="hljs-string">&quot;<span class="hljs-variable">$a</span>&quot;</span> = <span class="hljs-string">&quot;<span class="hljs-variable">$b</span>&quot;</span> ] <span class="hljs-comment"># å­—ç¬¦ä¸²ç›¸ç­‰</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ•°å€¼æ¯”è¾ƒ</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ <span class="hljs-variable">$a</span> -eq <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># ç­‰äº</span><br>[ <span class="hljs-variable">$a</span> -ne <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># ä¸ç­‰äº</span><br>[ <span class="hljs-variable">$a</span> -gt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># å¤§äº</span><br>[ <span class="hljs-variable">$a</span> -lt <span class="hljs-variable">$b</span> ]  <span class="hljs-comment"># å°äº</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="åã€Shellå†…éƒ¨å˜é‡"><a href="#åã€Shellå†…éƒ¨å˜é‡" class="headerlink" title="åã€Shellå†…éƒ¨å˜é‡"></a>åã€Shellå†…éƒ¨å˜é‡</h2><table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>$?</code></td><td>ä¸Šæ¡å‘½ä»¤é€€å‡ºçŠ¶æ€</td></tr><tr><td><code>$$</code></td><td>å½“å‰shellçš„PID</td></tr><tr><td><code>$!</code></td><td>æœ€ååå°è¿›ç¨‹PID</td></tr><tr><td><code>$#</code></td><td>å‚æ•°ä¸ªæ•°</td></tr><tr><td><code>$@</code></td><td>æ‰€æœ‰å‚æ•°(ä¿ç•™å¼•å·)</td></tr><tr><td><code>$*</code></td><td>æ‰€æœ‰å‚æ•°(ä¸ä¿ç•™å¼•å·)</td></tr><tr><td><code>$_</code></td><td>ä¸Šæ¡å‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°</td></tr></tbody></table><h2 id="åä¸€ã€å®ç”¨ç¤ºä¾‹"><a href="#åä¸€ã€å®ç”¨ç¤ºä¾‹" class="headerlink" title="åä¸€ã€å®ç”¨ç¤ºä¾‹"></a>åä¸€ã€å®ç”¨ç¤ºä¾‹</h2><ol><li><p><strong>æŸ¥æ‰¾å‘½ä»¤è·¯å¾„(mywhich)</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">case</span> <span class="hljs-variable">$#</span> <span class="hljs-keyword">in</span><br>  0) <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Usage: <span class="hljs-variable">$0</span> cmd&quot;</span>; <span class="hljs-built_in">exit</span> 1 ;;<br><span class="hljs-keyword">esac</span><br> <br>IFS=:<br><span class="hljs-keyword">for</span> <span class="hljs-built_in">dir</span> <span class="hljs-keyword">in</span> <span class="hljs-variable">$PATH</span>; <span class="hljs-keyword">do</span><br>  <span class="hljs-keyword">if</span> [ -x <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span> ]; <span class="hljs-keyword">then</span><br>    <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$dir</span>/<span class="hljs-variable">$1</span>&quot;</span><br>    <span class="hljs-built_in">exit</span> 0<br>  <span class="hljs-keyword">fi</span><br><span class="hljs-keyword">done</span><br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;<span class="hljs-variable">$1</span>: not found&quot;</span><br><span class="hljs-built_in">exit</span> 1<br></code></pre></td></tr></table></figure></li><li><p><strong>å€’åºæ˜¾ç¤ºå‚æ•°</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-meta">#!/bin/bash</span><br><span class="hljs-keyword">for</span> ((i=<span class="hljs-variable">$#</span>; i&gt;<span class="hljs-number">0</span>; i--)); <span class="hljs-keyword">do</span><br>  <span class="hljs-built_in">echo</span> <span class="hljs-variable">$&#123;!i&#125;</span>  <span class="hljs-comment"># é—´æ¥å¼•ç”¨</span><br><span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹"><a href="#åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹" class="headerlink" title="åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹"></a>åäºŒã€Shellç¼–ç¨‹ä¼˜ç¼ºç‚¹</h2><p><strong>ä¼˜ç‚¹</strong>ï¼š</p><ul><li>å¿«é€Ÿç»„åˆç°æœ‰å‘½ä»¤</li><li>æ— éœ€ç¼–è¯‘ï¼Œä¿®æ”¹æ–¹ä¾¿</li><li>é€‚åˆç³»ç»Ÿç®¡ç†ä»»åŠ¡</li></ul><p><strong>ç¼ºç‚¹</strong>ï¼š</p><ul><li>æ‰§è¡Œæ•ˆç‡è¾ƒä½</li><li>å¤æ‚é€»è¾‘å¯è¯»æ€§å·®</li><li>å¯ç§»æ¤æ€§å—é™</li></ul><h2 id="æœ€ä½³å®è·µå»ºè®®"><a href="#æœ€ä½³å®è·µå»ºè®®" class="headerlink" title="æœ€ä½³å®è·µå»ºè®®"></a>æœ€ä½³å®è·µå»ºè®®</h2><ol><li>æ€»åœ¨ç¬¬ä¸€è¡ŒæŒ‡å®šè§£é‡Šå™¨ï¼š<code>#!/bin/bash</code></li><li>ä½¿ç”¨<code>$()</code>ä»£æ›¿åå¼•å·è¿›è¡Œå‘½ä»¤æ›¿æ¢</li><li>å˜é‡å¼•ç”¨åŠ åŒå¼•å·ï¼š<code>&quot;$var&quot;</code></li><li>ä½¿ç”¨<code>[[ ]]</code>ä»£æ›¿<code>[ ]</code>è¿›è¡Œæ¡ä»¶æµ‹è¯•(æ›´å¼ºå¤§)</li><li>ä¸ºè„šæœ¬æ·»åŠ å¸®åŠ©ä¿¡æ¯å’Œé”™è¯¯å¤„ç†</li><li>å¤æ‚è„šæœ¬è€ƒè™‘ä½¿ç”¨Pythonç­‰æ›´å¼ºå¤§çš„è¯­è¨€</li></ol><p>é€šè¿‡æŒæ¡è¿™äº›æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‚¨å¯ä»¥ç¼–å†™å‡ºé«˜æ•ˆã€å¯é çš„Shellè„šæœ¬ï¼Œå®Œæˆå„ç§ç³»ç»Ÿç®¡ç†å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚</p><h1 id="Cè¯­è¨€å¼€å‘ç¯å¢ƒ"><a href="#Cè¯­è¨€å¼€å‘ç¯å¢ƒ" class="headerlink" title="Cè¯­è¨€å¼€å‘ç¯å¢ƒ"></a>Cè¯­è¨€å¼€å‘ç¯å¢ƒ</h1><h2 id="ä¸€ã€æ¦‚è¿°"><a href="#ä¸€ã€æ¦‚è¿°" class="headerlink" title="ä¸€ã€æ¦‚è¿°"></a>ä¸€ã€æ¦‚è¿°</h2><ol><li><p><strong>Cè¯­è¨€ä¸UNIXçš„å…³ç³»</strong></p><ul><li>1973å¹´ç”±Dennis Ritchieå‘æ˜ï¼Œç”¨äºé‡å†™UNIXç³»ç»Ÿ</li><li>æˆä¸ºUNIXç³»ç»Ÿçš„â€è‡ªç„¶â€è¯­è¨€</li><li>1988å¹´IEEEæ¨å‡ºPOSIXæ ‡å‡†ï¼Œç»Ÿä¸€äº†Cè¯­è¨€å¤´æ–‡ä»¶</li></ul></li><li><p><strong>Cè¯­è¨€ä¼˜åŠ¿</strong></p><ul><li>é«˜æ•ˆæ€§ï¼šç›´æ¥æ“ä½œç¡¬ä»¶</li><li>å¯ç§»æ¤æ€§ï¼šPOSIXæ ‡å‡†ç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§</li><li>å¹¿æ³›åº”ç”¨ï¼šç³»ç»Ÿç¼–ç¨‹ã€åµŒå…¥å¼å¼€å‘é¦–é€‰è¯­è¨€</li></ul></li></ol><h2 id="äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ"><a href="#äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ" class="headerlink" title="äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ"></a>äºŒã€Cç¨‹åºå®ä¾‹åˆ†æ</h2><h3 id="1-åŸºæœ¬ç»“æ„"><a href="#1-åŸºæœ¬ç»“æ„" class="headerlink" title="1. åŸºæœ¬ç»“æ„"></a>1. åŸºæœ¬ç»“æ„</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* æ³¨é‡Šï¼šä¼ ç»Ÿç¬¬ä¸€ä¸ªCç¨‹åº */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span>  <span class="hljs-comment">// é¢„ç¼–è¯‘æŒ‡ä»¤ï¼šåŒ…å«æ ‡å‡†I/Oå¤´æ–‡ä»¶</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span> &#123;  <span class="hljs-comment">// ä¸»å‡½æ•°ï¼Œç¨‹åºå…¥å£</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Hello World!\n&quot;</span>);      <span class="hljs-comment">// è¾“å‡ºè¯­å¥</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;                      <span class="hljs-comment">// è¿”å›å€¼(0è¡¨ç¤ºæˆåŠŸ)</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-å…³é”®è¯­æ³•è§£æ"><a href="#2-å…³é”®è¯­æ³•è§£æ" class="headerlink" title="2. å…³é”®è¯­æ³•è§£æ"></a>2. å…³é”®è¯­æ³•è§£æ</h3><ol><li><p><strong>æ³¨é‡Š</strong></p><ul><li><code>/* ... */</code>ï¼šå¤šè¡Œæ³¨é‡Š</li><li><code>//</code>ï¼šå•è¡Œæ³¨é‡Š(C99æ ‡å‡†)</li></ul></li><li><p><strong>é¢„ç¼–è¯‘æŒ‡ä»¤</strong></p><ul><li><code>#include &lt;å¤´æ–‡ä»¶&gt;</code>ï¼šä»ç³»ç»Ÿè·¯å¾„(&#x2F;usr&#x2F;include)åŠ è½½</li><li><code>#include &quot;å¤´æ–‡ä»¶&quot;</code>ï¼šä»å½“å‰ç›®å½•åŠ è½½</li></ul></li><li><p><strong>ä¸»å‡½æ•°</strong></p><ul><li>å¿…é¡»çš„å…¥å£å‡½æ•°</li><li>å‚æ•°ï¼š<ul><li><code>argc</code>ï¼šå‚æ•°ä¸ªæ•°</li><li><code>argv[]</code>ï¼šå‚æ•°æ•°ç»„(argv[0]ä¸ºç¨‹åºå)</li></ul></li><li>è¿”å›å€¼ï¼š<ul><li>0è¡¨ç¤ºæˆåŠŸ</li><li>é0è¡¨ç¤ºé”™è¯¯(ä¾¿äºShellè„šæœ¬åˆ¤æ–­)</li></ul></li></ul></li></ol><h2 id="ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹"><a href="#ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹" class="headerlink" title="ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹"></a>ä¸‰ã€Cç¼–è¯‘è¿‡ç¨‹</h2><h3 id="1-å››ä¸ªé˜¶æ®µ"><a href="#1-å››ä¸ªé˜¶æ®µ" class="headerlink" title="1. å››ä¸ªé˜¶æ®µ"></a>1. å››ä¸ªé˜¶æ®µ</h3><ol><li><p><strong>é¢„å¤„ç†</strong></p><ul><li>å¤„ç†<code>#include</code>ã€<code>#define</code>ç­‰æŒ‡ä»¤</li><li>ç”Ÿæˆ<code>.i</code>æ–‡ä»¶</li></ul></li><li><p><strong>ç¼–è¯‘</strong></p><ul><li>è¯æ³•&#x2F;è¯­æ³•åˆ†æ</li><li>ç”Ÿæˆæ±‡ç¼–ä»£ç (.sæ–‡ä»¶)</li></ul></li><li><p><strong>æ±‡ç¼–</strong></p><ul><li>å°†æ±‡ç¼–ä»£ç è½¬ä¸ºæœºå™¨ç </li><li>ç”Ÿæˆç›®æ ‡æ–‡ä»¶(.o)</li></ul></li><li><p><strong>é“¾æ¥</strong></p><ul><li>åˆå¹¶å¤šä¸ªç›®æ ‡æ–‡ä»¶</li><li>ç”Ÿæˆå¯æ‰§è¡Œç¨‹åº</li></ul></li></ol><h3 id="2-å¸¸ç”¨GCCå‘½ä»¤"><a href="#2-å¸¸ç”¨GCCå‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨GCCå‘½ä»¤"></a>2. å¸¸ç”¨GCCå‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>gcc hello.c</code></td><td>ç”Ÿæˆa.out</td></tr><tr><td><code>gcc -o hello hello.c</code></td><td>æŒ‡å®šè¾“å‡ºæ–‡ä»¶å</td></tr><tr><td><code>gcc -c file.c</code></td><td>ä»…ç¼–è¯‘ç”Ÿæˆ.oæ–‡ä»¶</td></tr><tr><td><code>gcc -g program.c</code></td><td>åŠ å…¥è°ƒè¯•ä¿¡æ¯</td></tr></tbody></table><h2 id="å››ã€è°ƒè¯•å·¥å…·GDB"><a href="#å››ã€è°ƒè¯•å·¥å…·GDB" class="headerlink" title="å››ã€è°ƒè¯•å·¥å…·GDB"></a>å››ã€è°ƒè¯•å·¥å…·GDB</h2><h3 id="1-æ ¸å¿ƒåŠŸèƒ½"><a href="#1-æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="1. æ ¸å¿ƒåŠŸèƒ½"></a>1. æ ¸å¿ƒåŠŸèƒ½</h3><ul><li>è®¾ç½®æ–­ç‚¹</li><li>å•æ­¥æ‰§è¡Œ</li><li>æŸ¥çœ‹å˜é‡å€¼</li><li>ä¿®æ”¹ç¨‹åºçŠ¶æ€</li></ul><h3 id="2-å¸¸ç”¨å‘½ä»¤"><a href="#2-å¸¸ç”¨å‘½ä»¤" class="headerlink" title="2. å¸¸ç”¨å‘½ä»¤"></a>2. å¸¸ç”¨å‘½ä»¤</h3><table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>gdb ./a.out</code></td><td>å¯åŠ¨è°ƒè¯•</td></tr><tr><td><code>break main</code></td><td>åœ¨mainå‡½æ•°è®¾æ–­ç‚¹</td></tr><tr><td><code>run</code></td><td>è¿è¡Œç¨‹åº</td></tr><tr><td><code>print x</code></td><td>æŸ¥çœ‹å˜é‡xçš„å€¼</td></tr><tr><td><code>next</code></td><td>å•æ­¥æ‰§è¡Œ(ä¸è¿›å…¥å‡½æ•°)</td></tr><tr><td><code>quit</code></td><td>é€€å‡ºGDB</td></tr></tbody></table><h2 id="äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make"><a href="#äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make" class="headerlink" title="äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make"></a>äº”ã€å·¥ç¨‹ç®¡ç†å·¥å…·Make</h2><h3 id="1-Makefileè§„åˆ™"><a href="#1-Makefileè§„åˆ™" class="headerlink" title="1. Makefileè§„åˆ™"></a>1. Makefileè§„åˆ™</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">ç›®æ ‡æ–‡ä»¶: ä¾èµ–æ–‡ä»¶1 ä¾èµ–æ–‡ä»¶2 ...</span><br>    &lt;tab&gt;å‘½ä»¤1<br>    &lt;tab&gt;å‘½ä»¤2<br></code></pre></td></tr></table></figure><h3 id="2-ç¤ºä¾‹"><a href="#2-ç¤ºä¾‹" class="headerlink" title="2. ç¤ºä¾‹"></a>2. ç¤ºä¾‹</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs makefile"><span class="hljs-section">app: main.o utils.o</span><br>    gcc -o app main.o utils.o<br><br><span class="hljs-section">main.o: main.c</span><br>    gcc -c main.c<br><br><span class="hljs-section">utils.o: utils.c</span><br>    gcc -c utils.c<br><br><span class="hljs-section">clean:</span><br>    rm -f *.o app<br><span class="hljs-meta"><span class="hljs-keyword">.PHONY</span>: clean</span><br></code></pre></td></tr></table></figure><h3 id="3-é‡è¦æ¦‚å¿µ"><a href="#3-é‡è¦æ¦‚å¿µ" class="headerlink" title="3. é‡è¦æ¦‚å¿µ"></a>3. é‡è¦æ¦‚å¿µ</h3><ol><li><p><strong>å˜é‡</strong></p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs makefile">OBJS = main.o utils.o<br><span class="hljs-section">app: <span class="hljs-variable">$(OBJS)</span></span><br>    gcc -o app <span class="hljs-variable">$(OBJS)</span><br></code></pre></td></tr></table></figure></li><li><p><strong>éšå«è§„åˆ™</strong></p><ul><li>è‡ªåŠ¨æ¨å¯¼ä¾èµ–å…³ç³»</li><li>å¦‚<code>.o</code>æ–‡ä»¶è‡ªåŠ¨ä»<code>.c</code>æ–‡ä»¶ç”Ÿæˆ</li></ul></li><li><p><strong>ä¼ªç›®æ ‡</strong></p><ul><li>ç”¨äºéç¼–è¯‘ä»»åŠ¡(å¦‚clean)</li><li>éœ€ç”¨<code>.PHONY</code>å£°æ˜</li></ul></li></ol><h2 id="å…­ã€æ ‡å‡†Cå‡½æ•°"><a href="#å…­ã€æ ‡å‡†Cå‡½æ•°" class="headerlink" title="å…­ã€æ ‡å‡†Cå‡½æ•°"></a>å…­ã€æ ‡å‡†Cå‡½æ•°</h2><h3 id="1-ç³»ç»Ÿè°ƒç”¨-vs-åº“å‡½æ•°"><a href="#1-ç³»ç»Ÿè°ƒç”¨-vs-åº“å‡½æ•°" class="headerlink" title="1. ç³»ç»Ÿè°ƒç”¨ vs åº“å‡½æ•°"></a>1. ç³»ç»Ÿè°ƒç”¨ vs åº“å‡½æ•°</h3><table><thead><tr><th>ç‰¹æ€§</th><th>ç³»ç»Ÿè°ƒç”¨</th><th>åº“å‡½æ•°</th></tr></thead><tbody><tr><td>æä¾›è€…</td><td>æ“ä½œç³»ç»Ÿå†…æ ¸</td><td>ç¼–ç¨‹è¯­è¨€</td></tr><tr><td>åŠŸèƒ½</td><td>åŸºç¡€æ¥å£</td><td>é«˜çº§å°è£…</td></tr><tr><td>ç¤ºä¾‹</td><td>write()</td><td>printf()</td></tr><tr><td>å¯æ›¿æ¢æ€§</td><td>ä¸å¯æ›¿æ¢</td><td>å¯æ›¿æ¢</td></tr></tbody></table><h3 id="2-UNIXä½“ç³»ç»“æ„"><a href="#2-UNIXä½“ç³»ç»“æ„" class="headerlink" title="2. UNIXä½“ç³»ç»“æ„"></a>2. UNIXä½“ç³»ç»“æ„</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs">åº”ç”¨ç¨‹åº â†’ åº“å‡½æ•° â†’ ç³»ç»Ÿè°ƒç”¨ â†’ å†…æ ¸<br></code></pre></td></tr></table></figure><h3 id="3-æ ‡å‡†åŒ–"><a href="#3-æ ‡å‡†åŒ–" class="headerlink" title="3. æ ‡å‡†åŒ–"></a>3. æ ‡å‡†åŒ–</h3><ol><li><p><strong>ISO C</strong></p><ul><li>C90(1989)ã€C99(1999)</li><li>å®šä¹‰24ä¸ªæ ‡å‡†å¤´æ–‡ä»¶</li></ul></li><li><p><strong>POSIX</strong></p><ul><li>å¢å¼ºUNIXç³»ç»Ÿå¯ç§»æ¤æ€§</li><li>å®šä¹‰26ä¸ªå¿…éœ€å¤´æ–‡ä»¶</li></ul></li><li><p><strong>SUS</strong></p><ul><li>å•ä¸€UNIXè§„èŒƒ</li><li>æ‰©å±•POSIXåŠŸèƒ½</li></ul></li></ol><h1 id="ç³»ç»Ÿè°ƒç”¨"><a href="#ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨"></a>ç³»ç»Ÿè°ƒç”¨</h1><h2 id="ä¸€ã€æ–‡ä»¶I-Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰"><a href="#ä¸€ã€æ–‡ä»¶I-Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰" class="headerlink" title="ä¸€ã€æ–‡ä»¶I&#x2F;Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰"></a><strong>ä¸€ã€æ–‡ä»¶I&#x2F;Oï¼ˆæ–‡ä»¶æ“ä½œï¼‰</strong></h2><h3 id="1-æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile-Descriptor-fdï¼‰"><a href="#1-æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile-Descriptor-fdï¼‰" class="headerlink" title="1. æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptor, fdï¼‰"></a><strong>1. æ–‡ä»¶æè¿°ç¬¦ï¼ˆFile Descriptor, fdï¼‰</strong></h3><ul><li><strong>å®šä¹‰</strong>ï¼šéè´Ÿæ•´æ•°ï¼Œç”¨äºæ ‡è¯†è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶ã€‚</li><li><strong>é»˜è®¤æ–‡ä»¶æè¿°ç¬¦</strong>ï¼š<ul><li><code>0</code>ï¼šæ ‡å‡†è¾“å…¥ï¼ˆ<code>STdin_FILENO</code>ï¼Œé”®ç›˜è¾“å…¥ï¼‰ã€‚</li><li><code>1</code>ï¼šæ ‡å‡†è¾“å‡ºï¼ˆ<code>STDOUT_FILENO</code>ï¼Œå±å¹•è¾“å‡ºï¼‰ã€‚</li><li><code>2</code>ï¼šæ ‡å‡†é”™è¯¯ï¼ˆ<code>STDERR_FILENO</code>ï¼Œå±å¹•é”™è¯¯è¾“å‡ºï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º"><a href="#ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º" class="headerlink" title="ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º"></a><strong>ç¤ºä¾‹ï¼šè¯»å–æ ‡å‡†è¾“å…¥å¹¶å†™å…¥æ ‡å‡†è¾“å‡º</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];<br>    <span class="hljs-type">ssize_t</span> n = read(STDIN_FILENO, buf, <span class="hljs-keyword">sizeof</span>(buf));  <span class="hljs-comment">// ä»é”®ç›˜è¯»å–</span><br>    write(STDOUT_FILENO, buf, n);                      <span class="hljs-comment">// è¾“å‡ºåˆ°å±å¹•</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>read(fd, buf, size)</code>ï¼šä» <code>fd</code> è¯»å–æœ€å¤š <code>size</code> å­—èŠ‚åˆ° <code>buf</code>ï¼Œè¿”å›å®é™…è¯»å–å­—èŠ‚æ•°ã€‚</li><li><code>write(fd, buf, size)</code>ï¼šå°† <code>buf</code> çš„ <code>size</code> å­—èŠ‚å†™å…¥ <code>fd</code>ã€‚</li></ul><hr><h3 id="2-open-å’Œ-creat"><a href="#2-open-å’Œ-creat" class="headerlink" title="2. open() å’Œ creat()"></a><strong>2. <code>open()</code> å’Œ <code>creat()</code></strong></h3><h4 id="open-å‡½æ•°"><a href="#open-å‡½æ•°" class="headerlink" title="open() å‡½æ•°"></a><strong><code>open()</code> å‡½æ•°</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">open</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-type">int</span> flags, <span class="hljs-type">mode_t</span> mode)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>flags</code>**ï¼š<ul><li><code>O_RDONLY</code>ï¼šåªè¯»ã€‚</li><li><code>O_WRONLY</code>ï¼šåªå†™ã€‚</li><li><code>O_RDWR</code>ï¼šè¯»å†™ã€‚</li><li><code>O_CREAT</code>ï¼šæ–‡ä»¶ä¸å­˜åœ¨æ—¶åˆ›å»ºã€‚</li><li><code>O_TRUNC</code>ï¼šè‹¥æ–‡ä»¶å­˜åœ¨ï¼Œæ¸…ç©ºå†…å®¹ã€‚</li><li><code>O_APPEND</code>ï¼šè¿½åŠ å†™å…¥ï¼ˆé¿å…å¹¶å‘é—®é¢˜ï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šæ‰“å¼€-åˆ›å»ºæ–‡ä»¶"><a href="#ç¤ºä¾‹ï¼šæ‰“å¼€-åˆ›å»ºæ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹ï¼šæ‰“å¼€&#x2F;åˆ›å»ºæ–‡ä»¶"></a><strong>ç¤ºä¾‹ï¼šæ‰“å¼€&#x2F;åˆ›å»ºæ–‡ä»¶</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    write(fd, <span class="hljs-string">&quot;Hello, World!\n&quot;</span>, <span class="hljs-number">14</span>);<br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>O_CREAT | O_TRUNC</code>ï¼šè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»ºï¼Œè‹¥å­˜åœ¨åˆ™æ¸…ç©ºã€‚</li><li><code>0644</code>ï¼šæ–‡ä»¶æƒé™ï¼ˆ<code>rw-r--r--</code>ï¼‰ã€‚</li></ul><hr><h3 id="3-lseek-ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ"><a href="#3-lseek-ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ" class="headerlink" title="3. lseek()ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ"></a><strong>3. <code>lseek()</code>ï¼šç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">off_t</span> <span class="hljs-title function_">lseek</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-type">off_t</span> offset, <span class="hljs-type">int</span> whence)</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>whence</code>**ï¼š<ul><li><code>SEEK_SET</code>ï¼šä»æ–‡ä»¶å¼€å¤´è®¡ç®—åç§»ã€‚</li><li><code>SEEK_CUR</code>ï¼šä»å½“å‰ä½ç½®è®¡ç®—åç§»ã€‚</li><li><code>SEEK_END</code>ï¼šä»æ–‡ä»¶æœ«å°¾è®¡ç®—åç§»ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬-10-å­—èŠ‚"><a href="#ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬-10-å­—èŠ‚" class="headerlink" title="ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬ 10 å­—èŠ‚"></a><strong>ç¤ºä¾‹ï¼šè¯»å–æ–‡ä»¶ç¬¬ 10 å­—èŠ‚</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;test.txt&quot;</span>, O_RDONLY);<br>    lseek(fd, <span class="hljs-number">10</span>, SEEK_SET);  <span class="hljs-comment">// ç§»åŠ¨åˆ°ç¬¬ 10 å­—èŠ‚</span><br>    <span class="hljs-type">char</span> buf[<span class="hljs-number">1</span>];<br>    read(fd, buf, <span class="hljs-number">1</span>);         <span class="hljs-comment">// è¯»å– 1 å­—èŠ‚</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="4-dup2-ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘"><a href="#4-dup2-ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘" class="headerlink" title="4. dup2()ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘"></a><strong>4. <code>dup2()</code>ï¼šæ–‡ä»¶æè¿°ç¬¦é‡å®šå‘</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">dup2</span><span class="hljs-params">(<span class="hljs-type">int</span> oldfd, <span class="hljs-type">int</span> newfd)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šè®© <code>newfd</code> æŒ‡å‘ <code>oldfd</code> çš„æ–‡ä»¶ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶"><a href="#ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶"></a><strong>ç¤ºä¾‹ï¼šå°†æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;output.txt&quot;</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0644</span>);<br>    dup2(fd, STDOUT_FILENO);  <span class="hljs-comment">// æ ‡å‡†è¾“å‡ºæŒ‡å‘æ–‡ä»¶</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This goes to output.txt!\n&quot;</span>);  <span class="hljs-comment">// å†™å…¥æ–‡ä»¶è€Œéå±å¹•</span><br>    close(fd);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="æ–‡ä»¶å±æ€§åŠç›®å½•"><a href="#æ–‡ä»¶å±æ€§åŠç›®å½•" class="headerlink" title="æ–‡ä»¶å±æ€§åŠç›®å½•"></a>æ–‡ä»¶å±æ€§åŠç›®å½•</h2><h3 id="ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct-statï¼‰"><a href="#ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct-statï¼‰" class="headerlink" title="ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆstruct statï¼‰"></a><strong>ä¸€ã€æ–‡ä»¶å±æ€§ï¼ˆ<code>struct stat</code>ï¼‰</strong></h3><h3 id="1-å±æ€§ç»“æ„ä½“"><a href="#1-å±æ€§ç»“æ„ä½“" class="headerlink" title="1. å±æ€§ç»“æ„ä½“"></a><strong>1. å±æ€§ç»“æ„ä½“</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> &#123;</span><br>    <span class="hljs-type">mode_t</span>  st_mode;   <span class="hljs-comment">// æ–‡ä»¶ç±»å‹å’Œæƒé™ï¼ˆæ ¸å¿ƒå­—æ®µï¼‰</span><br>    <span class="hljs-type">ino_t</span>   st_ino;    <span class="hljs-comment">// inode å·ï¼ˆå”¯ä¸€æ ‡è¯†æ–‡ä»¶ï¼‰</span><br>    <span class="hljs-type">dev_t</span>   st_dev;    <span class="hljs-comment">// æ–‡ä»¶æ‰€åœ¨è®¾å¤‡çš„ ID</span><br>    <span class="hljs-type">dev_t</span>   st_rdev;   <span class="hljs-comment">// è®¾å¤‡æ–‡ä»¶çš„è®¾å¤‡å·ï¼ˆä»…ç‰¹æ®Šæ–‡ä»¶æœ‰æ•ˆï¼‰</span><br>    <span class="hljs-type">nlink_t</span> st_nlink;  <span class="hljs-comment">// ç¡¬é“¾æ¥è®¡æ•°</span><br>    <span class="hljs-type">uid_t</span>   st_uid;    <span class="hljs-comment">// æ‰€æœ‰è€…ç”¨æˆ· ID</span><br>    <span class="hljs-type">gid_t</span>   st_gid;    <span class="hljs-comment">// æ‰€æœ‰è€…ç»„ ID</span><br>    <span class="hljs-type">off_t</span>   st_size;   <span class="hljs-comment">// æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</span><br>    <span class="hljs-type">time_t</span>  st_atime;  <span class="hljs-comment">// æœ€åè®¿é—®æ—¶é—´</span><br>    <span class="hljs-type">time_t</span>  st_mtime;  <span class="hljs-comment">// æœ€åä¿®æ”¹å†…å®¹æ—¶é—´</span><br>    <span class="hljs-type">time_t</span>  st_ctime;  <span class="hljs-comment">// æœ€åä¿®æ”¹å±æ€§æ—¶é—´ï¼ˆå¦‚æƒé™ï¼‰</span><br>&#125;;<br></code></pre></td></tr></table></figure><h3 id="2-è·å–æ–‡ä»¶å±æ€§"><a href="#2-è·å–æ–‡ä»¶å±æ€§" class="headerlink" title="2. è·å–æ–‡ä»¶å±æ€§"></a><strong>2. è·å–æ–‡ä»¶å±æ€§</strong></h3><ul><li>**<code>stat()</code>**ï¼šé€šè¿‡è·¯å¾„è·å–å±æ€§ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">stat</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li><li>**<code>fstat()</code>**ï¼šé€šè¿‡æ–‡ä»¶æè¿°ç¬¦è·å–å±æ€§ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">fstat</span><span class="hljs-params">(<span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> stat *buf)</span>;<br></code></pre></td></tr></table></figure></li></ul><h4 id="ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°"><a href="#ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°" class="headerlink" title="ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°"></a><strong>ç¤ºä¾‹ï¼šæ‰“å°æ–‡ä»¶å¤§å°</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> <span class="hljs-title">buf</span>;</span><br>    stat(<span class="hljs-string">&quot;test.txt&quot;</span>, &amp;buf);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File size: %ld bytes\n&quot;</span>, buf.st_size);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h3 id="äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™"><a href="#äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™" class="headerlink" title="äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™"></a><strong>äºŒã€æ–‡ä»¶ç±»å‹ä¸æƒé™</strong></h3><h3 id="1-æ–‡ä»¶ç±»å‹åˆ¤æ–­å®"><a href="#1-æ–‡ä»¶ç±»å‹åˆ¤æ–­å®" class="headerlink" title="1. æ–‡ä»¶ç±»å‹åˆ¤æ–­å®"></a><strong>1. æ–‡ä»¶ç±»å‹åˆ¤æ–­å®</strong></h3><table><thead><tr><th><strong>å®</strong></th><th><strong>æ–‡ä»¶ç±»å‹</strong></th></tr></thead><tbody><tr><td><code>S_ISREG(mode)</code></td><td>æ™®é€šæ–‡ä»¶ï¼ˆå¦‚ <code>.txt</code>ï¼‰</td></tr><tr><td><code>S_ISDIR(mode)</code></td><td>ç›®å½•</td></tr><tr><td><code>S_ISCHR(mode)</code></td><td>å­—ç¬¦è®¾å¤‡ï¼ˆå¦‚ <code>/dev/tty</code>ï¼‰</td></tr><tr><td><code>S_ISBLK(mode)</code></td><td>å—è®¾å¤‡ï¼ˆå¦‚ <code>/dev/sda</code>ï¼‰</td></tr><tr><td><code>S_ISFIFO(mode)</code></td><td>ç®¡é“ï¼ˆFIFOï¼‰</td></tr><tr><td><code>S_ISLNK(mode)</code></td><td>ç¬¦å·é“¾æ¥</td></tr><tr><td><code>S_ISSOCK(mode)</code></td><td>å¥—æ¥å­—</td></tr></tbody></table><h4 id="ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹"><a href="#ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹" class="headerlink" title="ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹"></a><strong>ç¤ºä¾‹ï¼šåˆ¤æ–­æ–‡ä»¶ç±»å‹</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (S_ISREG(buf.st_mode)) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;This is a regular file.\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="2-æ–‡ä»¶æƒé™"><a href="#2-æ–‡ä»¶æƒé™" class="headerlink" title="2. æ–‡ä»¶æƒé™"></a><strong>2. æ–‡ä»¶æƒé™</strong></h3><ul><li><strong>9 ä¸ªæƒé™ä½</strong>ï¼š<ul><li><strong>ç”¨æˆ·</strong>ï¼š<code>S_IRUSR</code>ï¼ˆè¯»ï¼‰ã€<code>S_IWUSR</code>ï¼ˆå†™ï¼‰ã€<code>S_IXUSR</code>ï¼ˆæ‰§è¡Œï¼‰ã€‚</li><li><strong>ç»„</strong>ï¼š<code>S_IRGRP</code>ã€<code>S_IWGRP</code>ã€<code>S_IXGRP</code>ã€‚</li><li><strong>å…¶ä»–</strong>ï¼š<code>S_IROTH</code>ã€<code>S_IWOTH</code>ã€<code>S_IXOTH</code>ã€‚</li></ul></li><li><strong>ç‰¹æ®Šæƒé™ä½</strong>ï¼š<ul><li><code>S_ISUID</code>ï¼šæ‰§è¡Œæ—¶è®¾ç½®æœ‰æ•ˆç”¨æˆ· IDï¼ˆå¦‚ <code>passwd</code>ï¼‰ã€‚</li><li><code>S_ISGID</code>ï¼šæ‰§è¡Œæ—¶è®¾ç½®æœ‰æ•ˆç»„ IDã€‚</li><li><code>S_ISVTX</code>ï¼šç²˜æ»ä½ï¼ˆç›®å½•ä¸‹æ–‡ä»¶ä»…æ‰€æœ‰è€…å¯åˆ ï¼‰ã€‚</li></ul></li></ul><h4 id="ä¿®æ”¹æƒé™"><a href="#ä¿®æ”¹æƒé™" class="headerlink" title="ä¿®æ”¹æƒé™"></a><strong>ä¿®æ”¹æƒé™</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chmod(<span class="hljs-string">&quot;file.txt&quot;</span>, <span class="hljs-number">0644</span>);  <span class="hljs-comment">// rw-r--r--</span><br>fchmod(fd, <span class="hljs-number">0755</span>);         <span class="hljs-comment">// rwxr-xr-x</span><br></code></pre></td></tr></table></figure><hr><h3 id="ä¸‰ã€æ–‡ä»¶æ“ä½œ"><a href="#ä¸‰ã€æ–‡ä»¶æ“ä½œ" class="headerlink" title="ä¸‰ã€æ–‡ä»¶æ“ä½œ"></a><strong>ä¸‰ã€æ–‡ä»¶æ“ä½œ</strong></h3><h3 id="1-åˆ›å»ºæ–°æ–‡ä»¶"><a href="#1-åˆ›å»ºæ–°æ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºæ–°æ–‡ä»¶"></a><strong>1. åˆ›å»ºæ–°æ–‡ä»¶</strong></h3><ul><li><strong>æƒé™è®¡ç®—</strong>ï¼š<code>å®é™…æƒé™ = mode &amp; ~umask</code><br>ï¼ˆ<code>umask</code> é»˜è®¤ä¸º <code>022</code>ï¼Œå±è”½ç»„å’Œå…¶ä»–çš„å†™æƒé™ï¼‰</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">umask(<span class="hljs-number">002</span>);                    <span class="hljs-comment">// è®¾ç½® umask</span><br><span class="hljs-type">int</span> fd = open(<span class="hljs-string">&quot;new.txt&quot;</span>, O_CREAT | O_WRONLY, <span class="hljs-number">0666</span>); <span class="hljs-comment">// å®é™…æƒé™ï¼š664</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-ç¡¬é“¾æ¥ä¸åˆ é™¤"><a href="#2-ç¡¬é“¾æ¥ä¸åˆ é™¤" class="headerlink" title="2. ç¡¬é“¾æ¥ä¸åˆ é™¤"></a><strong>2. ç¡¬é“¾æ¥ä¸åˆ é™¤</strong></h3><ul><li>**<code>link()</code>**ï¼šåˆ›å»ºç¡¬é“¾æ¥ï¼ˆå¢åŠ  <code>st_nlink</code>ï¼‰ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">link(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// new.txt æŒ‡å‘ old.txt</span><br></code></pre></td></tr></table></figure></li><li>**<code>unlink()</code>**ï¼šåˆ é™¤é“¾æ¥ï¼ˆ<code>st_nlink--</code>ï¼Œè‹¥ä¸º 0 åˆ™åˆ é™¤æ–‡ä»¶ï¼‰ã€‚<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">unlink(<span class="hljs-string">&quot;file.txt&quot;</span>);  <span class="hljs-comment">// åˆ é™¤æ–‡ä»¶ï¼ˆéœ€æ— è¿›ç¨‹æ‰“å¼€ï¼‰</span><br></code></pre></td></tr></table></figure></li><li>**<code>remove()</code>**ï¼šç­‰ä»·äº <code>unlink()</code>ï¼ˆæ–‡ä»¶ï¼‰æˆ– <code>rmdir()</code>ï¼ˆç›®å½•ï¼‰ã€‚</li></ul><h3 id="3-é‡å‘½å"><a href="#3-é‡å‘½å" class="headerlink" title="3. é‡å‘½å"></a><strong>3. é‡å‘½å</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">rename(<span class="hljs-string">&quot;old.txt&quot;</span>, <span class="hljs-string">&quot;new.txt&quot;</span>);  <span class="hljs-comment">// åŸå­æ“ä½œ</span><br></code></pre></td></tr></table></figure><hr><h3 id="å››ã€ç›®å½•æ“ä½œ"><a href="#å››ã€ç›®å½•æ“ä½œ" class="headerlink" title="å››ã€ç›®å½•æ“ä½œ"></a><strong>å››ã€ç›®å½•æ“ä½œ</strong></h3><h3 id="1-åˆ›å»ºä¸åˆ é™¤ç›®å½•"><a href="#1-åˆ›å»ºä¸åˆ é™¤ç›®å½•" class="headerlink" title="1. åˆ›å»ºä¸åˆ é™¤ç›®å½•"></a><strong>1. åˆ›å»ºä¸åˆ é™¤ç›®å½•</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">mkdir(<span class="hljs-string">&quot;mydir&quot;</span>, <span class="hljs-number">0755</span>);  <span class="hljs-comment">// åˆ›å»ºç›®å½•</span><br>rmdir(<span class="hljs-string">&quot;mydir&quot;</span>);        <span class="hljs-comment">// åˆ é™¤ç©ºç›®å½•</span><br></code></pre></td></tr></table></figure><h3 id="2-è¯»å–ç›®å½•å†…å®¹"><a href="#2-è¯»å–ç›®å½•å†…å®¹" class="headerlink" title="2. è¯»å–ç›®å½•å†…å®¹"></a><strong>2. è¯»å–ç›®å½•å†…å®¹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dirent.h&gt;</span></span><br>DIR *dp = opendir(<span class="hljs-string">&quot;.&quot;</span>);                <span class="hljs-comment">// æ‰“å¼€ç›®å½•</span><br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dirent</span> *<span class="hljs-title">dir</span> =</span> readdir(dp);      <span class="hljs-comment">// è¯»å–æ¡ç›®</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;File: %s\n&quot;</span>, dir-&gt;d_name);     <span class="hljs-comment">// æ‰“å°æ–‡ä»¶å</span><br>closedir(dp);                          <span class="hljs-comment">// å…³é—­ç›®å½•</span><br></code></pre></td></tr></table></figure><h4 id="struct-dirent-å…³é”®å­—æ®µ"><a href="#struct-dirent-å…³é”®å­—æ®µ" class="headerlink" title="struct dirent å…³é”®å­—æ®µ"></a><strong><code>struct dirent</code> å…³é”®å­—æ®µ</strong></h4><ul><li><code>d_name</code>ï¼šæ–‡ä»¶åã€‚</li><li><code>d_type</code>ï¼šæ–‡ä»¶ç±»å‹ï¼ˆå¦‚ <code>DT_REG</code> æ™®é€šæ–‡ä»¶ï¼‰ã€‚</li></ul><hr><h3 id="äº”ã€å·¥ä½œç›®å½•ç®¡ç†"><a href="#äº”ã€å·¥ä½œç›®å½•ç®¡ç†" class="headerlink" title="äº”ã€å·¥ä½œç›®å½•ç®¡ç†"></a><strong>äº”ã€å·¥ä½œç›®å½•ç®¡ç†</strong></h3><h4 id="1-æ”¹å˜å·¥ä½œç›®å½•"><a href="#1-æ”¹å˜å·¥ä½œç›®å½•" class="headerlink" title="1. æ”¹å˜å·¥ä½œç›®å½•"></a><strong>1. æ”¹å˜å·¥ä½œç›®å½•</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c">chdir(<span class="hljs-string">&quot;/tmp&quot;</span>);       <span class="hljs-comment">// åˆ‡æ¢åˆ° /tmp</span><br>fchdir(dir_fd);      <span class="hljs-comment">// é€šè¿‡æ–‡ä»¶æè¿°ç¬¦åˆ‡æ¢</span><br></code></pre></td></tr></table></figure><h4 id="2-è·å–å½“å‰ç›®å½•"><a href="#2-è·å–å½“å‰ç›®å½•" class="headerlink" title="2. è·å–å½“å‰ç›®å½•"></a><strong>2. è·å–å½“å‰ç›®å½•</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> cwd[<span class="hljs-number">1024</span>];<br>getcwd(cwd, <span class="hljs-keyword">sizeof</span>(cwd));  <span class="hljs-comment">// ç±»ä¼¼ pwd å‘½ä»¤</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;CWD: %s\n&quot;</span>, cwd);<br></code></pre></td></tr></table></figure><hr><h3 id="å…­ã€æ€»ç»“è¡¨"><a href="#å…­ã€æ€»ç»“è¡¨" class="headerlink" title="å…­ã€æ€»ç»“è¡¨"></a><strong>å…­ã€æ€»ç»“è¡¨</strong></h3><table><thead><tr><th><strong>åŠŸèƒ½</strong></th><th><strong>å‡½æ•°&#x2F;å®</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>è·å–å±æ€§</strong></td><td><code>stat()</code>, <code>fstat()</code></td><td>å¡«å…… <code>struct stat</code></td></tr><tr><td><strong>æ–‡ä»¶ç±»å‹åˆ¤æ–­</strong></td><td><code>S_ISREG()</code>, <code>S_ISDIR()</code></td><td>æ£€æŸ¥ <code>st_mode</code></td></tr><tr><td><strong>ä¿®æ”¹æƒé™</strong></td><td><code>chmod()</code>, <code>fchmod()</code></td><td>è®¾ç½® <code>rwx</code> æƒé™</td></tr><tr><td><strong>åˆ›å»ºæ–‡ä»¶</strong></td><td><code>open()</code> with <code>O_CREAT</code></td><td>å— <code>umask</code> å½±å“</td></tr><tr><td><strong>ç¡¬é“¾æ¥æ“ä½œ</strong></td><td><code>link()</code>, <code>unlink()</code></td><td>ä¿®æ”¹ <code>st_nlink</code></td></tr><tr><td><strong>ç›®å½•æ“ä½œ</strong></td><td><code>mkdir()</code>, <code>opendir()</code></td><td>åˆ›å»º&#x2F;éå†ç›®å½•</td></tr><tr><td><strong>å·¥ä½œç›®å½•</strong></td><td><code>chdir()</code>, <code>getcwd()</code></td><td>ç±»ä¼¼ <code>cd</code> å’Œ <code>pwd</code></td></tr></tbody></table><hr><h3 id="å…³é”®ç‚¹"><a href="#å…³é”®ç‚¹" class="headerlink" title="å…³é”®ç‚¹"></a><strong>å…³é”®ç‚¹</strong></h3><ol><li><strong><code>st_mode</code> æ˜¯æ ¸å¿ƒå­—æ®µ</strong>ï¼šåŒ…å«æ–‡ä»¶ç±»å‹å’Œæƒé™ã€‚</li><li><strong>æƒé™è®¡ç®—</strong>ï¼š<code>å®é™…æƒé™ = mode &amp; ~umask</code>ã€‚</li><li><strong>ç¡¬é“¾æ¥ vs ç¬¦å·é“¾æ¥</strong>ï¼š<ul><li>ç¡¬é“¾æ¥ï¼šåŒä¸€æ–‡ä»¶ï¼Œå…±äº« inodeã€‚</li><li>ç¬¦å·é“¾æ¥ï¼šç‹¬ç«‹æ–‡ä»¶ï¼Œå­˜å‚¨ç›®æ ‡è·¯å¾„ã€‚</li></ul></li><li><strong>ç›®å½•æ“ä½œ</strong>ï¼šåªæœ‰å†…æ ¸å¯å†™ç›®å½•ï¼Œç”¨æˆ·é€šè¿‡ <code>opendir/readdir</code> è¯»å–ã€‚</li></ol><p><strong>å»ºè®®</strong>ï¼šç»“åˆ <code>ls -l</code> å‘½ä»¤å’Œ <code>stat</code> å‘½ä»¤éªŒè¯æ–‡ä»¶å±æ€§ã€‚</p><h2 id="äºŒã€è¿›ç¨‹æ§åˆ¶"><a href="#äºŒã€è¿›ç¨‹æ§åˆ¶" class="headerlink" title="äºŒã€è¿›ç¨‹æ§åˆ¶"></a><strong>äºŒã€è¿›ç¨‹æ§åˆ¶</strong></h2><h3 id="1-fork-ï¼šåˆ›å»ºå­è¿›ç¨‹"><a href="#1-fork-ï¼šåˆ›å»ºå­è¿›ç¨‹" class="headerlink" title="1. fork()ï¼šåˆ›å»ºå­è¿›ç¨‹"></a><strong>1. <code>fork()</code>ï¼šåˆ›å»ºå­è¿›ç¨‹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">fork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>è¿”å›å€¼</strong>ï¼š<ul><li><code>&gt;0</code>ï¼šçˆ¶è¿›ç¨‹ï¼Œè¿”å›å­è¿›ç¨‹ PIDã€‚</li><li><code>=0</code>ï¼šå­è¿›ç¨‹ã€‚</li><li><code>-1</code>ï¼šå‡ºé”™ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡"><a href="#ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡"></a><strong>ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹æ‰§è¡Œä¸åŒä»»åŠ¡</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process (PID=%d)\n&quot;</span>, getpid());<br>    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process (PID=%d), child PID=%d\n&quot;</span>, getpid(), pid);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        perror(<span class="hljs-string">&quot;fork failed&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">Parent process (<span class="hljs-attribute">PID</span>=1234), child <span class="hljs-attribute">PID</span>=1235<br>Child process (<span class="hljs-attribute">PID</span>=1235)<br></code></pre></td></tr></table></figure><hr><h3 id="2-exec-ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ"><a href="#2-exec-ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ" class="headerlink" title="2. exec()ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ"></a><strong>2. <code>exec()</code>ï¼šæ›¿æ¢è¿›ç¨‹æ˜ åƒ</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">execl</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *path, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *arg0, ..., (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šç”¨æ–°ç¨‹åºæ›¿æ¢å½“å‰è¿›ç¨‹ï¼ˆå¦‚ <code>ls</code>ã€<code>gcc</code>ï¼‰ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ-ls-l"><a href="#ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ-ls-l" class="headerlink" title="ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ ls -l"></a><strong>ç¤ºä¾‹ï¼šå­è¿›ç¨‹æ‰§è¡Œ <code>ls -l</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ›¿æ¢ä¸º ls -l</span><br>        perror(<span class="hljs-string">&quot;exec failed&quot;</span>);  <span class="hljs-comment">// è‹¥ exec å¤±è´¥æ‰ä¼šæ‰§è¡Œ</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="exec-å‡½æ•°æ—å¯¹æ¯”è¡¨"><a href="#exec-å‡½æ•°æ—å¯¹æ¯”è¡¨" class="headerlink" title="exec å‡½æ•°æ—å¯¹æ¯”è¡¨"></a><strong><code>exec</code> å‡½æ•°æ—å¯¹æ¯”è¡¨</strong></h3><p>ä»¥ä¸‹æ˜¯ UNIX&#x2F;Linux ä¸­ <code>exec</code> ç³»åˆ—å‡½æ•°çš„è¯¦ç»†å¯¹æ¯”ï¼ŒåŒ…æ‹¬å‚æ•°ã€ä½¿ç”¨åœºæ™¯å’ŒåŒºåˆ«ï¼š</p><table><thead><tr><th><strong>å‡½æ•°</strong></th><th><strong>å‚æ•°å½¢å¼</strong></th><th><strong>ç¯å¢ƒå˜é‡</strong></th><th><strong>æŸ¥æ‰¾è·¯å¾„</strong></th><th><strong>å…¸å‹ç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong><code>execl</code></strong></td><td><code>execl(&quot;è·¯å¾„&quot;, &quot;arg0&quot;, &quot;arg1&quot;, ..., (char *)0)</code></td><td>ç»§æ‰¿å½“å‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>å·²çŸ¥å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå‚æ•°åˆ—è¡¨å›ºå®š</td></tr><tr><td><strong><code>execv</code></strong></td><td><code>execv(&quot;è·¯å¾„&quot;, char *argv[])</code> ï¼ˆ<code>argv</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>ç»§æ‰¿å½“å‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>å‚æ•°åˆ—è¡¨åŠ¨æ€ï¼ˆå¦‚æ•°ç»„ï¼‰</td></tr><tr><td><strong><code>execle</code></strong></td><td><code>execle(&quot;è·¯å¾„&quot;, &quot;arg0&quot;, ..., (char *)0, char *envp[])</code></td><td>è‡ªå®šä¹‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>éœ€æŒ‡å®šç¯å¢ƒå˜é‡</td></tr><tr><td><strong><code>execve</code></strong></td><td><code>execve(&quot;è·¯å¾„&quot;, char *argv[], char *envp[])</code> ï¼ˆ<code>argv</code> å’Œ <code>envp</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>è‡ªå®šä¹‰</td><td>éœ€å®Œæ•´è·¯å¾„</td><td>ç³»ç»Ÿè°ƒç”¨ï¼Œæœ€åº•å±‚å®ç°</td></tr><tr><td><strong><code>execlp</code></strong></td><td><code>execlp(&quot;æ–‡ä»¶å&quot;, &quot;arg0&quot;, ..., (char *)0)</code></td><td>ç»§æ‰¿å½“å‰</td><td>ä» <code>PATH</code> æŸ¥æ‰¾</td><td>ç›´æ¥ä½¿ç”¨æ–‡ä»¶åï¼ˆå¦‚ <code>ls</code>ï¼‰</td></tr><tr><td><strong><code>execvp</code></strong></td><td><code>execvp(&quot;æ–‡ä»¶å&quot;, char *argv[])</code> ï¼ˆ<code>argv</code> éœ€ä»¥ <code>NULL</code> ç»“å°¾ï¼‰</td><td>ç»§æ‰¿å½“å‰</td><td>ä» <code>PATH</code> æŸ¥æ‰¾</td><td>åŠ¨æ€å‚æ•° + <code>PATH</code> æŸ¥æ‰¾</td></tr></tbody></table><hr><h3 id="å…³é”®åŒºåˆ«"><a href="#å…³é”®åŒºåˆ«" class="headerlink" title="å…³é”®åŒºåˆ«"></a><strong>å…³é”®åŒºåˆ«</strong></h3><ol><li><p><strong>å‚æ•°ä¼ é€’æ–¹å¼</strong>ï¼š</p><ul><li><strong><code>l</code> åç¼€</strong>ï¼ˆå¦‚ <code>execl</code>ï¼‰ï¼šå‚æ•°ä»¥<strong>å¯å˜å‚æ•°åˆ—è¡¨</strong>ï¼ˆ<code>arg0, arg1, ..., NULL</code>ï¼‰ä¼ é€’ã€‚</li><li><strong><code>v</code> åç¼€</strong>ï¼ˆå¦‚ <code>execv</code>ï¼‰ï¼šå‚æ•°ä»¥<strong>æŒ‡é’ˆæ•°ç»„</strong>ï¼ˆ<code>argv[]</code>ï¼‰ä¼ é€’ï¼Œæ•°ç»„å¿…é¡»ä»¥ <code>NULL</code> ç»“å°¾ã€‚</li></ul></li><li><p><strong>ç¯å¢ƒå˜é‡</strong>ï¼š</p><ul><li><strong><code>e</code> åç¼€</strong>ï¼ˆå¦‚ <code>execle</code>ï¼‰ï¼šå¯<strong>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</strong>ï¼ˆé€šè¿‡ <code>envp[]</code> æ•°ç»„ï¼‰ã€‚</li><li>æ—  <code>e</code> åç¼€ï¼šç»§æ‰¿å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡ã€‚</li></ul></li><li><p><strong>è·¯å¾„æŸ¥æ‰¾</strong>ï¼š</p><ul><li><strong><code>p</code> åç¼€</strong>ï¼ˆå¦‚ <code>execlp</code>ï¼‰ï¼šè‡ªåŠ¨ä» <code>PATH</code> ç¯å¢ƒå˜é‡æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li><li>æ—  <code>p</code> åç¼€ï¼šå¿…é¡»æä¾›å®Œæ•´è·¯å¾„ï¼ˆå¦‚ <code>/bin/ls</code>ï¼‰ã€‚</li></ul></li><li><p><strong>åº•å±‚å®ç°</strong>ï¼š</p><ul><li><strong><code>execve</code></strong> æ˜¯å”¯ä¸€çš„<strong>ç³»ç»Ÿè°ƒç”¨</strong>ï¼Œå…¶ä»–å‡½æ•°å‡ä¸ºåº“å‡½æ•°ï¼ˆæœ€ç»ˆè°ƒç”¨ <code>execve</code>ï¼‰ã€‚</li></ul></li></ol><hr><h3 id="ç¤ºä¾‹ä»£ç "><a href="#ç¤ºä¾‹ä»£ç " class="headerlink" title="ç¤ºä¾‹ä»£ç "></a><strong>ç¤ºä¾‹ä»£ç </strong></h3><h4 id="1-execlï¼ˆå›ºå®šå‚æ•°-å®Œæ•´è·¯å¾„ï¼‰"><a href="#1-execlï¼ˆå›ºå®šå‚æ•°-å®Œæ•´è·¯å¾„ï¼‰" class="headerlink" title="1. execlï¼ˆå›ºå®šå‚æ•° + å®Œæ•´è·¯å¾„ï¼‰"></a>1. <strong><code>execl</code>ï¼ˆå›ºå®šå‚æ•° + å®Œæ•´è·¯å¾„ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ‰§è¡Œ `ls -l`</span><br></code></pre></td></tr></table></figure><h4 id="2-execvï¼ˆåŠ¨æ€å‚æ•°-å®Œæ•´è·¯å¾„ï¼‰"><a href="#2-execvï¼ˆåŠ¨æ€å‚æ•°-å®Œæ•´è·¯å¾„ï¼‰" class="headerlink" title="2. execvï¼ˆåŠ¨æ€å‚æ•° + å®Œæ•´è·¯å¾„ï¼‰"></a>2. <strong><code>execv</code>ï¼ˆåŠ¨æ€å‚æ•° + å®Œæ•´è·¯å¾„ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execv(<span class="hljs-string">&quot;/bin/ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><h4 id="3-execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰"><a href="#3-execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰" class="headerlink" title="3. execleï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰"></a>3. <strong><code>execle</code>ï¼ˆè‡ªå®šä¹‰ç¯å¢ƒå˜é‡ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *env[] = &#123;<span class="hljs-string">&quot;PATH=/usr/bin&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execle(<span class="hljs-string">&quot;/bin/ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>, env);<br></code></pre></td></tr></table></figure><h4 id="4-execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾-PATHï¼‰"><a href="#4-execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾-PATHï¼‰" class="headerlink" title="4. execlpï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ PATHï¼‰"></a>4. <strong><code>execlp</code>ï¼ˆè‡ªåŠ¨æŸ¥æ‰¾ <code>PATH</code>ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">execlp(<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// æ— éœ€å†™ `/bin/ls`</span><br></code></pre></td></tr></table></figure><h4 id="5-execvpï¼ˆåŠ¨æ€å‚æ•°-è‡ªåŠ¨æŸ¥æ‰¾ï¼‰"><a href="#5-execvpï¼ˆåŠ¨æ€å‚æ•°-è‡ªåŠ¨æŸ¥æ‰¾ï¼‰" class="headerlink" title="5. execvpï¼ˆåŠ¨æ€å‚æ•° + è‡ªåŠ¨æŸ¥æ‰¾ï¼‰"></a>5. <strong><code>execvp</code>ï¼ˆåŠ¨æ€å‚æ•° + è‡ªåŠ¨æŸ¥æ‰¾ï¼‰</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">char</span> *args[] = &#123;<span class="hljs-string">&quot;ls&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, <span class="hljs-literal">NULL</span>&#125;;<br>execvp(<span class="hljs-string">&quot;ls&quot;</span>, args);<br></code></pre></td></tr></table></figure><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>éœ€è¦å®Œæ•´è·¯å¾„</strong> â†’ ç”¨ <code>execl</code>ã€<code>execv</code>ã€<code>execle</code>ã€<code>execve</code>ã€‚</li><li><strong>éœ€è¦ <code>PATH</code> æŸ¥æ‰¾</strong> â†’ ç”¨ <code>execlp</code>ã€<code>execvp</code>ã€‚</li><li><strong>åŠ¨æ€å‚æ•°</strong> â†’ ç”¨ <code>execv</code>ã€<code>execvp</code>ã€<code>execve</code>ã€‚</li><li><strong>è‡ªå®šä¹‰ç¯å¢ƒå˜é‡</strong> â†’ ç”¨ <code>execle</code>ã€<code>execve</code>ã€‚</li></ul><p><strong>æ³¨æ„</strong>ï¼šæ‰€æœ‰ <code>exec</code> å‡½æ•°æˆåŠŸæ—¶<strong>ä¸è¿”å›</strong>ï¼Œå¤±è´¥æ—¶è¿”å› <code>-1</code> å¹¶è®¾ç½® <code>errno</code>ã€‚</p><hr><h3 id="3-wait-ï¼šå›æ”¶å­è¿›ç¨‹"><a href="#3-wait-ï¼šå›æ”¶å­è¿›ç¨‹" class="headerlink" title="3. wait()ï¼šå›æ”¶å­è¿›ç¨‹"></a><strong>3. <code>wait()</code>ï¼šå›æ”¶å­è¿›ç¨‹</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-type">pid_t</span> <span class="hljs-title function_">wait</span><span class="hljs-params">(<span class="hljs-type">int</span> *status)</span>;<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œé¿å…åƒµå°¸è¿›ç¨‹ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹"><a href="#ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹"></a><strong>ç¤ºä¾‹ï¼šçˆ¶è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Child process\n&quot;</span>);<br>        sleep(<span class="hljs-number">2</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span><br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent process: child finished\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><hr><h2 id="ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰"><a href="#ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰" class="headerlink" title="ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰"></a><strong>ä¸‰ã€è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</strong></h2><h3 id="1-ç®¡é“ï¼ˆpipeï¼‰"><a href="#1-ç®¡é“ï¼ˆpipeï¼‰" class="headerlink" title="1. ç®¡é“ï¼ˆpipeï¼‰"></a><strong>1. ç®¡é“ï¼ˆ<code>pipe</code>ï¼‰</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-type">int</span> <span class="hljs-title function_">pipe</span><span class="hljs-params">(<span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>])</span>;<br></code></pre></td></tr></table></figure><ul><li>**<code>fd[0]</code>**ï¼šè¯»ç«¯ã€‚</li><li>**<code>fd[1]</code>**ï¼šå†™ç«¯ã€‚</li></ul><h4 id="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡"><a href="#ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡" class="headerlink" title="ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡"></a><strong>ç¤ºä¾‹ï¼šçˆ¶å­è¿›ç¨‹é€šä¿¡</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br>    pipe(fd);  <span class="hljs-comment">// åˆ›å»ºç®¡é“</span><br><br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// å­è¿›ç¨‹å…³é—­è¯»ç«¯</span><br>        write(fd[<span class="hljs-number">1</span>], <span class="hljs-string">&quot;Hello, parent!&quot;</span>, <span class="hljs-number">14</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">1</span>]);  <span class="hljs-comment">// çˆ¶è¿›ç¨‹å…³é—­å†™ç«¯</span><br>        <span class="hljs-type">char</span> buf[<span class="hljs-number">20</span>];<br>        read(fd[<span class="hljs-number">0</span>], buf, <span class="hljs-keyword">sizeof</span>(buf));<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Parent received: %s\n&quot;</span>, buf);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¾“å‡º</strong>ï¼š</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs erlang-repl">Parent received: Hello, parent!<br></code></pre></td></tr></table></figure><ul><li><strong>å†ç»™ä¸€ä¸ªä¾‹å­ï¼Œå¥½å¥½ç†è§£</strong></li></ul><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> fd[<span class="hljs-number">2</span>];<br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    pipe(fd);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d  %d\n&quot;</span>, fd[<span class="hljs-number">0</span>], fd[<span class="hljs-number">1</span>]);<br>    <span class="hljs-type">pid_t</span> pid = fork();<br>    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) &#123;<br>        close(fd[<span class="hljs-number">1</span>]);<br>        dup2(fd[<span class="hljs-number">0</span>], <span class="hljs-number">0</span>);<br>        execlp(<span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;wc&quot;</span>, <span class="hljs-string">&quot;-l&quot;</span>, (<span class="hljs-type">char</span> *)<span class="hljs-number">0</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello world!\n&quot;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        close(fd[<span class="hljs-number">0</span>]);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;before dup2\n&quot;</span>);<br>        dup2(fd[<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;after dup2\n&quot;</span>);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;lalalala this line shouldn&#x27;t be print\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">3</span>  <span class="hljs-number">4</span><br><span class="hljs-attribute">before</span> dup2<br><span class="hljs-attribute">2</span><br></code></pre></td></tr></table></figure><hr><h2 id="å››ã€ä¿¡å·ï¼ˆSignalï¼‰"><a href="#å››ã€ä¿¡å·ï¼ˆSignalï¼‰" class="headerlink" title="å››ã€ä¿¡å·ï¼ˆSignalï¼‰"></a><strong>å››ã€ä¿¡å·ï¼ˆSignalï¼‰</strong></h2><h3 id="1-signal-ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°"><a href="#1-signal-ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°" class="headerlink" title="1. signal()ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°"></a><strong>1. <code>signal()</code>ï¼šæ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°</strong></h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-type">void</span> (*signal(<span class="hljs-type">int</span> sig, <span class="hljs-type">void</span> (*handler)(<span class="hljs-type">int</span>)))(<span class="hljs-type">int</span>);<br></code></pre></td></tr></table></figure><ul><li><strong>å¸¸è§ä¿¡å·</strong>ï¼š<ul><li><code>SIGINT</code>ï¼ˆ<code>Ctrl+C</code>ï¼‰ã€‚</li><li><code>SIGKILL</code>ï¼ˆå¼ºåˆ¶ç»ˆæ­¢ï¼‰ã€‚</li><li><code>SIGALRM</code>ï¼ˆå®šæ—¶å™¨ï¼‰ã€‚</li></ul></li></ul><h4 id="ç¤ºä¾‹ï¼šæ•è·-Ctrl-C"><a href="#ç¤ºä¾‹ï¼šæ•è·-Ctrl-C" class="headerlink" title="ç¤ºä¾‹ï¼šæ•è· Ctrl+C"></a><strong>ç¤ºä¾‹ï¼šæ•è· <code>Ctrl+C</code></strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">void</span> <span class="hljs-title function_">handler</span><span class="hljs-params">(<span class="hljs-type">int</span> sig)</span> &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nReceived SIGINT (Ctrl+C)\n&quot;</span>);<br>    _exit(<span class="hljs-number">1</span>);  <span class="hljs-comment">// é€€å‡ºç¨‹åº</span><br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    signal(SIGINT, handler);  <span class="hljs-comment">// æ³¨å†Œä¿¡å·å¤„ç†å‡½æ•°</span><br>    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Running...\n&quot;</span>);<br>        sleep(<span class="hljs-number">1</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p><strong>è¿è¡Œ</strong>ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br><span class="hljs-function"><span class="hljs-title">Running</span></span>...<br>^C<br>Received SIGINT (Ctrl+C)<br></code></pre></td></tr></table></figure><hr><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><table><thead><tr><th><strong>ä¸»é¢˜</strong></th><th><strong>å…³é”®å‡½æ•°</strong></th><th><strong>ç”¨é€”</strong></th></tr></thead><tbody><tr><td><strong>æ–‡ä»¶I&#x2F;O</strong></td><td><code>open</code>, <code>read</code>, <code>write</code>, <code>lseek</code>, <code>dup2</code></td><td>æ–‡ä»¶æ“ä½œã€é‡å®šå‘</td></tr><tr><td><strong>è¿›ç¨‹æ§åˆ¶</strong></td><td><code>fork</code>, <code>exec</code>, <code>wait</code></td><td>åˆ›å»ºè¿›ç¨‹ã€æ‰§è¡Œç¨‹åº</td></tr><tr><td><strong>IPC</strong></td><td><code>pipe</code>, <code>mkfifo</code></td><td>è¿›ç¨‹é—´é€šä¿¡</td></tr><tr><td><strong>ä¿¡å·</strong></td><td><code>signal</code>, <code>kill</code>, <code>alarm</code></td><td>å¼‚æ­¥äº‹ä»¶å¤„ç†</td></tr></tbody></table><p><strong>å»ºè®®</strong>ï¼š</p><ul><li>ç»“åˆä»£ç ç¤ºä¾‹åŠ¨æ‰‹å®éªŒï¼ŒåŠ æ·±ç†è§£ã€‚</li><li>ä½¿ç”¨ <code>strace</code> è§‚å¯Ÿç³»ç»Ÿè°ƒç”¨æ‰§è¡Œè¿‡ç¨‹ï¼ˆå¦‚ <code>strace ./a.out</code>ï¼‰ã€‚</li></ul>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>UNIX</tag>
      
      <tag>å¤ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UNIXç³»ç»Ÿå¤ä¹ -3</title>
    <link href="/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/"/>
    <url>/2025/05/31/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-3/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><h1 id="æ¨¡å¼åŒ¹é…ä¸å¤„ç†è¯­è¨€awk"><a href="#æ¨¡å¼åŒ¹é…ä¸å¤„ç†è¯­è¨€awk" class="headerlink" title="æ¨¡å¼åŒ¹é…ä¸å¤„ç†è¯­è¨€awk"></a>æ¨¡å¼åŒ¹é…ä¸å¤„ç†è¯­è¨€awk</h1><h3 id="1-AWK-åŸºæœ¬æ¦‚å¿µ"><a href="#1-AWK-åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. AWK åŸºæœ¬æ¦‚å¿µ"></a><strong>1. AWK åŸºæœ¬æ¦‚å¿µ</strong></h3><ul><li><strong>AWK</strong> æ˜¯ä¸€ç§<strong>æ¨¡å¼åŒ¹é…ä¸å¤„ç†è¯­è¨€</strong>ï¼Œä¸»è¦ç”¨äº<strong>æ–‡æœ¬å¤„ç†</strong>å’Œ<strong>æ•°æ®æå–</strong>ã€‚</li><li><strong>åŸºæœ¬ä½¿ç”¨å½¢å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;program&#x27;</span> filename          <span class="hljs-comment"># å¤„ç†æ–‡ä»¶</span><br><span class="hljs-built_in">command</span> | awk <span class="hljs-string">&#x27;program&#x27;</span>         <span class="hljs-comment"># å¤„ç†ç®¡é“è¾“å…¥</span><br></code></pre></td></tr></table></figure></li><li><strong>program ç»“æ„</strong>ï¼š<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">pattern1 &#123; action1 &#125;<br>pattern2 &#123; action2 &#125;<br>...<br></code></pre></td></tr></table></figure><ul><li><code>pattern</code>ï¼šåŒ¹é…æ¡ä»¶ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ã€é€»è¾‘è¡¨è¾¾å¼ï¼‰</li><li><code>action</code>ï¼šåŒ¹é…åæ‰§è¡Œçš„æ“ä½œï¼ˆå¦‚ <code>print</code>ã€<code>printf</code>ï¼‰</li></ul></li></ul><hr><h3 id="2-é»˜è®¤è¡Œä¸º"><a href="#2-é»˜è®¤è¡Œä¸º" class="headerlink" title="2. é»˜è®¤è¡Œä¸º"></a><strong>2. é»˜è®¤è¡Œä¸º</strong></h3><ul><li><strong>é»˜è®¤æ¨¡å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;/pattern/&#x27;</span> file    <span class="hljs-comment"># ç±»ä¼¼ `grep`ï¼Œè¾“å‡ºåŒ¹é…çš„è¡Œ</span><br>awk <span class="hljs-string">&#x27;&#123;print&#125;&#x27;</span> file      <span class="hljs-comment"># ç±»ä¼¼ `cat`ï¼Œè¾“å‡ºæ‰€æœ‰è¡Œ</span><br></code></pre></td></tr></table></figure></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;//&#x27;</span> file           <span class="hljs-comment"># è¾“å‡ºæ‰€æœ‰è¡Œ</span><br>awk <span class="hljs-string">&#x27;/main/&#123;print &quot;-----&quot;&#125;&#x27;</span> file  <span class="hljs-comment"># åŒ¹é… `main` å¹¶æ‰“å°åˆ†éš”çº¿</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="3-è®°å½•ä¸å­—æ®µ"><a href="#3-è®°å½•ä¸å­—æ®µ" class="headerlink" title="3. è®°å½•ä¸å­—æ®µ"></a><strong>3. è®°å½•ä¸å­—æ®µ</strong></h3><ul><li><strong>è®°å½•ï¼ˆRecordï¼‰</strong>ï¼šé»˜è®¤ä»¥<strong>è¡Œ</strong>ä¸ºå•ä½ï¼Œ<code>NR</code> è¡¨ç¤ºå½“å‰è¡Œå·ã€‚</li><li><strong>å­—æ®µï¼ˆFieldï¼‰</strong>ï¼šé»˜è®¤ä»¥<strong>ç©ºæ ¼&#x2F;Tab</strong>åˆ†éš”ï¼Œ<code>$1</code>ã€<code>$2</code>â€¦ è¡¨ç¤ºç¬¬ 1ã€2 ä¸ªå­—æ®µï¼Œ<code>$0</code> è¡¨ç¤ºæ•´è¡Œï¼Œ<code>NF</code> è¡¨ç¤ºå­—æ®µæ•°ã€‚</li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;print NR, $0&#125;&#x27;</span> file       <span class="hljs-comment"># æ˜¾ç¤ºè¡Œå· + æ•´è¡Œ</span><br><span class="hljs-built_in">ls</span> -l | awk <span class="hljs-string">&#x27;/^d/&#123;print $8&#125;&#x27;</span>    <span class="hljs-comment"># ä»…è¾“å‡ºç›®å½•å</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="4-è¾“å‡ºæ§åˆ¶"><a href="#4-è¾“å‡ºæ§åˆ¶" class="headerlink" title="4. è¾“å‡ºæ§åˆ¶"></a><strong>4. è¾“å‡ºæ§åˆ¶</strong></h3><ul><li>**<code>print</code>**ï¼šé»˜è®¤æ¢è¡Œ<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;print NR &quot;: &quot; $1, $8&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure></li><li>**<code>printf</code>**ï¼šæ ¼å¼åŒ–è¾“å‡º<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;printf(&quot;%d: %s\n&quot;, NR, $0)&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="5-æ¨¡å¼åŒ¹é…ï¼ˆPatternï¼‰"><a href="#5-æ¨¡å¼åŒ¹é…ï¼ˆPatternï¼‰" class="headerlink" title="5. æ¨¡å¼åŒ¹é…ï¼ˆPatternï¼‰"></a><strong>5. æ¨¡å¼åŒ¹é…ï¼ˆPatternï¼‰</strong></h3><ul><li><strong>å­—æ®µåŒ¹é…</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;$5 ~ /.....*/&#x27;</span>        <span class="hljs-comment"># ç¬¬ 5 å­—æ®µé•¿åº¦ â‰¥ 5</span><br>awk <span class="hljs-string">&#x27;$5 !~ /.....*/&#x27;</span>       <span class="hljs-comment"># ç¬¬ 5 å­—æ®µé•¿åº¦ &lt; 5</span><br>awk <span class="hljs-string">&#x27;$5 == &quot;4096&quot;&#x27;</span>         <span class="hljs-comment"># ç¬¬ 5 å­—æ®µç­‰äº &quot;4096&quot;</span><br></code></pre></td></tr></table></figure></li><li><strong>é€»è¾‘è¿ç®—</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;length($5) &gt; 3&#x27;</span>       <span class="hljs-comment"># ç¬¬ 5 å­—æ®µé•¿åº¦ &gt; 3</span><br>awk <span class="hljs-string">&#x27;!(length($5) &gt; 3)&#x27;</span>    <span class="hljs-comment"># ç¬¬ 5 å­—æ®µé•¿åº¦ â‰¤ 3</span><br></code></pre></td></tr></table></figure></li><li><strong>ç‰¹æ®Šæ¨¡å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;BEGIN &#123;åˆå§‹åŒ–åŠ¨ä½œ&#125;&#x27;</span>    <span class="hljs-comment"># ç¨‹åºå¼€å§‹å‰æ‰§è¡Œ</span><br>awk <span class="hljs-string">&#x27;END &#123;ç»“æŸåŠ¨ä½œ&#125;&#x27;</span>        <span class="hljs-comment"># ç¨‹åºç»“æŸåæ‰§è¡Œ</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="6-å˜é‡ä¸è¿ç®—"><a href="#6-å˜é‡ä¸è¿ç®—" class="headerlink" title="6. å˜é‡ä¸è¿ç®—"></a><strong>6. å˜é‡ä¸è¿ç®—</strong></h3><ul><li><strong>å˜é‡å®šä¹‰</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;nw += NF; nc += length($0)+1&#125; END &#123;print NR, nw, nc&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure><ul><li>ç±»ä¼¼ <code>wc</code> å‘½ä»¤ï¼Œè®¡ç®—<strong>è¡Œæ•°ã€å•è¯æ•°ã€å­—ç¬¦æ•°</strong>ã€‚</li></ul></li><li><strong>ç®—æœ¯è¿ç®—</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;sum += $1&#125; END &#123;print sum&#125;&#x27;</span>  <span class="hljs-comment"># è®¡ç®—ç¬¬ 1 åˆ—æ€»å’Œ</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="7-æµç¨‹æ§åˆ¶"><a href="#7-æµç¨‹æ§åˆ¶" class="headerlink" title="7. æµç¨‹æ§åˆ¶"></a><strong>7. æµç¨‹æ§åˆ¶</strong></h3><ul><li>**<code>if-else</code>**ï¼š<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs awk">awk <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  if ($1 == lastword) </span><br><span class="hljs-string">    printf(&quot;é‡å¤å•è¯ %s, è¡Œå· %d:\n%s\n&quot;, $1, NR, $0);</span><br><span class="hljs-string">  lastword = $NF;</span><br><span class="hljs-string">&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure></li><li><strong><code>while</code> å¾ªç¯</strong>ï¼š<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">awk <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  i = 1;</span><br><span class="hljs-string">  while (i &lt;= NF) &#123;</span><br><span class="hljs-string">    print $i;</span><br><span class="hljs-string">    i++;</span><br><span class="hljs-string">  &#125;</span><br><span class="hljs-string">&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure></li><li><strong>æ§åˆ¶è¯­å¥</strong>ï¼š<ul><li><code>break</code>ï¼šé€€å‡ºå¾ªç¯</li><li><code>continue</code>ï¼šè·³è¿‡å½“å‰å¾ªç¯</li><li><code>next</code>ï¼šå¤„ç†ä¸‹ä¸€æ¡è®°å½•</li><li><code>exit</code>ï¼šç»“æŸç¨‹åº</li></ul></li></ul><hr><h3 id="8-å†…éƒ¨å˜é‡"><a href="#8-å†…éƒ¨å˜é‡" class="headerlink" title="8. å†…éƒ¨å˜é‡"></a><strong>8. å†…éƒ¨å˜é‡</strong></h3><table><thead><tr><th>å˜é‡</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>FILENAME</code></td><td>å½“å‰è¾“å…¥æ–‡ä»¶å</td></tr><tr><td><code>RS</code></td><td>è¾“å…¥è®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ <code>\n</code>ï¼‰</td></tr><tr><td><code>FS</code></td><td>è¾“å…¥å­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤ <code>ç©ºæ ¼/Tab</code>ï¼‰</td></tr><tr><td><code>NF</code></td><td>å½“å‰è®°å½•çš„å­—æ®µæ•°</td></tr><tr><td><code>NR</code></td><td>å½“å‰è®°å½•æ•°ï¼ˆè¡Œå·ï¼‰</td></tr><tr><td><code>OFS</code></td><td>è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤ <code>ç©ºæ ¼</code>ï¼‰</td></tr><tr><td><code>ORS</code></td><td>è¾“å‡ºè®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤ <code>\n</code>ï¼‰</td></tr></tbody></table><hr><h3 id="9-å¸¸ç”¨å‡½æ•°"><a href="#9-å¸¸ç”¨å‡½æ•°" class="headerlink" title="9. å¸¸ç”¨å‡½æ•°"></a><strong>9. å¸¸ç”¨å‡½æ•°</strong></h3><table><thead><tr><th>å‡½æ•°</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>length(s)</code></td><td>è¿”å›å­—ç¬¦ä¸²é•¿åº¦</td></tr><tr><td><code>substr(s, m, n)</code></td><td>æå–å­ä¸²ï¼ˆä» <code>m</code> å¼€å§‹ï¼Œå– <code>n</code> ä¸ªå­—ç¬¦ï¼‰</td></tr><tr><td><code>index(s1, s2)</code></td><td>è¿”å› <code>s2</code> åœ¨ <code>s1</code> ä¸­çš„ä½ç½®</td></tr><tr><td><code>split(s, a, sep)</code></td><td>æŒ‰ <code>sep</code> åˆ†å‰² <code>s</code> å­˜å…¥æ•°ç»„ <code>a</code></td></tr><tr><td><code>tolower(s)</code> &#x2F; <code>toupper(s)</code></td><td>è½¬æ¢å¤§å°å†™</td></tr><tr><td><code>sin(x)</code> &#x2F; <code>cos(x)</code> &#x2F; <code>log(x)</code></td><td>æ•°å­¦å‡½æ•°</td></tr></tbody></table><hr><h3 id="10-æ•°ç»„"><a href="#10-æ•°ç»„" class="headerlink" title="10. æ•°ç»„"></a><strong>10. æ•°ç»„</strong></h3><ul><li><strong>å®šä¹‰ä¸éå†</strong>ï¼š<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">awk <span class="hljs-string">&#x27;&#123;</span><br><span class="hljs-string">  line[NR] = $0  # å­˜å‚¨æ¯è¡Œåˆ°æ•°ç»„</span><br><span class="hljs-string">&#125;</span><br><span class="hljs-string">END &#123;</span><br><span class="hljs-string">  for (i=1; i&lt;=NR; i++) </span><br><span class="hljs-string">    print line[i]  # æŒ‰é¡ºåºè¾“å‡º</span><br><span class="hljs-string">&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure></li><li><strong>å…³è”æ•°ç»„</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;count[$1]++&#125; END &#123;for (word in count) print word, count[word]&#125;&#x27;</span> file<br></code></pre></td></tr></table></figure><ul><li>ç»Ÿè®¡ç¬¬ 1 åˆ—å•è¯å‡ºç°æ¬¡æ•°ï¼ˆç±»ä¼¼ <code>uniq -c</code>ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="11-è¾“å…¥è¾“å‡ºçº¦å®š"><a href="#11-è¾“å…¥è¾“å‡ºçº¦å®š" class="headerlink" title="11. è¾“å…¥è¾“å‡ºçº¦å®š"></a><strong>11. è¾“å…¥è¾“å‡ºçº¦å®š</strong></h3><ul><li><strong>è¾“å…¥æ¥æº</strong>ï¼š<ul><li>æŒ‡å®šæ–‡ä»¶åï¼š<code>awk &#39;program&#39; file</code></li><li>æœªæŒ‡å®šï¼šä» <code>stdin</code> è¯»å–ï¼ˆæ”¯æŒç®¡é“ï¼‰</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> file | awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span>   <span class="hljs-comment"># ä»ç®¡é“è¯»å–</span><br>awk <span class="hljs-string">&#x27;&#123;print $1&#125;&#x27;</span> file         <span class="hljs-comment"># ä»æ–‡ä»¶è¯»å–</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="12-å…¸å‹åº”ç”¨åœºæ™¯"><a href="#12-å…¸å‹åº”ç”¨åœºæ™¯" class="headerlink" title="12. å…¸å‹åº”ç”¨åœºæ™¯"></a><strong>12. å…¸å‹åº”ç”¨åœºæ™¯</strong></h3><ol><li><strong>æ•°æ®æå–</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;print $1, $3&#125;&#x27;</span> data.txt  <span class="hljs-comment"># æå–ç¬¬ 1ã€3 åˆ—</span><br></code></pre></td></tr></table></figure></li><li><strong>ç»Ÿè®¡è®¡ç®—</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;sum += $1&#125; END &#123;print sum&#125;&#x27;</span> numbers.txt<br></code></pre></td></tr></table></figure></li><li><strong>æ–‡æœ¬è¿‡æ»¤</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;/error/&#123;print&#125;&#x27;</span> logfile  <span class="hljs-comment"># è¿‡æ»¤å« &quot;error&quot; çš„è¡Œ</span><br></code></pre></td></tr></table></figure></li><li><strong>æ ¼å¼åŒ–è¾“å‡º</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">awk <span class="hljs-string">&#x27;&#123;printf &quot;%-10s %5d\n&quot;, $1, $2&#125;&#x27;</span> data.txt<br></code></pre></td></tr></table></figure></li></ol><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>AWK ä¼˜åŠ¿</strong>ï¼š<ul><li>å¼ºå¤§çš„<strong>æ–‡æœ¬å¤„ç†</strong>èƒ½åŠ›</li><li>æ”¯æŒ<strong>æ­£åˆ™åŒ¹é…</strong>ã€<strong>å­—æ®µæ“ä½œ</strong></li><li>å†…ç½®<strong>å˜é‡</strong>å’Œ<strong>å‡½æ•°</strong>ç®€åŒ–ç¼–ç¨‹</li></ul></li><li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š<ul><li>æ—¥å¿—åˆ†æ</li><li>æ•°æ®æ¸…æ´—</li><li>æŠ¥è¡¨ç”Ÿæˆ</li></ul></li><li><strong>å­¦ä¹ å»ºè®®</strong>ï¼š<ul><li>æŒæ¡<strong>æ¨¡å¼åŒ¹é…</strong>ï¼ˆ<code>/pattern/</code>ï¼‰</li><li>ç†Ÿç»ƒä½¿ç”¨<strong>å­—æ®µæ“ä½œ</strong>ï¼ˆ<code>$1</code>, <code>$NF</code>ï¼‰</li><li>ç†è§£<strong>æµç¨‹æ§åˆ¶</strong>ï¼ˆ<code>if</code>, <code>while</code>, <code>for</code>ï¼‰</li></ul></li></ul><p>é€šè¿‡æŒæ¡è¿™äº›æ ¸å¿ƒçŸ¥è¯†ï¼Œå¯ä»¥é«˜æ•ˆä½¿ç”¨ AWK å¤„ç†å„ç§æ–‡æœ¬æ•°æ®ä»»åŠ¡ã€‚ ğŸš€</p><h1 id="å›¾å½¢ç•Œé¢-X"><a href="#å›¾å½¢ç•Œé¢-X" class="headerlink" title="å›¾å½¢ç•Œé¢-X"></a>å›¾å½¢ç•Œé¢-X</h1><h2 id="X-Window"><a href="#X-Window" class="headerlink" title="**X Window **"></a>**X Window **</h2><h3 id="1-å†å²å‘å±•"><a href="#1-å†å²å‘å±•" class="headerlink" title="1. å†å²å‘å±•"></a><strong>1. å†å²å‘å±•</strong></h3><ul><li><strong>èµ·æº</strong>ï¼ˆ1984å¹´ï¼‰ï¼š<ul><li>ç”±MITåŸºäºæ–¯å¦ç¦å¤§å­¦çš„<strong>Wè§†çª—ç³»ç»Ÿ</strong>å¼€å‘ï¼Œé¦–ä¸ªç‰ˆæœ¬å‘½åä¸º<strong>X1</strong>ï¼ˆXæ˜¯Wçš„ä¸‹ä¸€ä¸ªå­—æ¯ï¼‰ï¼Œæ­£å¼åç§°ä¸º<strong>X Window</strong>ã€‚</li><li>1985å¹´é™†ç»­å‘å¸ƒX6ã€X9ã€X10ç‰ˆæœ¬ï¼Œå¹¶å¼€å§‹å¯¹å¤–æˆæƒã€‚</li></ul></li><li><strong>X11æ—¶ä»£</strong>ï¼š<ul><li>1987å¹´å‘å¸ƒ<strong>X11</strong>ï¼ˆæœ€ç»ˆç¨³å®šç‰ˆæœ¬ï¼‰ï¼ŒMITé€€å‡ºå¼€å‘ã€‚</li><li>1994å¹´å‘å¸ƒ<strong>X11R6</strong>ï¼ˆç¬¬å…­æ¬¡ä¿®è®¢ç‰ˆï¼‰ï¼Œæˆä¸ºä¸»æµæ ‡å‡†ã€‚</li></ul></li></ul><h3 id="2-ä½“ç³»ç»“æ„"><a href="#2-ä½“ç³»ç»“æ„" class="headerlink" title="2. ä½“ç³»ç»“æ„"></a><strong>2. ä½“ç³»ç»“æ„</strong></h3><ul><li><strong>å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹</strong>ï¼š<ul><li><strong>X Client</strong>ï¼šåº”ç”¨ç¨‹åºï¼ˆå¦‚æµè§ˆå™¨ã€ç¼–è¾‘å™¨ï¼‰ï¼Œè´Ÿè´£ç”Ÿæˆæ˜¾ç¤ºè¯·æ±‚ã€‚</li><li><strong>X Server</strong>ï¼šæ¥æ”¶è¯·æ±‚å¹¶é©±åŠ¨ç¡¬ä»¶æ˜¾ç¤ºï¼ŒåŒæ—¶å¤„ç†è¾“å…¥è®¾å¤‡ï¼ˆé”®ç›˜ã€é¼ æ ‡ï¼‰äº‹ä»¶ã€‚</li><li><strong>Xåè®®</strong>ï¼šClientä¸Serverä¹‹é—´çš„é€šä¿¡åè®®ï¼Œç‹¬ç«‹äºç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿã€‚</li></ul></li></ul><h3 id="3-æ ¸å¿ƒç»„ä»¶"><a href="#3-æ ¸å¿ƒç»„ä»¶" class="headerlink" title="3. æ ¸å¿ƒç»„ä»¶"></a><strong>3. æ ¸å¿ƒç»„ä»¶</strong></h3><ul><li><strong>X Server</strong>ï¼š<ul><li>åŠŸèƒ½ï¼šå¤„ç†å›¾å½¢è¾“å‡ºï¼ˆå¦‚çª—å£æ¸²æŸ“ï¼‰å’Œè¾“å…¥äº‹ä»¶ï¼ˆå¦‚é¼ æ ‡ç‚¹å‡»ï¼‰ã€‚</li><li>ç‰¹ç‚¹ï¼šå±è”½ç¡¬ä»¶å·®å¼‚ï¼Œæ”¯æŒè·¨å¹³å°ï¼ˆå¦‚è¿œç¨‹æ¡Œé¢åœºæ™¯ï¼‰ã€‚</li></ul></li><li><strong>çª—å£ç®¡ç†å™¨ï¼ˆWindow Managerï¼‰</strong>ï¼š<ul><li>ç‰¹æ®ŠX Clientï¼Œç®¡ç†çª—å£å¸ƒå±€ã€å¤§å°ã€å æ”¾é¡ºåºç­‰ï¼ˆå¦‚GNOMEçš„Mutterï¼‰ã€‚</li></ul></li><li><strong>æ¡Œé¢ç³»ç»Ÿï¼ˆDesktop Environmentï¼‰</strong>ï¼š<ul><li>ä¾èµ–çª—å£ç®¡ç†å™¨ï¼Œæä¾›å®Œæ•´ç”¨æˆ·ç•Œé¢ï¼ˆå¦‚KDEã€XFCEï¼‰ã€‚</li></ul></li></ul><h3 id="4-Xåè®®çš„ä¼˜åŠ¿"><a href="#4-Xåè®®çš„ä¼˜åŠ¿" class="headerlink" title="4. Xåè®®çš„ä¼˜åŠ¿"></a><strong>4. Xåè®®çš„ä¼˜åŠ¿</strong></h3><ul><li><strong>å¯ç§»æ¤æ€§</strong>ï¼šåè®®æŠ½è±¡åŒ–ï¼ŒClientæ— éœ€å…³å¿ƒåº•å±‚ç¡¬ä»¶ã€‚</li><li><strong>ç½‘ç»œé€æ˜æ€§</strong>ï¼š<ul><li>Clientå’ŒServerå¯è¿è¡Œåœ¨ä¸åŒæœºå™¨ï¼ˆå¦‚æœ¬åœ°æ˜¾ç¤ºè¿œç¨‹ç¨‹åºï¼‰ã€‚</li><li><strong>æ³¨æ„</strong>ï¼šæœ¬åœ°è¿è¡ŒX Serverï¼Œè¿œç¨‹è¿è¡ŒX Clientï¼ˆä¸å¸¸è§„ç½‘ç»œæ¨¡å‹ç›¸åï¼‰ã€‚</li></ul></li></ul><h3 id="5-å¼€å‘æ¥å£"><a href="#5-å¼€å‘æ¥å£" class="headerlink" title="5. å¼€å‘æ¥å£"></a><strong>5. å¼€å‘æ¥å£</strong></h3><ul><li><strong>X Library</strong>ï¼ˆåº•å±‚ï¼‰ï¼š<ul><li>ç›´æ¥æ“ä½œXåè®®ï¼Œä¾‹å¦‚<strong>Xlib</strong>ã€<strong>Motif</strong>ã€<strong>Qt</strong>ï¼ˆæ—©æœŸç‰ˆæœ¬ï¼‰ã€‚</li></ul></li><li><strong>X Toolkit</strong>ï¼ˆé«˜å±‚ï¼‰ï¼š<ul><li>æä¾›å°è£…ç»„ä»¶ï¼Œå¦‚<strong>Xt</strong>ã€<strong>GTK</strong>ï¼ˆåŸºäºXlibï¼‰ã€<strong>OpenLook</strong>ã€‚</li></ul></li></ul><h3 id="6-åº”ç”¨åœºæ™¯"><a href="#6-åº”ç”¨åœºæ™¯" class="headerlink" title="6. åº”ç”¨åœºæ™¯"></a><strong>6. åº”ç”¨åœºæ™¯</strong></h3><ul><li><strong>è¿œç¨‹å›¾å½¢åŒ–è®¿é—®</strong>ï¼šé€šè¿‡X11è½¬å‘ï¼ˆå¦‚SSH -Xï¼‰è¿è¡Œè¿œç¨‹å›¾å½¢ç¨‹åºã€‚</li><li><strong>ç°ä»£è¡ç”Ÿ</strong>ï¼šWaylandï¼ˆX11çš„æ›¿ä»£è€…ï¼‰ä»å…¼å®¹Xåè®®ã€‚</li></ul><h1 id="ç³»ç»Ÿç®¡ç†"><a href="#ç³»ç»Ÿç®¡ç†" class="headerlink" title="ç³»ç»Ÿç®¡ç†"></a>ç³»ç»Ÿç®¡ç†</h1><h2 id="Ubuntuçš„ç®¡ç†"><a href="#Ubuntuçš„ç®¡ç†" class="headerlink" title="Ubuntuçš„ç®¡ç†"></a>Ubuntuçš„ç®¡ç†</h2><h4 id="1-æ¿€æ´»è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰ï¼ˆéå¿…é¡»ï¼Œé»˜è®¤ç¦ç”¨ï¼‰"><a href="#1-æ¿€æ´»è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰ï¼ˆéå¿…é¡»ï¼Œé»˜è®¤ç¦ç”¨ï¼‰" class="headerlink" title="1. æ¿€æ´»è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰ï¼ˆéå¿…é¡»ï¼Œé»˜è®¤ç¦ç”¨ï¼‰"></a><strong>1. æ¿€æ´»è¶…çº§ç”¨æˆ·ï¼ˆrootï¼‰</strong>ï¼ˆéå¿…é¡»ï¼Œé»˜è®¤ç¦ç”¨ï¼‰</h4><ul><li><strong>æ–¹æ³• 1ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶</strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vi /etc/gdm/gdm.conf  <span class="hljs-comment"># å°† &quot;AllowRoot=false&quot; æ”¹ä¸º &quot;AllowRoot=true&quot;</span><br></code></pre></td></tr></table></figure>æˆ–é€šè¿‡ GUIï¼š<br><code>ç³»ç»Ÿ</code> â†’ <code>ç³»ç»Ÿç®¡ç†</code> â†’ <code>ç™»å½•çª—å£</code> â†’ <code>å®‰å…¨</code> â†’ å‹¾é€‰ <code>å…è®¸æœ¬åœ°ç³»ç»Ÿç®¡ç†å‘˜ç™»å½•</code>ã€‚</li><li><strong>æ–¹æ³• 2ï¼šè®¾ç½® root å¯†ç </strong><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> passwd root  <span class="hljs-comment"># è®¾ç½® root å¯†ç </span><br></code></pre></td></tr></table></figure></li><li><strong>ç”Ÿæ•ˆæ–¹å¼</strong>ï¼šé‡å¯ç³»ç»Ÿã€‚</li></ul><h4 id="2-æ›´æ”¹è½¯ä»¶æºï¼ˆä¼˜åŒ–ä¸‹è½½é€Ÿåº¦ï¼‰"><a href="#2-æ›´æ”¹è½¯ä»¶æºï¼ˆä¼˜åŒ–ä¸‹è½½é€Ÿåº¦ï¼‰" class="headerlink" title="2. æ›´æ”¹è½¯ä»¶æºï¼ˆä¼˜åŒ–ä¸‹è½½é€Ÿåº¦ï¼‰"></a><strong>2. æ›´æ”¹è½¯ä»¶æº</strong>ï¼ˆä¼˜åŒ–ä¸‹è½½é€Ÿåº¦ï¼‰</h4><ul><li><strong>é…ç½®æ–‡ä»¶è·¯å¾„</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">/etc/apt/sources.list  <span class="hljs-comment"># å­˜å‚¨è½¯ä»¶æºåœ°å€</span><br></code></pre></td></tr></table></figure></li><li><strong>ä¿®æ”¹æ–¹å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> vi /etc/apt/sources.list  <span class="hljs-comment"># æ›¿æ¢ä¸ºæ›´å¿«çš„é•œåƒæºï¼ˆå¦‚æ•™è‚²ç½‘æºï¼‰</span><br></code></pre></td></tr></table></figure></li><li><strong>æ›´æ–°è½¯ä»¶åˆ—è¡¨</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update  <span class="hljs-comment"># ä½¿æ–°è½¯ä»¶æºç”Ÿæ•ˆ</span><br></code></pre></td></tr></table></figure></li><li><strong>æŸ¥æ‰¾åˆé€‚æº</strong>ï¼š<br>å¯æœç´¢ <code>Ubuntu æ•™è‚²ç½‘ è½¯ä»¶æº</code> è·å–ä¼˜åŒ–åœ°å€</li></ul><h2 id="ç½‘ç»œç®¡ç†"><a href="#ç½‘ç»œç®¡ç†" class="headerlink" title="ç½‘ç»œç®¡ç†"></a>ç½‘ç»œç®¡ç†</h2><h3 id="1-ç½‘ç»œåŸºç¡€é…ç½®"><a href="#1-ç½‘ç»œåŸºç¡€é…ç½®" class="headerlink" title="1. ç½‘ç»œåŸºç¡€é…ç½®"></a><strong>1. ç½‘ç»œåŸºç¡€é…ç½®</strong></h3><p><strong>ï¼ˆ1ï¼‰IPåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³</strong></p><ul><li><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<code>/etc/network/interfaces</code></li><li><strong>é™æ€IPé…ç½®ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">auto eth0<br>iface eth0 inet static<br>    address 192.168.1.100       <span class="hljs-comment"># è®¾ç½®IPåœ°å€</span><br>    netmask 255.255.255.0       <span class="hljs-comment"># å­ç½‘æ©ç </span><br>    gateway 192.168.1.1         <span class="hljs-comment"># é»˜è®¤ç½‘å…³</span><br></code></pre></td></tr></table></figure></li><li><strong>åŠ¨æ€IPï¼ˆDHCPï¼‰é…ç½®</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">iface eth0 inet dhcp<br></code></pre></td></tr></table></figure></li><li><strong>ç”Ÿæ•ˆæ–¹å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> /etc/init.d/networking restart  <span class="hljs-comment"># é‡å¯ç½‘ç»œæœåŠ¡</span><br>ifconfig                              <span class="hljs-comment"># æŸ¥çœ‹IPé…ç½®</span><br>route -n                              <span class="hljs-comment"># æŸ¥çœ‹è·¯ç”±è¡¨</span><br></code></pre></td></tr></table></figure></li></ul><p><strong>ï¼ˆ2ï¼‰DNSæœåŠ¡å™¨é…ç½®</strong></p><ul><li><strong>é…ç½®æ–‡ä»¶</strong>ï¼š<code>/etc/resolv.conf</code></li><li><strong>ä¿®æ”¹æ–¹å¼</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">nameserver 8.8.8.8          <span class="hljs-comment"># Google DNS</span><br>nameserver 8.8.4.4          <span class="hljs-comment"># å¤‡ç”¨DNS</span><br></code></pre></td></tr></table></figure></li><li><strong>æ³¨æ„</strong>ï¼š<ul><li>è¯¥æ–‡ä»¶å¯èƒ½è¢« <code>NetworkManager</code> ç®¡ç†ï¼Œæ‰‹åŠ¨ä¿®æ”¹å¯èƒ½è¢«è¦†ç›–ã€‚</li><li>é•¿æœŸç”Ÿæ•ˆå¯ä¿®æ”¹ <code>/etc/resolvconf/resolv.conf.d/base</code>ã€‚</li></ul></li></ul><hr><h3 id="2-ç½‘ç»œåº”ç”¨å®ä¾‹"><a href="#2-ç½‘ç»œåº”ç”¨å®ä¾‹" class="headerlink" title="2. ç½‘ç»œåº”ç”¨å®ä¾‹"></a><strong>2. ç½‘ç»œåº”ç”¨å®ä¾‹</strong></h3><p><strong>ï¼ˆ1ï¼‰æ­å»º Web æœåŠ¡å™¨ï¼ˆApacheï¼‰</strong></p><ul><li><strong>å®‰è£… Apache</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install apache2<br></code></pre></td></tr></table></figure></li><li><strong>è®¿é—®æ–¹å¼</strong>ï¼š<ul><li>æµè§ˆå™¨è¾“å…¥ <code>http://&lt;Ubuntu_IP&gt;</code>ï¼ˆå¦‚ <code>http://192.168.1.100</code>ï¼‰ã€‚</li></ul></li></ul><p><strong>ï¼ˆ2ï¼‰æ–‡ä»¶å…±äº«ï¼ˆSamba ç½‘ç»œé‚»å±…ï¼‰</strong></p><ul><li><strong>å®‰è£… Samba</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install samba<br></code></pre></td></tr></table></figure></li><li><strong>å…±äº«æ–‡ä»¶å¤¹</strong>ï¼š<ol><li>åˆ›å»ºå…±äº«ç›®å½•å¹¶è®¾ç½®æƒé™ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> /shared<br><span class="hljs-built_in">chmod</span> 777 /shared<br></code></pre></td></tr></table></figure></li><li>å³é”®æ–‡ä»¶å¤¹ â†’ <strong>å…±äº«é€‰é¡¹</strong>ï¼Œå‹¾é€‰ <strong>å…±äº«æ­¤ç›®å½•</strong>ã€‚</li><li>é…ç½® Samba è®¿é—®æƒé™ï¼ˆå¯é€‰ç¼–è¾‘ <code>/etc/samba/smb.conf</code>ï¼‰ã€‚</li></ol></li></ul><hr><h3 id="3-å…³é”®å‘½ä»¤æ€»ç»“"><a href="#3-å…³é”®å‘½ä»¤æ€»ç»“" class="headerlink" title="3. å…³é”®å‘½ä»¤æ€»ç»“"></a><strong>3. å…³é”®å‘½ä»¤æ€»ç»“</strong></h3><table><thead><tr><th><strong>ç”¨é€”</strong></th><th><strong>å‘½ä»¤</strong></th></tr></thead><tbody><tr><td>é‡å¯ç½‘ç»œæœåŠ¡</td><td><code>sudo /etc/init.d/networking restart</code></td></tr><tr><td>æŸ¥çœ‹IPé…ç½®</td><td><code>ifconfig</code> æˆ– <code>ip a</code></td></tr><tr><td>æŸ¥çœ‹è·¯ç”±è¡¨</td><td><code>route -n</code></td></tr><tr><td>æµ‹è¯•ç½‘ç»œè¿é€šæ€§</td><td><code>ping &lt;IP&gt;</code></td></tr><tr><td>å®‰è£…Apache</td><td><code>sudo apt-get install apache2</code></td></tr><tr><td>å®‰è£…Samba</td><td><code>sudo apt-get install samba</code></td></tr></tbody></table><hr><p><strong>æ³¨</strong>ï¼š</p><ul><li>ä¿®æ”¹ç½‘ç»œé…ç½®å‰å»ºè®®å¤‡ä»½åŸæ–‡ä»¶ï¼ˆå¦‚ <code>sudo cp /etc/network/interfaces ~/interfaces.bak</code>ï¼‰ã€‚</li><li>ä½¿ç”¨ <code>systemd</code> çš„è¾ƒæ–°ç³»ç»Ÿå¯èƒ½éœ€æ”¹ç”¨ <code>sudo systemctl restart networking</code>ã€‚</li></ul><h3 id="4-æœ¯è¯­è§£é‡Š"><a href="#4-æœ¯è¯­è§£é‡Š" class="headerlink" title="4.æœ¯è¯­è§£é‡Š"></a>4.æœ¯è¯­è§£é‡Š</h3><h4 id="1-æ ¸å¿ƒæ¦‚å¿µè§£é‡Š"><a href="#1-æ ¸å¿ƒæ¦‚å¿µè§£é‡Š" class="headerlink" title="1. æ ¸å¿ƒæ¦‚å¿µè§£é‡Š"></a><strong>1. æ ¸å¿ƒæ¦‚å¿µè§£é‡Š</strong></h4><table><thead><tr><th><strong>æœ¯è¯­</strong></th><th><strong>å®šä¹‰</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><strong>IPåœ°å€</strong></td><td>è®¾å¤‡çš„ç½‘ç»œå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œç”¨äºåœ¨äº’è”ç½‘æˆ–å±€åŸŸç½‘ä¸­é€šä¿¡ã€‚åˆ†ä¸º <strong>IPv4</strong>ï¼ˆå¦‚ <code>192.168.1.100</code>ï¼‰å’Œ <strong>IPv6</strong>ã€‚</td><td><code>192.168.1.100</code></td></tr><tr><td><strong>å­ç½‘æ©ç </strong></td><td>å®šä¹‰IPåœ°å€ä¸­å“ªéƒ¨åˆ†å±äº<strong>ç½‘ç»œå·</strong>ï¼Œå“ªéƒ¨åˆ†å±äº<strong>ä¸»æœºå·</strong>ï¼Œç”¨äºåˆ’åˆ†åŒä¸€å­ç½‘å†…çš„è®¾å¤‡ã€‚</td><td><code>255.255.255.0</code>ï¼ˆè¡¨ç¤ºå‰24ä½æ˜¯ç½‘ç»œå·ï¼‰</td></tr><tr><td><strong>é»˜è®¤ç½‘å…³</strong></td><td>æœ¬åœ°ç½‘ç»œä¸å¤–éƒ¨ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰é€šä¿¡çš„â€œå‡ºå£â€ï¼Œé€šå¸¸æ˜¯è·¯ç”±å™¨çš„IPåœ°å€ã€‚</td><td><code>192.168.1.1</code></td></tr><tr><td><strong>åŠ¨æ€IP</strong></td><td>ç”±DHCPæœåŠ¡å™¨è‡ªåŠ¨åˆ†é…çš„IPåœ°å€ï¼Œè®¾å¤‡é‡å¯åå¯èƒ½å˜åŒ–ã€‚é€‚åˆå®¶åº­ç½‘ç»œæˆ–ä¸´æ—¶è®¾å¤‡ã€‚</td><td>é€šè¿‡ <code>iface eth0 inet dhcp</code> é…ç½®</td></tr><tr><td><strong>DNSæœåŠ¡å™¨</strong></td><td>å°†åŸŸåï¼ˆå¦‚ <code>google.com</code>ï¼‰è½¬æ¢ä¸ºIPåœ°å€çš„æœåŠ¡ï¼Œä½¿äººç±»å¯è¯»çš„ç½‘å€èƒ½è¢«è®¡ç®—æœºç†è§£ã€‚</td><td><code>8.8.8.8</code>ï¼ˆGoogle DNSï¼‰</td></tr></tbody></table><hr><h4 id="2-è¯¦ç»†è¯´æ˜"><a href="#2-è¯¦ç»†è¯´æ˜" class="headerlink" title="2. è¯¦ç»†è¯´æ˜"></a><strong>2. è¯¦ç»†è¯´æ˜</strong></h4><h5 id="ï¼ˆ1ï¼‰IPåœ°å€"><a href="#ï¼ˆ1ï¼‰IPåœ°å€" class="headerlink" title="ï¼ˆ1ï¼‰IPåœ°å€"></a><strong>ï¼ˆ1ï¼‰IPåœ°å€</strong></h5><ul><li><strong>ä½œç”¨</strong>ï¼šå”¯ä¸€æ ‡è¯†ç½‘ç»œä¸­çš„è®¾å¤‡ï¼ˆå¦‚ç”µè„‘ã€æ‰‹æœºã€æœåŠ¡å™¨ï¼‰ã€‚</li><li><strong>åˆ†ç±»</strong>ï¼š<ul><li><strong>IPv4</strong>ï¼š32ä½åœ°å€ï¼Œæ ¼å¼å¦‚ <code>192.168.1.100</code>ï¼ˆå·²æ¿’ä¸´æ¯ç«­ï¼‰ã€‚</li><li><strong>IPv6</strong>ï¼š128ä½åœ°å€ï¼Œæ ¼å¼å¦‚ <code>2001:0db8:85a3::8a2e:0370:7334</code>ï¼ˆè§£å†³IPv4ä¸è¶³é—®é¢˜ï¼‰ã€‚</li></ul></li><li><strong>ç±»å‹</strong>ï¼š<ul><li><strong>å…¬æœ‰IP</strong>ï¼šå…¨çƒå”¯ä¸€ï¼Œç”±ISPåˆ†é…ï¼ˆå¦‚ <code>203.0.113.1</code>ï¼‰ã€‚</li><li><strong>ç§æœ‰IP</strong>ï¼šå±€åŸŸç½‘å†…ä½¿ç”¨ï¼ˆå¦‚ <code>192.168.x.x</code>ã€<code>10.x.x.x</code>ï¼‰ã€‚</li></ul></li></ul><h5 id="ï¼ˆ2ï¼‰å­ç½‘æ©ç "><a href="#ï¼ˆ2ï¼‰å­ç½‘æ©ç " class="headerlink" title="ï¼ˆ2ï¼‰å­ç½‘æ©ç "></a><strong>ï¼ˆ2ï¼‰å­ç½‘æ©ç </strong></h5><ul><li><strong>ä½œç”¨</strong>ï¼šåˆ’åˆ†IPåœ°å€çš„<strong>ç½‘ç»œéƒ¨åˆ†</strong>å’Œ<strong>ä¸»æœºéƒ¨åˆ†</strong>ã€‚<ul><li>ç¤ºä¾‹ï¼šIP <code>192.168.1.100</code>ï¼Œå­ç½‘æ©ç  <code>255.255.255.0</code> â†’ ç½‘ç»œå· <code>192.168.1.0</code>ï¼Œä¸»æœºå· <code>100</code>ã€‚</li></ul></li><li><strong>å¸¸è§å­ç½‘æ©ç </strong>ï¼š<ul><li><code>255.255.255.0</code>ï¼ˆ&#x2F;24ï¼‰ï¼šæ”¯æŒ254å°ä¸»æœºï¼ˆå¦‚å®¶åº­ç½‘ç»œï¼‰ã€‚</li><li><code>255.255.0.0</code>ï¼ˆ&#x2F;16ï¼‰ï¼šæ”¯æŒ6.5ä¸‡å°ä¸»æœºï¼ˆå¦‚ä¼ä¸šç½‘ç»œï¼‰ã€‚</li></ul></li></ul><h5 id="ï¼ˆ3ï¼‰é»˜è®¤ç½‘å…³"><a href="#ï¼ˆ3ï¼‰é»˜è®¤ç½‘å…³" class="headerlink" title="ï¼ˆ3ï¼‰é»˜è®¤ç½‘å…³"></a><strong>ï¼ˆ3ï¼‰é»˜è®¤ç½‘å…³</strong></h5><ul><li><strong>ä½œç”¨</strong>ï¼šå½“è®¾å¤‡éœ€è¦è®¿é—®å…¶ä»–ç½‘ç»œï¼ˆå¦‚äº’è”ç½‘ï¼‰æ—¶ï¼Œæ•°æ®åŒ…ä¼šå‘é€åˆ°ç½‘å…³ï¼ˆé€šå¸¸æ˜¯è·¯ç”±å™¨ï¼‰ã€‚<ul><li>ç¤ºä¾‹ï¼šå®¶åº­è·¯ç”±å™¨çš„IPé€šå¸¸æ˜¯ <code>192.168.1.1</code>ã€‚</li></ul></li></ul><h5 id="ï¼ˆ4ï¼‰åŠ¨æ€IPï¼ˆDHCPï¼‰"><a href="#ï¼ˆ4ï¼‰åŠ¨æ€IPï¼ˆDHCPï¼‰" class="headerlink" title="ï¼ˆ4ï¼‰åŠ¨æ€IPï¼ˆDHCPï¼‰"></a><strong>ï¼ˆ4ï¼‰åŠ¨æ€IPï¼ˆDHCPï¼‰</strong></h5><ul><li><strong>å·¥ä½œåŸç†</strong>ï¼šè®¾å¤‡å¯åŠ¨æ—¶å‘DHCPæœåŠ¡å™¨ï¼ˆå¦‚è·¯ç”±å™¨ï¼‰è¯·æ±‚IPåœ°å€ï¼Œè‡ªåŠ¨åˆ†é…å¹¶è®¾ç½®å­ç½‘æ©ç ã€ç½‘å…³ç­‰ã€‚</li><li><strong>ä¼˜ç‚¹</strong>ï¼šæ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œé€‚åˆç§»åŠ¨è®¾å¤‡æˆ–ä¸´æ—¶ç½‘ç»œã€‚</li></ul><h5 id="ï¼ˆ5ï¼‰DNSæœåŠ¡å™¨"><a href="#ï¼ˆ5ï¼‰DNSæœåŠ¡å™¨" class="headerlink" title="ï¼ˆ5ï¼‰DNSæœåŠ¡å™¨"></a><strong>ï¼ˆ5ï¼‰DNSæœåŠ¡å™¨</strong></h5><ul><li><strong>ä½œç”¨</strong>ï¼šå°†åŸŸåï¼ˆå¦‚ <code>baidu.com</code>ï¼‰è§£æä¸ºIPåœ°å€ï¼ˆå¦‚ <code>39.156.66.10</code>ï¼‰ã€‚</li><li><strong>å¸¸è§DNS</strong>ï¼š<ul><li><code>8.8.8.8</code>ï¼ˆGoogle Public DNSï¼‰</li><li><code>114.114.114.114</code>ï¼ˆä¸­å›½ç”µä¿¡DNSï¼‰</li></ul></li></ul><hr><h4 id="3-é…ç½®å¯¹æ¯”è¡¨ï¼ˆé™æ€IP-vs-åŠ¨æ€IPï¼‰"><a href="#3-é…ç½®å¯¹æ¯”è¡¨ï¼ˆé™æ€IP-vs-åŠ¨æ€IPï¼‰" class="headerlink" title="3. é…ç½®å¯¹æ¯”è¡¨ï¼ˆé™æ€IP vs åŠ¨æ€IPï¼‰"></a><strong>3. é…ç½®å¯¹æ¯”è¡¨ï¼ˆé™æ€IP vs åŠ¨æ€IPï¼‰</strong></h4><table><thead><tr><th><strong>é…ç½®é¡¹</strong></th><th><strong>é™æ€IP</strong></th><th><strong>åŠ¨æ€IPï¼ˆDHCPï¼‰</strong></th></tr></thead><tbody><tr><td><strong>IPåœ°å€</strong></td><td>æ‰‹åŠ¨æŒ‡å®šï¼ˆå¦‚ <code>192.168.1.100</code>ï¼‰</td><td>ç”±DHCPæœåŠ¡å™¨è‡ªåŠ¨åˆ†é…</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æœåŠ¡å™¨ã€æ‰“å°æœºç­‰éœ€å›ºå®šIPçš„è®¾å¤‡</td><td>æ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘ç­‰ä¸´æ—¶è®¾å¤‡</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>éœ€æ‰‹åŠ¨è®¾ç½®IPã€å­ç½‘æ©ç ã€ç½‘å…³</td><td>è‡ªåŠ¨è·å–ï¼Œæ— éœ€é…ç½®</td></tr><tr><td><strong>ç¨³å®šæ€§</strong></td><td>IPå›ºå®šï¼Œä¸æ˜“å†²çª</td><td>IPå¯èƒ½å˜åŒ–ï¼Œä¾èµ–DHCPæœåŠ¡å™¨</td></tr></tbody></table><hr><h4 id="4-ç¤ºä¾‹å‘½ä»¤ï¼ˆUbuntuï¼‰"><a href="#4-ç¤ºä¾‹å‘½ä»¤ï¼ˆUbuntuï¼‰" class="headerlink" title="4. ç¤ºä¾‹å‘½ä»¤ï¼ˆUbuntuï¼‰"></a><strong>4. ç¤ºä¾‹å‘½ä»¤ï¼ˆUbuntuï¼‰</strong></h4><ul><li><p><strong>æŸ¥çœ‹å½“å‰IPå’Œç½‘å…³</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">ifconfig      <span class="hljs-comment"># æŸ¥çœ‹IPå’Œå­ç½‘æ©ç </span><br>route -n      <span class="hljs-comment"># æŸ¥çœ‹é»˜è®¤ç½‘å…³</span><br><span class="hljs-built_in">cat</span> /etc/resolv.conf  <span class="hljs-comment"># æŸ¥çœ‹DNSæœåŠ¡å™¨</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æµ‹è¯•DNSè§£æ</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ping google.com  <span class="hljs-comment"># æµ‹è¯•DNSæ˜¯å¦æ­£å¸¸å·¥ä½œ</span><br></code></pre></td></tr></table></figure></li></ul><hr><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li>IPåœ°å€æ˜¯è®¾å¤‡çš„â€œé—¨ç‰Œå·â€ï¼Œå­ç½‘æ©ç å†³å®šâ€œå°åŒºèŒƒå›´â€ï¼Œç½‘å…³æ˜¯â€œå°åŒºå‡ºå£â€ï¼ŒDNSæ˜¯â€œç”µè¯ç°¿â€ã€‚</li><li>é™æ€IPé€‚åˆå›ºå®šè®¾å¤‡ï¼ŒåŠ¨æ€IPé€‚åˆç§»åŠ¨è®¾å¤‡ã€‚</li></ul><h2 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h2><ul><li>ç•¥</li></ul><h2 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h2><h3 id="1-ç£ç›˜æ¦‚è¿°"><a href="#1-ç£ç›˜æ¦‚è¿°" class="headerlink" title="1. ç£ç›˜æ¦‚è¿°"></a><strong>1. ç£ç›˜æ¦‚è¿°</strong></h3><ul><li><strong>ç£ç›˜ç±»å‹</strong>ï¼š<ul><li><strong>è½¯ç›˜</strong>ï¼š<code>/dev/fd[01]</code>ï¼ˆå·²æ·˜æ±°ï¼‰</li><li><strong>å…‰ç›˜</strong>ï¼š<code>/dev/cdrom</code>ï¼ˆé€šå¸¸ç¬¦å·é“¾æ¥åˆ° <code>/dev/sr0</code>ï¼‰</li><li><strong>ç¡¬ç›˜</strong>ï¼š<ul><li><strong>IDEç¡¬ç›˜</strong>ï¼š<code>/dev/hd[a-d]</code>ï¼ˆæ—§å¼æ¥å£ï¼Œå·²å°‘è§ï¼‰</li><li><strong>SCSI&#x2F;SATAç¡¬ç›˜</strong>ï¼š<code>/dev/sd[a-z]</code>ï¼ˆç°ä»£ä¸»æµè®¾å¤‡ï¼‰</li></ul></li></ul></li><li><strong>åˆ†åŒºå‘½åè§„åˆ™</strong>ï¼š<ul><li>ä¸»åˆ†åŒºï¼š<code>/dev/sda1</code>ã€<code>/dev/sda2</code>ï¼ˆæœ€å¤š4ä¸ªï¼‰</li><li>æ‰©å±•åˆ†åŒº + é€»è¾‘åˆ†åŒºï¼š<code>/dev/sda5</code>ã€<code>/dev/sda6</code>ï¼ˆä»5å¼€å§‹ç¼–å·ï¼‰</li></ul></li></ul><hr><h3 id="2-ç¡¬ç›˜åˆ†åŒºï¼ˆfdiskï¼‰"><a href="#2-ç¡¬ç›˜åˆ†åŒºï¼ˆfdiskï¼‰" class="headerlink" title="2. ç¡¬ç›˜åˆ†åŒºï¼ˆfdiskï¼‰"></a><strong>2. ç¡¬ç›˜åˆ†åŒºï¼ˆ<code>fdisk</code>ï¼‰</strong></h3><ul><li><strong>åˆ†åŒºè§„åˆ™</strong>ï¼š<ul><li>ä¸€å—ç¡¬ç›˜æœ€å¤šåˆ†4ä¸ª<strong>ä¸»åˆ†åŒº</strong>ï¼Œæˆ– <strong>3ä¸»åˆ†åŒº + 1æ‰©å±•åˆ†åŒº</strong>ï¼ˆæ‰©å±•åˆ†åŒºå¯å†åˆ†å¤šä¸ªé€»è¾‘åˆ†åŒºï¼‰ã€‚</li></ul></li><li><strong>æ“ä½œæ­¥éª¤</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> fdisk /dev/sdb   <span class="hljs-comment"># å¯¹ç¬¬äºŒå—ç¡¬ç›˜åˆ†åŒº</span><br></code></pre></td></tr></table></figure><ul><li>äº¤äº’å‘½ä»¤ï¼š<ul><li><code>n</code>ï¼šæ–°å»ºåˆ†åŒº</li><li><code>d</code>ï¼šåˆ é™¤åˆ†åŒº</li><li><code>p</code>ï¼šæ‰“å°åˆ†åŒºè¡¨</li><li><code>w</code>ï¼šä¿å­˜å¹¶é€€å‡º</li></ul></li></ul></li></ul><hr><h3 id="3-æ ¼å¼åŒ–åˆ†åŒºï¼ˆmkfsï¼‰"><a href="#3-æ ¼å¼åŒ–åˆ†åŒºï¼ˆmkfsï¼‰" class="headerlink" title="3. æ ¼å¼åŒ–åˆ†åŒºï¼ˆmkfsï¼‰"></a><strong>3. æ ¼å¼åŒ–åˆ†åŒºï¼ˆ<code>mkfs</code>ï¼‰</strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ext4ã€NTFSï¼‰ã€‚</li><li><strong>å¸¸ç”¨å‘½ä»¤</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mkfs -t ext4 /dev/sdb1  <span class="hljs-comment"># æ ¼å¼åŒ–ä¸ºext4æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="hljs-built_in">sudo</span> mkfs -t ntfs /dev/sdb2  <span class="hljs-comment"># æ ¼å¼åŒ–ä¸ºNTFSï¼ˆWindowså…¼å®¹ï¼‰</span><br></code></pre></td></tr></table></figure></li><li><strong>å¸¸è§æ–‡ä»¶ç³»ç»Ÿç±»å‹</strong>ï¼š<ul><li><code>ext4</code>ï¼ˆLinuxé»˜è®¤ï¼‰</li><li><code>xfs</code>ï¼ˆé«˜æ€§èƒ½ï¼‰</li><li><code>ntfs</code>&#x2F;<code>fat32</code>ï¼ˆWindowså…¼å®¹ï¼‰</li></ul></li></ul><hr><h3 id="4-æŒ‚è½½ä¸å¸è½½ï¼ˆmount-umountï¼‰"><a href="#4-æŒ‚è½½ä¸å¸è½½ï¼ˆmount-umountï¼‰" class="headerlink" title="4. æŒ‚è½½ä¸å¸è½½ï¼ˆmount&#x2F;umountï¼‰"></a><strong>4. æŒ‚è½½ä¸å¸è½½ï¼ˆ<code>mount</code>&#x2F;<code>umount</code>ï¼‰</strong></h3><ul><li><strong>æŒ‚è½½åˆ†åŒº</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount /dev/sdb1 /mnt/data  <span class="hljs-comment"># å°†åˆ†åŒºæŒ‚è½½åˆ°/mnt/data</span><br></code></pre></td></tr></table></figure><ul><li><strong>è¦æ±‚</strong>ï¼šæŒ‚è½½ç‚¹ç›®å½•éœ€ä¸ºç©ºã€‚</li></ul></li><li><strong>å¸è½½åˆ†åŒº</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> umount /dev/sdb1   <span class="hljs-comment"># é€šè¿‡è®¾å¤‡åå¸è½½</span><br><span class="hljs-built_in">sudo</span> umount /mnt/data   <span class="hljs-comment"># é€šè¿‡æŒ‚è½½ç‚¹å¸è½½</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="5-æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼ˆdf-lsblkï¼‰"><a href="#5-æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼ˆdf-lsblkï¼‰" class="headerlink" title="5. æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼ˆdf&#x2F;lsblkï¼‰"></a><strong>5. æŸ¥çœ‹ç£ç›˜ä¿¡æ¯ï¼ˆ<code>df</code>&#x2F;<code>lsblk</code>ï¼‰</strong></h3><ul><li><strong>æŸ¥çœ‹æŒ‚è½½æƒ…å†µ</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> -h                  <span class="hljs-comment"># æ˜¾ç¤ºç£ç›˜ä½¿ç”¨æƒ…å†µï¼ˆäººç±»å¯è¯»ï¼‰</span><br>lsblk                  <span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å—è®¾å¤‡åŠæŒ‚è½½ç‚¹</span><br></code></pre></td></tr></table></figure></li><li><strong>ç¤ºä¾‹è¾“å‡º</strong>ï¼š<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/dev/</span>sdb1     <span class="hljs-number">20</span>G  <span class="hljs-number">5.0</span>G   <span class="hljs-number">15</span>G  <span class="hljs-number">25</span>% <span class="hljs-regexp">/mnt/</span>data<br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="6-å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨"><a href="#6-å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨" class="headerlink" title="6. å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨"></a><strong>6. å…³é”®å‘½ä»¤é€ŸæŸ¥è¡¨</strong></h3><table><thead><tr><th><strong>æ“ä½œ</strong></th><th><strong>å‘½ä»¤</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>åˆ†åŒºç®¡ç†</td><td><code>sudo fdisk /dev/sdb</code></td><td>äº¤äº’å¼åˆ†åŒºå·¥å…·</td></tr><tr><td>æ ¼å¼åŒ–åˆ†åŒº</td><td><code>sudo mkfs -t ext4 /dev/sdb1</code></td><td>åˆ›å»ºext4æ–‡ä»¶ç³»ç»Ÿ</td></tr><tr><td>æŒ‚è½½åˆ†åŒº</td><td><code>sudo mount /dev/sdb1 /mnt/data</code></td><td>å…³è”åˆ†åŒºä¸ç›®å½•</td></tr><tr><td>å¸è½½åˆ†åŒº</td><td><code>sudo umount /mnt/data</code></td><td>è§£é™¤æŒ‚è½½</td></tr><tr><td>æŸ¥çœ‹ç£ç›˜ç©ºé—´</td><td><code>df -h</code></td><td>æ˜¾ç¤ºå·²æŒ‚è½½åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µ</td></tr><tr><td>æŸ¥çœ‹å—è®¾å¤‡</td><td><code>lsblk</code></td><td>åˆ—å‡ºæ‰€æœ‰ç£ç›˜åŠåˆ†åŒºä¿¡æ¯</td></tr></tbody></table><hr><h3 id="7-æ³¨æ„äº‹é¡¹"><a href="#7-æ³¨æ„äº‹é¡¹" class="headerlink" title="7. æ³¨æ„äº‹é¡¹"></a><strong>7. æ³¨æ„äº‹é¡¹</strong></h3><ol><li><strong>æ•°æ®å®‰å…¨</strong>ï¼šæ“ä½œåˆ†åŒºå‰å¤‡ä»½é‡è¦æ•°æ®ï¼Œ<code>fdisk</code> å’Œ <code>mkfs</code> ä¼šæ¸…é™¤æ•°æ®ï¼</li><li><strong>è‡ªåŠ¨æŒ‚è½½</strong>ï¼šç¼–è¾‘ <code>/etc/fstab</code> å¯å®ç°å¼€æœºè‡ªåŠ¨æŒ‚è½½ã€‚</li><li><strong>æƒé™é—®é¢˜</strong>ï¼šæŒ‚è½½åéœ€ç¡®ä¿ç”¨æˆ·å¯¹ç›®å½•æœ‰è¯»å†™æƒé™ï¼ˆå¦‚ <code>chmod 777 /mnt/data</code>ï¼‰ã€‚</li></ol><p><strong>æ€»ç»“</strong>ï¼š</p><ul><li><strong>åˆ†åŒº</strong> â†’ <strong>æ ¼å¼åŒ–</strong> â†’ <strong>æŒ‚è½½</strong> æ˜¯ç£ç›˜ä½¿ç”¨çš„ä¸‰å¤§æ­¥éª¤ã€‚</li><li><code>fdisk</code> ç”¨äºåˆ†åŒºï¼Œ<code>mkfs</code> ç”¨äºæ ¼å¼åŒ–ï¼Œ<code>mount</code>&#x2F;<code>umount</code> ç”¨äºæŒ‚è½½å’Œå¸è½½ã€‚</li></ul><h2 id="è¿›ç¨‹ç®¡ç†"><a href="#è¿›ç¨‹ç®¡ç†" class="headerlink" title="è¿›ç¨‹ç®¡ç†"></a>è¿›ç¨‹ç®¡ç†</h2><h4 id="1-è¿›ç¨‹æ¦‚è¿°"><a href="#1-è¿›ç¨‹æ¦‚è¿°" class="headerlink" title="1. è¿›ç¨‹æ¦‚è¿°"></a><strong>1. è¿›ç¨‹æ¦‚è¿°</strong></h4><ul><li><strong>è¿›ç¨‹ï¼ˆProcessï¼‰</strong>ï¼š<ul><li>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯ä¸€ä¸ª<strong>æ­£åœ¨è¿è¡Œçš„ç¨‹åº</strong>ï¼ˆä½†ä¸¥æ ¼æ¥è¯´ï¼Œè¿›ç¨‹æ˜¯ç¨‹åºçš„æ‰§è¡Œå®ä¾‹ï¼ŒåŒ…å«ä»£ç ã€æ•°æ®å’Œç³»ç»Ÿèµ„æºï¼‰ã€‚</li><li>åŒ…æ‹¬ï¼š<ul><li><strong>ç³»ç»Ÿæ ¸å¿ƒè¿›ç¨‹</strong>ï¼ˆå¦‚ <code>systemd</code>ã€<code>kthreadd</code>ï¼‰</li><li><strong>ç³»ç»ŸæœåŠ¡è¿›ç¨‹</strong>ï¼ˆå¦‚ <code>sshd</code>ã€<code>nginx</code>ï¼‰</li><li><strong>æ™®é€šç”¨æˆ·è¿›ç¨‹</strong>ï¼ˆå¦‚ <code>bash</code>ã€<code>vim</code>ï¼‰</li></ul></li><li><strong>å¯å¼ºåˆ¶ç»“æŸ</strong>ï¼ˆé€šè¿‡ <code>kill</code> å‘½ä»¤å‘é€ä¿¡å·ï¼‰ã€‚</li></ul></li></ul><hr><h4 id="2-æŸ¥çœ‹è¿›ç¨‹ï¼ˆps-å‘½ä»¤ï¼‰"><a href="#2-æŸ¥çœ‹è¿›ç¨‹ï¼ˆps-å‘½ä»¤ï¼‰" class="headerlink" title="2. æŸ¥çœ‹è¿›ç¨‹ï¼ˆps å‘½ä»¤ï¼‰"></a><strong>2. æŸ¥çœ‹è¿›ç¨‹ï¼ˆ<code>ps</code> å‘½ä»¤ï¼‰</strong></h4><table><thead><tr><th><strong>å‘½ä»¤</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><code>ps</code></td><td>æŸ¥çœ‹å½“å‰ç»ˆç«¯å¯åŠ¨çš„è¿›ç¨‹ï¼ˆä»…å½“å‰ä¼šè¯ï¼‰ã€‚</td></tr><tr><td><code>ps -t ç»ˆç«¯å</code></td><td>æ˜¾ç¤ºæŸä¸ªç»ˆç«¯ï¼ˆå¦‚ <code>pts/0</code>ï¼‰å¯åŠ¨çš„è¿›ç¨‹ã€‚</td></tr><tr><td><code>ps -u ç”¨æˆ·å</code></td><td>æ˜¾ç¤ºæŸä¸ªç”¨æˆ·ï¼ˆå¦‚ <code>root</code>ï¼‰çš„æ‰€æœ‰è¿›ç¨‹ã€‚</td></tr><tr><td><code>ps -e</code></td><td>æ˜¾ç¤º<strong>æ‰€æœ‰è¿›ç¨‹</strong>ï¼ˆåŒ…æ‹¬ç³»ç»Ÿè¿›ç¨‹ï¼‰ã€‚</td></tr><tr><td><code>ps -f</code></td><td>æ˜¾ç¤ºè¿›ç¨‹çš„<strong>å®Œæ•´ä¿¡æ¯</strong>ï¼ˆå¦‚å¯åŠ¨å‘½ä»¤ï¼‰ã€‚</td></tr><tr><td><code>ps â€“ef | grep &#39;xxx&#39;</code></td><td>è¿‡æ»¤ç‰¹å®šè¿›ç¨‹ï¼ˆå¦‚ <code>ps -ef | grep nginx</code>ï¼‰ã€‚</td></tr></tbody></table><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ps -ef | grep sshd  <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰SSHæœåŠ¡è¿›ç¨‹</span><br></code></pre></td></tr></table></figure><hr><h4 id="3-ç»“æŸè¿›ç¨‹ï¼ˆkill-å‘½ä»¤ï¼‰"><a href="#3-ç»“æŸè¿›ç¨‹ï¼ˆkill-å‘½ä»¤ï¼‰" class="headerlink" title="3. ç»“æŸè¿›ç¨‹ï¼ˆkill å‘½ä»¤ï¼‰"></a><strong>3. ç»“æŸè¿›ç¨‹ï¼ˆ<code>kill</code> å‘½ä»¤ï¼‰</strong></h4><ul><li><p><strong>è¯­æ³•</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> [-signal] PID<br></code></pre></td></tr></table></figure><ul><li><code>PID</code>ï¼šè¿›ç¨‹IDï¼ˆé€šè¿‡ <code>ps</code> æˆ– <code>top</code> è·å–ï¼‰ã€‚</li><li><code>-signal</code>ï¼šå‘é€çš„ä¿¡å·ç±»å‹ï¼ˆé»˜è®¤ <code>-15</code>ï¼Œå³ <code>SIGTERM</code>ï¼‰ã€‚</li></ul></li><li><p><strong>å¸¸ç”¨ä¿¡å·</strong>ï¼š</p><table><thead><tr><th><strong>ä¿¡å·</strong></th><th><strong>æ•°å€¼</strong></th><th><strong>ä½œç”¨</strong></th></tr></thead><tbody><tr><td><code>SIGINT</code></td><td><code>2</code></td><td>ä¸­æ–­è¿›ç¨‹ï¼ˆç±»ä¼¼ <code>Ctrl+C</code>ï¼‰ã€‚</td></tr><tr><td><code>SIGTERM</code></td><td><code>15</code></td><td>ä¼˜é›…ç»ˆæ­¢ï¼ˆé»˜è®¤ä¿¡å·ï¼‰ã€‚</td></tr><tr><td><code>SIGKILL</code></td><td><code>9</code></td><td>å¼ºåˆ¶æ€æ­»ï¼ˆæ— æ³•è¢«å¿½ç•¥ï¼‰ã€‚</td></tr></tbody></table></li><li><p><strong>æŸ¥çœ‹æ‰€æœ‰ä¿¡å·</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> -l<br></code></pre></td></tr></table></figure></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">kill</span> -9 1234   <span class="hljs-comment"># å¼ºåˆ¶ç»“æŸPIDä¸º1234çš„è¿›ç¨‹</span><br></code></pre></td></tr></table></figure></li></ul><hr><h4 id="4-å…³é”®ç‚¹æ€»ç»“"><a href="#4-å…³é”®ç‚¹æ€»ç»“" class="headerlink" title="4. å…³é”®ç‚¹æ€»ç»“"></a><strong>4. å…³é”®ç‚¹æ€»ç»“</strong></h4><ol><li><strong>è¿›ç¨‹æ˜¯ç¨‹åºçš„è¿è¡Œå®ä¾‹</strong>ï¼ŒåŒ…å«ç³»ç»Ÿèµ„æºã€‚</li><li><strong><code>ps</code> ç”¨äºæŸ¥çœ‹è¿›ç¨‹</strong>ï¼Œå¸¸ç”¨ç»„åˆ <code>ps -ef</code> + <code>grep</code>ã€‚</li><li><strong><code>kill</code> ç”¨äºç»ˆæ­¢è¿›ç¨‹</strong>ï¼š<ul><li>ä¼˜å…ˆç”¨ <code>-15</code>ï¼ˆ<code>SIGTERM</code>ï¼‰å°è¯•æ­£å¸¸é€€å‡ºã€‚</li><li>è‹¥æ— æ•ˆï¼Œå†ç”¨ <code>-9</code>ï¼ˆ<code>SIGKILL</code>ï¼‰å¼ºåˆ¶ç»“æŸã€‚</li></ul></li><li>**æ…ç”¨ <code>kill -9</code>**ï¼šå¯èƒ½å¯¼è‡´èµ„æºæœªé‡Šæ”¾ï¼ˆå¦‚ä¸´æ—¶æ–‡ä»¶æœªåˆ é™¤ï¼‰ã€‚</li></ol><hr><h4 id="5-æ‰©å±•å‘½ä»¤"><a href="#5-æ‰©å±•å‘½ä»¤" class="headerlink" title="5. æ‰©å±•å‘½ä»¤"></a><strong>5. æ‰©å±•å‘½ä»¤</strong></h4><ul><li>**<code>top</code>&#x2F;<code>htop</code>**ï¼šåŠ¨æ€æŸ¥çœ‹è¿›ç¨‹åŠèµ„æºå ç”¨ã€‚</li><li>**<code>pkill</code>**ï¼šæŒ‰è¿›ç¨‹åç»“æŸï¼ˆå¦‚ <code>pkill -9 nginx</code>ï¼‰ã€‚</li><li>**<code>killall</code>**ï¼šç»“æŸæ‰€æœ‰åŒåè¿›ç¨‹ï¼ˆå¦‚ <code>killall -u git</code>ï¼‰ã€‚</li></ul><hr><p><strong>é™„ï¼šè¿›ç¨‹ç®¡ç†æµç¨‹å›¾</strong></p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7">æŸ¥çœ‹è¿›ç¨‹ â†’ ps -ef | grep <span class="hljs-comment">[è¿›ç¨‹å]</span> â†’ è·å–PID â†’ kill -15 <span class="hljs-comment">[PID]</span> â†’ æ£€æŸ¥æ˜¯å¦ç»“æŸ â†’ è‹¥æœªç»“æŸ â†’ kill -9 <span class="hljs-comment">[PID]</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>UNIX</tag>
      
      <tag>å¤ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UNIXç³»ç»Ÿå¤ä¹ -2</title>
    <link href="/2025/05/30/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/"/>
    <url>/2025/05/30/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-2/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><h1 id="i-èŠ‚ç‚¹"><a href="#i-èŠ‚ç‚¹" class="headerlink" title="i èŠ‚ç‚¹"></a>i èŠ‚ç‚¹</h1><blockquote><p>ç†è§£ i èŠ‚ç‚¹èƒ½å¸®åŠ©ä½ æ›´æ·±å…¥æŒæ¡ Linux æ–‡ä»¶ç³»ç»Ÿçš„å·¥ä½œåŸç†ï¼</p></blockquote><p>åœ¨ Linux&#x2F;Unix æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œ<strong>i èŠ‚ç‚¹ï¼ˆinodeï¼‰</strong> æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå®ƒå­˜å‚¨äº†æ–‡ä»¶çš„<strong>å…ƒæ•°æ®</strong>ï¼ˆmetadataï¼‰ï¼Œä½†&#x3D;&#x3D;ä¸åŒ…å«æ–‡ä»¶åæˆ–æ–‡ä»¶å†…å®¹æœ¬èº«&#x3D;&#x3D;</p><hr><h2 id="1-i-èŠ‚ç‚¹çš„åŸºæœ¬æ¦‚å¿µ"><a href="#1-i-èŠ‚ç‚¹çš„åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1. i èŠ‚ç‚¹çš„åŸºæœ¬æ¦‚å¿µ"></a><strong>1. i èŠ‚ç‚¹çš„åŸºæœ¬æ¦‚å¿µ</strong></h2><h3 id="ï¼ˆ1ï¼‰æ–‡ä»¶çš„ç»„æˆ"><a href="#ï¼ˆ1ï¼‰æ–‡ä»¶çš„ç»„æˆ" class="headerlink" title="ï¼ˆ1ï¼‰æ–‡ä»¶çš„ç»„æˆ"></a><strong>ï¼ˆ1ï¼‰æ–‡ä»¶çš„ç»„æˆ</strong></h3><p>æ¯ä¸ªæ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ç”± <strong>3 éƒ¨åˆ†</strong>ç»„æˆï¼š</p><ol><li><strong>æ–‡ä»¶å</strong>ï¼ˆFile Nameï¼‰ï¼šç”¨æˆ·å¯è§çš„åç§°ï¼ˆå¦‚ <code>file1</code>ï¼‰ã€‚</li><li><strong>i èŠ‚ç‚¹</strong>ï¼ˆinodeï¼‰ï¼šå­˜å‚¨æ–‡ä»¶çš„å…ƒæ•°æ®ï¼ˆæƒé™ã€æ‰€æœ‰è€…ã€æ—¶é—´æˆ³ã€æ•°æ®å—ä½ç½®ç­‰ï¼‰ã€‚</li><li><strong>æ–‡ä»¶å†…å®¹</strong>ï¼ˆData Blocksï¼‰ï¼šå®é™…å­˜å‚¨æ–‡ä»¶æ•°æ®çš„ç£ç›˜å—ã€‚</li></ol><h3 id="ï¼ˆ2ï¼‰æŸ¥çœ‹æ–‡ä»¶çš„-i-èŠ‚ç‚¹"><a href="#ï¼ˆ2ï¼‰æŸ¥çœ‹æ–‡ä»¶çš„-i-èŠ‚ç‚¹" class="headerlink" title="ï¼ˆ2ï¼‰æŸ¥çœ‹æ–‡ä»¶çš„ i èŠ‚ç‚¹"></a><strong>ï¼ˆ2ï¼‰æŸ¥çœ‹æ–‡ä»¶çš„ i èŠ‚ç‚¹</strong></h3><p>ä½¿ç”¨ <code>ls -il</code> å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„ i èŠ‚ç‚¹ç¼–å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span> -il<br>1234567 -rw-r--r-- 1 user group 1024 Jan 1 10:00 file1<br></code></pre></td></tr></table></figure><ul><li><strong><code>1234567</code></strong> æ˜¯ <code>file1</code> çš„ i èŠ‚ç‚¹ç¼–å·ã€‚</li><li>å…¶ä»–ä¿¡æ¯ï¼ˆæƒé™ã€æ‰€æœ‰è€…ã€å¤§å°ã€æ—¶é—´ç­‰ï¼‰å‡å­˜å‚¨åœ¨ i èŠ‚ç‚¹ä¸­ã€‚</li></ul><hr><h2 id="2-i-èŠ‚ç‚¹ä¸­å­˜å‚¨çš„ä¿¡æ¯"><a href="#2-i-èŠ‚ç‚¹ä¸­å­˜å‚¨çš„ä¿¡æ¯" class="headerlink" title="2. i èŠ‚ç‚¹ä¸­å­˜å‚¨çš„ä¿¡æ¯"></a><strong>2. i èŠ‚ç‚¹ä¸­å­˜å‚¨çš„ä¿¡æ¯</strong></h2><p>æ¯ä¸ª i èŠ‚ç‚¹åŒ…å«ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼ˆé€šè¿‡ <code>stat</code> å‘½ä»¤å¯æŸ¥çœ‹ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">stat</span> file1<br>  File: file1<br>  Size: 1024        Blocks: 8          IO Block: 4096   regular file<br>Device: 801h/2049d  Inode: 1234567     Links: 1<br>Access: 2024-01-01 10:00:00.000000000 +0800<br>Modify: 2024-01-01 10:00:00.000000000 +0800<br>Change: 2024-01-01 10:00:00.000000000 +0800<br> Birth: -<br></code></pre></td></tr></table></figure><table><thead><tr><th>å­—æ®µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Inode ç¼–å·</strong></td><td>æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ <code>1234567</code>ï¼‰ã€‚</td></tr><tr><td><strong>æ–‡ä»¶ç±»å‹</strong></td><td>æ™®é€šæ–‡ä»¶ã€ç›®å½•ã€ç¬¦å·é“¾æ¥ç­‰ã€‚</td></tr><tr><td><strong>æƒé™ï¼ˆModeï¼‰</strong></td><td>å¦‚ <code>-rw-r--r--</code>ï¼ˆå¯¹åº”æ•°å­— <code>644</code>ï¼‰ã€‚</td></tr><tr><td><strong>æ‰€æœ‰è€…ï¼ˆUIDï¼‰</strong></td><td>æ–‡ä»¶å±ä¸»çš„ç”¨æˆ· IDã€‚</td></tr><tr><td><strong>æ‰€å±ç»„ï¼ˆGIDï¼‰</strong></td><td>æ–‡ä»¶å±ç»„çš„ç»„ IDã€‚</td></tr><tr><td><strong>ç¡¬é“¾æ¥æ•°ï¼ˆLinksï¼‰</strong></td><td>æŒ‡å‘è¯¥ i èŠ‚ç‚¹çš„æ–‡ä»¶åæ•°é‡ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚</td></tr><tr><td><strong>æ–‡ä»¶å¤§å°</strong></td><td>å­—èŠ‚æ•°ï¼ˆå¦‚ <code>1024</code>ï¼‰ã€‚</td></tr><tr><td><strong>æ—¶é—´æˆ³</strong></td><td>è®¿é—®æ—¶é—´ï¼ˆ<code>atime</code>ï¼‰ã€ä¿®æ”¹æ—¶é—´ï¼ˆ<code>mtime</code>ï¼‰ã€çŠ¶æ€å˜æ›´æ—¶é—´ï¼ˆ<code>ctime</code>ï¼‰ã€‚</td></tr><tr><td><strong>æ•°æ®å—ä½ç½®</strong></td><td>æ–‡ä»¶å†…å®¹å­˜å‚¨åœ¨ç£ç›˜çš„å“ªäº›å—ä¸­ã€‚</td></tr></tbody></table><hr><h2 id="3-ç¡¬é“¾æ¥ï¼ˆHard-Linkï¼‰ä¸-i-èŠ‚ç‚¹çš„å…³ç³»"><a href="#3-ç¡¬é“¾æ¥ï¼ˆHard-Linkï¼‰ä¸-i-èŠ‚ç‚¹çš„å…³ç³»" class="headerlink" title="3. ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ä¸ i èŠ‚ç‚¹çš„å…³ç³»"></a><strong>3. ç¡¬é“¾æ¥ï¼ˆHard Linkï¼‰ä¸ i èŠ‚ç‚¹çš„å…³ç³»</strong></h2><h3 id="ï¼ˆ1ï¼‰åˆ›å»ºç¡¬é“¾æ¥"><a href="#ï¼ˆ1ï¼‰åˆ›å»ºç¡¬é“¾æ¥" class="headerlink" title="ï¼ˆ1ï¼‰åˆ›å»ºç¡¬é“¾æ¥"></a><strong>ï¼ˆ1ï¼‰åˆ›å»ºç¡¬é“¾æ¥</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ln</span> file1 file2  <span class="hljs-comment"># ä¸º file1 çš„ i èŠ‚ç‚¹å¢åŠ ä¸€ä¸ªæ–°æ–‡ä»¶å file2</span><br></code></pre></td></tr></table></figure><ul><li><strong>æœ¬è´¨</strong>ï¼š<code>file1</code> å’Œ <code>file2</code> æŒ‡å‘åŒä¸€ä¸ª i èŠ‚ç‚¹ï¼ˆå¦‚ <code>1234567</code>ï¼‰ã€‚</li><li><strong>æ•ˆæœ</strong>ï¼š<ul><li>i èŠ‚ç‚¹çš„ <strong>ç¡¬é“¾æ¥è®¡æ•°ï¼ˆLinksï¼‰</strong> ä» <code>1</code> å˜ä¸º <code>2</code>ã€‚</li><li><strong>ä¿®æ”¹ <code>file1</code> æˆ– <code>file2</code> ä¼šåŒæ­¥æ›´æ”¹æ–‡ä»¶å†…å®¹ï¼ˆå› ä¸ºæŒ‡å‘åŒä¸€æ•°æ®å—ï¼‰</strong>ï¼ï¼ï¼</li></ul></li></ul><h3 id="ï¼ˆ2ï¼‰åˆ é™¤ç¡¬é“¾æ¥"><a href="#ï¼ˆ2ï¼‰åˆ é™¤ç¡¬é“¾æ¥" class="headerlink" title="ï¼ˆ2ï¼‰åˆ é™¤ç¡¬é“¾æ¥"></a><strong>ï¼ˆ2ï¼‰åˆ é™¤ç¡¬é“¾æ¥</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">rm</span> file2  <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶å file2</span><br></code></pre></td></tr></table></figure><ul><li><strong>æœ¬è´¨</strong>ï¼šä»…åˆ é™¤ <code>file2</code> è¿™ä¸ªæ–‡ä»¶åï¼Œi èŠ‚ç‚¹ï¼ˆ<code>1234567</code>ï¼‰å’Œæ•°æ®å—ä»å­˜åœ¨ã€‚</li><li><strong>æ•ˆæœ</strong>ï¼š<ul><li>i èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•°ä» <code>2</code> å˜å› <code>1</code>ï¼ˆ<code>file1</code> ä»æŒ‡å‘å®ƒï¼‰ã€‚</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">rm</span> file1  <span class="hljs-comment"># åˆ é™¤æœ€åä¸€ä¸ªæ–‡ä»¶å file1</span><br></code></pre></td></tr></table></figure><ul><li><strong>æœ¬è´¨</strong>ï¼ši èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•°é™ä¸º <code>0</code>ï¼Œç³»ç»Ÿè‡ªåŠ¨å›æ”¶è¯¥ i èŠ‚ç‚¹åŠå…¶æ•°æ®å—ã€‚</li></ul><hr><h2 id="4-i-èŠ‚ç‚¹-vs-æ–‡ä»¶å"><a href="#4-i-èŠ‚ç‚¹-vs-æ–‡ä»¶å" class="headerlink" title="4. i èŠ‚ç‚¹ vs æ–‡ä»¶å"></a><strong>4. i èŠ‚ç‚¹ vs æ–‡ä»¶å</strong></h2><table><thead><tr><th>è¡Œä¸º</th><th>å¯¹ i èŠ‚ç‚¹çš„å½±å“</th></tr></thead><tbody><tr><td><strong>åˆ›å»ºæ–‡ä»¶</strong></td><td>åˆ†é…ä¸€ä¸ªç©ºé—² i èŠ‚ç‚¹ï¼Œåˆå§‹åŒ–å…ƒæ•°æ®ï¼Œç¡¬é“¾æ¥è®¡æ•°è®¾ä¸º <code>1</code>ã€‚</td></tr><tr><td><strong>åˆ›å»ºç¡¬é“¾æ¥</strong></td><td>i èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•° <code>+1</code>ï¼ˆå¤šä¸ªæ–‡ä»¶åå…±äº«åŒä¸€ i èŠ‚ç‚¹ï¼‰ã€‚</td></tr><tr><td><strong>åˆ é™¤æ–‡ä»¶</strong></td><td>i èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•° <code>-1</code>ï¼›è‹¥è®¡æ•°ä¸º <code>0</code>ï¼Œåˆ™é‡Šæ”¾ i èŠ‚ç‚¹å’Œæ•°æ®å—ã€‚</td></tr><tr><td><strong>ä¿®æ”¹æ–‡ä»¶å†…å®¹</strong></td><td>æ›´æ–° i èŠ‚ç‚¹ä¸­çš„ <code>mtime</code> å’Œ <code>ctime</code>ï¼Œä½† i èŠ‚ç‚¹ç¼–å·ä¸å˜ã€‚</td></tr><tr><td><strong>é‡å‘½åæ–‡ä»¶</strong></td><td>ä»…ä¿®æ”¹æ–‡ä»¶åè®°å½•ï¼Œä¸å½±å“ i èŠ‚ç‚¹ã€‚</td></tr></tbody></table><hr><h2 id="5-å…³é”®ç»“è®º"><a href="#5-å…³é”®ç»“è®º" class="headerlink" title="5. å…³é”®ç»“è®º"></a><strong>5. å…³é”®ç»“è®º</strong></h2><ol><li><strong>i èŠ‚ç‚¹æ˜¯æ–‡ä»¶çš„å”¯ä¸€æ ‡è¯†</strong><ul><li><strong>æ–‡ä»¶ååªæ˜¯ i èŠ‚ç‚¹çš„â€œåˆ«åâ€ï¼ŒåŒä¸€ä¸ªæ–‡ä»¶å¯ä»¥æœ‰å¤šä¸ªæ–‡ä»¶åï¼ˆç¡¬é“¾æ¥ï¼‰</strong></li></ul></li><li><strong>åˆ é™¤æ–‡ä»¶çš„å®é™…è¿‡ç¨‹</strong><ul><li><code>rm</code> åªæ˜¯å‡å°‘ i èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•°ï¼Œè®¡æ•°ä¸º <code>0</code> æ—¶æ‰ä¼šçœŸæ­£åˆ é™¤æ–‡ä»¶ã€‚</li></ul></li><li><strong>ç¡¬é“¾æ¥çš„é™åˆ¶</strong><ul><li>ä¸èƒ½è·¨æ–‡ä»¶ç³»ç»Ÿï¼ˆå› ä¸º i èŠ‚ç‚¹ç¼–å·ä»…åœ¨åŒä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿå†…å”¯ä¸€ï¼‰ã€‚</li><li>ä¸èƒ½å¯¹ç›®å½•åˆ›å»ºç¡¬é“¾æ¥ï¼ˆé˜²æ­¢å¾ªç¯å¼•ç”¨å¯¼è‡´æ–‡ä»¶ç³»ç»Ÿæ··ä¹±ï¼‰ã€‚</li></ul></li></ol><hr><h2 id="6-æ‰©å±•å‘½ä»¤"><a href="#6-æ‰©å±•å‘½ä»¤" class="headerlink" title="6. æ‰©å±•å‘½ä»¤"></a><strong>6. æ‰©å±•å‘½ä»¤</strong></h2><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>ls -i</code></td><td>æ˜¾ç¤ºæ–‡ä»¶çš„ i èŠ‚ç‚¹ç¼–å·ã€‚</td></tr><tr><td><code>df -i</code></td><td>æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿçš„ i èŠ‚ç‚¹ä½¿ç”¨æƒ…å†µã€‚</td></tr><tr><td><code>find / -inum 1234</code></td><td>é€šè¿‡ i èŠ‚ç‚¹ç¼–å·æŸ¥æ‰¾æ–‡ä»¶ã€‚</td></tr></tbody></table><hr><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><ul><li><strong>i èŠ‚ç‚¹æ˜¯æ–‡ä»¶çš„â€œèº«ä»½è¯â€</strong>ï¼Œå­˜å‚¨å…ƒæ•°æ®ä½†ä¸å«æ–‡ä»¶åæˆ–å†…å®¹ã€‚</li><li><strong>ç¡¬é“¾æ¥</strong>æ˜¯å¤šä¸ªæ–‡ä»¶åå…±äº«åŒä¸€ i èŠ‚ç‚¹ï¼Œ<strong>è½¯é“¾æ¥ï¼ˆç¬¦å·é“¾æ¥ï¼‰</strong>åˆ™æ˜¯&#x3D;&#x3D;ç‹¬ç«‹çš„æ–‡ä»¶ï¼ˆæœ‰è‡ªå·±çš„ i èŠ‚ç‚¹ï¼‰,å­˜å‚¨ç›®æ ‡æ–‡ä»¶çš„è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰&#x3D;&#x3D;</li><li>æ–‡ä»¶åˆ é™¤çš„æœ¬è´¨æ˜¯ <strong>å‡å°‘ i èŠ‚ç‚¹çš„ç¡¬é“¾æ¥è®¡æ•°</strong>ï¼Œè®¡æ•°å½’é›¶åç³»ç»Ÿæ‰ä¼šå›æ”¶èµ„æºã€‚</li></ul><h1 id="æ–‡ä»¶ç¼–è¾‘ä¸æµå¤„ç†"><a href="#æ–‡ä»¶ç¼–è¾‘ä¸æµå¤„ç†" class="headerlink" title="æ–‡ä»¶ç¼–è¾‘ä¸æµå¤„ç†"></a>æ–‡ä»¶ç¼–è¾‘ä¸æµå¤„ç†</h1><h2 id="edç¼–è¾‘å™¨"><a href="#edç¼–è¾‘å™¨" class="headerlink" title="edç¼–è¾‘å™¨"></a>edç¼–è¾‘å™¨</h2><p><code>ed</code> æ˜¯ Unix å†å²ä¸Šçš„é‡Œç¨‹ç¢‘å¼è¡Œç¼–è¾‘å™¨ï¼Œç”± Ken Thompson åœ¨ 1970 å¹´å¼€å‘ï¼Œå…¶è®¾è®¡å“²å­¦æ·±åˆ»å½±å“äº†åç»­å·¥å…·ï¼ˆå¦‚ <code>sed</code>ã€<code>vim</code>ï¼‰ã€‚ä»¥ä¸‹æ˜¯ç»“åˆæ‚¨æä¾›çš„èµ„æ–™çš„ç³»ç»Ÿæ€§æ€»ç»“ï¼š</p><hr><h3 id="ä¸€ã€ed-çš„æ ¸å¿ƒä¼˜åŠ¿"><a href="#ä¸€ã€ed-çš„æ ¸å¿ƒä¼˜åŠ¿" class="headerlink" title="ä¸€ã€ed çš„æ ¸å¿ƒä¼˜åŠ¿"></a><strong>ä¸€ã€ed çš„æ ¸å¿ƒä¼˜åŠ¿</strong></h3><ol><li><p><strong>æç®€ä¸»ä¹‰</strong></p><ul><li>ä»…éœ€ <strong>å‡  KB å†…å­˜</strong> å³å¯è¿è¡Œï¼Œé€‚åˆæ•‘æ´æ¨¡å¼æˆ–åµŒå…¥å¼ç³»ç»Ÿã€‚</li><li>æ— å›¾å½¢ç•Œé¢ï¼Œæ‰€æœ‰æ“ä½œé€šè¿‡<strong>å‘½ä»¤é©±åŠ¨</strong>ï¼Œå¯é€šè¿‡ç®¡é“è„šæœ¬åŒ–ç¼–è¾‘ã€‚</li></ul></li><li><p><strong>æ­£åˆ™è¡¨è¾¾å¼å…ˆé©±</strong></p><ul><li>å…¶æ­£åˆ™è¯­æ³•ï¼ˆå¦‚ <code>s/old/new/</code>ï¼‰è¢« <code>sed</code>ã€<code>grep</code>ã€<code>perl</code> ç­‰å·¥å…·ç»§æ‰¿ï¼Œæˆä¸ºä¸šç•Œæ ‡å‡†ã€‚</li></ul></li><li><p><strong>é«˜æ•ˆå¤„ç†</strong></p><ul><li>ç›´æ¥æŒ‰è¡Œæ“ä½œï¼Œé¿å…å…¨æ–‡ä»¶åŠ è½½ï¼Œå¤„ç†å¤§æ–‡ä»¶æ—¶é€Ÿåº¦æ˜¾è‘—ä¼˜äºç°ä»£ç¼–è¾‘å™¨ã€‚</li></ul></li></ol><hr><h3 id="äºŒã€æ ¸å¿ƒå‘½ä»¤è¯¦è§£ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰"><a href="#äºŒã€æ ¸å¿ƒå‘½ä»¤è¯¦è§£ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰" class="headerlink" title="äºŒã€æ ¸å¿ƒå‘½ä»¤è¯¦è§£ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰"></a><strong>äºŒã€æ ¸å¿ƒå‘½ä»¤è¯¦è§£ï¼ˆæŒ‰åŠŸèƒ½åˆ†ç±»ï¼‰</strong></h3><h4 id="1-å¯¼èˆªä¸æ˜¾ç¤º"><a href="#1-å¯¼èˆªä¸æ˜¾ç¤º" class="headerlink" title="1. å¯¼èˆªä¸æ˜¾ç¤º"></a><strong>1. å¯¼èˆªä¸æ˜¾ç¤º</strong></h4><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>n</code></td><td>è·³è½¬åˆ°ç¬¬ n è¡Œ</td><td><code>5</code> â†’ è·³è½¬åˆ°ç¬¬ 5 è¡Œ</td></tr><tr><td><code>.+3</code></td><td>ç›¸å¯¹è¡Œå·ï¼ˆå½“å‰è¡Œ+3ï¼‰</td><td><code>.,.+5p</code> â†’ æ˜¾ç¤ºåç»­ 5 è¡Œ</td></tr><tr><td><code>$</code></td><td>æœ€åä¸€è¡Œ</td><td><code>$p</code> â†’ æ˜¾ç¤ºæœ«è¡Œ</td></tr><tr><td><code>,p</code></td><td>æ˜¾ç¤ºå…¨éƒ¨å†…å®¹</td><td><code>1,$p</code> ç­‰æ•ˆ</td></tr></tbody></table><h4 id="2-ç¼–è¾‘æ“ä½œ"><a href="#2-ç¼–è¾‘æ“ä½œ" class="headerlink" title="2. ç¼–è¾‘æ“ä½œ"></a><strong>2. ç¼–è¾‘æ“ä½œ</strong></h4><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>ç»“æŸç¬¦</th></tr></thead><tbody><tr><td><code>a</code></td><td>å½“å‰è¡Œåè¿½åŠ </td><td>ç‹¬å ä¸€è¡Œçš„ <code>.</code></td></tr><tr><td><code>i</code></td><td>å½“å‰è¡Œå‰æ’å…¥</td><td>åŒä¸Š</td></tr><tr><td><code>m,nd</code></td><td>åˆ é™¤ m åˆ° n è¡Œ</td><td>æ— </td></tr><tr><td><code>u</code></td><td>æ’¤é”€æœ€åä¸€æ¬¡ç¼–è¾‘</td><td>ä»…æ”¯æŒä¸€çº§æ’¤é”€</td></tr></tbody></table><h4 id="3-æœç´¢ä¸æ›¿æ¢"><a href="#3-æœç´¢ä¸æ›¿æ¢" class="headerlink" title="3. æœç´¢ä¸æ›¿æ¢"></a><strong>3. æœç´¢ä¸æ›¿æ¢</strong></h4><table><thead><tr><th>å‘½ä»¤</th><th>å…³é”®ç»†èŠ‚</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>/pattern/</code></td><td>å‘åæœç´¢ï¼Œå¾ªç¯è‡³æ–‡ä»¶å°¾</td><td><code>/main/</code> â†’ è·³è½¬åˆ°ä¸‹ä¸€ä¸ª â€œmainâ€</td></tr><tr><td><code>?pattern?</code></td><td>å‘å‰æœç´¢ï¼Œå¾ªç¯è‡³æ–‡ä»¶å¤´</td><td><code>?int?</code> â†’ å‘ä¸Šæ‰¾ â€œintâ€</td></tr><tr><td><code>s/old/new/[g]</code></td><td><code>g</code> è¡¨ç¤ºå…¨å±€æ›¿æ¢</td><td><code>s/cat/dog/g</code> â†’ æ›¿æ¢æ‰€æœ‰ â€œcatâ€</td></tr><tr><td><code>&amp;</code> å ä½ç¬¦</td><td>å¼•ç”¨åŒ¹é…çš„æ–‡æœ¬</td><td><code>s/big/very &amp;/</code> â†’ â€œbigâ€ â†’ â€œvery bigâ€</td></tr></tbody></table><h4 id="4-æ–‡ä»¶æ“ä½œ"><a href="#4-æ–‡ä»¶æ“ä½œ" class="headerlink" title="4. æ–‡ä»¶æ“ä½œ"></a><strong>4. æ–‡ä»¶æ“ä½œ</strong></h4><table><thead><tr><th>å‘½ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>w [file]</code></td><td>ä¿å­˜ï¼ˆå¯å¦å­˜ä¸ºï¼‰</td></tr><tr><td><code>q</code></td><td>å®‰å…¨é€€å‡ºï¼ˆæœªä¿å­˜æ—¶æç¤ºï¼‰</td></tr><tr><td><code>Q</code></td><td>å¼ºåˆ¶é€€å‡ºï¼ˆä¸ä¿å­˜ï¼‰</td></tr><tr><td><code>!cmd</code></td><td>ä¸´æ—¶æ‰§è¡Œ shell å‘½ä»¤ï¼ˆå¦‚ <code>!ls</code>ï¼‰</td></tr></tbody></table><hr><h3 id="ä¸‰ã€ç»å…¸ä½¿ç”¨åœºæ™¯"><a href="#ä¸‰ã€ç»å…¸ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä¸‰ã€ç»å…¸ä½¿ç”¨åœºæ™¯"></a><strong>ä¸‰ã€ç»å…¸ä½¿ç”¨åœºæ™¯</strong></h3><h4 id="1-è„šæœ¬åŒ–ç¼–è¾‘"><a href="#1-è„šæœ¬åŒ–ç¼–è¾‘" class="headerlink" title="1. è„šæœ¬åŒ–ç¼–è¾‘"></a><strong>1. è„šæœ¬åŒ–ç¼–è¾‘</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># é€šè¿‡ç®¡é“æ‰¹é‡æ›¿æ¢æ–‡ä»¶å†…å®¹</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;1,\$s/foo/bar/g\nwq&quot;</span> | ed file.txt<br></code></pre></td></tr></table></figure><h4 id="2-ç²¾å‡†è¡Œæ“ä½œ"><a href="#2-ç²¾å‡†è¡Œæ“ä½œ" class="headerlink" title="2. ç²¾å‡†è¡Œæ“ä½œ"></a><strong>2. ç²¾å‡†è¡Œæ“ä½œ</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># åˆ é™¤åŒ…å« &quot;debug&quot; çš„è¡ŒåŠå…¶å 2 è¡Œ</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;/debug/,+2d\nwq&quot;</span> | ed log.txt<br></code></pre></td></tr></table></figure><h4 id="3-æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•"><a href="#3-æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•" class="headerlink" title="3. æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•"></a><strong>3. æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•</strong></h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># æµ‹è¯•æ­£åˆ™åŒ¹é…èŒƒå›´ï¼ˆæ˜¾ç¤ºé¦–æ¬¡ &quot;error&quot; åˆ°æ–‡ä»¶æœ«å°¾ï¼‰</span><br><span class="hljs-built_in">echo</span> -e <span class="hljs-string">&quot;/error/,\$p\nq&quot;</span> | ed app.log<br></code></pre></td></tr></table></figure><hr><h3 id="å››ã€ä¸ç°ä»£å·¥å…·å¯¹æ¯”"><a href="#å››ã€ä¸ç°ä»£å·¥å…·å¯¹æ¯”" class="headerlink" title="å››ã€ä¸ç°ä»£å·¥å…·å¯¹æ¯”"></a><strong>å››ã€ä¸ç°ä»£å·¥å…·å¯¹æ¯”</strong></h3><table><thead><tr><th>ç‰¹æ€§</th><th><code>ed</code></th><th><code>sed</code>&#x2F;<code>vim</code></th></tr></thead><tbody><tr><td><strong>äº¤äº’æ€§</strong></td><td>æä½ï¼ˆçº¯å‘½ä»¤ï¼‰</td><td>ä¸­&#x2F;é«˜</td></tr><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>é™¡å³­</td><td>ä¸­ç­‰</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>è„šæœ¬åŒ–ã€æ•‘æ´æ¨¡å¼</td><td>æ—¥å¸¸ç¼–è¾‘</td></tr><tr><td><strong>æ­£åˆ™æ”¯æŒ</strong></td><td>åŸºç¡€</td><td>æ‰©å±•ï¼ˆå¦‚ <code>\d</code>ï¼‰</td></tr></tbody></table><hr><h3 id="äº”ã€æ“ä½œæµç¨‹å›¾è§£"><a href="#äº”ã€æ“ä½œæµç¨‹å›¾è§£" class="headerlink" title="äº”ã€æ“ä½œæµç¨‹å›¾è§£"></a><strong>äº”ã€æ“ä½œæµç¨‹å›¾è§£</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">å¯åŠ¨ ed â†’ [å‘½ä»¤æ¨¡å¼] <br>  â”œâ”€ å¯¼èˆª (n, $, .) <br>  â”œâ”€ ç¼–è¾‘ (a/i, d, s) <br>  â”œâ”€ æœç´¢ (/pattern/, ?pattern?) <br>  â””â”€ ä¿å­˜é€€å‡º (wq)<br></code></pre></td></tr></table></figure><hr><h3 id="å…­ã€ä¸ºä»€ä¹ˆä»Šå¤©ä»å€¼å¾—äº†è§£ï¼Ÿ"><a href="#å…­ã€ä¸ºä»€ä¹ˆä»Šå¤©ä»å€¼å¾—äº†è§£ï¼Ÿ" class="headerlink" title="å…­ã€ä¸ºä»€ä¹ˆä»Šå¤©ä»å€¼å¾—äº†è§£ï¼Ÿ"></a><strong>å…­ã€ä¸ºä»€ä¹ˆä»Šå¤©ä»å€¼å¾—äº†è§£ï¼Ÿ</strong></h3><ol><li><strong>ç†è§£ Unix å“²å­¦</strong>ï¼š<code>ed</code> æ˜¯â€œå·¥å…·é“¾ç»„åˆâ€æ€æƒ³çš„å…¸èŒƒï¼ˆä¸ <code>grep</code>ã€<code>awk</code> ååŒï¼‰ã€‚</li><li><strong>åº”æ€¥ä¿®å¤</strong>ï¼šå½“ç³»ç»Ÿä»…å‰© <code>/bin/ed</code> å¯ç”¨æ—¶ï¼Œå®ƒæ˜¯æœ€åçš„ç¼–è¾‘æ‰‹æ®µã€‚</li><li><strong>å†å²æ•™è‚²</strong>ï¼šé€šè¿‡ <code>ed</code> å¯ç›´è§‚çœ‹åˆ°ç°ä»£ç¼–è¾‘å™¨çš„æ¼”è¿›è·¯å¾„ã€‚</li></ol><p>è‹¥éœ€å¿«é€Ÿä¸Šæ‰‹å®ç”¨ç¼–è¾‘ï¼Œæ¨è <code>nano</code> æˆ– <code>vim</code>ï¼›ä½†æŒæ¡ <code>ed</code> å¦‚åŒå­¦ä¹ æ±‡ç¼–è¯­è¨€ï¼Œèƒ½åŠ æ·±å¯¹è®¡ç®—æœ¬è´¨çš„ç†è§£ã€‚</p><h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="ed-æ­£åˆ™è¡¨è¾¾å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹"><a href="#ed-æ­£åˆ™è¡¨è¾¾å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹" class="headerlink" title="ed æ­£åˆ™è¡¨è¾¾å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹"></a><strong>ed æ­£åˆ™è¡¨è¾¾å¼æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong></h3><hr><h4 id="1-å…ƒå­—ç¬¦ä¸è½¬ä¹‰"><a href="#1-å…ƒå­—ç¬¦ä¸è½¬ä¹‰" class="headerlink" title="1. å…ƒå­—ç¬¦ä¸è½¬ä¹‰"></a><strong>1. å…ƒå­—ç¬¦ä¸è½¬ä¹‰</strong></h4><table><thead><tr><th>è¯­æ³•</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>æ™®é€šå­—ç¬¦</code></td><td>åŒ¹é…è‡ªèº«ï¼ˆå¦‚ <code>a</code>ã€<code>1</code>ï¼‰</td><td><code>cat</code> â†’ åŒ¹é… â€œcatâ€</td></tr><tr><td><code>\c</code></td><td>å–æ¶ˆå­—ç¬¦ <code>c</code> çš„ç‰¹æ®Šæ„ä¹‰</td><td><code>\*</code> â†’ åŒ¹é…å­—é¢ <code>*</code></td></tr><tr><td><code>^</code></td><td><strong>è¡Œé¦–</strong>ï¼ˆä»…æ¨¡å¼èµ·å§‹å¤„æœ‰æ•ˆï¼‰</td><td><code>^hello</code> â†’ è¡Œé¦–çš„ â€œhelloâ€</td></tr><tr><td><code>$</code></td><td><strong>è¡Œå°¾</strong>ï¼ˆä»…æ¨¡å¼ç»“æŸå¤„æœ‰æ•ˆï¼‰</td><td><code>end$</code> â†’ è¡Œå°¾çš„ â€œendâ€</td></tr><tr><td><code>.</code></td><td>åŒ¹é…<strong>ä»»æ„å•ä¸ªå­—ç¬¦</strong></td><td><code>a.c</code> â†’ â€œabcâ€, â€œa câ€</td></tr></tbody></table><hr><h4 id="2-å­—ç¬¦ç±»"><a href="#2-å­—ç¬¦ç±»" class="headerlink" title="2. å­—ç¬¦ç±»"></a><strong>2. å­—ç¬¦ç±»</strong></h4><table><thead><tr><th>è¯­æ³•</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>[...]</code></td><td>åŒ¹é…æ‹¬å·å†…<strong>ä»»ä¸€å­—ç¬¦</strong></td><td><code>[aeiou]</code> â†’ ä»»æ„å…ƒéŸ³</td></tr><tr><td><code>[^...]</code></td><td>åŒ¹é…<strong>ä¸åœ¨</strong>æ‹¬å·å†…çš„å­—ç¬¦</td><td><code>[^0-9]</code> â†’ éæ•°å­—</td></tr><tr><td><code>[a-z]</code></td><td>å­—ç¬¦èŒƒå›´ï¼ˆæ”¯æŒè¿å­—ç¬¦ <code>-</code>ï¼‰</td><td><code>[A-Z]</code> â†’ å¤§å†™å­—æ¯</td></tr></tbody></table><hr><h4 id="3-é‡å¤ä¸åˆ†ç»„"><a href="#3-é‡å¤ä¸åˆ†ç»„" class="headerlink" title="3. é‡å¤ä¸åˆ†ç»„"></a><strong>3. é‡å¤ä¸åˆ†ç»„</strong></h4><table><thead><tr><th>è¯­æ³•</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>r*</code></td><td><strong>0 æ¬¡æˆ–å¤šæ¬¡</strong>åŒ¹é… <code>r</code></td><td><code>a*</code> â†’ â€œâ€, â€œaâ€, â€œaaâ€</td></tr><tr><td><code>.*</code></td><td>åŒ¹é…<strong>ä»»æ„é•¿åº¦å­—ç¬¦ä¸²</strong></td><td><code>^a.*z$</code> â†’ â€œaå¼€å¤´åˆ°zç»“å°¾çš„æ•´è¡Œâ€</td></tr><tr><td><code>&amp;</code></td><td><strong>æ›¿æ¢æ—¶</strong>å¼•ç”¨åŒ¹é…çš„æ–‡æœ¬</td><td><code>s/cat/&amp;s/</code> â†’ â€œcatâ€â†’â€catsâ€</td></tr></tbody></table><hr><h4 id="4-å¸¸ç”¨æ¨¡å¼ç¤ºä¾‹"><a href="#4-å¸¸ç”¨æ¨¡å¼ç¤ºä¾‹" class="headerlink" title="4. å¸¸ç”¨æ¨¡å¼ç¤ºä¾‹"></a><strong>4. å¸¸ç”¨æ¨¡å¼ç¤ºä¾‹</strong></h4><table><thead><tr><th>æ¨¡å¼</th><th>åŒ¹é…ç›®æ ‡</th></tr></thead><tbody><tr><td><code>^$</code></td><td><strong>ç©ºè¡Œ</strong>ï¼ˆå¼€å¤´å³ç»“å°¾ï¼‰</td></tr><tr><td><code>^#</code></td><td>ä»¥ <code>#</code> å¼€å¤´çš„è¡Œï¼ˆå¦‚æ³¨é‡Šï¼‰</td></tr><tr><td><code>\.$</code></td><td>ä»¥ç‚¹å·ç»“å°¾çš„è¡Œ</td></tr><tr><td><code>/[tT]est/</code></td><td>â€œtestâ€ æˆ– â€œTestâ€</td></tr><tr><td><code>[0-9][0-9]*</code></td><td><strong>è‡³å°‘ä¸€ä¸ªæ•°å­—</strong></td></tr><tr><td><code>^[^a-zA-Z]</code></td><td>ä¸ä»¥å­—æ¯å¼€å¤´çš„è¡Œ</td></tr><tr><td><code>/thing.$/</code></td><td>ä»¥thingåŠ ä»»æ„ç¬¦å·ç»“å°¾çš„è¡Œ</td></tr></tbody></table><hr><h4 id="5-å…¨å±€å‘½ä»¤-g-v"><a href="#5-å…¨å±€å‘½ä»¤-g-v" class="headerlink" title="5. å…¨å±€å‘½ä»¤ (g/v)"></a><strong>5. å…¨å±€å‘½ä»¤ (<code>g/v</code>)</strong></h4><ul><li>å‘½ä»¤æ ¼å¼ï¼šm,ng&#x2F;re&#x2F;cmdï¼Œå«ä¹‰æ˜¯<strong>ä»mè¡Œåˆ°nè¡Œä¸­å¯¹äºåŒ¹é…reæ¨¡å¼çš„è¡Œæ‰§è¡Œå‘½ä»¤cmd</strong>. å¦‚æœä½œç”¨èŒƒå›´æ˜¯å…¨æ–‡ä»¶(1,$)ï¼Œmã€nå¯ä»¥çœç•¥</li></ul><table><thead><tr><th>å‘½ä»¤æ ¼å¼</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>g/re/p</code></td><td><strong>æ‰“å°</strong>åŒ¹é… <code>re</code> çš„è¡Œ</td><td><code>g/error/p</code> â†’ æ˜¾ç¤ºå« â€œerrorâ€ çš„è¡Œ</td></tr><tr><td><code>g/re/d</code></td><td><strong>åˆ é™¤</strong>åŒ¹é… <code>re</code> çš„è¡Œ</td><td><code>g/^$/d</code> â†’ åˆ é™¤æ‰€æœ‰ç©ºè¡Œ</td></tr><tr><td><code>g/re/s/old/new/</code></td><td>å¯¹åŒ¹é… <code>re</code> çš„è¡Œæ›¿æ¢ <code>old</code>â†’<code>new</code></td><td><code>g/foo/s/bar/baz/</code> â†’ ä»…æ›¿æ¢å« â€œfooâ€ çš„è¡Œä¸­çš„ â€œbarâ€</td></tr><tr><td><code>v/re/p</code></td><td><strong>å–å</strong>æ“ä½œï¼ˆä¸åŒ¹é… <code>re</code> çš„è¡Œï¼‰</td><td><code>v/^$/p</code> â†’ æ‰“å°éç©ºè¡Œ</td></tr></tbody></table><hr><h4 id="6-ç§»åŠ¨ä¸å¤åˆ¶"><a href="#6-ç§»åŠ¨ä¸å¤åˆ¶" class="headerlink" title="6. ç§»åŠ¨ä¸å¤åˆ¶"></a><strong>6. ç§»åŠ¨ä¸å¤åˆ¶</strong></h4><table><thead><tr><th>å‘½ä»¤æ ¼å¼</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>m,nmd</code></td><td>å°† <code>m</code> åˆ° <code>n</code> è¡Œ<strong>ç§»åŠ¨</strong>åˆ° <code>d</code> è¡Œå</td><td><code>2,4m5</code> â†’ 2-4 è¡Œç§»åˆ°ç¬¬ 5 è¡Œå</td></tr><tr><td><code>m,ntd</code></td><td>å°† <code>m</code> åˆ° <code>n</code> è¡Œ<strong>å¤åˆ¶</strong>åˆ° <code>d</code> è¡Œå</td><td><code>1,3t$</code> â†’ å¤åˆ¶ 1-3 è¡Œåˆ°æ–‡ä»¶æœ«å°¾</td></tr><tr><td><code>g/^/m0</code></td><td><strong>åè½¬æ–‡ä»¶è¡Œåº</strong>ï¼ˆæ¯è¡Œç§»åˆ°ç¬¬ 0 è¡Œåï¼‰</td><td>ç»“æœï¼šæœ€åä¸€è¡Œå˜ç¬¬ä¸€è¡Œ</td></tr></tbody></table><hr><h3 id="å…³é”®æ³¨æ„äº‹é¡¹"><a href="#å…³é”®æ³¨æ„äº‹é¡¹" class="headerlink" title="å…³é”®æ³¨æ„äº‹é¡¹"></a><strong>å…³é”®æ³¨æ„äº‹é¡¹</strong></h3><ol><li><strong>è´ªå©ªåŒ¹é…</strong>ï¼š<code>r*</code> æ˜¯è´ªå©ªçš„ï¼ˆå°½å¯èƒ½å¤šåŒ¹é…ï¼‰ã€‚</li><li><strong>è½¬ä¹‰ç‰¹æ®Šå­—ç¬¦</strong>ï¼šå¦‚ <code>\.</code> åŒ¹é…å­—é¢ç‚¹å·ï¼Œ<code>\\</code> åŒ¹é…åæ–œæ ã€‚</li><li><strong>å…¨å±€å‘½ä»¤èŒƒå›´</strong>ï¼šçœç•¥ <code>m,n</code> æ—¶é»˜è®¤å…¨æ–‡ä»¶ï¼ˆ<code>1,$</code>ï¼‰ã€‚</li><li>**æ›¿æ¢ä¸­çš„ <code>&amp;</code>**ï¼šä»…åœ¨ <code>s///</code> å³ä¾§æœ‰æ•ˆï¼Œä»£è¡¨åŒ¹é…çš„å…¨æ–‡ã€‚</li></ol><p>ed çš„æ­£åˆ™ä¸ºç°ä»£å·¥å…·ï¼ˆå¦‚ <code>sed</code>&#x2F;<code>grep</code>ï¼‰å¥ å®šäº†åŸºç¡€ï¼Œè™½åŠŸèƒ½æœ‰é™ï¼Œä½†è¶³å¤Ÿå¤„ç†åŸºç¡€æ–‡æœ¬æ“ä½œã€‚</p><h2 id="sedæµç¼–è¾‘å™¨"><a href="#sedæµç¼–è¾‘å™¨" class="headerlink" title="sedæµç¼–è¾‘å™¨"></a>sedæµç¼–è¾‘å™¨</h2><p>ä»¥ä¸‹æ˜¯ç»“åˆå‚è€ƒæ–‡çŒ®å¯¹sedçŸ¥è¯†ç‚¹çš„ç³»ç»Ÿæ€»ç»“ï¼Œå…³é”®éƒ¨åˆ†æ ‡æ³¨å¼•ç”¨æ¥æºï¼š</p><hr><h3 id="sedæ ¸å¿ƒç‰¹æ€§"><a href="#sedæ ¸å¿ƒç‰¹æ€§" class="headerlink" title="sedæ ¸å¿ƒç‰¹æ€§"></a><strong>sedæ ¸å¿ƒç‰¹æ€§</strong></h3><ol><li><p><strong>æµç¼–è¾‘å™¨æœ¬è´¨</strong></p><ul><li>ç›´æ¥ä»<code>ed</code>å‘å±•è€Œæ¥ï¼Œä¸“ä¸ºå¤„ç†<strong>è¾“å…¥æµ</strong>è®¾è®¡ï¼ˆæ–‡ä»¶æˆ–ç®¡é“æ•°æ®ï¼‰</li><li>å•æ¬¡æ‰«æè¾“å…¥æµï¼Œé«˜æ•ˆä½†æ— æ³•å›æº¯å·²å¤„ç†è¡Œï¼ˆå±€é™æ€§ï¼‰</li><li>é»˜è®¤è¾“å‡ºåˆ°stdoutä¸”<strong>ä¸ä¿®æ”¹åŸæ–‡ä»¶</strong>ï¼ˆéœ€é‡å®šå‘ä¿å­˜ç»“æœï¼‰</li></ul></li><li><p><strong>åŸºç¡€è¯­æ³•ç»“æ„</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed [é€‰é¡¹] <span class="hljs-string">&#x27;ç¼–è¾‘å‘½ä»¤1;ç¼–è¾‘å‘½ä»¤2&#x27;</span> è¾“å…¥æ–‡ä»¶<br></code></pre></td></tr></table></figure><ul><li>ç»å…¸ç¤ºä¾‹ï¼š<code>sed &#39;s/UNIX/Linux/g&#39; file</code> å…¨å±€æ›¿æ¢æ–‡æœ¬</li><li>æ”¯æŒå¤šå‘½ä»¤ç»„åˆï¼š<code>sed &#39;s/foo/bar/; 10q&#39; file</code>ï¼ˆæ›¿æ¢+æ˜¾ç¤ºå‰10è¡Œï¼‰</li></ul></li></ol><hr><h3 id="å¸¸ç”¨æ“ä½œåœºæ™¯"><a href="#å¸¸ç”¨æ“ä½œåœºæ™¯" class="headerlink" title="å¸¸ç”¨æ“ä½œåœºæ™¯"></a><strong>å¸¸ç”¨æ“ä½œåœºæ™¯</strong></h3><table><thead><tr><th>åŠŸèƒ½</th><th>å‘½ä»¤ç¤ºä¾‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ–‡æœ¬æ›¿æ¢</strong></td><td><code>sed &#39;s/old/new/g&#39; file</code></td><td>å…¨å±€æ›¿æ¢ï¼ˆåŠ <code>g</code>æ ‡å¿—ï¼‰</td></tr><tr><td><strong>è¡ŒèŒƒå›´æ“ä½œ</strong></td><td><code>sed &#39;10q&#39; file</code></td><td>æ˜¾ç¤ºå‰10è¡Œï¼ˆ<code>q</code>é€€å‡ºå‘½ä»¤ï¼‰</td></tr><tr><td><strong>æ¨¡å¼è¿‡æ»¤</strong></td><td><code>sed -n &#39;/pattern/p&#39; file</code></td><td>ä»…æ˜¾ç¤ºåŒ¹é…è¡Œï¼ˆ<code>-n</code>å…³é—­é»˜è®¤è¾“å‡ºï¼Œç­‰æ•ˆ<code>grep</code>ï¼‰</td></tr><tr><td><strong>ç›®å½•åˆ—è¡¨è¿‡æ»¤</strong></td><td>&#96;ls -l</td><td>sed -n â€˜&#x2F;^d&#x2F;pâ€™&#96;</td></tr><tr><td><strong>å¤šæ¨¡å¼èŒƒå›´è¾“å‡º</strong></td><td><code>sed -n &#39;/start/,/end/p&#39; file</code></td><td>æ‰“å°ä¸¤ä¸ªæ¨¡å¼é—´çš„æ‰€æœ‰è¡Œï¼ˆå¦‚<code>/David/,/Emily/p</code>ï¼‰</td></tr></tbody></table><hr><h3 id="å…³é”®é€‰é¡¹ä¸é™åˆ¶"><a href="#å…³é”®é€‰é¡¹ä¸é™åˆ¶" class="headerlink" title="å…³é”®é€‰é¡¹ä¸é™åˆ¶"></a><strong>å…³é”®é€‰é¡¹ä¸é™åˆ¶</strong></h3><ul><li><p><strong>é€‰é¡¹</strong></p><ul><li><code>-n</code>ï¼šæŠ‘åˆ¶é»˜è®¤è¾“å‡ºï¼Œéœ€æ˜¾å¼ç”¨<code>p</code>å‘½ä»¤æ‰“å°</li><li><code>-e</code>ï¼šæŒ‡å®šå¤šä¸ªç¼–è¾‘å‘½ä»¤ï¼ˆå¦‚<code>sed -e &#39;s/a/b/&#39; -e &#39;s/c/d/&#39;</code>ï¼‰</li></ul></li><li><p><strong>å±€é™æ€§</strong></p><ul><li><strong>æ— æ³•è¡Œè¿ç®—</strong>ï¼šå¦‚<code>$-1d</code>éæ³•ï¼Œå› sedæ˜¯å•å‘æµå¤„ç†å™¨</li><li><strong>æ— äº¤äº’æ¨¡å¼</strong>ï¼šæ‰€æœ‰æ“ä½œéœ€é€šè¿‡å‘½ä»¤é¢„è®¾</li></ul></li></ul><hr><h3 id="ä¸ç®¡é“çš„ååŒ"><a href="#ä¸ç®¡é“çš„ååŒ" class="headerlink" title="ä¸ç®¡é“çš„ååŒ"></a><strong>ä¸ç®¡é“çš„ååŒ</strong></h3><ul><li><p><strong>åŠ¨æ€å¤„ç†æµæ•°æ®</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">who</span> | sed <span class="hljs-string">&#x27;s/ .*//&#x27;</span>  <span class="hljs-comment"># æå–ç”¨æˆ·åï¼ˆåˆ é™¤é¦–ä¸ªç©ºæ ¼åçš„æ‰€æœ‰å†…å®¹ï¼‰</span><br></code></pre></td></tr></table></figure></li><li><p><strong>ç»„åˆå…¶ä»–å‘½ä»¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;error&quot;</span> log.txt | sed <span class="hljs-string">&#x27;s/ERROR/CRITICAL/g&#x27;</span>  <span class="hljs-comment"># äºŒæ¬¡è¿‡æ»¤æ›¿æ¢</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="æ‰©å±•åº”ç”¨"><a href="#æ‰©å±•åº”ç”¨" class="headerlink" title="æ‰©å±•åº”ç”¨"></a><strong>æ‰©å±•åº”ç”¨</strong></h3><ul><li><p><strong>æ‰¹é‡ç¼–è¾‘æ–‡ä»¶</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed -i.bak <span class="hljs-string">&#x27;s/old/new/g&#x27;</span> *.txt  <span class="hljs-comment"># ç›´æ¥ä¿®æ”¹æ–‡ä»¶å¹¶å¤‡ä»½ï¼ˆ`-i`é€‰é¡¹ï¼‰</span><br></code></pre></td></tr></table></figure></li><li><p><strong>æ¡ä»¶åˆ é™¤</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed <span class="hljs-string">&#x27;/pattern/d&#x27;</span> file  <span class="hljs-comment"># åˆ é™¤åŒ¹é…è¡Œï¼ˆå¦‚ç©ºè¡Œ`/^$/d`ï¼‰</span><br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="è®¾è®¡å“²å­¦"><a href="#è®¾è®¡å“²å­¦" class="headerlink" title="è®¾è®¡å“²å­¦"></a><strong>è®¾è®¡å“²å­¦</strong></h3><ul><li><strong>UNIXå·¥å…·é“¾æ€ç»´</strong>ï¼šä¸“æ³¨å•ä¸€åŠŸèƒ½ï¼ˆæ–‡æœ¬è½¬æ¢ï¼‰ï¼Œé€šè¿‡ç®¡é“ä¸å…¶ä»–å·¥å…·ï¼ˆå¦‚<code>grep</code>ã€<code>awk</code>ï¼‰åä½œ[][6]</li><li><strong>é«˜æ•ˆæ€§</strong>ï¼šå•æ¬¡æµå¤„ç†æ¯”äº¤äº’å¼ç¼–è¾‘å™¨æ›´é€‚åˆè‡ªåŠ¨åŒ–ä»»åŠ¡[][6]</li></ul><p>é€šè¿‡æŒæ¡è¿™äº›æ ¸å¿ƒæ¨¡å¼ï¼Œå¯é«˜æ•ˆå®Œæˆ90%çš„æ–‡æœ¬å¤„ç†éœ€æ±‚ã€‚è¿›é˜¶å­¦ä¹ å¯å‚è€ƒGNU sedæ‰‹å†Œ[6]ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼å’Œä¿æŒç©ºé—´ï¼ˆhold spaceï¼‰æŠ€å·§ã€‚</p><h2 id="grepè¿‡æ»¤å™¨"><a href="#grepè¿‡æ»¤å™¨" class="headerlink" title="grepè¿‡æ»¤å™¨"></a>grepè¿‡æ»¤å™¨</h2><p><code>grep</code> æ˜¯ Linux&#x2F;Unix ä¸­æœ€å¼ºå¤§çš„<strong>æ–‡æœ¬è¿‡æ»¤å·¥å…·</strong>ä¹‹ä¸€ï¼Œå¸¸ä¸ç®¡é“ç¬¦ <code>|</code> å’Œå…¶ä»–å‘½ä»¤ï¼ˆå¦‚ <code>ls</code>ã€<code>sed</code>ã€<code>sort</code>ï¼‰ç»“åˆä½¿ç”¨</p><hr><h3 id="1-grep-åŸºç¡€è¯­æ³•"><a href="#1-grep-åŸºç¡€è¯­æ³•" class="headerlink" title="1. grep åŸºç¡€è¯­æ³•"></a><strong>1. <code>grep</code> åŸºç¡€è¯­æ³•</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep [é€‰é¡¹] <span class="hljs-string">&#x27;æœç´¢æ¨¡å¼&#x27;</span> æ–‡ä»¶å<br></code></pre></td></tr></table></figure><ul><li><strong>æ ¸å¿ƒåŠŸèƒ½</strong>ï¼šä»æ–‡ä»¶æˆ–è¾“å…¥æµä¸­ç­›é€‰<strong>åŒ…å«æŒ‡å®šæ¨¡å¼çš„è¡Œ</strong>ã€‚</li><li><strong>å¸¸ç”¨é€‰é¡¹</strong>ï¼š<ul><li><code>-i</code>ï¼šå¿½ç•¥å¤§å°å†™ï¼ˆå¦‚ <code>grep -i &quot;error&quot; log.txt</code>ï¼‰ã€‚</li><li><code>-v</code>ï¼šåå‘åŒ¹é…ï¼ˆæ˜¾ç¤º<strong>ä¸åŒ…å«</strong>æ¨¡å¼çš„è¡Œï¼‰ã€‚</li><li><code>-n</code>ï¼šæ˜¾ç¤ºåŒ¹é…è¡Œçš„è¡Œå·ã€‚</li><li><code>-c</code>ï¼šç»Ÿè®¡åŒ¹é…è¡Œçš„æ•°é‡ã€‚</li><li><code>-r</code>ï¼šé€’å½’æœç´¢ç›®å½•ï¼ˆå¦‚ <code>grep -r &quot;main&quot; /src</code>ï¼‰ã€‚</li></ul></li></ul><hr><h3 id="ç¤ºä¾‹-1ï¼šæœç´¢æ–‡ä»¶å†…å®¹"><a href="#ç¤ºä¾‹-1ï¼šæœç´¢æ–‡ä»¶å†…å®¹" class="headerlink" title="ç¤ºä¾‹ 1ï¼šæœç´¢æ–‡ä»¶å†…å®¹"></a><strong>ç¤ºä¾‹ 1ï¼šæœç´¢æ–‡ä»¶å†…å®¹</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&#x27;^void&#x27;</span> sig.c<br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šåœ¨ <code>sig.c</code> æ–‡ä»¶ä¸­æŸ¥æ‰¾<strong>ä»¥ <code>void</code> å¼€å¤´çš„è¡Œ</strong>ã€‚</li></ul><h3 id="ç¤ºä¾‹-2ï¼šè¿‡æ»¤ç›®å½•"><a href="#ç¤ºä¾‹-2ï¼šè¿‡æ»¤ç›®å½•" class="headerlink" title="ç¤ºä¾‹ 2ï¼šè¿‡æ»¤ç›®å½•"></a><strong>ç¤ºä¾‹ 2ï¼šè¿‡æ»¤ç›®å½•</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l | grep <span class="hljs-string">&#x27;^d&#x27;</span><br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šåˆ—å‡ºå½“å‰ç›®å½•ä¸‹çš„<strong>å­ç›®å½•</strong>ï¼ˆä¸åŒ…æ‹¬æ–‡ä»¶ï¼‰ã€‚</li><li><strong>åŸç†</strong>ï¼š<ul><li><code>ls -l</code> çš„è¾“å‡ºä¸­ï¼Œç›®å½•è¡Œä»¥ <code>d</code> å¼€å¤´ï¼ˆå¦‚ <code>drwxr-xr-x</code>ï¼‰ã€‚</li><li><code>^d</code> åŒ¹é…è¡Œé¦–çš„ <code>d</code> å­—ç¬¦ã€‚</li></ul></li></ul><h3 id="ç¤ºä¾‹-3ï¼šæå–ç›®å½•å"><a href="#ç¤ºä¾‹-3ï¼šæå–ç›®å½•å" class="headerlink" title="ç¤ºä¾‹ 3ï¼šæå–ç›®å½•å"></a><strong>ç¤ºä¾‹ 3ï¼šæå–ç›®å½•å</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l | grep <span class="hljs-string">&#x27;^d&#x27;</span> | sed <span class="hljs-string">&#x27;s/.* //&#x27;</span><br></code></pre></td></tr></table></figure><ul><li><strong>ä½œç”¨</strong>ï¼šä»…è¾“å‡ºå­ç›®å½•åï¼ˆå»æ‰æƒé™ã€æ—¶é—´ç­‰å†—ä½™ä¿¡æ¯ï¼‰ã€‚</li><li><strong>åˆ†æ­¥è§£æ</strong>ï¼š<ol><li><code>ls -l | grep &#39;^d&#39;</code>ï¼šç­›é€‰ç›®å½•è¡Œã€‚</li><li><code>sed &#39;s/.* //&#39;</code>ï¼š<strong>åˆ é™¤è¡Œä¸­æœ€åä¸€ä¸ªç©ºæ ¼å‰çš„æ‰€æœ‰å†…å®¹</strong>ï¼ˆä¿ç•™ç›®å½•åï¼‰ã€‚</li></ol></li></ul><hr><h3 id="3-grep-å®¶æ—å¯¹æ¯”"><a href="#3-grep-å®¶æ—å¯¹æ¯”" class="headerlink" title="3. grep å®¶æ—å¯¹æ¯”"></a><strong>3. <code>grep</code> å®¶æ—å¯¹æ¯”</strong></h3><table><thead><tr><th>å‘½ä»¤</th><th>å…¨ç§°</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><code>grep</code></td><td>Global Regular Expression Print</td><td>åŸºç¡€ç‰ˆï¼Œæ”¯æŒ<strong>åŸºæœ¬æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼ˆBREï¼‰ã€‚</td></tr><tr><td><code>egrep</code></td><td>Extended GREP</td><td>æ”¯æŒ<strong>æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼</strong>ï¼ˆEREï¼‰ï¼Œå¦‚ <code>+</code>ã€<code>?</code>ã€&#96;</td></tr><tr><td><code>fgrep</code></td><td>Fixed-string GREP</td><td>ä»…åŒ¹é…å›ºå®šå­—ç¬¦ä¸²ï¼ˆ<strong>ä¸æ”¯æŒæ­£åˆ™</strong>ï¼‰ï¼Œä½†å¤„ç†å¤§æ–‡ä»¶æ—¶é€Ÿåº¦æœ€å¿«<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="`fgrep` ç›¸å½“äº `grep -F`ï¼Œé€‚åˆç²¾ç¡®åŒ¹é…å›ºå®šå­—ç¬¦ä¸²ï¼ˆå¦‚æ—¥å¿—ä¸­çš„é”™è¯¯ç ï¼‰ã€‚">[2]</span></a></sup>ã€‚</td></tr></tbody></table><h3 id="å…¸å‹åœºæ™¯"><a href="#å…¸å‹åœºæ™¯" class="headerlink" title="å…¸å‹åœºæ™¯"></a><strong>å…¸å‹åœºæ™¯</strong></h3><ol><li><strong><code>egrep</code> çš„æ‰©å±•åŠŸèƒ½</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">egrep <span class="hljs-string">&#x27;error|warn&#x27;</span> log.txt  <span class="hljs-comment"># åŒæ—¶åŒ¹é… &quot;error&quot; æˆ– &quot;warn&quot;</span><br></code></pre></td></tr></table></figure></li><li><strong><code>fgrep</code> çš„é«˜æ•ˆæ€§</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fgrep -c <span class="hljs-string">&quot;404&quot;</span> access.log  <span class="hljs-comment"># å¿«é€Ÿç»Ÿè®¡ 404 é”™è¯¯å‡ºç°çš„æ¬¡æ•°</span><br></code></pre></td></tr></table></figure></li></ol><hr><h3 id="4-ç»“åˆå…¶ä»–è¿‡æ»¤å™¨"><a href="#4-ç»“åˆå…¶ä»–è¿‡æ»¤å™¨" class="headerlink" title="4. ç»“åˆå…¶ä»–è¿‡æ»¤å™¨"></a><strong>4. ç»“åˆå…¶ä»–è¿‡æ»¤å™¨</strong></h3><h3 id="4-1-sortï¼ˆæ’åºï¼‰"><a href="#4-1-sortï¼ˆæ’åºï¼‰" class="headerlink" title="4.1 sortï¼ˆæ’åºï¼‰"></a><strong>4.1 <code>sort</code>ï¼ˆæ’åºï¼‰</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> | <span class="hljs-built_in">sort</span>          <span class="hljs-comment"># æŒ‰å­—æ¯æ’åºæ–‡ä»¶å</span><br>grep <span class="hljs-string">&quot;error&quot;</span> log.txt | <span class="hljs-built_in">sort</span> -u  <span class="hljs-comment"># å»é‡åæ’åº</span><br></code></pre></td></tr></table></figure><h3 id="4-2-head-tailï¼ˆé¦–å°¾è¡Œï¼‰"><a href="#4-2-head-tailï¼ˆé¦–å°¾è¡Œï¼‰" class="headerlink" title="4.2 head &#x2F; tailï¼ˆé¦–å°¾è¡Œï¼‰"></a><strong>4.2 <code>head</code> &#x2F; <code>tail</code>ï¼ˆé¦–å°¾è¡Œï¼‰</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;Exception&quot;</span> server.log | <span class="hljs-built_in">tail</span> -5  <span class="hljs-comment"># æ˜¾ç¤ºæœ€å5ä¸ªå¼‚å¸¸</span><br>grep <span class="hljs-string">&quot;login&quot;</span> auth.log | <span class="hljs-built_in">head</span> -3       <span class="hljs-comment"># æ˜¾ç¤ºå‰3æ¬¡ç™»å½•è®°å½•</span><br></code></pre></td></tr></table></figure><h3 id="4-3-ç»„åˆå®æˆ˜"><a href="#4-3-ç»„åˆå®æˆ˜" class="headerlink" title="4.3 ç»„åˆå®æˆ˜"></a><strong>4.3 ç»„åˆå®æˆ˜</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># ç»Ÿè®¡æ—¥å¿—ä¸­æ¯ä¸ªé”™è¯¯ç±»å‹çš„å‡ºç°æ¬¡æ•°ï¼ˆæ’åºåå–å‰5ï¼‰</span><br>grep -o <span class="hljs-string">&quot;ERROR: .*&quot;</span> app.log | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c | <span class="hljs-built_in">sort</span> -nr | <span class="hljs-built_in">head</span> -5<br></code></pre></td></tr></table></figure><ul><li><strong>æ­¥éª¤åˆ†è§£</strong>ï¼š<ol><li><code>grep -o</code>ï¼šæå–æ‰€æœ‰ <code>ERROR: xxx</code> å†…å®¹ã€‚</li><li><code>sort</code>ï¼šæ’åºä»¥ä¾¿ <code>uniq</code> ç»Ÿè®¡ã€‚</li><li><code>uniq -c</code>ï¼šè®¡æ•°ã€‚</li><li><code>sort -nr</code>ï¼šæŒ‰è®¡æ•°é™åºã€‚</li><li><code>head -5</code>ï¼šæ˜¾ç¤ºå‰5æ¡ã€‚</li></ol></li></ul><hr><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><ul><li><strong><code>grep</code><strong>ï¼šæ–‡æœ¬è¿‡æ»¤çš„ç‘å£«å†›åˆ€ï¼Œæ ¸å¿ƒæ˜¯</strong>æ¨¡å¼åŒ¹é…</strong>ã€‚</li><li><strong>ç®¡é“ç»„åˆ</strong>ï¼šä¸ <code>sed</code>ã€<code>sort</code>ã€<code>head</code>&#x2F;<code>tail</code> è”åŠ¨å¯è§£å†³å¤æ‚é—®é¢˜ã€‚</li><li><strong>é€‰æ‹©å·¥å…·</strong>ï¼š<ul><li>ç®€å•æœç´¢ â†’ <code>grep</code> æˆ– <code>fgrep</code>ã€‚</li><li>å¤æ‚æ­£åˆ™ â†’ <code>egrep</code>ã€‚</li><li>éœ€æ’åº&#x2F;ç»Ÿè®¡ â†’ ç»“åˆ <code>sort | uniq -c</code>ã€‚</li></ul></li></ul><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><code>egrep</code> ç›¸å½“äº <code>grep -E</code>ï¼Œæ”¯æŒ <code>|</code>ï¼ˆæˆ–ï¼‰ã€<code>+</code>ï¼ˆ1æ¬¡æˆ–å¤šæ¬¡ï¼‰ç­‰æ‰©å±•è¯­æ³•ã€‚<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><code>fgrep</code> ç›¸å½“äº <code>grep -F</code>ï¼Œé€‚åˆç²¾ç¡®åŒ¹é…å›ºå®šå­—ç¬¦ä¸²ï¼ˆå¦‚æ—¥å¿—ä¸­çš„é”™è¯¯ç ï¼‰ã€‚<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>UNIX</tag>
      
      <tag>å¤ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>UNIXç³»ç»Ÿå¤ä¹ -1</title>
    <link href="/2025/05/27/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/"/>
    <url>/2025/05/27/UNIX%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0-1/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æˆ‘å¤ä¹ ã€ŠUNIXç³»ç»Ÿã€‹è¿™é—¨è¯¾ç¨‹æ—¶è®°å½•çš„ä¸€äº›ç¬”è®° ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><h1 id="ed-ç¼–è¾‘å™¨"><a href="#ed-ç¼–è¾‘å™¨" class="headerlink" title="ed ç¼–è¾‘å™¨"></a>ed ç¼–è¾‘å™¨</h1><p>ed æ˜¯ UNIX ç³»ç»Ÿä¸­æœ€å¤è€çš„è¡Œç¼–è¾‘å™¨ä¹‹ä¸€ï¼Œè™½ç„¶ç°åœ¨ä½¿ç”¨è¾ƒå°‘ï¼Œä½†äº†è§£å®ƒçš„ç”¨æ³•å¯¹äºç†è§£ UNIX å†å²å’Œè®¸å¤šç°ä»£ç¼–è¾‘å™¨çš„å·¥ä½œåŸç†å¾ˆæœ‰å¸®åŠ©ã€‚ä»¥ä¸‹æ˜¯ ed ç¼–è¾‘å™¨çš„è¯¦ç»†ç”¨æ³•å’Œå®ä¾‹ã€‚</p><h2 id="åŸºæœ¬æ“ä½œ"><a href="#åŸºæœ¬æ“ä½œ" class="headerlink" title="åŸºæœ¬æ“ä½œ"></a>åŸºæœ¬æ“ä½œ</h2><h3 id="å¯åŠ¨å’Œé€€å‡º-ed"><a href="#å¯åŠ¨å’Œé€€å‡º-ed" class="headerlink" title="å¯åŠ¨å’Œé€€å‡º ed"></a>å¯åŠ¨å’Œé€€å‡º ed</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cmake">$ ed                 <span class="hljs-comment"># å¯åŠ¨ ed ç¼–è¾‘å™¨</span><br>a                    <span class="hljs-comment"># è¿›å…¥è¾“å…¥æ¨¡å¼</span><br>è¿™æ˜¯ç¬¬ä¸€è¡Œæ–‡æœ¬<br>è¿™æ˜¯ç¬¬äºŒè¡Œæ–‡æœ¬<br>.                    <span class="hljs-comment"># é€€å‡ºè¾“å…¥æ¨¡å¼</span><br>w <span class="hljs-keyword">test</span>.txt           <span class="hljs-comment"># ä¿å­˜åˆ°æ–‡ä»¶</span><br>q                    <span class="hljs-comment"># é€€å‡º ed</span><br></code></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å‘½ä»¤"><a href="#å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><ol><li><p><strong><code>a</code> - è¿½åŠ æ–‡æœ¬</strong></p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">a</span><br>è¿™æ˜¯è¿½åŠ çš„æ–‡æœ¬<br>.<br></code></pre></td></tr></table></figure></li><li><p><strong><code>i</code> - æ’å…¥æ–‡æœ¬</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-number">1</span>i                 <span class="hljs-meta"># åœ¨ç¬¬ä¸€è¡Œå‰æ’å…¥</span><br>è¿™æ˜¯æ’å…¥çš„æ–‡æœ¬<br>.<br></code></pre></td></tr></table></figure></li><li><p><strong><code>p</code> - æ‰“å°è¡Œ</strong></p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>,<span class="hljs-number">3</span>p              # æ‰“å°<span class="hljs-number">1</span>-<span class="hljs-number">3</span>è¡Œ<br></code></pre></td></tr></table></figure></li><li><p><strong><code>d</code> - åˆ é™¤è¡Œ</strong></p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c"><span class="hljs-number">2</span>d                <span class="hljs-meta"># åˆ é™¤ç¬¬2è¡Œ</span><br></code></pre></td></tr></table></figure></li><li><p><strong><code>w</code> - å†™å…¥æ–‡ä»¶</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">w</span> filename        <span class="hljs-comment"># ä¿å­˜åˆ°æ–‡ä»¶</span><br></code></pre></td></tr></table></figure></li><li><p><strong><code>q</code> - é€€å‡º</strong></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">q</span>                 <span class="hljs-comment"># é€€å‡ºç¼–è¾‘å™¨</span><br></code></pre></td></tr></table></figure></li></ol><h2 id="å®ç”¨ç¤ºä¾‹"><a href="#å®ç”¨ç¤ºä¾‹" class="headerlink" title="å®ç”¨ç¤ºä¾‹"></a>å®ç”¨ç¤ºä¾‹</h2><h3 id="ç¤ºä¾‹1ï¼šåˆ›å»ºå’Œç¼–è¾‘æ–‡ä»¶"><a href="#ç¤ºä¾‹1ï¼šåˆ›å»ºå’Œç¼–è¾‘æ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹1ï¼šåˆ›å»ºå’Œç¼–è¾‘æ–‡ä»¶"></a>ç¤ºä¾‹1ï¼šåˆ›å»ºå’Œç¼–è¾‘æ–‡ä»¶</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs gauss">$ <span class="hljs-keyword">ed</span><br>a                   <span class="hljs-meta"># å¼€å§‹è¾“å…¥</span><br>Hello, world!<br>This is <span class="hljs-keyword">line</span> <span class="hljs-number">2.</span><br><span class="hljs-keyword">Line</span> <span class="hljs-number">3</span> here.<br>.                   <span class="hljs-meta"># ç»“æŸè¾“å…¥</span><br><span class="hljs-number">1</span>,<span class="hljs-number">3</span>p                <span class="hljs-meta"># æŸ¥çœ‹æ‰€æœ‰å†…å®¹</span><br>w hello.txt         <span class="hljs-meta"># ä¿å­˜</span><br>q                   <span class="hljs-meta"># é€€å‡º</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹2ï¼šç¼–è¾‘ç°æœ‰æ–‡ä»¶"><a href="#ç¤ºä¾‹2ï¼šç¼–è¾‘ç°æœ‰æ–‡ä»¶" class="headerlink" title="ç¤ºä¾‹2ï¼šç¼–è¾‘ç°æœ‰æ–‡ä»¶"></a>ç¤ºä¾‹2ï¼šç¼–è¾‘ç°æœ‰æ–‡ä»¶</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs gauss">$ <span class="hljs-keyword">ed</span> existing.txt<br><span class="hljs-number">1</span>,<span class="hljs-number">3</span>p                <span class="hljs-meta"># æŸ¥çœ‹å‰3è¡Œ</span><br><span class="hljs-number">2</span>d                  <span class="hljs-meta"># åˆ é™¤ç¬¬2è¡Œ</span><br>a                   <span class="hljs-meta"># è¿½åŠ æ–°å†…å®¹</span><br><span class="hljs-keyword">New</span> <span class="hljs-keyword">line</span> added<br>.<br>w                   <span class="hljs-meta"># ä¿å­˜æ›´æ”¹</span><br>q                   <span class="hljs-meta"># é€€å‡º</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹3ï¼šæœç´¢å’Œæ›¿æ¢"><a href="#ç¤ºä¾‹3ï¼šæœç´¢å’Œæ›¿æ¢" class="headerlink" title="ç¤ºä¾‹3ï¼šæœç´¢å’Œæ›¿æ¢"></a>ç¤ºä¾‹3ï¼šæœç´¢å’Œæ›¿æ¢</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs dts">$ ed document.txt<br><span class="hljs-number">1</span>,$p                <span class="hljs-meta"># æŸ¥çœ‹æ‰€æœ‰å†…å®¹</span><br><span class="hljs-keyword">/pattern/</span>           <span class="hljs-meta"># æœç´¢<span class="hljs-string">&quot;pattern&quot;</span></span><br>s<span class="hljs-keyword">/old/</span>new/          <span class="hljs-meta"># æ›¿æ¢å½“å‰è¡Œçš„ç¬¬ä¸€ä¸ª<span class="hljs-string">&quot;old&quot;</span>ä¸º<span class="hljs-string">&quot;new&quot;</span></span><br>s<span class="hljs-keyword">/old/</span>new/g         <span class="hljs-meta"># æ›¿æ¢å½“å‰è¡Œæ‰€æœ‰<span class="hljs-string">&quot;old&quot;</span>ä¸º<span class="hljs-string">&quot;new&quot;</span></span><br><span class="hljs-number">1</span>,$s<span class="hljs-keyword">/old/</span>new/g      <span class="hljs-meta"># å…¨å±€æ›¿æ¢</span><br>w                   <span class="hljs-meta"># ä¿å­˜</span><br>q                   <span class="hljs-meta"># é€€å‡º</span><br></code></pre></td></tr></table></figure><h3 id="ç¤ºä¾‹4ï¼šä½¿ç”¨è¡Œå·ç¼–è¾‘"><a href="#ç¤ºä¾‹4ï¼šä½¿ç”¨è¡Œå·ç¼–è¾‘" class="headerlink" title="ç¤ºä¾‹4ï¼šä½¿ç”¨è¡Œå·ç¼–è¾‘"></a>ç¤ºä¾‹4ï¼šä½¿ç”¨è¡Œå·ç¼–è¾‘</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs gauss">$ <span class="hljs-keyword">ed</span> data.txt<br><span class="hljs-number">3</span>                   <span class="hljs-meta"># ç§»åŠ¨åˆ°ç¬¬3è¡Œ</span><br>p                   <span class="hljs-meta"># æ‰“å°å½“å‰è¡Œ</span><br>a                   <span class="hljs-meta"># åœ¨ç¬¬3è¡Œåè¿½åŠ </span><br>Additional info<br>.<br><span class="hljs-number">2</span>,<span class="hljs-number">4</span>p                <span class="hljs-meta"># æŸ¥çœ‹2-4è¡Œ</span><br><span class="hljs-number">5</span>i                  <span class="hljs-meta"># åœ¨ç¬¬5è¡Œå‰æ’å…¥</span><br>Inserted <span class="hljs-keyword">line</span><br>.<br>w                   <span class="hljs-meta"># ä¿å­˜</span><br>q                   <span class="hljs-meta"># é€€å‡º</span><br></code></pre></td></tr></table></figure><h2 id="é«˜çº§åŠŸèƒ½"><a href="#é«˜çº§åŠŸèƒ½" class="headerlink" title="é«˜çº§åŠŸèƒ½"></a>é«˜çº§åŠŸèƒ½</h2><h3 id="æ­£åˆ™è¡¨è¾¾å¼æœç´¢"><a href="#æ­£åˆ™è¡¨è¾¾å¼æœç´¢" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼æœç´¢"></a>æ­£åˆ™è¡¨è¾¾å¼æœç´¢</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/^[A-Z]/</span>            <span class="hljs-comment"># æœç´¢ä»¥å¤§å†™å­—æ¯å¼€å¤´çš„è¡Œ</span><br><span class="hljs-regexp">/[0-9]$/</span>            <span class="hljs-comment"># æœç´¢ä»¥æ•°å­—ç»“å°¾çš„è¡Œ</span><br></code></pre></td></tr></table></figure><h3 id="å…¨å±€å‘½ä»¤"><a href="#å…¨å±€å‘½ä»¤" class="headerlink" title="å…¨å±€å‘½ä»¤"></a>å…¨å±€å‘½ä»¤</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-selector-tag">g</span>/<span class="hljs-selector-tag">pattern</span>/<span class="hljs-selector-tag">p</span>         # æ‰“å°æ‰€æœ‰åŒ…å«<span class="hljs-selector-tag">pattern</span>çš„è¡Œ<br><span class="hljs-selector-tag">g</span>/<span class="hljs-selector-tag">pattern</span>/d         # åˆ é™¤æ‰€æœ‰åŒ…å«<span class="hljs-selector-tag">pattern</span>çš„è¡Œ<br>v/<span class="hljs-selector-tag">pattern</span>/<span class="hljs-selector-tag">p</span>         # æ‰“å°æ‰€æœ‰ä¸åŒ…å«<span class="hljs-selector-tag">pattern</span>çš„è¡Œ<br></code></pre></td></tr></table></figure><h3 id="æ ‡è®°ä½ç½®"><a href="#æ ‡è®°ä½ç½®" class="headerlink" title="æ ‡è®°ä½ç½®"></a>æ ‡è®°ä½ç½®</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs llvm">kx                  # ç”¨å­—æ¯<span class="hljs-keyword">x</span>æ ‡è®°å½“å‰ä½ç½®<br>&#x27;<span class="hljs-keyword">x</span>                  # è¿”å›æ ‡è®°<span class="hljs-keyword">x</span>çš„ä½ç½®<br></code></pre></td></tr></table></figure><h3 id="åˆå¹¶æ–‡ä»¶"><a href="#åˆå¹¶æ–‡ä»¶" class="headerlink" title="åˆå¹¶æ–‡ä»¶"></a>åˆå¹¶æ–‡ä»¶</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> ed main.txt<br><span class="hljs-built_in">r</span> other.txt         <span class="hljs-comment"># å°†other.txtå†…å®¹è¯»å…¥å½“å‰æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h2 id="å®é™…åº”ç”¨åœºæ™¯"><a href="#å®é™…åº”ç”¨åœºæ™¯" class="headerlink" title="å®é™…åº”ç”¨åœºæ™¯"></a>å®é™…åº”ç”¨åœºæ™¯</h2><h3 id="åœºæ™¯1ï¼šæ‰¹é‡æ›¿æ¢æ–‡æœ¬"><a href="#åœºæ™¯1ï¼šæ‰¹é‡æ›¿æ¢æ–‡æœ¬" class="headerlink" title="åœºæ™¯1ï¼šæ‰¹é‡æ›¿æ¢æ–‡æœ¬"></a>åœºæ™¯1ï¼šæ‰¹é‡æ›¿æ¢æ–‡æœ¬</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs stylus">$ ed config<span class="hljs-selector-class">.cfg</span><br><span class="hljs-number">1</span>,<span class="hljs-variable">$s</span>/<span class="hljs-number">192.168</span>.<span class="hljs-number">1.1</span>/<span class="hljs-number">10.0</span>.<span class="hljs-number">0.1</span>/<span class="hljs-selector-tag">g</span><br>w<br>q<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯2ï¼šæå–ç‰¹å®šè¡Œ"><a href="#åœºæ™¯2ï¼šæå–ç‰¹å®šè¡Œ" class="headerlink" title="åœºæ™¯2ï¼šæå–ç‰¹å®šè¡Œ"></a>åœºæ™¯2ï¼šæå–ç‰¹å®šè¡Œ</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs 1c">$ ed logfile.<span class="hljs-built_in">log</span><br><span class="hljs-number">1</span><span class="hljs-punctuation">,</span><span class="hljs-number">10</span>p               <span class="hljs-meta"># æŸ¥çœ‹å‰10è¡Œ</span><br><span class="hljs-number">5</span><span class="hljs-punctuation">,</span><span class="hljs-number">7</span>w extract.txt    <span class="hljs-meta"># å°†5-7è¡Œä¿å­˜åˆ°extract.txt</span><br>q<br></code></pre></td></tr></table></figure><h3 id="åœºæ™¯3ï¼šå¿«é€Ÿç¼–è¾‘è„šæœ¬"><a href="#åœºæ™¯3ï¼šå¿«é€Ÿç¼–è¾‘è„šæœ¬" class="headerlink" title="åœºæ™¯3ï¼šå¿«é€Ÿç¼–è¾‘è„šæœ¬"></a>åœºæ™¯3ï¼šå¿«é€Ÿç¼–è¾‘è„šæœ¬</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs awk">$ ed script.sh<br><span class="hljs-regexp">/function_name/</span>     <span class="hljs-comment"># æ‰¾åˆ°å‡½æ•°å®šä¹‰</span><br>.,+<span class="hljs-number">5</span>p               <span class="hljs-comment"># æŸ¥çœ‹å‡½æ•°åŠå…¶å5è¡Œ</span><br>.,+<span class="hljs-number">5</span>s<span class="hljs-regexp">/old/</span>new/g     <span class="hljs-comment"># æ›¿æ¢å‡½æ•°å†…çš„æ–‡æœ¬</span><br>w<br>q<br></code></pre></td></tr></table></figure><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li>ed æ˜¯è¡Œç¼–è¾‘å™¨ï¼Œæ²¡æœ‰å…¨å±ç•Œé¢ï¼Œæ‰€æœ‰æ“ä½œåŸºäºå‘½ä»¤</li><li>å‘½ä»¤åŒºåˆ†å¤§å°å†™</li><li>ç‚¹(.)å•ç‹¬ä¸€è¡Œè¡¨ç¤ºç»“æŸè¾“å…¥æ¨¡å¼</li><li>å¦‚æœä¸ä¿å­˜å°±é€€å‡ºï¼Œä¼šä¸¢å¤±æ‰€æœ‰æ›´æ”¹</li><li>é”™è¯¯æ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œå»ºè®®ç»å¸¸ä¿å­˜</li></ol><p>è™½ç„¶ ed ç¼–è¾‘å™¨åœ¨ç°ä»£ç¯å¢ƒä¸­ä½¿ç”¨è¾ƒå°‘ï¼Œä½†äº†è§£å®ƒçš„åŸºæœ¬æ“ä½œå¯¹äºç†è§£ UNIX å“²å­¦å’Œè®¸å¤šç°ä»£æ–‡æœ¬å¤„ç†å·¥å…·çš„å†å²å‘å±•å¾ˆæœ‰å¸®åŠ©ã€‚</p><h1 id="æ–‡ä»¶æ“ä½œ"><a href="#æ–‡ä»¶æ“ä½œ" class="headerlink" title="æ–‡ä»¶æ“ä½œ"></a>æ–‡ä»¶æ“ä½œ</h1><h2 id="æ–‡ä»¶æ“ä½œå‘½ä»¤"><a href="#æ–‡ä»¶æ“ä½œå‘½ä»¤" class="headerlink" title="æ–‡ä»¶æ“ä½œå‘½ä»¤"></a>æ–‡ä»¶æ“ä½œå‘½ä»¤</h2><h3 id="1-mv-ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶"><a href="#1-mv-ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶" class="headerlink" title="1. mv - ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶"></a>1. <code>mv</code> - ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶<br><span class="hljs-built_in">mv</span> [é€‰é¡¹] æºæ–‡ä»¶... ç›®æ ‡ç›®å½•<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-i</code>: äº¤äº’å¼æ“ä½œï¼Œè¦†ç›–å‰æç¤º</li><li><code>-f</code>: å¼ºåˆ¶è¦†ç›–ï¼Œä¸æç¤º</li><li><code>-n</code>: ä¸è¦†ç›–å·²å­˜åœ¨æ–‡ä»¶</li><li><code>-v</code>: æ˜¾ç¤ºè¯¦ç»†æ“ä½œä¿¡æ¯</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> file.txt newname.txt          <span class="hljs-comment"># é‡å‘½åæ–‡ä»¶</span><br><span class="hljs-built_in">mv</span> file.txt ~/Documents/        <span class="hljs-comment"># ç§»åŠ¨æ–‡ä»¶åˆ°ç›®å½•</span><br><span class="hljs-built_in">mv</span> -i old.txt new.txt           <span class="hljs-comment"># äº¤äº’å¼é‡å‘½å</span><br><span class="hljs-built_in">mv</span> *.txt text_files/            <span class="hljs-comment"># ç§»åŠ¨æ‰€æœ‰txtæ–‡ä»¶åˆ°ç›®å½•</span><br><span class="hljs-built_in">mv</span> -v file1 file2 <span class="hljs-built_in">dir</span>/          <span class="hljs-comment"># æ˜¾ç¤ºè¯¦ç»†ç§»åŠ¨ä¿¡æ¯</span><br></code></pre></td></tr></table></figure><h3 id="2-cp-å¤åˆ¶æ–‡ä»¶"><a href="#2-cp-å¤åˆ¶æ–‡ä»¶" class="headerlink" title="2. cp - å¤åˆ¶æ–‡ä»¶"></a>2. <code>cp</code> - å¤åˆ¶æ–‡ä»¶</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs avrasm"><span class="hljs-keyword">cp</span> [é€‰é¡¹] æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶<br><span class="hljs-keyword">cp</span> [é€‰é¡¹] æºæ–‡ä»¶... ç›®æ ‡ç›®å½•<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-i</code>: äº¤äº’å¼å¤åˆ¶</li><li><code>-r</code>&#x2F;<code>-R</code>: é€’å½’å¤åˆ¶ç›®å½•</li><li><code>-p</code>: ä¿ç•™æ–‡ä»¶å±æ€§(æƒé™ã€æ—¶é—´æˆ³ç­‰)</li><li><code>-a</code>: å½’æ¡£æ¨¡å¼ï¼Œç›¸å½“äº<code>-dpR</code></li><li><code>-v</code>: æ˜¾ç¤ºè¯¦ç»†æ“ä½œä¿¡æ¯</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> file.txt file_backup.txt      <span class="hljs-comment"># å¤åˆ¶æ–‡ä»¶</span><br><span class="hljs-built_in">cp</span> -r dir1/ dir2/               <span class="hljs-comment"># é€’å½’å¤åˆ¶ç›®å½•</span><br><span class="hljs-built_in">cp</span> -p file.txt backup/          <span class="hljs-comment"># ä¿ç•™å±æ€§å¤åˆ¶</span><br><span class="hljs-built_in">cp</span> -a project/ backup/          <span class="hljs-comment"># å®Œå…¨å¤åˆ¶ç›®å½•ç»“æ„</span><br><span class="hljs-built_in">cp</span> *.txt text_backup/           <span class="hljs-comment"># å¤åˆ¶æ‰€æœ‰txtæ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h3 id="3-rm-åˆ é™¤æ–‡ä»¶"><a href="#3-rm-åˆ é™¤æ–‡ä»¶" class="headerlink" title="3. rm - åˆ é™¤æ–‡ä»¶"></a>3. <code>rm</code> - åˆ é™¤æ–‡ä»¶</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">rm [é€‰é¡¹] æ–‡ä»¶...<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-i</code>: äº¤äº’å¼åˆ é™¤</li><li><code>-f</code>: å¼ºåˆ¶åˆ é™¤ï¼Œä¸æç¤º</li><li><code>-r</code>&#x2F;<code>-R</code>: é€’å½’åˆ é™¤ç›®å½•</li><li><code>-v</code>: æ˜¾ç¤ºè¯¦ç»†æ“ä½œä¿¡æ¯</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> file.txt                     <span class="hljs-comment"># åˆ é™¤æ–‡ä»¶</span><br><span class="hljs-built_in">rm</span> -i *.tmp                     <span class="hljs-comment"># äº¤äº’å¼åˆ é™¤tmpæ–‡ä»¶</span><br><span class="hljs-built_in">rm</span> -rf old_dir/                 <span class="hljs-comment"># å¼ºåˆ¶é€’å½’åˆ é™¤ç›®å½•(æ…ç”¨)</span><br><span class="hljs-built_in">rm</span> -v *.<span class="hljs-built_in">log</span>                     <span class="hljs-comment"># æ˜¾ç¤ºåˆ é™¤çš„æ—¥å¿—æ–‡ä»¶</span><br></code></pre></td></tr></table></figure><h2 id="æ–‡æœ¬å¤„ç†å‘½ä»¤"><a href="#æ–‡æœ¬å¤„ç†å‘½ä»¤" class="headerlink" title="æ–‡æœ¬å¤„ç†å‘½ä»¤"></a>æ–‡æœ¬å¤„ç†å‘½ä»¤</h2><h3 id="4-wc-ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯"><a href="#4-wc-ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯" class="headerlink" title="4. wc - ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯"></a>4. <code>wc</code> - ç»Ÿè®¡æ–‡æœ¬ä¿¡æ¯</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">wc [é€‰é¡¹] æ–‡ä»¶...<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-l</code>: åªç»Ÿè®¡è¡Œæ•°</li><li><code>-w</code>: åªç»Ÿè®¡å•è¯æ•°</li><li><code>-c</code>: åªç»Ÿè®¡å­—èŠ‚æ•°</li><li><code>-m</code>: åªç»Ÿè®¡å­—ç¬¦æ•°</li><li><code>-L</code>: æ˜¾ç¤ºæœ€é•¿è¡Œçš„é•¿åº¦</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">wc</span> file.txt                     <span class="hljs-comment"># æ˜¾ç¤ºè¡Œæ•°ã€å•è¯æ•°ã€å­—èŠ‚æ•°</span><br><span class="hljs-built_in">wc</span> -l *.<span class="hljs-built_in">log</span>                     <span class="hljs-comment"># ç»Ÿè®¡æ‰€æœ‰æ—¥å¿—æ–‡ä»¶è¡Œæ•°</span><br><span class="hljs-built_in">wc</span> -w report.txt                <span class="hljs-comment"># ç»Ÿè®¡æ–‡ä»¶å•è¯æ•°</span><br><span class="hljs-built_in">wc</span> -L longfile.txt              <span class="hljs-comment"># æ‰¾å‡ºæœ€é•¿è¡Œçš„é•¿åº¦</span><br><span class="hljs-built_in">cat</span> file.txt | <span class="hljs-built_in">wc</span> -c            <span class="hljs-comment"># ç»Ÿè®¡å­—èŠ‚æ•°(ç®¡é“ç”¨æ³•)</span><br></code></pre></td></tr></table></figure><h3 id="5-grep-æ–‡æœ¬æœç´¢"><a href="#5-grep-æ–‡æœ¬æœç´¢" class="headerlink" title="5. grep - æ–‡æœ¬æœç´¢"></a>5. <code>grep</code> - æ–‡æœ¬æœç´¢</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">grep [é€‰é¡¹] æ¨¡å¼ æ–‡ä»¶...<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-i</code>: å¿½ç•¥å¤§å°å†™</li><li><code>-v</code>: åå‘åŒ¹é…(æ˜¾ç¤ºä¸åŒ¹é…çš„è¡Œ)</li><li><code>-n</code>: æ˜¾ç¤ºè¡Œå·</li><li><code>-c</code>: ç»Ÿè®¡åŒ¹é…è¡Œæ•°</li><li><code>-r</code>&#x2F;<code>-R</code>: é€’å½’æœç´¢ç›®å½•</li><li><code>-l</code>: åªæ˜¾ç¤ºåŒ¹é…çš„æ–‡ä»¶å</li><li><code>-E</code>: ä½¿ç”¨æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼(ç­‰åŒäºegrep)</li><li><code>-A n</code>: æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶ånè¡Œ</li><li><code>-B n</code>: æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å‰nè¡Œ</li><li><code>-C n</code>: æ˜¾ç¤ºåŒ¹é…è¡ŒåŠå…¶å‰åå„nè¡Œ</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep <span class="hljs-string">&quot;error&quot;</span> logfile.txt        <span class="hljs-comment"># æœç´¢åŒ…å«errorçš„è¡Œ</span><br>grep -i <span class="hljs-string">&quot;warning&quot;</span> *.<span class="hljs-built_in">log</span>         <span class="hljs-comment"># å¿½ç•¥å¤§å°å†™æœç´¢warning</span><br>grep -rn <span class="hljs-string">&quot;main()&quot;</span> src/          <span class="hljs-comment"># é€’å½’æœç´¢å¹¶æ˜¾ç¤ºè¡Œå·</span><br>grep -c <span class="hljs-string">&quot;success&quot;</span> report.txt    <span class="hljs-comment"># ç»Ÿè®¡åŒ¹é…è¡Œæ•°</span><br>grep -v <span class="hljs-string">&quot;^#&quot;</span> config.cfg         <span class="hljs-comment"># æ˜¾ç¤ºä¸ä»¥#å¼€å¤´çš„è¡Œ(è¿‡æ»¤æ³¨é‡Š)</span><br>grep -E <span class="hljs-string">&quot;[0-9]&#123;3&#125;-[0-9]&#123;4&#125;&quot;</span> data.txt  <span class="hljs-comment"># ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœç´¢ç”µè¯å·ç </span><br></code></pre></td></tr></table></figure><h3 id="6-sort-æ’åºæ–‡æœ¬"><a href="#6-sort-æ’åºæ–‡æœ¬" class="headerlink" title="6. sort - æ’åºæ–‡æœ¬"></a>6. <code>sort</code> - æ’åºæ–‡æœ¬</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs prolog">sort [é€‰é¡¹] æ–‡ä»¶...<br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-n</code>: æŒ‰æ•°å€¼å¤§å°æ’åº</li><li><code>-r</code>: é€†åºæ’åº</li><li><code>-k n</code>: æŒ‰ç¬¬nåˆ—æ’åº</li><li><code>-t c</code>: æŒ‡å®šåˆ—åˆ†éš”ç¬¦ä¸ºc</li><li><code>-u</code>: å»é™¤é‡å¤è¡Œ</li><li><code>-f</code>: å¿½ç•¥å¤§å°å†™</li><li><code>-o æ–‡ä»¶</code>: å°†ç»“æœè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sort</span> names.txt                  <span class="hljs-comment"># æŒ‰å­—æ¯é¡ºåºæ’åº</span><br><span class="hljs-built_in">sort</span> -nr numbers.txt           <span class="hljs-comment"># æŒ‰æ•°å€¼é€†åºæ’åº</span><br><span class="hljs-built_in">sort</span> -t: -k3 -n /etc/passwd     <span class="hljs-comment"># æŒ‰:åˆ†éš”çš„ç¬¬3åˆ—(UID)æ•°å€¼æ’åº</span><br><span class="hljs-built_in">sort</span> -u data.txt                <span class="hljs-comment"># å»é‡æ’åº</span><br><span class="hljs-built_in">sort</span> -k2,2 -k1,1r employees.txt <span class="hljs-comment"># å…ˆæŒ‰ç¬¬2åˆ—å‡åºï¼Œå†æŒ‰ç¬¬1åˆ—é™åº</span><br></code></pre></td></tr></table></figure><h3 id="7-cmp-æ¯”è¾ƒæ–‡ä»¶å·®å¼‚-äºŒè¿›åˆ¶"><a href="#7-cmp-æ¯”è¾ƒæ–‡ä»¶å·®å¼‚-äºŒè¿›åˆ¶" class="headerlink" title="7. cmp - æ¯”è¾ƒæ–‡ä»¶å·®å¼‚(äºŒè¿›åˆ¶)"></a>7. <code>cmp</code> - æ¯”è¾ƒæ–‡ä»¶å·®å¼‚(äºŒè¿›åˆ¶)</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs armasm"><span class="hljs-keyword">cmp</span> [é€‰é¡¹] æ–‡ä»¶<span class="hljs-number">1</span> æ–‡ä»¶<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-l</code>: æ˜¾ç¤ºæ‰€æœ‰ä¸åŒå­—èŠ‚çš„ä½ç½®å’Œå€¼</li><li><code>-s</code>: é™é»˜æ¨¡å¼ï¼Œåªè¿”å›é€€å‡ºçŠ¶æ€</li><li><code>-i n</code>: è·³è¿‡å‰nä¸ªå­—èŠ‚</li><li><code>-n count</code>: æœ€å¤šæ¯”è¾ƒcountä¸ªå­—èŠ‚</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">cmp file1.bin file2.bin         <span class="hljs-comment"># åŸºæœ¬æ¯”è¾ƒ</span><br>cmp -l image1.jpg image2.jpg    <span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰å·®å¼‚å­—èŠ‚</span><br>cmp -s old new &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ç›¸åŒ&quot;</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ä¸åŒ&quot;</span>  <span class="hljs-comment"># è„šæœ¬ä¸­æ£€æŸ¥æ–‡ä»¶æ˜¯å¦ç›¸åŒ</span><br>cmp -i 1024 a.out b.out        <span class="hljs-comment"># è·³è¿‡å‰1024å­—èŠ‚æ¯”è¾ƒ</span><br></code></pre></td></tr></table></figure><h3 id="8-diff-æ¯”è¾ƒæ–‡ä»¶å·®å¼‚-æ–‡æœ¬"><a href="#8-diff-æ¯”è¾ƒæ–‡ä»¶å·®å¼‚-æ–‡æœ¬" class="headerlink" title="8. diff - æ¯”è¾ƒæ–‡ä»¶å·®å¼‚(æ–‡æœ¬)"></a>8. <code>diff</code> - æ¯”è¾ƒæ–‡ä»¶å·®å¼‚(æ–‡æœ¬)</h3><p><strong>åŸºæœ¬è¯­æ³•</strong>:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs css">diff <span class="hljs-selector-attr">[é€‰é¡¹]</span> æ–‡ä»¶<span class="hljs-number">1</span> æ–‡ä»¶<span class="hljs-number">2</span><br>diff <span class="hljs-selector-attr">[é€‰é¡¹]</span> ç›®å½•<span class="hljs-number">1</span> ç›®å½•<span class="hljs-number">2</span><br></code></pre></td></tr></table></figure><p><strong>å¸¸ç”¨é€‰é¡¹</strong>:</p><ul><li><code>-c</code>: ä¸Šä¸‹æ–‡æ ¼å¼è¾“å‡º</li><li><code>-u</code>: ç»Ÿä¸€æ ¼å¼è¾“å‡º</li><li><code>-i</code>: å¿½ç•¥å¤§å°å†™</li><li><code>-w</code>: å¿½ç•¥ç©ºç™½å·®å¼‚</li><li><code>-r</code>: é€’å½’æ¯”è¾ƒç›®å½•</li><li><code>-q</code>: åªæŠ¥å‘Šæ–‡ä»¶æ˜¯å¦ä¸åŒ</li><li><code>-y</code>: å¹¶æ’æ ¼å¼è¾“å‡º</li><li><code>-a</code>: å°†æ–‡ä»¶è§†ä¸ºæ–‡æœ¬æ–‡ä»¶(å³ä½¿çœ‹ä¼¼äºŒè¿›åˆ¶)</li></ul><p><strong>ç¤ºä¾‹</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">diff file1.txt file2.txt        <span class="hljs-comment"># åŸºæœ¬æ¯”è¾ƒ</span><br>diff -u old.c new.c &gt; patch.diff <span class="hljs-comment"># ç”Ÿæˆè¡¥ä¸æ–‡ä»¶</span><br>diff -r dir1/ dir2/             <span class="hljs-comment"># é€’å½’æ¯”è¾ƒç›®å½•</span><br>diff -iw config.cfg config.bak  <span class="hljs-comment"># å¿½ç•¥å¤§å°å†™å’Œç©ºç™½æ¯”è¾ƒ</span><br>diff -y left.txt right.txt      <span class="hljs-comment"># å¹¶æ’æ˜¾ç¤ºå·®å¼‚</span><br></code></pre></td></tr></table></figure><h2 id="ç»„åˆä½¿ç”¨ç¤ºä¾‹"><a href="#ç»„åˆä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ç»„åˆä½¿ç”¨ç¤ºä¾‹"></a>ç»„åˆä½¿ç”¨ç¤ºä¾‹</h2><ol><li><p><strong>ç»Ÿè®¡å½“å‰ç›®å½•ä¸‹æ‰€æœ‰.pyæ–‡ä»¶çš„è¡Œæ•°</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">wc</span> -l *.py<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥æ‰¾åŒ…å«â€TODOâ€çš„Pythonæ–‡ä»¶å¹¶æ˜¾ç¤ºè¡Œå·</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">grep -n <span class="hljs-string">&quot;TODO&quot;</span> *.py<br></code></pre></td></tr></table></figure></li><li><p><strong>æŒ‰æ–‡ä»¶å¤§å°æ’åºå½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -l | <span class="hljs-built_in">sort</span> -nk5<br></code></pre></td></tr></table></figure></li><li><p><strong>æ¯”è¾ƒä¸¤ä¸ªç›®å½•çš„å·®å¼‚å¹¶ç”Ÿæˆè¡¥ä¸</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">diff -Nur original/ modified/ &gt; changes.patch<br></code></pre></td></tr></table></figure></li><li><p><strong>æŸ¥æ‰¾å¹¶åˆ é™¤æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶</strong>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">find . -name <span class="hljs-string">&quot;*.tmp&quot;</span> | xargs <span class="hljs-built_in">rm</span> -v<br></code></pre></td></tr></table></figure></li></ol><p>è¿™äº›å‘½ä»¤æ˜¯UNIX&#x2F;Linuxç³»ç»Ÿä¸­æœ€å¸¸ç”¨çš„æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œç†Ÿç»ƒæŒæ¡å®ƒä»¬å¯ä»¥æå¤§æé«˜åœ¨å‘½ä»¤è¡Œç¯å¢ƒä¸‹çš„å·¥ä½œæ•ˆç‡ã€‚</p><h1 id="ç¯å¢ƒå˜é‡è®¾ç½®"><a href="#ç¯å¢ƒå˜é‡è®¾ç½®" class="headerlink" title="ç¯å¢ƒå˜é‡è®¾ç½®"></a>ç¯å¢ƒå˜é‡è®¾ç½®</h1><p>è¿™äº›å‘½ä»¤æ¶‰åŠ <strong>Linux&#x2F;Unix shell ç¯å¢ƒå˜é‡</strong> çš„è®¾ç½®å’Œä½¿ç”¨ï¼Œæˆ‘æ¥é€ä¸ªè§£é‡Šï¼š</p><h3 id="1-PS1-C"><a href="#1-PS1-C" class="headerlink" title="1. PS1=C:\\&gt;"></a><strong>1. <code>PS1=C:\\&gt;</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šä¿®æ”¹ shell çš„ <strong>å‘½ä»¤æç¤ºç¬¦ï¼ˆPrompt String 1ï¼‰</strong></li><li><strong>æ•ˆæœ</strong>ï¼š<ul><li><code>PS1</code> æ˜¯æ§åˆ¶ç»ˆç«¯æç¤ºç¬¦çš„å˜é‡</li><li><code>C:\\&gt;</code> è¡¨ç¤ºæç¤ºç¬¦ä¼šæ˜¾ç¤ºä¸º <code>C:\&gt;</code>ï¼ˆç±»ä¼¼ Windows çš„ CMD é£æ ¼ï¼‰</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ PS1=C:\\&gt;<br>C:\&gt;  <span class="hljs-comment"># ç°åœ¨æç¤ºç¬¦å˜æˆäº†è¿™æ ·</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-PS1-whoami-pwd"><a href="#2-PS1-whoami-pwd" class="headerlink" title="2. PS1=&#39;whoami:pwd &gt;&#39;"></a><strong>2. <code>PS1=&#39;</code>whoami<code>:</code>pwd<code> &gt;&#39;</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šè‡ªå®šä¹‰æç¤ºç¬¦ï¼Œæ˜¾ç¤º <strong>å½“å‰ç”¨æˆ· + å½“å‰ç›®å½•</strong></li><li><strong>è§£é‡Š</strong>ï¼š<ul><li><code>`whoami`</code>ï¼šæ‰§è¡Œ <code>whoami</code> å‘½ä»¤ï¼Œæ˜¾ç¤ºå½“å‰ç”¨æˆ·åï¼ˆå¦‚ <code>root</code> æˆ– <code>user</code>ï¼‰</li><li><code>`pwd`</code>ï¼šæ‰§è¡Œ <code>pwd</code> å‘½ä»¤ï¼Œæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•ï¼ˆå¦‚ <code>/home/user</code>ï¼‰</li><li>æœ€ç»ˆæç¤ºç¬¦æ ¼å¼ï¼š<code>ç”¨æˆ·å:å½“å‰ç›®å½• &gt;</code></li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ PS1=<span class="hljs-string">&#x27;`whoami`:`pwd` &gt;&#x27;</span><br>user:/home/user &gt;  <span class="hljs-comment"># æç¤ºç¬¦å˜æˆè¿™æ ·</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="3-echo-HOME"><a href="#3-echo-HOME" class="headerlink" title="3. echo $HOME"></a><strong>3. <code>echo $HOME</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„ <strong>å®¶ç›®å½•ï¼ˆHome Directoryï¼‰</strong></li><li><strong>è§£é‡Š</strong>ï¼š<ul><li><code>$HOME</code> æ˜¯ç¯å¢ƒå˜é‡ï¼Œå­˜å‚¨ç”¨æˆ·çš„å®¶ç›®å½•è·¯å¾„ï¼ˆå¦‚ <code>/home/user</code>ï¼‰</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$HOME</span><br>/home/user<br></code></pre></td></tr></table></figure></li></ul><h3 id="4-echo-PATH"><a href="#4-echo-PATH" class="headerlink" title="4. echo $PATH"></a><strong>4. <code>echo $PATH</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šæ˜¾ç¤º <strong>å¯æ‰§è¡Œç¨‹åºçš„æœç´¢è·¯å¾„</strong></li><li><strong>è§£é‡Š</strong>ï¼š<ul><li><code>$PATH</code> æ˜¯ç¯å¢ƒå˜é‡ï¼ŒåŒ…å«å¤šä¸ªç›®å½•è·¯å¾„ï¼Œç”¨ <code>:</code> åˆ†éš”</li><li>å½“è¾“å…¥å‘½ä»¤æ—¶ï¼Œshell ä¼šæŒ‰ <code>PATH</code> ä¸­çš„é¡ºåºæŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span><br>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin<br></code></pre></td></tr></table></figure></li></ul><h3 id="5-PATH-PATH-HOME-bin"><a href="#5-PATH-PATH-HOME-bin" class="headerlink" title="5. PATH=$PATH:$HOME/bin"></a><strong>5. <code>PATH=$PATH:$HOME/bin</code></strong></h3><ul><li><p><strong>ä½œç”¨</strong>ï¼šå°† <code>$HOME/bin</code> æ·»åŠ åˆ° <code>PATH</code> ç¯å¢ƒå˜é‡</p></li><li><p><strong>è§£é‡Š</strong>ï¼š</p><ul><li><code>$PATH:$HOME/bin</code>ï¼šåœ¨åŸ <code>PATH</code> åè¿½åŠ  <code>:$HOME/bin</code></li><li>è¿™æ · shell ä¹Ÿä¼šåœ¨ <code>~/bin</code> ç›®å½•ä¸‹æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</li></ul></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ PATH=<span class="hljs-variable">$PATH</span>:<span class="hljs-variable">$HOME</span>/bin<br>$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span><br>/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/home/user/bin<br></code></pre></td></tr></table></figure></li></ul><h3 id="6-d-home-lls-c"><a href="#6-d-home-lls-c" class="headerlink" title="6. d=/home/lls/c"></a><strong>6. <code>d=/home/lls/c</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šå®šä¹‰ä¸€ä¸ª **shell å˜é‡ <code>d</code>**ï¼Œå­˜å‚¨è·¯å¾„ <code>/home/lls/c</code></li><li><strong>è§£é‡Š</strong>ï¼š<ul><li><code>d</code> æ˜¯è‡ªå®šä¹‰å˜é‡ï¼ˆä¸æ˜¯ç¯å¢ƒå˜é‡ï¼Œä»…åœ¨å½“å‰ shell æœ‰æ•ˆï¼‰</li><li>å¯ä»¥ç”¨äºåç»­å‘½ä»¤ï¼ˆå¦‚ <code>cd $d</code>ï¼‰</li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ d=/home/lls/c<br>$ <span class="hljs-built_in">echo</span> <span class="hljs-variable">$d</span><br>/home/lls/c<br></code></pre></td></tr></table></figure></li></ul><h3 id="7-cd-d"><a href="#7-cd-d" class="headerlink" title="7. cd $d"></a><strong>7. <code>cd $d</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šåˆ‡æ¢åˆ°å˜é‡ <code>d</code> æŒ‡å®šçš„ç›®å½•</li><li><strong>è§£é‡Š</strong>ï¼š<ul><li><code>$d</code> ä¼šå±•å¼€ä¸º <code>/home/lls/c</code></li><li>ç›¸å½“äºæ‰§è¡Œ <code>cd /home/lls/c</code></li></ul></li><li><strong>ç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> <span class="hljs-variable">$d</span><br>$ <span class="hljs-built_in">pwd</span><br>/home/lls/c<br></code></pre></td></tr></table></figure></li></ul><h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h3><table><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>PS1=...</code></td><td>è®¾ç½®ç»ˆç«¯æç¤ºç¬¦</td><td><code>PS1=&#39;\u:\w $&#39;</code></td></tr><tr><td><code>echo $HOME</code></td><td>æ˜¾ç¤ºå®¶ç›®å½•</td><td><code>/home/user</code></td></tr><tr><td><code>echo $PATH</code></td><td>æ˜¾ç¤ºå¯æ‰§è¡Œæ–‡ä»¶æœç´¢è·¯å¾„</td><td><code>/usr/bin:/bin</code></td></tr><tr><td><code>PATH=$PATH:...</code></td><td>è¿½åŠ è·¯å¾„åˆ° <code>PATH</code></td><td><code>PATH=$PATH:~/bin</code></td></tr><tr><td><code>var=value</code></td><td>å®šä¹‰ shell å˜é‡</td><td><code>d=/home/lls/c</code></td></tr><tr><td><code>cd $var</code></td><td>åˆ‡æ¢åˆ°å˜é‡æŒ‡å®šçš„ç›®å½•</td><td><code>cd $d</code></td></tr></tbody></table><p>è¿™äº›å‘½ä»¤å¸¸ç”¨äº <strong>è‡ªå®šä¹‰ shell ç¯å¢ƒ</strong> æˆ– <strong>ç®¡ç†æ–‡ä»¶è·¯å¾„</strong>ã€‚</p><h1 id="æ–‡ä»¶ç³»ç»Ÿ"><a href="#æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿ"></a>æ–‡ä»¶ç³»ç»Ÿ</h1><h2 id="æ–‡ä»¶æƒé™"><a href="#æ–‡ä»¶æƒé™" class="headerlink" title="æ–‡ä»¶æƒé™"></a>æ–‡ä»¶æƒé™</h2><h3 id="å‘½ä»¤-ls-l-a-out"><a href="#å‘½ä»¤-ls-l-a-out" class="headerlink" title="å‘½ä»¤ ls -l a.out"></a><strong>å‘½ä»¤ <code>ls -l a.out</code></strong></h3><ul><li><strong>ä½œç”¨</strong>ï¼šä»¥é•¿æ ¼å¼ï¼ˆ<code>-l</code> é€‰é¡¹ï¼‰åˆ—å‡ºæ–‡ä»¶ <code>a.out</code> çš„è¯¦ç»†ä¿¡æ¯</li><li><strong>è¾“å‡ºç¤ºä¾‹</strong>ï¼š<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">-rwxr-xr-x 1 user1 <span class="hljs-built_in">users</span> 9319 2010-02-09 23:56 a.out<br></code></pre></td></tr></table></figure></li></ul><hr><h3 id="è¾“å‡ºå­—æ®µè§£æ"><a href="#è¾“å‡ºå­—æ®µè§£æ" class="headerlink" title="è¾“å‡ºå­—æ®µè§£æ"></a><strong>è¾“å‡ºå­—æ®µè§£æ</strong></h3><table><thead><tr><th>å­—æ®µ</th><th>ç¤ºä¾‹å€¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><strong>æ–‡ä»¶ç±»å‹å’Œæƒé™</strong></td><td><code>-rwxr-xr-x</code></td><td>æ–‡ä»¶ç±»å‹ + æ‰€æœ‰è€…&#x2F;ç»„&#x2F;å…¶ä»–ç”¨æˆ·çš„æƒé™</td></tr><tr><td><strong>ç¡¬é“¾æ¥æ•°</strong></td><td><code>1</code></td><td>æŒ‡å‘è¯¥æ–‡ä»¶çš„ç¡¬é“¾æ¥æ•°é‡</td></tr><tr><td><strong>æ‰€æœ‰è€…</strong></td><td><code>user1</code></td><td>æ–‡ä»¶æ‰€æœ‰è€…ç”¨æˆ·å</td></tr><tr><td><strong>æ‰€å±ç»„</strong></td><td><code>users</code></td><td>æ–‡ä»¶æ‰€å±ç”¨æˆ·ç»„</td></tr><tr><td><strong>æ–‡ä»¶å¤§å°</strong></td><td><code>9319</code></td><td>æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</td></tr><tr><td><strong>æœ€åä¿®æ”¹æ—¶é—´</strong></td><td><code>2010-02-09 23:56</code></td><td>æ–‡ä»¶æœ€åä¿®æ”¹çš„æ—¥æœŸå’Œæ—¶é—´</td></tr><tr><td><strong>æ–‡ä»¶å</strong></td><td><code>a.out</code></td><td>æ–‡ä»¶å</td></tr></tbody></table><hr><h3 id="è¯¦ç»†æ‹†è§£"><a href="#è¯¦ç»†æ‹†è§£" class="headerlink" title="è¯¦ç»†æ‹†è§£"></a><strong>è¯¦ç»†æ‹†è§£</strong></h3><h4 id="1-æ–‡ä»¶ç±»å‹å’Œæƒé™-rwxr-xr-x"><a href="#1-æ–‡ä»¶ç±»å‹å’Œæƒé™-rwxr-xr-x" class="headerlink" title="1. æ–‡ä»¶ç±»å‹å’Œæƒé™ (-rwxr-xr-x)"></a>1. æ–‡ä»¶ç±»å‹å’Œæƒé™ (<code>-rwxr-xr-x</code>)</h4><ul><li><p>**ç¬¬ä¸€ä¸ªå­—ç¬¦ <code>-</code>**ï¼šæ–‡ä»¶ç±»å‹</p><ul><li><code>-</code>ï¼šæ™®é€šæ–‡ä»¶</li><li><code>d</code>ï¼šç›®å½•</li><li><code>l</code>ï¼šç¬¦å·é“¾æ¥</li><li>å…¶ä»–å¦‚ <code>c</code>ï¼ˆå­—ç¬¦è®¾å¤‡ï¼‰ã€<code>b</code>ï¼ˆå—è®¾å¤‡ï¼‰ç­‰</li></ul></li><li><p><strong>åç»­ 9 ä¸ªå­—ç¬¦</strong>ï¼š&#x3D;&#x3D;æƒé™åˆ† 3 ç»„ï¼ˆæ‰€æœ‰è€…&#x2F;ç»„&#x2F;å…¶ä»–ç”¨æˆ·&#x3D;&#x3D;ï¼‰</p><ul><li><code>rwxr-xr-x</code> åˆ†è§£ï¼š<ul><li><strong>æ‰€æœ‰è€…æƒé™</strong> (<code>rwx</code>)ï¼šå¯è¯»ï¼ˆ<code>r</code>ï¼‰ã€å¯å†™ï¼ˆ<code>w</code>ï¼‰ã€å¯æ‰§è¡Œï¼ˆ<code>x</code>ï¼‰</li><li><strong>ç»„æƒé™</strong> (<code>r-x</code>)ï¼šå¯è¯»ï¼ˆ<code>r</code>ï¼‰ã€ä¸å¯å†™ï¼ˆ<code>-</code>ï¼‰ã€å¯æ‰§è¡Œï¼ˆ<code>x</code>ï¼‰</li><li><strong>å…¶ä»–ç”¨æˆ·æƒé™</strong> (<code>r-x</code>)ï¼šåŒç»„æƒé™</li></ul></li></ul></li></ul><h4 id="2-ç¡¬é“¾æ¥æ•°-1"><a href="#2-ç¡¬é“¾æ¥æ•°-1" class="headerlink" title="2. ç¡¬é“¾æ¥æ•° (1)"></a>2. ç¡¬é“¾æ¥æ•° (<code>1</code>)</h4><ul><li>è¡¨ç¤ºè¯¥æ–‡ä»¶æœ‰ <strong>1 ä¸ªç¡¬é“¾æ¥</strong>ï¼ˆå³æ–‡ä»¶å <code>a.out</code> æ˜¯å”¯ä¸€æŒ‡å‘è¯¥æ–‡ä»¶ inode çš„ç¡¬é“¾æ¥ï¼‰ã€‚</li></ul><h4 id="3-æ‰€æœ‰è€…å’Œç»„-user1-users"><a href="#3-æ‰€æœ‰è€…å’Œç»„-user1-users" class="headerlink" title="3. æ‰€æœ‰è€…å’Œç»„ (user1 users)"></a>3. æ‰€æœ‰è€…å’Œç»„ (<code>user1 users</code>)</h4><ul><li><strong>æ‰€æœ‰è€…</strong>ï¼šç”¨æˆ· <code>user1</code> å¯¹è¯¥æ–‡ä»¶æœ‰å®Œå…¨æ§åˆ¶æƒï¼ˆ<code>rwx</code>ï¼‰ã€‚</li><li><strong>æ‰€å±ç»„</strong>ï¼šç»„ <code>users</code> çš„æˆå‘˜å¯¹è¯¥æ–‡ä»¶æœ‰è¯»å’Œæ‰§è¡Œæƒé™ï¼ˆ<code>r-x</code>ï¼‰ã€‚</li></ul><h4 id="4-æ–‡ä»¶å¤§å°-9319"><a href="#4-æ–‡ä»¶å¤§å°-9319" class="headerlink" title="4. æ–‡ä»¶å¤§å° (9319)"></a>4. æ–‡ä»¶å¤§å° (<code>9319</code>)</h4><ul><li>æ–‡ä»¶å  <strong>9319 å­—èŠ‚</strong>ï¼ˆçº¦ 9.1 KBï¼‰ã€‚</li></ul><h4 id="5-ä¿®æ”¹æ—¶é—´-2010-02-09-23-56"><a href="#5-ä¿®æ”¹æ—¶é—´-2010-02-09-23-56" class="headerlink" title="5. ä¿®æ”¹æ—¶é—´ (2010-02-09 23:56)"></a>5. ä¿®æ”¹æ—¶é—´ (<code>2010-02-09 23:56</code>)</h4><ul><li>æ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ä¸º <strong>2010 å¹´ 2 æœˆ 9 æ—¥ 23:56</strong>ã€‚</li></ul><h4 id="6-æ–‡ä»¶å-a-out"><a href="#6-æ–‡ä»¶å-a-out" class="headerlink" title="6. æ–‡ä»¶å (a.out)"></a>6. æ–‡ä»¶å (<code>a.out</code>)</h4><ul><li>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ <strong>å¯æ‰§è¡Œæ–‡ä»¶</strong>ï¼ˆç”± <code>gcc</code> ç¼–è¯‘é»˜è®¤ç”Ÿæˆï¼‰ã€‚</li></ul><hr><h3 id="æƒé™çš„å­—æ¯ä¸æ•°å­—è¡¨ç¤º"><a href="#æƒé™çš„å­—æ¯ä¸æ•°å­—è¡¨ç¤º" class="headerlink" title="æƒé™çš„å­—æ¯ä¸æ•°å­—è¡¨ç¤º"></a><strong>æƒé™çš„å­—æ¯ä¸æ•°å­—è¡¨ç¤º</strong></h3><table><thead><tr><th>æƒé™</th><th>å­—æ¯è¡¨ç¤º</th><th>æ•°å­—è¡¨ç¤ºï¼ˆå…«è¿›åˆ¶ï¼‰</th></tr></thead><tbody><tr><td>å¯è¯»</td><td><code>r</code></td><td><code>4</code></td></tr><tr><td>å¯å†™</td><td><code>w</code></td><td><code>2</code></td></tr><tr><td>å¯æ‰§è¡Œ</td><td><code>x</code></td><td><code>1</code></td></tr><tr><td>æ— æƒé™</td><td><code>-</code></td><td><code>0</code></td></tr></tbody></table><ul><li>ç¤ºä¾‹ <code>rwxr-xr-x</code> çš„æ•°å­—è¡¨ç¤ºï¼š<ul><li>æ‰€æœ‰è€…ï¼š<code>rwx</code> &#x3D; <code>4+2+1</code> &#x3D; <code>7</code></li><li>ç»„ï¼š<code>r-x</code> &#x3D; <code>4+0+1</code> &#x3D; <code>5</code></li><li>å…¶ä»–ç”¨æˆ·ï¼š<code>r-x</code> &#x3D; <code>5</code></li><li>åˆå¹¶ä¸º **<code>755</code>**ï¼ˆå¸¸ç”¨æƒé™ï¼‰</li></ul></li></ul><hr><h3 id="æ‰©å±•å‘½ä»¤"><a href="#æ‰©å±•å‘½ä»¤" class="headerlink" title="æ‰©å±•å‘½ä»¤"></a><strong>æ‰©å±•å‘½ä»¤</strong></h3><p>å¦‚æœæƒ³ä¿®æ”¹æƒé™æˆ–æ‰€æœ‰è€…ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> 755 a.out <span class="hljs-comment"># ä¿®æ”¹æƒé™ä¸º 755</span><br><br><span class="hljs-built_in">chmod</span> â€“w a.out <span class="hljs-comment"># ç§»é™¤æ–‡ä»¶ a.out çš„æ‰€æœ‰å†™æƒé™ï¼ˆwï¼‰ï¼Œå³ç¦æ­¢ä»»ä½•ç”¨æˆ·ä¿®æ”¹è¯¥æ–‡ä»¶</span><br><br><span class="hljs-built_in">chmod</span> +x ldir <span class="hljs-comment"># ä¸ºæ–‡ä»¶æˆ–ç›®å½• ldir æ·»åŠ  æ‰€æœ‰ç”¨æˆ·çš„æ‰§è¡Œæƒé™ï¼ˆxï¼‰</span><br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chown</span> newuser a.out <span class="hljs-comment"># ä¿®æ”¹æ‰€æœ‰è€…ä¸º newuser</span><br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chgrp</span> newgroup a.out <span class="hljs-comment"># ä¿®æ”¹æ‰€å±ç»„ä¸º newgroup</span><br></code></pre></td></tr></table></figure><h1 id="è®¾å¤‡æ–‡ä»¶"><a href="#è®¾å¤‡æ–‡ä»¶" class="headerlink" title="è®¾å¤‡æ–‡ä»¶"></a>è®¾å¤‡æ–‡ä»¶</h1><blockquote><p>Everything is a File</p></blockquote><p>UNIX&#x2F;Linux ç³»ç»Ÿçš„ä¸€ä¸ªæ ¸å¿ƒè®¾è®¡æ€æƒ³æ˜¯ <strong>â€œä¸€åˆ‡çš†æ–‡ä»¶â€</strong>ï¼ˆEverything is a Fileï¼‰ï¼ŒåŒ…æ‹¬ç¡¬ä»¶è®¾å¤‡ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡ã€ç£ç›˜ã€ç»ˆç«¯ç­‰ï¼‰ä¹Ÿè¢«æŠ½è±¡ä¸ºæ–‡ä»¶ï¼Œå­˜æ”¾åœ¨ <code>/dev</code> ç›®å½•ä¸‹ã€‚è¿™ä½¿å¾—ç”¨æˆ·å’Œç¨‹åºå¯ä»¥é€šè¿‡æ ‡å‡†çš„æ–‡ä»¶æ“ä½œï¼ˆå¦‚ <code>read</code>ã€<code>write</code>ã€<code>open</code>ã€<code>close</code>ï¼‰æ¥ä¸è®¾å¤‡äº¤äº’ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚ç¡¬ä»¶ç»†èŠ‚ã€‚</p><hr><h2 id="1-è®¾å¤‡æ–‡ä»¶çš„åˆ†ç±»"><a href="#1-è®¾å¤‡æ–‡ä»¶çš„åˆ†ç±»" class="headerlink" title="1. è®¾å¤‡æ–‡ä»¶çš„åˆ†ç±»"></a><strong>1. è®¾å¤‡æ–‡ä»¶çš„åˆ†ç±»</strong></h2><p>åœ¨ UNIX&#x2F;Linux ä¸­ï¼Œè®¾å¤‡æ–‡ä»¶ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š</p><h3 id="1-å­—ç¬¦è®¾å¤‡ï¼ˆCharacter-Devicesï¼‰"><a href="#1-å­—ç¬¦è®¾å¤‡ï¼ˆCharacter-Devicesï¼‰" class="headerlink" title="(1) å­—ç¬¦è®¾å¤‡ï¼ˆCharacter Devicesï¼‰"></a><strong>(1) å­—ç¬¦è®¾å¤‡ï¼ˆCharacter Devicesï¼‰</strong></h3><ul><li><p><strong>ç‰¹ç‚¹</strong>ï¼šä»¥<strong>å­—ç¬¦æµ</strong>æ–¹å¼é€å­—èŠ‚ä¼ è¾“æ•°æ®ï¼Œé€‚ç”¨äº<strong>éå—å­˜å‚¨è®¾å¤‡</strong>ï¼ˆå¦‚é”®ç›˜ã€é¼ æ ‡ã€ä¸²å£ã€ç»ˆç«¯ç­‰ï¼‰ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span> -l /dev/ttyS0  <span class="hljs-comment"># ä¸²å£è®¾å¤‡</span><br>crw-rw---- 1 root dialout 4, 64 Oct 10 10:00 /dev/ttyS0<br></code></pre></td></tr></table></figure><ul><li><code>c</code> è¡¨ç¤ºå­—ç¬¦è®¾å¤‡ï¼Œ<code>4</code> æ˜¯ä¸»è®¾å¤‡å·ï¼Œ<code>64</code> æ˜¯æ¬¡è®¾å¤‡å·ã€‚</li></ul></li></ul><h3 id="2-å—è®¾å¤‡ï¼ˆBlock-Devicesï¼‰"><a href="#2-å—è®¾å¤‡ï¼ˆBlock-Devicesï¼‰" class="headerlink" title="(2) å—è®¾å¤‡ï¼ˆBlock Devicesï¼‰"></a><strong>(2) å—è®¾å¤‡ï¼ˆBlock Devicesï¼‰</strong></h3><ul><li><p><strong>ç‰¹ç‚¹</strong>ï¼šä»¥<strong>å›ºå®šå¤§å°çš„æ•°æ®å—</strong>ï¼ˆå¦‚ 512Bã€4KBï¼‰ä¼ è¾“ï¼Œé€‚ç”¨äº<strong>å­˜å‚¨è®¾å¤‡</strong>ï¼ˆå¦‚ç¡¬ç›˜ã€SSDã€Uç›˜ç­‰ï¼‰ã€‚</p></li><li><p><strong>ç¤ºä¾‹</strong>ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span> -l /dev/sda  <span class="hljs-comment"># ç¡¬ç›˜è®¾å¤‡</span><br>brw-rw---- 1 root disk 8, 0 Oct 10 10:00 /dev/sda<br></code></pre></td></tr></table></figure><ul><li><code>b</code> è¡¨ç¤ºå—è®¾å¤‡ï¼Œ<code>8</code> æ˜¯ä¸»è®¾å¤‡å·ï¼Œ<code>0</code> æ˜¯æ¬¡è®¾å¤‡å·ã€‚</li></ul></li></ul><hr><h2 id="2-è®¾å¤‡å·ï¼ˆMajor-Minor-Numbersï¼‰"><a href="#2-è®¾å¤‡å·ï¼ˆMajor-Minor-Numbersï¼‰" class="headerlink" title="2. è®¾å¤‡å·ï¼ˆMajor &amp; Minor Numbersï¼‰"></a><strong>2. è®¾å¤‡å·ï¼ˆMajor &amp; Minor Numbersï¼‰</strong></h2><p>æ¯ä¸ªè®¾å¤‡æ–‡ä»¶éƒ½æœ‰ä¸¤ä¸ªå…³é”®æ•°å­—ï¼š</p><ul><li><strong>ä¸»è®¾å¤‡å·ï¼ˆMajor Numberï¼‰</strong>ï¼šæ ‡è¯†<strong>è®¾å¤‡ç±»å‹</strong>ï¼ˆå¦‚ <code>4</code> è¡¨ç¤ºç»ˆç«¯è®¾å¤‡ï¼Œ<code>8</code> è¡¨ç¤º SCSI ç£ç›˜ï¼‰ã€‚</li><li><strong>æ¬¡è®¾å¤‡å·ï¼ˆMinor Numberï¼‰</strong>ï¼šæ ‡è¯†<strong>å…·ä½“è®¾å¤‡å®ä¾‹</strong>ï¼ˆå¦‚ <code>/dev/sda1</code> å’Œ <code>/dev/sda2</code> æ˜¯åŒä¸€ç¡¬ç›˜çš„ä¸åŒåˆ†åŒºï¼‰ã€‚</li></ul><p>æŸ¥çœ‹è®¾å¤‡å·ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">ls</span> -l /dev/sda<br>brw-rw---- 1 root disk 8, 0 Oct 10 10:00 /dev/sda  <span class="hljs-comment"># ä¸»è®¾å¤‡å·=8ï¼Œæ¬¡è®¾å¤‡å·=0</span><br></code></pre></td></tr></table></figure><hr><h2 id="3-è®¾å¤‡æ–‡ä»¶çš„åˆ›å»ºä¸ç®¡ç†"><a href="#3-è®¾å¤‡æ–‡ä»¶çš„åˆ›å»ºä¸ç®¡ç†" class="headerlink" title="3. è®¾å¤‡æ–‡ä»¶çš„åˆ›å»ºä¸ç®¡ç†"></a><strong>3. è®¾å¤‡æ–‡ä»¶çš„åˆ›å»ºä¸ç®¡ç†</strong></h2><h3 id="1-æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼ˆmknodï¼‰"><a href="#1-æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼ˆmknodï¼‰" class="headerlink" title="(1) æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼ˆmknodï¼‰"></a><strong>(1) æ‰‹åŠ¨åˆ›å»ºè®¾å¤‡æ–‡ä»¶ï¼ˆ<code>mknod</code>ï¼‰</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mknod</span> /dev/mydevice c 123 0  <span class="hljs-comment"># åˆ›å»ºå­—ç¬¦è®¾å¤‡ï¼Œä¸»è®¾å¤‡å·=123ï¼Œæ¬¡è®¾å¤‡å·=0</span><br>$ <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> 666 /dev/mydevice      <span class="hljs-comment"># è®¾ç½®æƒé™ï¼Œå…è®¸è¯»å†™</span><br></code></pre></td></tr></table></figure><h3 id="2-åŠ¨æ€è®¾å¤‡ç®¡ç†ï¼ˆudevï¼‰"><a href="#2-åŠ¨æ€è®¾å¤‡ç®¡ç†ï¼ˆudevï¼‰" class="headerlink" title="(2) åŠ¨æ€è®¾å¤‡ç®¡ç†ï¼ˆudevï¼‰"></a><strong>(2) åŠ¨æ€è®¾å¤‡ç®¡ç†ï¼ˆ<code>udev</code>ï¼‰</strong></h3><p>ç°ä»£ Linux ä½¿ç”¨ <code>udev</code> åŠ¨æ€ç®¡ç† <code>/dev</code> ç›®å½•ï¼Œè®¾å¤‡æ’æ‹”æ—¶è‡ªåŠ¨åˆ›å»º&#x2F;åˆ é™¤è®¾å¤‡æ–‡ä»¶ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ udevadm monitor  <span class="hljs-comment"># ç›‘æ§è®¾å¤‡äº‹ä»¶</span><br></code></pre></td></tr></table></figure><hr><h2 id="4-è®¾å¤‡æ–‡ä»¶çš„ä½¿ç”¨ç¤ºä¾‹"><a href="#4-è®¾å¤‡æ–‡ä»¶çš„ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="4. è®¾å¤‡æ–‡ä»¶çš„ä½¿ç”¨ç¤ºä¾‹"></a><strong>4. è®¾å¤‡æ–‡ä»¶çš„ä½¿ç”¨ç¤ºä¾‹</strong></h2><h3 id="1-ç»ˆç«¯è®¾å¤‡ï¼ˆ-dev-pts-ï¼‰"><a href="#1-ç»ˆç«¯è®¾å¤‡ï¼ˆ-dev-pts-ï¼‰" class="headerlink" title="(1) ç»ˆç«¯è®¾å¤‡ï¼ˆ/dev/pts/*ï¼‰"></a><strong>(1) ç»ˆç«¯è®¾å¤‡ï¼ˆ<code>/dev/pts/*</code>ï¼‰</strong></h3><ul><li><p><strong><code>/dev/pts/0</code></strong> æ˜¯å½“å‰ç»ˆç«¯ï¼ˆä¼ªç»ˆç«¯ï¼‰ï¼Œå¯ä»¥ç›´æ¥å†™å…¥æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello, terminal!&quot;</span> &gt; /dev/pts/0  <span class="hljs-comment"># åœ¨å½“å‰ç»ˆç«¯æ˜¾ç¤ºæ¶ˆæ¯</span><br></code></pre></td></tr></table></figure></li><li><p><strong><code>/dev/tty</code></strong> æ˜¯å½“å‰è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;Hello, tty!&quot;</span> &gt; /dev/tty  <span class="hljs-comment"># ç›´æ¥è¾“å‡ºåˆ°å½“å‰ç»ˆç«¯</span><br></code></pre></td></tr></table></figure></li></ul><h3 id="2-ç©ºè®¾å¤‡ï¼ˆ-dev-nullï¼‰"><a href="#2-ç©ºè®¾å¤‡ï¼ˆ-dev-nullï¼‰" class="headerlink" title="(2) ç©ºè®¾å¤‡ï¼ˆ/dev/nullï¼‰"></a><strong>(2) ç©ºè®¾å¤‡ï¼ˆ<code>/dev/null</code>ï¼‰</strong></h3><p>ä¸¢å¼ƒæ‰€æœ‰å†™å…¥çš„æ•°æ®ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> /etc/passwd &gt; /dev/null  <span class="hljs-comment"># æ•°æ®è¢«ä¸¢å¼ƒï¼Œä¸æ˜¾ç¤º</span><br></code></pre></td></tr></table></figure><h3 id="3-éšæœºæ•°è®¾å¤‡ï¼ˆ-dev-random-dev-urandomï¼‰"><a href="#3-éšæœºæ•°è®¾å¤‡ï¼ˆ-dev-random-dev-urandomï¼‰" class="headerlink" title="(3) éšæœºæ•°è®¾å¤‡ï¼ˆ/dev/random &amp; /dev/urandomï¼‰"></a><strong>(3) éšæœºæ•°è®¾å¤‡ï¼ˆ<code>/dev/random</code> &amp; <code>/dev/urandom</code>ï¼‰</strong></h3><ul><li>**<code>/dev/random</code>**ï¼šé˜»å¡å¼éšæœºæ•°ç”Ÿæˆï¼ˆç†µè€—å°½æ—¶ç­‰å¾…ï¼‰ã€‚</li><li>**<code>/dev/urandom</code>**ï¼šéé˜»å¡å¼éšæœºæ•°ç”Ÿæˆï¼ˆé€Ÿåº¦æ›´å¿«ï¼‰ã€‚</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">head</span> -c 16 /dev/urandom | <span class="hljs-built_in">base64</span>  <span class="hljs-comment"># ç”Ÿæˆ 16 å­—èŠ‚éšæœº Base64 å­—ç¬¦ä¸²</span><br></code></pre></td></tr></table></figure><h3 id="4-ç£ç›˜è®¾å¤‡ï¼ˆ-dev-sd-ï¼‰"><a href="#4-ç£ç›˜è®¾å¤‡ï¼ˆ-dev-sd-ï¼‰" class="headerlink" title="(4) ç£ç›˜è®¾å¤‡ï¼ˆ/dev/sd*ï¼‰"></a><strong>(4) ç£ç›˜è®¾å¤‡ï¼ˆ<code>/dev/sd*</code>ï¼‰</strong></h3><p>ç›´æ¥è¯»å†™ç£ç›˜ï¼ˆéœ€ root æƒé™ï¼‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/sda of=disk_backup.img bs=4M  <span class="hljs-comment"># å¤‡ä»½æ•´ä¸ªç£ç›˜</span><br></code></pre></td></tr></table></figure><hr><h2 id="5-è®¾å¤‡æ–‡ä»¶ä¸æ™®é€šæ–‡ä»¶çš„åŒºåˆ«"><a href="#5-è®¾å¤‡æ–‡ä»¶ä¸æ™®é€šæ–‡ä»¶çš„åŒºåˆ«" class="headerlink" title="5. è®¾å¤‡æ–‡ä»¶ä¸æ™®é€šæ–‡ä»¶çš„åŒºåˆ«"></a><strong>5. è®¾å¤‡æ–‡ä»¶ä¸æ™®é€šæ–‡ä»¶çš„åŒºåˆ«</strong></h2><table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>æ™®é€šæ–‡ä»¶</strong></th><th><strong>è®¾å¤‡æ–‡ä»¶</strong></th></tr></thead><tbody><tr><td><strong>å­˜å‚¨æ–¹å¼</strong></td><td>å­˜å‚¨åœ¨ç£ç›˜ä¸Š</td><td>æ— å®é™…å­˜å‚¨ï¼Œç›´æ¥æ˜ å°„åˆ°è®¾å¤‡é©±åŠ¨</td></tr><tr><td><strong>è¯»å†™æ“ä½œ</strong></td><td>ç”±æ–‡ä»¶ç³»ç»Ÿç®¡ç†</td><td>ç”±å†…æ ¸è®¾å¤‡é©±åŠ¨å¤„ç†</td></tr><tr><td><strong>æ–‡ä»¶ç±»å‹</strong></td><td><code>-</code>ï¼ˆæ™®é€šæ–‡ä»¶ï¼‰</td><td><code>c</code>ï¼ˆå­—ç¬¦è®¾å¤‡ï¼‰æˆ– <code>b</code>ï¼ˆå—è®¾å¤‡ï¼‰</td></tr><tr><td><strong>ç¤ºä¾‹</strong></td><td><code>/etc/passwd</code></td><td><code>/dev/sda</code>, <code>/dev/tty1</code></td></tr></tbody></table><hr><h2 id="6-é«˜çº§åº”ç”¨"><a href="#6-é«˜çº§åº”ç”¨" class="headerlink" title="6. é«˜çº§åº”ç”¨"></a><strong>6. é«˜çº§åº”ç”¨</strong></h2><h3 id="1-é‡å®šå‘åˆ°è®¾å¤‡"><a href="#1-é‡å®šå‘åˆ°è®¾å¤‡" class="headerlink" title="(1) é‡å®šå‘åˆ°è®¾å¤‡"></a><strong>(1) é‡å®šå‘åˆ°è®¾å¤‡</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> myfile.txt &gt; /dev/pts/1  <span class="hljs-comment"># å°†æ–‡ä»¶å†…å®¹å‘é€åˆ°å¦ä¸€ä¸ªç»ˆç«¯</span><br></code></pre></td></tr></table></figure><h3 id="2-è®¾å¤‡æ–‡ä»¶ä¸ç®¡é“ç»“åˆ"><a href="#2-è®¾å¤‡æ–‡ä»¶ä¸ç®¡é“ç»“åˆ" class="headerlink" title="(2) è®¾å¤‡æ–‡ä»¶ä¸ç®¡é“ç»“åˆ"></a><strong>(2) è®¾å¤‡æ–‡ä»¶ä¸ç®¡é“ç»“åˆ</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ tar -czf - /home | ssh user@host <span class="hljs-string">&quot;cat &gt; /dev/sdc1/home_backup.tar.gz&quot;</span><br><span class="hljs-comment"># å‹ç¼© /home å¹¶ç›´æ¥å†™å…¥è¿œç¨‹ç¡¬ç›˜</span><br></code></pre></td></tr></table></figure><h3 id="3-è°ƒè¯•è®¾å¤‡"><a href="#3-è°ƒè¯•è®¾å¤‡" class="headerlink" title="(3) è°ƒè¯•è®¾å¤‡"></a><strong>(3) è°ƒè¯•è®¾å¤‡</strong></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">sudo</span> strace -e open,<span class="hljs-built_in">read</span>,write <span class="hljs-built_in">cat</span> /dev/input/mouse0<br><span class="hljs-comment"># ç›‘æ§é¼ æ ‡è®¾å¤‡çš„è¯»å†™æ“ä½œ</span><br></code></pre></td></tr></table></figure><hr><h2 id="7-å®‰å…¨æ³¨æ„äº‹é¡¹"><a href="#7-å®‰å…¨æ³¨æ„äº‹é¡¹" class="headerlink" title="7. å®‰å…¨æ³¨æ„äº‹é¡¹"></a><strong>7. å®‰å…¨æ³¨æ„äº‹é¡¹</strong></h2><ul><li>**<code>/dev/kmem</code>ã€<code>/dev/mem</code>**ï¼šç›´æ¥è®¿é—®å†…æ ¸å†…å­˜ï¼Œå±é™©ï¼</li><li>**<code>/dev/sd*</code>**ï¼šè¯¯æ“ä½œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ï¼ˆå¦‚ <code>dd if=/dev/zero of=/dev/sda</code> ä¼šæ¸…ç©ºç¡¬ç›˜ï¼‰ã€‚</li><li><strong>æƒé™ç®¡ç†</strong>ï¼šé»˜è®¤è®¾å¤‡æ–‡ä»¶æƒé™è¾ƒä¸¥æ ¼ï¼ˆå¦‚ <code>/dev/sda</code> ä»… root å¯å†™ï¼‰ï¼Œé¿å…éšæ„ä¿®æ”¹ã€‚</li></ul><hr><h2 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a><strong>æ€»ç»“</strong></h2><p>UNIX çš„è®¾å¤‡æ–‡ä»¶æœºåˆ¶ä½¿å¾—ç¡¬ä»¶ç®¡ç†å˜å¾—æå…¶çµæ´»ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ–‡ä»¶æ“ä½œç›´æ¥æ§åˆ¶è®¾å¤‡ã€‚ç†è§£ <code>/dev</code> ç›®å½•çš„ç»“æ„å’Œè®¾å¤‡å·ï¼ˆMajor&#x2F;Minorï¼‰æœ‰åŠ©äºè¿›è¡Œç³»ç»Ÿè°ƒè¯•ã€é©±åŠ¨å¼€å‘å’Œè‡ªåŠ¨åŒ–ç®¡ç†ã€‚</p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>UNIX</tag>
      
      <tag>å¤ä¹ </tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BUAA-OO-Unit3</title>
    <link href="/2025/05/14/BUAA-OO-Unit3/"/>
    <url>/2025/05/14/BUAA-OO-Unit3/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯2025å¹´åŒ—èˆªOOç¬¬ä¸‰å•å…ƒçš„æ€»ç»“åšå®¢ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><h1 id="å„ç§æµ‹è¯•"><a href="#å„ç§æµ‹è¯•" class="headerlink" title="å„ç§æµ‹è¯•"></a>å„ç§æµ‹è¯•</h1><ul><li>ä½œä¸šè¦æ±‚ï¼Œè¿™é‡Œå°±ä¸è¯´äº†ğŸ˜†</li></ul><h1 id="æµ‹è¯•æ•°æ®æ„é€ "><a href="#æµ‹è¯•æ•°æ®æ„é€ " class="headerlink" title="æµ‹è¯•æ•°æ®æ„é€ "></a>æµ‹è¯•æ•°æ®æ„é€ </h1><blockquote><p><strong>æœªæµ‹ä»£ç æ°¸è¿œæ˜¯é”™çš„</strong>  â€”â€”jyy</p></blockquote><ul><li><p>&#x3D;&#x3D;ä»¥hw10æ•°æ®ç”Ÿæˆå™¨ä¸ºä¾‹&#x3D;&#x3D;</p></li><li><p>åœ¨æˆ‘çš„æµ‹è¯•æ•°æ®ç”Ÿæˆå™¨<code>generator.py</code>ä¸­ï¼Œè®¾è®¡äº†å‡ ç§æµ‹è¯•åœºæ™¯ï¼Œåˆ†åˆ«æµ‹è¯•<strong>ä¸åŒçš„è¾“å…¥æ¨¡å¼ä¸ç¨‹åºåŠŸèƒ½</strong>ï¼Œä¸»è¦æµ‹è¯•å‡ ä¸ªéœ€è¦<strong>åŠ¨æ€ç»´æŠ¤</strong>çš„å±æ€§ç›¸å…³çš„æŒ‡ä»¤</p></li><li><p>ç”±äºé€šè¿‡äº†ä¸­æµ‹ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†çš„åŸºæœ¬æŒ‡ä»¤å•ç‹¬çš„åŠŸèƒ½æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå› æ­¤æˆ‘è®¾è®¡äº†å‡ ç§è®¾è®¡æ¨¡å¼æ¥é‡ç‚¹æµ‹è¯•<code>qba</code>ã€<code>qtvs</code>ä»¥åŠ<strong>å…¬ä¼—å·ã€æ–‡ç« ç›¸å…³çš„æŒ‡ä»¤</strong></p></li><li><p>é‡‡ç”¨éšæœºç­–ç•¥+æŒ‡å®šæ¦‚ç‡æ¥ç”Ÿæˆ</p></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs python">mode_probabilities = &#123;<br>    <span class="hljs-string">&#x27;normal_data&#x27;</span>: <span class="hljs-number">0.05</span>,<br>        <span class="hljs-string">&#x27;stress_test_data&#x27;</span>: <span class="hljs-number">0.1</span>,                                        <br>        <span class="hljs-string">&#x27;special_qtvs&#x27;</span>: <span class="hljs-number">0.3</span>,                        <br>        <span class="hljs-string">&#x27;structured_social_media_test&#x27;</span>: <span class="hljs-number">0.25</span>,      <br>        <span class="hljs-string">&#x27;special_qba_stress_test&#x27;</span>: <span class="hljs-number">0.3</span>         <br>    &#125;<br></code></pre></td></tr></table></figure><ul><li>æ€»å…±5ç§æ¨¡å¼<ul><li><code>normal_data</code>ï¼šå¸¸è§„æµ‹è¯•æ•°æ®ï¼Œæ·»åŠ ç”¨æˆ·ã€æ ‡ç­¾ã€å…¬ä¼—å·åï¼Œå‰©ä½™çš„æŒ‡ä»¤éšæœºç”Ÿæˆ</li><li><code>stress_test_data</code>ï¼šåœ¨å¸¸è§„æµ‹è¯•çš„åŸºç¡€ä¸Šï¼Œå¢å¤§æ•°æ®é‡ï¼ŒåŒæ—¶ä¼šå…ˆéšæœºè®¾ç½®å…³ç³»å€¼ï¼Œç„¶åéšæœºç”ŸæˆæŒ‡ä»¤</li><li><code>special_qtvs</code>ï¼šä¸“é—¨é’ˆå¯¹<code>qtvs</code>çš„ç”Ÿæˆæ¨¡å¼ã€‚é¦–å…ˆåˆ›å»ºç”¨æˆ·ï¼Œæ¥ç€å»ºç«‹æ‰€æœ‰å…¶ä»–äººä¸1å·äººç‰©çš„å…³ç³»ï¼Œå¹¶éšæœºæ·»åŠ ä¸€äº›å…³ç³»ï¼Œç„¶åå…¨éƒ¨åŠ å…¥1å·äººç‰©çš„æ ‡ç­¾ä¸­ï¼Œç„¶ååˆ†2é˜¶æ®µæµ‹è¯•ï¼Œç¬¬ä¸€é˜¶æ®µåœ¨ç½‘ç»œä¸­éšæœºä¿®æ”¹å…³ç³»ï¼Œæ·»åŠ å…³ç³»ï¼ŒæŸ¥è¯¢qtvsï¼›ç¬¬äºŒé˜¶æ®µå¤§è‡´ä¸ç¬¬ä¸€é˜¶æ®µç±»ä¼¼ï¼Œä½†æ·»åŠ äº†æŒ‡ä»¤<code>dft</code>ï¼Œä»¥åŠå¢åŠ äº†<code>qtvs</code> çš„æ¦‚ç‡ã€‚</li><li><code>special_qba_stress_test</code>ï¼šä¸“é—¨é’ˆå¯¹<code>qba</code>çš„æµ‹è¯•ã€‚é¦–å…ˆå»ºç«‹ä¸€ä¸ªæ€»äººæ•°20%çš„æ ¸å¿ƒç”¨æˆ·ç¾¤ï¼Œç„¶ååœ¨æ ¸å¿ƒç”¨æˆ·ä¸­æ¯ä¸ªç”¨æˆ·éšæœºæ·»åŠ 2-3ä¸ªå…³ç³»ï¼Œç„¶åå¼€å§‹ç¬¬äºŒé˜¶æ®µï¼Œæ··åˆæµ‹è¯•ï¼š40%æ¦‚ç‡æ‰§è¡ŒqbaæŸ¥è¯¢ï¼Œå¹¶ä¸”80%æ¦‚ç‡æŸ¥è¯¢æ ¸å¿ƒç”¨æˆ·ï¼Œ20%æ¦‚ç‡æŸ¥è¯¢å…¶ä»–ç”¨æˆ·ï¼›30%æ¦‚ç‡æ–°å¢æˆ–ä¿®æ”¹æ ¸å¿ƒç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·ä¹‹é—´çš„å…³ç³»ï¼›30%æ¦‚ç‡æ–°å¢ç”¨æˆ·å’Œå…³ç³»å€¼ï¼Œå…¶ä¸­ä¸€åŠæ¦‚ç‡æ–°å¢ç”¨æˆ·å¹¶æ·»åŠ å…³ç³»ï¼Œä¸€åŠæ¦‚ç‡åœ¨æ‰€æœ‰ç”¨æˆ·ä¸­éšæœºæ·»åŠ å…³ç³»</li><li><code>structured_social_media_test</code>ï¼šç¬¬ä¸€é˜¶æ®µï¼šæ·»åŠ ç”¨æˆ·å’Œå…³ç³»ï¼›ç¬¬äºŒé˜¶æ®µï¼šæ·»åŠ å…¬ä¼—å·ï¼Œå¹¶æ·»åŠ å°‘é‡å…³æ³¨å’Œæ–‡ç« ï¼›ç¬¬ä¸‰é˜¶æ®µï¼šæµ·é‡çš„æ•°æ®æ¥éšæœºè¿›è¡Œä»¥ä¸‹å‡ ç§æ“ä½œï¼šè´¡çŒ®æ–‡ç« ã€åˆ é™¤æ–‡ç« ã€æ·»åŠ å…³æ³¨ã€åˆ é™¤å…¬ä¼—å·ã€æŸ¥è¯¢æ¥å—æ–‡ç« ã€æŸ¥è¯¢æœ€ä½³è´¡çŒ®è€…</li></ul></li><li>ğŸ˜ç°åœ¨å›å¤´çœ‹ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤šå¯ä»¥å®Œå–„çš„åœ°æ–¹ qwq</li></ul><h1 id="æ¶æ„è®¾è®¡"><a href="#æ¶æ„è®¾è®¡" class="headerlink" title="æ¶æ„è®¾è®¡"></a>æ¶æ„è®¾è®¡</h1><ul><li>jmlçš„æ¶æ„å·²ç»å¾ˆå¥½äº†ï¼Œ<del>è·Ÿç€æ— è„‘å®ç°å°±å¯ä»¥äº†</del></li></ul><h1 id="ç»´æŠ¤ç­–ç•¥"><a href="#ç»´æŠ¤ç­–ç•¥" class="headerlink" title="ç»´æŠ¤ç­–ç•¥"></a>ç»´æŠ¤ç­–ç•¥</h1><h2 id="query-shortest-path"><a href="#query-shortest-path" class="headerlink" title="query_shortest_path"></a>query_shortest_path</h2><ul><li>è¿™ä¸ªä¸å¤ªå¥½ç»´æŠ¤ï¼Œæˆ‘æ˜¯ç›´æ¥è®¡ç®—çš„ï¼Œæ—¶é—´å¤æ‚åº¦ä¹Ÿä¸ä¼šè¶…</li><li>å¯ä»¥é‡‡ç”¨çš„æ–¹æ³•æ¯”è¾ƒå¤šï¼šDijkstraã€BFSã€åŒå‘BFSï¼Œå¯ä»¥é€‰æ‹©è‡ªå·±å–œæ¬¢çš„</li></ul><h2 id="query-best-contributor"><a href="#query-best-contributor" class="headerlink" title="query_best_contributor"></a>query_best_contributor</h2><ul><li>ç›´æ¥ç®—ï¼Œä¸€å±‚å¾ªç¯å°±å¯ä»¥</li></ul><h2 id="query-triple-sum"><a href="#query-triple-sum" class="headerlink" title="query_triple_sum"></a>query_triple_sum</h2><ul><li>è¿™ä¸ªæ˜¯å¯ä»¥åŠ¨æ€ç»´æŠ¤çš„ï¼Œåªéœ€è¦è€ƒè™‘ä¸‹é¢è¿™å‡ ç‚¹</li><li>å†™ä¸€ä¸ª<strong>è®¡ç®—å…±åŒå¥½å‹æ•°é‡</strong>çš„æ–¹æ³•<code>private int countCommonNeighbors(Person p1, Person p2)</code></li><li>æ¯æ¬¡æ·»åŠ å…³ç³»æ—¶ï¼Œ<code>triple_sum</code>åŠ ä¸Š<code>countCommonNeighbors</code>è¿”å›å€¼</li><li>æ¯æ¬¡åˆ é™¤å…³ç³»æ—¶ï¼Œå‡å»æ–¹æ³•è¿”å›å€¼å³å¯</li></ul><h2 id="query-best-acquaintance"><a href="#query-best-acquaintance" class="headerlink" title="query_best_acquaintance"></a>query_best_acquaintance</h2><ul><li>åŠ¨æ€ç»´æŠ¤çš„ï¼Œè€Œä¸”åé¢çš„<code>query_couple_sum</code>ä¾èµ–è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æœ€å¥½è¦ä¼˜ä¸€ç‚¹ï¼Œä¸ç„¶åé¢çš„æ–¹æ³•å¯èƒ½è¦å¯„</li><li>åœ¨Personä¸­æ·»åŠ <code>int bestAcquaintance, bestValue</code>å’Œ<code>bestDirty</code>è¿™ä¸‰ä¸ªå±æ€§</li><li>æœ´ç´ éå†å®ç°ä¸€ä¸ª<code>public void reSetBestAcquaintance()</code>æ–¹æ³•</li><li>æ·»åŠ å…³ç³»æ—¶ç›´æ¥ä¸ç›®å‰çš„æœ€å€¼æ¯”è¾ƒï¼Œç„¶åç»´æŠ¤</li><li>åˆ é™¤å…³ç³»æ—¶ï¼Œå¦‚æœåˆ é™¤çš„æ˜¯<code>bestAcquaintance</code>ï¼Œé‚£ä¹ˆç½®ä½<code>bestDirty</code></li><li>ä¿®æ”¹å…³ç³»æ—¶ï¼Œæœ‰è¿™ä¹ˆä¸€äº›æƒ…å†µ<ul><li>å¦‚æœä¿®æ”¹çš„å°±æ˜¯<code>bestAcquaintance</code>ï¼Œå¦‚æœæ˜¯æŠŠvalueæ”¹å¤§äº†ï¼Œé‚£ä¹ˆç›´æ¥ç»´æŠ¤<code>bestValue</code>å³å¯ï¼›å¦‚æœæ˜¯valueæ”¹å°äº†ï¼Œé‚£ä¹ˆç½®ä½<code>bestDirty</code></li><li>å¦‚æœä¿®æ”¹çš„ä¸æ˜¯æœ€å¥½çš„ï¼Œé‚£ä¹ˆåªéœ€è¦åœ¨<code>newValue</code>å¤§äºç°åœ¨çš„<code>bestValue</code>æˆ–è€…äºŒè€…ç›¸ç­‰ä½†idæ›´å°çš„æ—¶å€™ç»´æŠ¤<code>bestAcquaintance å’Œ bestValue</code></li></ul></li><li>æŸ¥è¯¢æ—¶ï¼Œå¦‚æœ<code>bestDirty</code>ç½®ä½äº†ï¼Œé‚£ä¹ˆè°ƒç”¨<code>reSetBestAcquaintance()</code>æ–¹æ³•æ›´æ–°ï¼Œå¦åˆ™ç›´æ¥è¿”å›å³å¯</li></ul><h2 id="query-couple-sum"><a href="#query-couple-sum" class="headerlink" title="query_couple_sum"></a>query_couple_sum</h2><ul><li>æ²¡æƒ³å¥½æ€ä¹ˆç»´æŠ¤ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚ç›´æ¥è®¡ç®—ï¼Œä¸€å±‚å¾ªç¯å°±å¯ä»¥è§£å†³</li><li>éå†æ¯ä¸ªäººp1,ç„¶åå¾—åˆ°p1çš„æœ€å¥½æœ‹å‹p2ï¼Œå¦‚æœp2çš„æœ€å¥½æœ‹å‹ä¹Ÿæ˜¯p1ï¼Œé‚£ä¹ˆ<code>num++</code></li><li>ç”±äºæ¯ä¸€å¯¹ç®—äº†2éï¼Œæ‰€ä»¥æœ€å<code>return num / 2;</code></li></ul><h2 id="query-tag-age-var"><a href="#query-tag-age-var" class="headerlink" title="query_tag_age_var"></a>query_tag_age_var</h2><ul><li>å‚è€ƒçš„æ˜¯<code>hyggge</code>çš„åšå®¢ï¼Œ<a href="https://hyggge.github.io/2022/06/04/oo/oo-di-san-dan-yuan-zong-jie/">é“¾æ¥åœ¨è¿™é‡Œ</a></li><li>æœ‰ä¸€ä¸ªå°å‘ç‚¹ï¼Œå­¦é•¿å·²ç»è¯´çš„å¾ˆè¯¦ç»†äº†</li></ul><h2 id="query-tag-value-sum"><a href="#query-tag-value-sum" class="headerlink" title="query_tag_value_sum"></a>query_tag_value_sum</h2><ul><li>åŠ¨æ€ç»´æŠ¤è¯•äº†å¾ˆä¹…ï¼Œæœ€åæ”¾å¼ƒäº† qwqï¼Œç”¨äº†ä¸€ä¸ªé˜‰å‰²ç‰ˆçš„åŠ¨æ€ç»´æŠ¤</li><li><code>Tag</code>é‡Œçš„<code>addPerson</code>å’Œ<code>delPerson</code>æ–¹æ³•ä¸­ï¼Œéå†ä¸€épersonï¼Œå¦‚æœä¸è¿™ä¸ªè¦æ·»åŠ ã€åˆ é™¤çš„äººæœ‰å…³è”ï¼Œå°±å°†<code>valueSum</code> åŠ ä¸Šæˆ–å‡å»äºŒè€…å…³ç³»å€¼çš„2å€ï¼Œ<strong>ä¸€å®šæ³¨æ„æ˜¯ 2 å€</strong>ï¼Œçœ‹çœ‹jmlåº”è¯¥å°±èƒ½çŸ¥é“</li><li><code>Network</code>ä¸­æ·»åŠ å…³ç³»ã€ä¿®æ”¹å…³ç³»æ—¶ï¼Œéå†å…¨å±€æ‰€æœ‰tag,å¦‚æœåŒæ—¶åŒ…å«è¿™ä¸¤ä¸ªäººï¼Œå°±å°†tagçš„<code>dirty</code>ç½®ä½</li><li>æŸ¥è¯¢æ—¶ï¼Œå¦‚æœ<code>dirty</code>ï¼Œå°±é‡æ–°ç®—ä¸€éï¼Œå¦åˆ™ç›´æ¥è¿”å›</li><li>é‡æ–°ç®—çš„æ–¹æ³•ä¹Ÿæœ‰è®²ç©¶ï¼Œè‚¯å®šä¸èƒ½ç›´æ¥ç”¨<code>jml</code>çš„åŒå±‚å…¨éå†ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œåœ¨æˆ‘ä»¬çš„å…³ç³»ç½‘ä¸­ï¼Œä¸¤ä¸ªäººä¹‹é—´çš„valueä¸€å®šæ˜¯ç›¸ç­‰çš„ï¼Œé‚£ä¹ˆåœ¨éå†æ—¶ï¼Œç¬¬äºŒå±‚å¾ªç¯å°±å¯ä»¥ç›´æ¥ä»<code>i + 1</code>å¼€å§‹ï¼Œä¸ç®—é‡å¤çš„ï¼Œæœ€åè¿”å› sum * 2å³å¯</li></ul><h2 id="query-received-articles"><a href="#query-received-articles" class="headerlink" title="query_received_articles"></a>query_received_articles</h2><ul><li>ä¸»è¦æ˜¯ç»´æŠ¤è¿™ä¸ª<code>received_articles</code>è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œç”¨é“¾è¡¨å®ç°çš„è¯ï¼Œå¤´éƒ¨æ’å…¥æ²¡é—®é¢˜ï¼Œä½†æ˜¯åˆ é™¤çš„è¯ï¼Œéœ€è¦éå†é“¾è¡¨ï¼›ç”¨hashmapçš„è¯å¹¶æ²¡æœ‰åŠæ³•å®ç°é¡ºåºã€å¤´éƒ¨æ’å…¥è¿™äº›æ“ä½œï¼Œäºæ˜¯æˆ‘ä¾¿è‡ªè¡Œè®¾è®¡äº†ä¸€ä¸ªç±»ï¼Œ<code>LinkedMap</code>ï¼Œåœ¨ç±»ä¸­ç”¨hashmapå­˜ä¸‹<index-object>ç´¢å¼•å¯¹ï¼Œç„¶åä¸»ä½“ä½¿ç”¨é“¾è¡¨ï¼Œè¿™æ ·åœ¨åˆ é™¤æ—¶ï¼Œç›´æ¥æ ¹æ®ç´¢å¼•å¾—åˆ°ç›®æ ‡Object,å†è®¾ç½®å®ƒçš„<code>prev</code> <code>next</code>æŒ‡é’ˆå³å¯ï¼Œè¿™æ ·ä¾¿å®ç°äº†<strong>å¤´éƒ¨æ’å…¥å’Œåˆ é™¤å‡ä¸ºO(1)çš„å¤æ‚åº¦</strong></li><li>ä½†æ˜¯åœ¨hw11ä¸­ï¼Œæ¯”è¾ƒå˜æ€çš„æ˜¯articleså¯ä»¥é‡å¤ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªäººå¯ä»¥æœ‰å¤šç¯‡idä¸€è‡´çš„<code>received_articles</code>ï¼Œè¿™æ ·æˆ‘ä»¬è¦ä¿®æ”¹æˆ‘ä»¬çš„è‡ªåˆ¶ç±»ï¼Œå°†HashMapçš„valueæ›¿æ¢ä¸ºä¸€ä¸ªlistå³å¯ï¼Œå¦‚æœä¸å¤ªæ˜ç™½å¯ä»¥å»çœ‹çœ‹æˆ‘çš„æºä»£ç ï¼Œ<code>MultiLinkedMap.java</code>è¿™ä¸ªç±»</li></ul><h1 id="å¤§æ¨¡å‹"><a href="#å¤§æ¨¡å‹" class="headerlink" title="å¤§æ¨¡å‹"></a>å¤§æ¨¡å‹</h1><ul><li><p>ä½¿ç”¨å¤§æ¨¡å‹ï¼Œå…³é”®åœ¨äº<code>prompt</code>ï¼Œä¸€ä¸ªå¥½çš„<code>prompt</code>å¾€å¾€èƒ½è¾¾åˆ°æ„æƒ³ä¸åˆ°çš„æ•ˆæœï¼ŒåŒæ—¶è¦æä¾›è¾ƒä¸º<strong>è¯¦ç»†å……è¶³çš„ä¸Šä¸‹æ–‡ç¯å¢ƒ</strong>ï¼Œ<code>exp_6</code>å®éªŒæä¾›äº†ä¸€ä¸ªä¸é”™çš„å€Ÿé‰´</p></li><li><p>åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œè®©å¤§æ¨¡å‹æ ¹æ®<code>jml</code>å…ˆå®ç°ä¸ªå¤§æ¦‚ï¼Œé¿å…ä¸€äº›é‡å¤æœºæ¢°çš„åŠ¨ä½œï¼Œæ¯”å¦‚ï¼šå¼‚å¸¸è¯†åˆ«ä¸æŠ›å‡ºï¼Œç®€å•æ–¹æ³•çš„å®ç°ç­‰</p></li><li><p>ç„¶åå¯ä»¥æ–°å¼€ä¸€ä¸ªè¯é¢˜æˆ–è€…æ¢ä¸€ä¸ªæ¨¡å‹ï¼Œä¸€æ¬¡å°†ä¸€ä¸ªæˆ–è€…å‡ ä¸ªæ–¹æ³•çš„jmlæè¿°æŠ•å–‚è¿›å»ï¼Œç„¶åè®©å®ƒä¸€è¡Œä¸€è¡Œåˆ†æè§£é‡Šè¿™äº›jmlï¼Œç„¶åä½ å°±å¯ä»¥å¯¹ç…§ç€å®ƒçš„åˆ†æï¼Œæ£€æŸ¥ä»£ç çš„æ­£ç¡®æ€§äº†</p></li><li><p>æœ€åè¿˜æ˜¯è¦è‡ªå·±èµ°æŸ¥å‡ éï¼Œå¤šåšæµ‹è¯•</p></li><li><p>å½“ç„¶ï¼Œæ¨¡å‹çš„é€‰æ‹©ä¹Ÿæ˜¯é‡è¦çš„ä¸€ç¯ï¼Œæˆ‘è‡ªå·±ä½“éªŒè¿‡çš„ï¼š<code>Gemini 2.5 Pro</code> <code>Grok</code> <code>deepseek r1 / v3</code>éƒ½å¾ˆä¼˜ç§€ï¼Œ<code>claude 3.7</code>æ›´æ˜¯æ— éœ€å¤šè¨€ï¼Œåªä¸è¿‡ç”¨ä¸èµ·ğŸ˜­</p></li></ul><h1 id="Junit-æµ‹è¯•"><a href="#Junit-æµ‹è¯•" class="headerlink" title="Junit æµ‹è¯•"></a>Junit æµ‹è¯•</h1><ul><li>éœ€è¦æˆ‘ä»¬æ„é€ æ•°æ®è¶³å¤Ÿå…¨é¢ï¼Œè¦†ç›–å„ç§æµ‹è¯•åœºæ™¯</li><li>åŒæ—¶ï¼Œåœ¨æ£€éªŒæ­£ç¡®æ€§æ—¶å€™ï¼Œéœ€è¦æ£€æŸ¥<code>ensures</code> <code>assignable</code> <code>pure</code> <code>safe</code> <code>result</code>ç­‰ç§ç§æ¡ä»¶æ˜¯å¦è¢«æ­£ç¡®å®ç°ï¼Œéœ€è¦æ¯”è¾ƒç»†è‡´å…¨é¢çš„æ£€æŸ¥ï¼Œä¹Ÿç»™åŒå­¦ä»¬å¸¦æ¥è¾ƒå¤§çš„éº»çƒ¦</li><li>ä¸ºäº†æµ‹è¯•ä¸èƒ½æ›´æ”¹çš„å±æ€§å‰åæ˜¯å¦ä¸€è‡´ï¼Œæˆ‘é€‰æ‹©åœ¨ç”Ÿæˆæµ‹è¯•æ•°æ®æ—¶ï¼Œå°±ç”Ÿæˆä¸¤ä»½ä¸€æ¨¡ä¸€æ ·çš„ï¼Œä¸€ä»½è°ƒç”¨æ–¹æ³•ï¼Œå¦ä¸€ä»½ä½œä¸ºå¯¹æ‹</li><li>ï¼ˆè¶…å°å£°ï¼‰å¯ä»¥å€Ÿé‰´å­¦é•¿çš„ä»£ç ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šä¿®æ”¹ä»¥é€‚åº”è‡ªå·±çš„æ¶æ„ï¼Œåº”è¯¥èƒ½çœä¸€äº›äº‹å„¿ğŸ« </li></ul><h1 id="å­¦ä¹ ä½“ä¼š"><a href="#å­¦ä¹ ä½“ä¼š" class="headerlink" title="å­¦ä¹ ä½“ä¼š"></a>å­¦ä¹ ä½“ä¼š</h1><ul><li>jmlç¡®å®æä¾›äº†ä¸€ä¸ªä¼˜è‰¯çš„ç¼–ç æŒ‡å¯¼å’Œæ¶æ„è®¾è®¡ï¼Œä½¿å¾—è¿™å•å…ƒçš„ä½œä¸šèƒ½çœä¸å°‘äº‹å„¿ï¼Œä¸€äº”ä¸€ååœ°æŒ‰ç…§jmlçš„å®ç°åº”è¯¥æ˜¯ä¸ä¼šå‡ºé”™çš„ï¼Œåªä¸è¿‡å¯èƒ½æ—¶é—´å¤æ‚åº¦ä¸Šä¸å¤ªå‹å¥½</li><li>ä¸è¿‡ä¸€äº›å¤æ‚çš„é¡¹ç›®ï¼Œä½¿ç”¨jmlæè¿°å¯èƒ½ä¼šæŠŠæœ¬å°±å¤æ‚çš„é—®é¢˜æ›´åŠ å¤æ‚åŒ–ï¼Œå¸¦æ¥ç†è§£ä¸Šçš„å›°éš¾ï¼Œè™½ç„¶ç°åœ¨å·²ç»æœ‰ä¸€äº›æ–¹æ³•çš„jmlæè¿°æˆ‘ä¸æƒ³çœ‹ï¼Œç›´æ¥è®©AIåˆ†æäº†ï¼Œæ‰€ä»¥ï¼ŒJmlä¹Ÿæœ‰å…¶ä¸è¶³ä¹‹å¤„</li><li>å–„ç”¨AIï¼Œè¾…åŠ©è‡ªå·±<strong>é«˜æ•ˆåœ°å­¦ä¹ ä¸å®Œæˆä½œä¸š</strong>ï¼Œæ¯”å¦‚ï¼šå¯ä»¥å°†çœ‹ä¸æ‡‚æˆ–è€…å¾ˆå¤æ‚çš„jmlæè¿°è®©AIåˆ†æè§£é‡Šï¼›å¯ä»¥è‡ªå·±çš„ä»£ç ç»™AIè®©å…¶æå‡ºå¯ä»¥ä¼˜åŒ–æ—¶é—´å¤æ‚åº¦çš„æ–¹æ³•ï¼›å¯ä»¥ç”¨AIå­¦ä¹ ä¸€äº›çŸ¥è¯†ï¼šå¹¶æŸ¥é›†ã€åŒå‘BFSç­‰ï¼Œç”¨å¥½ä¹‹åï¼Œèƒ½å¤§å¤§æå‡è‡ªå·±çš„æ•ˆç‡ã€‚</li><li>ä½†ä¹Ÿä¸èƒ½å®Œå…¨ä¾èµ–AIï¼Œç¼ºä¹è‡ªå·±çš„æ€è€ƒä¸è®¾è®¡ï¼Œç›´æ¥ä¸åŠ æ€è€ƒåœ°æ‹·è´ç²˜è´´ï¼Œé‚£æ ·åªä¼š<strong>é€‚å¾—å…¶åï¼Œå­¦æ— æ‰€è·</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>OO</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OO</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BUAA-OO-Unit2</title>
    <link href="/2025/04/18/BUAA-OO-Unit2/"/>
    <url>/2025/04/18/BUAA-OO-Unit2/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯2025å¹´åŒ—èˆªOOç¬¬äºŒå•å…ƒçš„æ€»ç»“åšå®¢ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜Š</p>          </div><ul><li>é­”é¬¼èˆ¬çš„OO-Unit2ç»ˆäºç»“æŸå•¦ğŸ˜­ğŸ˜­ğŸ˜­ğŸ˜ğŸ˜ğŸ˜</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/%E9%BE%99%E7%8C%AB3.jpg" alt="é¾™çŒ«3"></p><hr><ul><li>è¿›å…¥æ­£é¢˜</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/image-20250418125328192.png"></p><ul><li>è¿™æ˜¯ä¸‰æ¬¡è¿­ä»£å<code>hw7</code>çš„ä»£ç è¡Œæ•°ç»Ÿè®¡ï¼Œæºä»£ç è¡Œæ•°762è¡Œï¼Œåº”è¯¥ç®—å°‘çš„å§</li><li>è¿™ä¹Ÿåæ˜ å‡ºæœ¬äºº<strong>åŠ›æ±‚ç®€æ´çš„è¿­ä»£è¿½æ±‚</strong>ï¼Œ<del>èƒ½å°‘å†™çš„å°±å°‘å†™</del>ï¼Œå‡ è¡Œä»£ç å°±èƒ½è§£å†³çš„é—®é¢˜ç»ä¸å»å·é«˜æ·±å¤æ‚çš„æ–¹æ³•</li><li>ä¸‹é¢æ˜¯æœ¬å•å…ƒçš„<strong>æ€»ç»“ä¸åˆ†æ</strong></li></ul><h1 id="åŒæ­¥å—ä¸é”çš„é€‰æ‹©"><a href="#åŒæ­¥å—ä¸é”çš„é€‰æ‹©" class="headerlink" title="åŒæ­¥å—ä¸é”çš„é€‰æ‹©"></a>åŒæ­¥å—ä¸é”çš„é€‰æ‹©</h1><p>æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦åŒæ­¥å—ï¼Ÿå› ä¸ºå¤šä¸ªçº¿ç¨‹åŒæ—¶è¿è¡Œæ—¶å¯èƒ½ä¼šå¯¹åŒä¸€å…±äº«èµ„æºè¿›è¡Œè®¿é—®å’Œä¿®æ”¹ï¼Œè¿™æ ·å°±ä¼šé€ æˆ<strong>ç«äº‰ä¸åŒæ­¥é—®é¢˜</strong>ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é”å’ŒåŒæ­¥å—æ¥è§£å†³è¿™ä¸€é—®é¢˜ã€‚</p><p>åœ¨æˆ‘çš„ä»£ç ä¸­ï¼Œhw5æœ€å¼€å§‹æˆ‘æœ‰ä¸€ä¸ª<code>MainRequests</code>ä¸»ç±»å’Œ<code>SubRequests</code>å­ç±»ï¼Œåæ¥æˆ‘å‘ç°è¿™ä¸¤ä¸ªç±»é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•ç«Ÿç„¶ä¸€æ¨¡ä¸€æ ·(â—â€™â—¡â€™â—)ï¼Œåé¢ç´¢æ€§å°±åªæœ‰<code>Requests</code>è¿™ä¸€ä¸ªç±»äº†</p><ul><li>å› ä¸º<code>Requests</code>ç±»è¢«<code>inputThread</code>å’Œ<code>DispatchThread</code>æ‰€å…±äº«ï¼Œå› æ­¤è¿™ä¸¤ä¸ªç±»ä¸­å¯¹<code>Requests</code>ç±»è°ƒç”¨çš„æ–¹æ³•éƒ½éœ€è¦åŠ é”ï¼Œè®¾ç½®åŒæ­¥å—ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sortByPriority</span><span class="hljs-params">()</span> &#123;<br>       requests.sort(Comparator.comparingInt(r -&gt; ((PersonRequest) r).getPriority()).reversed());<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(Request request)</span> &#123;<br>       <span class="hljs-comment">//TimableOutput.println(&quot;from-&quot; + elevatorId + &quot;-request need</span><br>       <span class="hljs-comment">// to be dispatched-&quot; + isDone() + &quot;-&quot; + isEmpty());</span><br>       requests.add(request);<br>       notifyAll();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> Request <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">if</span> (!isDone() &amp;&amp; isEmpty()) &#123;<br>           <span class="hljs-keyword">try</span> &#123;<br>               wait();<br>           &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>               <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>           &#125;<br>       &#125;<br>       <span class="hljs-keyword">if</span> (isEmpty()) &#123;<br>           <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>       &#125;<br>       notifyAll();<br>       <span class="hljs-keyword">return</span> requests.remove(<span class="hljs-number">0</span>);<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDone</span><span class="hljs-params">()</span> &#123;<br>       done = <span class="hljs-literal">true</span>;<br>       notifyAll();<br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDone</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> done &amp; (arrivedRequests == needRequests.size());<br>       <span class="hljs-comment">//return done;</span><br>   &#125;<br><br>   <span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>       <span class="hljs-keyword">return</span> requests.isEmpty();<br>   &#125;<br></code></pre></td></tr></table></figure><ul><li>æ­¤å¤–è¿˜æœ‰ç”µæ¢¯çº¿ç¨‹ä¸­ï¼Œåœ¨ä¸´æ—¶è°ƒåº¦åˆ°è¾¾ç›®çš„åœ°éœ€è¦å°†äººè¯·ä¸‹å»æ—¶ï¼Œéœ€è¦<strong>è®¾ç½®åŒæ­¥å—ï¼Œä¿è¯è¿™æ˜¯ä¸€ä¸ªåŸå­æ“ä½œ</strong>ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸å…è®¸åˆ†æ´¾çº¿ç¨‹å†å°†è¯·æ±‚æ·»åŠ ç»™ç”µæ¢¯çš„è¯·æ±‚é˜Ÿåˆ—ä¸­</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scheOutPerson</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">synchronized</span> (subRequests) &#123;<br>            Iterator&lt;Request&gt; iterator = subRequests.getRequests().iterator();<br>            <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>                <span class="hljs-type">PersonRequest</span> <span class="hljs-variable">preq</span> <span class="hljs-operator">=</span> (PersonRequest)iterator.next();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">strFloor</span> <span class="hljs-operator">=</span> Strategy.toStr(floor);<br>                <span class="hljs-type">int</span> <span class="hljs-variable">toFloor</span> <span class="hljs-operator">=</span> Strategy.toInt(preq.getToFloor());<br>                <span class="hljs-type">int</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> preq.getPersonId();<br>                <span class="hljs-keyword">if</span> (peopleInEle.contains(id)) &#123;<br>                    people--;<br>                    peopleInEle.remove(Integer.valueOf(id));<br>                    <span class="hljs-keyword">if</span> (toFloor == floor) &#123;<br>                        iterator.remove();<br>                        mainRequests.addArrive();<br>                        TimableOutput.println(<span class="hljs-string">&quot;OUT-S-&quot;</span> + id + <span class="hljs-string">&quot;-&quot;</span> + strFloor + <span class="hljs-string">&quot;-&quot;</span> + elevatorId);<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        <span class="hljs-type">ReArrangeRequest</span> <span class="hljs-variable">raq</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ReArrangeRequest</span>(floor, preq);<br>                        TimableOutput.println(<span class="hljs-string">&quot;OUT-F-&quot;</span> + id + <span class="hljs-string">&quot;-&quot;</span> + strFloor + <span class="hljs-string">&quot;-&quot;</span> + elevatorId);<br>                        mainRequests.push(raq);<br>                        iterator.remove();<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h1 id="è°ƒåº¦åˆ†é…ç­–ç•¥"><a href="#è°ƒåº¦åˆ†é…ç­–ç•¥" class="headerlink" title="è°ƒåº¦åˆ†é…ç­–ç•¥"></a>è°ƒåº¦åˆ†é…ç­–ç•¥</h1><h2 id="hw5"><a href="#hw5" class="headerlink" title="hw5"></a>hw5</h2><ul><li>hw5çš„è¯·æ±‚æ˜¯æŒ‡å®šäº†ç”µæ¢¯çš„ï¼Œå› æ­¤ç›´æ¥åˆ†é…ç»™å¯¹åº”ç¼–å·çš„ç”µæ¢¯å³å¯ï¼Œæ— éœ€è¿‡å¤šè®¾è®¡</li></ul><h2 id="hw6"><a href="#hw6" class="headerlink" title="hw6"></a>hw6</h2><ul><li><p>æœ€å¼€å§‹æˆ‘çš„è®¾è®¡æ˜¯å°†æ‰€æœ‰çš„ä¸»è¯·æ±‚æŒ‰ç…§ 1 2 3 â€¦â€¦6 1 2 â€¦â€¦çš„å¾ªç¯&#x3D;&#x3D;é¡ºåºåˆ†é…&#x3D;&#x3D;ç»™6éƒ¨ç”µæ¢¯ï¼Œè¿™æ ·çš„è®¾è®¡æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”åœ¨å¤§é‡çš„è¯·æ±‚åŠ æŒä¸‹ï¼Œæ€§èƒ½ä¹Ÿä¸ä¼šå¾ˆå·®åŠ²ï¼Œå†™æ³•å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">personDispatch</span><span class="hljs-params">(PersonRequest request)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">elevatorId</span> <span class="hljs-operator">=</span> inOrder();<br>        subRequestMap.get(elevatorId).push(request);<br>        TimableOutput.println(<span class="hljs-string">&quot;RECEIVE-&quot;</span> + request.getPersonId() + <span class="hljs-string">&quot;-&quot;</span> + elevatorId);<br>    &#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">inOrder</span><span class="hljs-params">()</span> &#123;<br>        counter++;<br>        counter %= <span class="hljs-number">6</span>;<br>        <span class="hljs-keyword">return</span> counter + <span class="hljs-number">1</span>;<br>    &#125;<br></code></pre></td></tr></table></figure></li><li><p>ä½†éšåå‘ç°hw6æ–°å¢äº†ä¸´æ—¶è°ƒåº¦ï¼Œ<strong>ä¸´æ—¶è°ƒåº¦æœŸé—´çš„ç”µæ¢¯æ— æ³•è¿›è¡Œåˆ†é…</strong>ï¼Œå› æ­¤åœ¨åˆ†é…è°ƒåº¦æ—¶å¿…é¡»è¦è€ƒè™‘ç”µæ¢¯æ˜¯å¦åœ¨ä¸´æ—¶è°ƒåº¦ï¼Œè¿™ä¹Ÿ<strong>ä¼šå¸¦æ¥ä¸€ç³»åˆ—é—®é¢˜</strong>ï¼š</p><ul><li>é‡åˆ°äº†ä¸´æ—¶è°ƒåº¦çš„ç”µæ¢¯æ€ä¹ˆåŠï¼Œæ˜¯ç­‰å¾…å®ƒç»“æŸè¿˜æ˜¯é‡æ–°åˆ†æ´¾ä¸€ä¸ªæ–°çš„ç”µæ¢¯å‘¢ï¼Ÿ</li><li>å¦‚æœæ‰€æœ‰çš„ç”µæ¢¯éƒ½ä¸´æ—¶è°ƒåº¦äº†ï¼Œæ€ä¹ˆåŠï¼Ÿ</li></ul><p>æˆ‘çš„ç­–ç•¥æ˜¯é‡åˆ°äº†ä¸´æ—¶è°ƒåº¦çš„ç”µæ¢¯ï¼Œå°±éå†ç”µæ¢¯ï¼Œæ‰¾ä¸€ä¸ª<code>Free</code>çš„ç”µæ¢¯åˆ†é…ç»™å®ƒï¼Œå¦‚æœæ²¡æœ‰ç”µæ¢¯<code>Free</code>ï¼Œåˆ™éšæœºå†³å®šä¸€ä¸ªç”µæ¢¯å¹¶ç­‰å®ƒç»“æŸä¸´æ—¶è°ƒåº¦ã€‚</p><p>è¿™é‡Œæœ‰ä¸€ä¸ª<strong>å¾ˆç»å…¸ä¹Ÿå¾ˆæœ‰è¶£</strong>çš„é—®é¢˜ï¼Œå¦‚æœ5éƒ¨ç”µæ¢¯éƒ½ä¸´æ—¶è°ƒåº¦ï¼Œå¹¶ä¸”åœ¨åŒä¸€æ—¶é—´æ¥äº†å¤§é‡è¯·æ±‚ï¼Œé‚£ä¹ˆæ˜¯å¦è¦å°†è¿™äº›è¯·æ±‚å…¨éƒ¨åˆ†é…ç»™é‚£ä¸€ä¸ªç©ºé—²çš„ç”µæ¢¯å‘¢ï¼Ÿè¿™å°±æ˜¯&#x3D;&#x3D;ç»å…¸çš„å›´å¸ˆå¿…é˜™é—®é¢˜&#x3D;&#x3D;ï¼Œä¹Ÿæ˜¯ä¸­æµ‹mid5çš„æµ‹è¯•æ„å›¾ï¼Œå¦‚æœç›²ç›®åœ°å…¨éƒ¨å¡ç»™ä¸€ä¸ªç”µæ¢¯ï¼Œé‚£ä¹ˆå…¶ä»–ç”µæ¢¯ç»“æŸä¸´æ—¶è°ƒåº¦åæ— äº‹å¯å¹²ï¼Œä½†è¿™ä¸ªç”µæ¢¯åé¢å¾ˆæœ‰å¯èƒ½åƒä¸æ¶ˆï¼Œæœ€ç»ˆå¯¼è‡´<code>TLE</code>ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åŠ ä¸€äº›é€»è¾‘ï¼Œæ¯”å¦‚<strong>è®¾å®šä¸€ä¸ªæœ€é«˜åˆ†é…ä¸Šé™</strong>ï¼Œæˆ‘è®¾è®¡çš„æ˜¯20ï¼Œå½“ç„¶ä½ ä¹Ÿå®Œå…¨å¯ä»¥è®¾ç½®ä¸ºå…¶ä»–ä½ è®¤ä¸ºåˆé€‚çš„å€¼ã€‚æŠŠä¹‹å‰çš„åˆ¤æ–­åŠ ä¸€ä¸ªæ¡ä»¶å³å¯</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (subRequestMap.get(i).getFree() &amp;&amp; subRequestMap.get(i).getSize() &lt; <span class="hljs-number">20</span>)<br></code></pre></td></tr></table></figure><p>æˆ‘çš„è°ƒåº¦å™¨çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">personDispatch</span><span class="hljs-params">(PersonRequest request)</span> &#123;<br>        counter++;<br>        counter %= <span class="hljs-number">6</span>;<br>        <span class="hljs-type">Requests</span> <span class="hljs-variable">requests</span> <span class="hljs-operator">=</span> subRequestMap.get(counter + <span class="hljs-number">1</span>);<br>        <span class="hljs-keyword">synchronized</span> (requests) &#123;<br>            <span class="hljs-keyword">if</span> (!requests.getFree()) &#123;<br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;i &lt;= <span class="hljs-number">6</span>;i++) &#123;<br>                    <span class="hljs-keyword">synchronized</span> (subRequestMap.get(i)) &#123;<br>                        <span class="hljs-keyword">if</span> (subRequestMap.get(i).getFree() &amp;&amp; subRequestMap.get(i).getSize() &lt; <span class="hljs-number">20</span>) &#123;<br>                            TimableOutput.println(<span class="hljs-string">&quot;RECEIVE-&quot;</span> + request.getPersonId() + <span class="hljs-string">&quot;-&quot;</span> + i);<br>                            subRequestMap.get(i).push(request);<br>                            <span class="hljs-keyword">return</span>; &#125;<br>                    &#125;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                TimableOutput.println(<span class="hljs-string">&quot;RECEIVE-&quot;</span> + request.getPersonId() + <span class="hljs-string">&quot;-&quot;</span> + (counter + <span class="hljs-number">1</span>));<br>                subRequestMap.get(counter + <span class="hljs-number">1</span>).push(request);<br>                <span class="hljs-keyword">return</span>;<br>            &#125;<br>        &#125;<br>    <span class="hljs-comment">//all elevators are not free</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> random();<br>        requests = subRequestMap.get(random);<br>        <span class="hljs-keyword">synchronized</span> (requests) &#123;<br>            <span class="hljs-keyword">while</span> (!requests.getFree()) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    requests.wait();<br>                &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e); &#125;<br>            &#125;<br>            TimableOutput.println(<span class="hljs-string">&quot;RECEIVE-&quot;</span> + request.getPersonId() + <span class="hljs-string">&quot;-&quot;</span> + random);<br>            subRequestMap.get(random).push(request);<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure></li></ul><h2 id="hw7"><a href="#hw7" class="headerlink" title="hw7"></a>hw7</h2><ul><li>åœ¨hw6ä¸­æˆ‘ä»¬çš„åˆ†æ´¾ç­–ç•¥å·²ç»ç›¸å¯¹å®Œå–„äº†ï¼Œ<strong>æˆ‘ä»¬æ­¤æ—¶åªéœ€è¦è€ƒè™‘å“ªäº›åœ°æ–¹å˜äº†ï¼Œæ ¹æ®éœ€è¦å¢åŠ æ¡ä»¶å³å¯</strong></li><li>ä¸éš¾å‘ç°ï¼Œå¦‚æœé‡‡ç”¨<code>LOCK</code>è¿è¡Œç­–ç•¥ï¼Œé‚£ä¹ˆåœ¨ç»è¿‡<code>UPDATE</code>æ”¹é€ åå†³ä¸èƒ½ç»™ç”µæ¢¯åˆ†é…ä¸€ä¸ªæ— æ³•åˆ°è¾¾çš„è¯·æ±‚ï¼Œæˆ‘ä»¬åœ¨åˆ†é…æ—¶è¿˜éœ€è¦è·å–ç”µæ¢¯å¯åˆ°è¾¾æ¥¼å±‚èŒƒå›´çš„å±æ€§ï¼Œåœ¨æˆ‘çš„è®¾è®¡ä¸­ï¼Œå¯åˆ°è¾¾èŒƒå›´ç”±ä¸€ä¸ª<code>int</code>å‹çš„å…±äº«æ¥¼å±‚å’Œä¸€ä¸ª<code>boolean</code>å‹çš„æ˜¯å¦ä¸ºAå±æ€§æ¥è¡¨å¾ã€‚å¦‚æœä¸ºAï¼Œä¹Ÿå°±æ˜¯ç”µæ¢¯æ”¹é€ ååœ¨ä¸Šé¢è¿è¡Œçš„ç”µæ¢¯ï¼Œé‚£ä¹ˆè¿è¡ŒèŒƒå›´å°±æ˜¯å…±äº«æ¥¼å±‚åˆ°é¡¶æ¥¼ï¼Œåä¹‹å°±æ˜¯åº•å±‚åˆ°å…±äº«æ¥¼å±‚</li><li>æ˜ç™½äº†hw7ä¸­å˜åŒ–çš„åœ°æ–¹åï¼Œæˆ‘ä»¬<strong>åœ¨æ¯æ¬¡åˆ†é…å‰ï¼Œè¿˜éœ€è¦åˆ¤æ–­è¯¥ç”µæ¢¯æ˜¯å¦å¯åˆ°è¾¾</strong>ï¼Œå…·ä½“æ¥è¯´ï¼Œå¦‚ä¸‹</li><li>æˆ‘ç»™ç”µæ¢¯çš„å…±äº«æ¥¼å±‚å±æ€§é»˜è®¤å€¼ä¸º100ï¼Œåˆ™æœªæ”¹é€ å‰ï¼Œç”µæ¢¯å¯åˆ°è¾¾B4-F7ä»»æ„æ¥¼å±‚ï¼Œå› æ­¤ç›´æ¥è¿”å›trueã€‚ä¸‹é¢çš„åˆ¤æ–­ä¸»è¦ç”±ä¸¤ç§æƒ…å†µï¼Œä¸€ç§æ˜¯è¯·æ±‚çš„èµ·å§‹æ¥¼å±‚æ— æ³•åˆ°è¾¾ï¼Œå¦ä¸€ç§æ˜¯èµ·å§‹æ¥¼å±‚æ˜¯å…±äº«æ¥¼å±‚ï¼Œä½†ç»ˆç‚¹æ— æ³•åˆ°è¾¾</li><li>ä¹‹åå†åˆ†é…çš„æ¡ä»¶é‡ŒåŠ ä¸Šè¿™ä¸ª<code>isInRange</code>çš„åˆ¤æ–­å³å¯</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isInRange</span><span class="hljs-params">(<span class="hljs-type">int</span> eleId, PersonRequest request)</span> &#123;<br>        <span class="hljs-type">ElevatorThread</span> <span class="hljs-variable">ele</span> <span class="hljs-operator">=</span> elevatorMap.get(eleId);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">sharedFloor</span> <span class="hljs-operator">=</span> ele.getSharedFloor();<br>        <span class="hljs-keyword">if</span> (sharedFloor == <span class="hljs-number">100</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">fromFloor</span> <span class="hljs-operator">=</span> Strategy.toInt(request.getFromFloor());<br>            <span class="hljs-type">int</span> <span class="hljs-variable">toFloor</span> <span class="hljs-operator">=</span> Strategy.toInt(request.getToFloor());<br>            <span class="hljs-keyword">if</span> (ele.isA()) &#123;<br>                <span class="hljs-keyword">if</span> (fromFloor &gt; sharedFloor) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fromFloor == sharedFloor) &#123;<br>                    <span class="hljs-keyword">return</span> toFloor &gt; sharedFloor;<br>                &#125;<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">if</span> (fromFloor &lt; sharedFloor) &#123;<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (fromFloor == sharedFloor) &#123;<br>                    <span class="hljs-keyword">return</span> toFloor &lt; sharedFloor;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="æ€§èƒ½"><a href="#æ€§èƒ½" class="headerlink" title="æ€§èƒ½"></a>æ€§èƒ½</h2><p>å¼ºæµ‹çš„è¯·æ±‚æ•°é‡ä¸€èˆ¬æ¯”è¾ƒå¤šï¼Œè€Œä¸”å¾ˆå¤šæ˜¯åŒä¸€æ—¶é—´æŠ•æ”¾çš„ï¼Œ<strong>å› æ­¤ä¸ªäººè§‰å¾—æ— è®ºæ˜¯é‡‡ç”¨éšæœºåˆ†é…è¿˜æ˜¯é¡ºåºåˆ†é…ï¼Œæ€§èƒ½éƒ½ä¸ä¼šå¤ªå·®</strong>ï¼Œä¹Ÿæ— éœ€å»å·å½±å­ç”µæ¢¯äº†ï¼Œè€Œä¸”å½±å­ç”µæ¢¯åœ¨hw7ä¸­çš„ä¿®æ”¹ä¼¼ä¹è¿˜æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ä¸å°‘hw6æˆåŠŸå®ç°å½±å­ç”µæ¢¯çš„åŒå­¦åœ¨hw7ä¸­æ”¾å¼ƒäº†å½±å­ç”µæ¢¯ï¼Œå› ä¸ºæ¨¡æ‹Ÿçš„éš¾åº¦æ¯”è¾ƒå¤§ï¼Œè€Œä¸”å¯èƒ½è¿˜æœ‰åˆ«çš„bugã€‚<strong>è€Œæœ¬äººçš„è¿™ç§æ‚ç³…éšæœºåˆ†é…å’Œé¡ºåºåˆ†é…çš„æ–¹å¼ï¼Œåœ¨hw7çš„å¼ºæµ‹ä¸­ï¼Œæ€§èƒ½ä¹Ÿè¿˜ä¸é”™</strong>ğŸ˜æ²¡æœ‰<code>WA</code>çš„ç‚¹åŸºæœ¬éƒ½æ˜¯94-96ä¹‹é—´ï¼ˆWAäº†ä¸¤ä¸ªç‚¹ã€‚ã€‚ã€‚ğŸ˜­ï¼‰</p><h1 id="åä½œå›¾"><a href="#åä½œå›¾" class="headerlink" title="åä½œå›¾"></a>åä½œå›¾</h1><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/Unit2_seq-%E7%94%B5%E6%A2%AF%E7%B3%BB%E7%BB%9F%E5%8D%8F%E4%BD%9C%E5%9B%BE.png" alt="Unit2_seq-ç”µæ¢¯ç³»ç»Ÿåä½œå›¾"></p><h2 id="ç¨³å®šå†…å®¹"><a href="#ç¨³å®šå†…å®¹" class="headerlink" title="ç¨³å®šå†…å®¹"></a>ç¨³å®šå†…å®¹</h2><ul><li>æ•´ä½“æ¶æ„ï¼Œ<code>MainClass</code> â€“&gt; <code>Inputthread</code> â€“&gt; <code>DispatchThread</code> â€“&gt; <code>ElevatorThread</code></li><li>ç”µæ¢¯è¿è¡Œç­–ç•¥ï¼š<code>LOOK</code>ç®—æ³•</li><li>ç”µæ¢¯è¿è¡Œæ¶æ„ï¼š<code>Strategy</code> â€“&gt; <code>Action</code> â€“&gt; <code>Elevator</code></li></ul><h2 id="å˜åŒ–å†…å®¹"><a href="#å˜åŒ–å†…å®¹" class="headerlink" title="å˜åŒ–å†…å®¹"></a>å˜åŒ–å†…å®¹</h2><ul><li>åˆ†æ´¾ç­–ç•¥ï¼šæŒ‡å®šç”µæ¢¯ â€“&gt; æ··åˆç­–ç•¥</li><li>ç»“æŸé€»è¾‘ï¼š hw6ä»¥åçš„çº¿ç¨‹ç»“æŸéœ€è¦å¢åŠ é€»è¾‘ï¼Œè¯¦è§åé¢çš„bugåˆ†æéƒ¨åˆ†</li><li>ç”µæ¢¯è¿è¡Œé™åˆ¶å¢åŠ ï¼Œhw7æœ‰äº†æ¥¼å±‚é™åˆ¶ï¼Œå…±äº«å±‚è¿›å…¥é™åˆ¶</li></ul><h1 id="åŒè½¿å¢ä¸å…±äº«æ¥¼å±‚"><a href="#åŒè½¿å¢ä¸å…±äº«æ¥¼å±‚" class="headerlink" title="åŒè½¿å¢ä¸å…±äº«æ¥¼å±‚"></a>åŒè½¿å¢ä¸å…±äº«æ¥¼å±‚</h1><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><ul><li>åŒè½¿å¢è¾“å‡º<code>begin</code>å¿…é¡»è¦ç­‰ä¸¤éƒ¨ç”µæ¢¯éƒ½æŠŠäººæ¸…ç©ºå®Œæ¯•ï¼Œè¿™å°±éœ€è¦å»ºç«‹ç”µæ¢¯çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶ï¼Œè¿™ä¹Ÿæ˜¯ä¹‹å‰çš„æ¶æ„ä¸è®¾è®¡ä¸­æ‰€æ²¡æœ‰çš„å†…å®¹ã€‚</li><li>é‚£ä¹ˆå¦‚ä½•å»ºç«‹è¿™ç§é€šä¿¡æœºåˆ¶å‘¢ï¼Ÿå¦‚æœå°†ç”µæ¢¯è§†ä¸ºä¸»ã€å­ç”µæ¢¯ï¼Œç›´æ¥å°†å­ç”µæ¢¯çš„å±æ€§æˆ–è€…å­ç”µæ¢¯æœ¬èº«æš´éœ²ç»™ä¸»ç”µæ¢¯ï¼Œè¿™æ ·çš„è®¾è®¡æˆ–è®¸å®ç°èµ·æ¥ä¸éš¾ï¼Œä½†æ˜¯å´è¿èƒŒäº†è®¾è®¡çš„åˆè¡·ä¸ç®€æ´æ€§ï¼Œå°†ä¸€ä¸ªç”µæ¢¯çº¿ç¨‹æš´éœ²ç»™å¦ä¸€ä¸ªç”µæ¢¯çº¿ç¨‹ï¼Œä¹Ÿä¸ç¬¦åˆç›´è§‰ä¸å¸¸ç†ã€‚</li><li>é‚£ä¹ˆï¼Œè¦æƒ³å®ç°ä¸¤ç”µæ¢¯çº¿ç¨‹ä¹‹é—´çš„ç—›å¿ƒï¼Œå°±<strong>å¾—æœ‰ä¸€ä¸ªå…±äº«å¯¹è±¡</strong>ï¼Œç„¶åç”±è¿™ä¸ªå…±äº«å¯¹è±¡æ¥ç›‘å¬ç”µæ¢¯çš„çŠ¶æ€ï¼Œç„¶åè¾“å‡º<code>begin</code>å’Œ<code>end</code>ã€‚è¿™é‡Œæˆ‘ä»¬&#x3D;&#x3D;æŠŠå…±äº«æ¥¼å±‚ä½œä¸ºä¸€ç§å…±äº«èµ„æºï¼Œå»ºç«‹ä¸€ä¸ªåä½œç±»-Coordinate&#x3D;&#x3D;</li><li>åœ¨è¿™ä¸ªåä½œç±»ä¸­ï¼Œä¸ä»…å¯ä»¥å®ç°åŒè½¿å¢æ”¹é€ ï¼Œè¿˜å¯ä»¥å®ç°å¯¹å…±äº«æ¥¼å±‚çš„äº’æ–¥è®¿é—®</li></ul><h2 id="åŒè½¿å¢æ”¹é€ "><a href="#åŒè½¿å¢æ”¹é€ " class="headerlink" title="åŒè½¿å¢æ”¹é€ "></a>åŒè½¿å¢æ”¹é€ </h2><ul><li>åœ¨è¾“å…¥ç±»è¯»å–åˆ°åŒè½¿å¢æ”¹é€ è¯·æ±‚æ—¶ï¼Œå®ä¾‹åŒ–ä¸€ä¸ªcoordinateå¯¹è±¡å¹¶å°†å…¶ä¼ é€’ç»™ä¸¤ä¸ªç”µæ¢¯çº¿ç¨‹</li><li>åœ¨ç”µæ¢¯çº¿ç¨‹å†…è¿›è¡Œæ”¹é€ æ—¶ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ­¥éª¤ï¼š<ul><li>freeç½®ä¸ºfalseï¼Œ<strong>ä¸å†æ·»åŠ è¯·æ±‚</strong></li><li>å°†ç”µæ¢¯å†…çš„äººèµ¶ä¸‹å»ï¼Œèµ¶å®Œåé€šè¿‡coordinateçš„æ–¹æ³•<code>setReady()</code><strong>å‘Šè¯‰</strong>åä½œç±»å‡†å¤‡å¥½äº†</li><li>ç”µæ¢¯çº¿ç¨‹å‡†å¤‡å¥½åå³å¼€å§‹<strong>ç­‰å¾…</strong>å¦ä¸€ä¸ªç”µæ¢¯å‡†å¤‡ï¼Œåœ¨åä½œç±»ä¸­æ”¶åˆ°ä¸¤ä¸ªç”µæ¢¯å‡†å¤‡å¥½çš„ä¿¡å·åå³è¾“å‡º<code>UPDATE-BEGIN-</code> å¹¶<strong>å”¤é†’</strong>ç­‰å¾…çš„ç”µæ¢¯çº¿ç¨‹</li><li>ç”µæ¢¯è¿›è¡Œæ”¹é€ ï¼Œè®¾ç½®æ¥¼å±‚ã€é€Ÿåº¦ï¼ˆå…¶å®å¯ä»¥æåˆ°å‰é¢å°±å®Œæˆæ”¹é€ ï¼‰</li><li><strong>å‘Šè¯‰</strong>åä½œç±»æ”¹é€ å¥½äº†å¹¶å¼€å§‹ç­‰å¾…ï¼Œåä½œç±»æ”¶åˆ°ä¸¤ä¸ªç”µæ¢¯æ”¹é€ å¥½çš„ä¿¡å·åå³è¾“å‡º<code>UPDATE-END-</code>å¹¶ä¸”<strong>å”¤é†’</strong>ç­‰å¾…çš„ç”µæ¢¯çº¿ç¨‹</li><li>æ”¹é€ å®Œæ¯•ï¼Œfreeç½®ä¸ºtrue</li></ul></li></ul><h2 id="å…±äº«æ¥¼å±‚äº’æ–¥"><a href="#å…±äº«æ¥¼å±‚äº’æ–¥" class="headerlink" title="å…±äº«æ¥¼å±‚äº’æ–¥"></a>å…±äº«æ¥¼å±‚äº’æ–¥</h2><ul><li>åœ¨è¿›å…¥å…±äº«æ¥¼å±‚å‰æŸ¥è¯¢æ˜¯å¦å·²è¢«å ç”¨ï¼Œå¦‚æœæ˜¯åˆ™ç­‰å¾…</li><li>é€€å‡ºå…±äº«æ¥¼å±‚å‰é‡Šæ”¾é”</li><li>å°±è¿™ä¹ˆç®€å•</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">//Coordinate.java</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">inShared</span><span class="hljs-params">( )</span> &#123;<br>        <span class="hljs-keyword">if</span> (isbusy) &#123;<br>            <span class="hljs-keyword">try</span> &#123;<br>                wait();<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);<br>            &#125;<br>        &#125;<br>        isbusy = <span class="hljs-literal">true</span>;<br>    &#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">outShared</span><span class="hljs-params">( )</span> &#123;<br>    isbusy = <span class="hljs-literal">false</span>;<br>    notifyAll();<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="debug"><a href="#debug" class="headerlink" title="debug"></a>debug</h1><h2 id="hw5-1"><a href="#hw5-1" class="headerlink" title="hw5"></a>hw5</h2><ul><li>hw5å¤§éƒ¨åˆ†äººéƒ½å¾ˆæ¼‚äº®ï¼Œæ²¡æœ‰bugï¼Œè€Œæˆ‘é‡è¹ˆç¬¬ä¸€å•å…ƒçš„è¦†è¾™ï¼ŒçŠ¯äº†ä¸€ä¸ªæ„šè ¢çš„é”™è¯¯ï¼š<strong>æ²¡æœ‰æ§åˆ¶ç”µæ¢¯å†…äººæ•°å°äºç­‰äº6</strong></li><li>å¥½ç¬‘å§ï¼Œç¡®å®æœ‰ç‚¹å¹½é»˜äº†ğŸ˜†ğŸ˜†</li></ul><h2 id="hw6-1"><a href="#hw6-1" class="headerlink" title="hw6"></a>hw6</h2><ul><li><p>æœ€å¤§çš„bugæ˜¯<strong>ä¸¤æ¡è¯­å¥çš„é¡ºåºåäº†</strong>ï¼Œï¼Œå¯¼è‡´æˆ‘å¼ºæµ‹çˆ†äº†è¿‘ä¸€åŠçš„ç‚¹ï¼Œæ°”æ­»æˆ‘äº†ğŸ˜­ğŸ˜­</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java">mainRequests.push(raq);<br>TimableOutput.println(<span class="hljs-string">&quot;OUT-F-&quot;</span> + id + <span class="hljs-string">&quot;-&quot;</span> + strFloor + <span class="hljs-string">&quot;-&quot;</span> + elevatorId);<br></code></pre></td></tr></table></figure><ul><li>è¿™æ˜¯æˆ‘&#x3D;&#x3D;é”™è¯¯çš„ä»£ç &#x3D;&#x3D;ï¼Œåœ¨ä¹˜å®¢å°šæœªåˆ°è¾¾ç›®çš„åœ°è€Œä¸‹ç”µæ¢¯çš„æ—¶å€™ï¼Œæˆ‘å…ˆå°†å…¶é€å›äº†ä¸»è¯·æ±‚é˜Ÿåˆ—ï¼Œå†è¿›è¡Œäº†è¾“å‡º</li><li>å¦‚æœåˆ†æ´¾å™¨å¾ˆå¿«åœ°å°†è¿™ä¸ªè¯·æ±‚åˆ†æ´¾ç»™å…¶ä»–ç”µæ¢¯ï¼Œåˆ™åˆ°å¯¼è‡´è¯¥ä¹˜å®¢è¿˜æœªä¸‹ç”µæ¢¯å°±é‡æ–°åˆ†é…äº†</li><li>å°†è¿™ä¸¤æ¡è¯­å¥æ¢ä¸€ä¸‹é¡ºåºå³å¯</li></ul></li><li><p>è¿™é‡Œæˆ‘ä¸å¾—ä¸æä¸€å˜´ï¼Œå‡¡æ˜¯æ¶‰åŠåˆ°è¾“å‡ºçš„åœ°æ–¹ï¼Œéƒ½&#x3D;&#x3D;ä¸€å®šè¦è®¤çœŸè®¤çœŸå†è®¤çœŸåœ°æ£€æŸ¥è¯­å¥çš„æ‰§è¡Œé¡ºåºæ˜¯å¦æœ‰æ½œåœ¨éšæ‚£&#x3D;&#x3D;ï¼Œä¸ç„¶å°±ä¼šåƒæˆ‘ä¸€æ ·å¯„æ‰</p></li><li><p>è¿˜æœ‰ä¸€ä¸ªå€¼å¾—ä¸€æçš„æ˜¯&#x3D;&#x3D;ç¨‹åºç»“æŸçš„é—®é¢˜&#x3D;&#x3D;ï¼Œåœ¨hw5ä¸­ä¸»è¯·æ±‚å¯¹åˆ—ä¸ºç©ºä¸”è¾“å…¥çº¿ç¨‹ç»“æŸï¼Œé‚£ä¹ˆåˆ†æ´¾å™¨çº¿ç¨‹ä¹Ÿå°±ç»“æŸäº†ï¼Œä½†æ˜¯æœ¬æ¬¡hw6ä¸ä¸€æ ·ï¼Œå¯èƒ½åœ¨ä¸»è¯·æ±‚å¯¹åˆ—ä¸ºç©ºä¸”è¾“å…¥çº¿ç¨‹ç»“æŸåï¼Œè¿˜ä¼šæœ‰äººè¢«ç”µæ¢¯â€œé£é€â€å›ä½è¯·æ±‚é˜Ÿåˆ—ï¼Œå¦‚æœæ­¤æ—¶åˆ†æ´¾å™¨çº¿ç¨‹å·²ç»ç»“æŸï¼Œé‚£ä¹ˆè¿™ä¸ªäººå°±è¢«æŠ›å¼ƒäº†ğŸ˜†ï¼Œå› æ­¤éœ€è¦ç»Ÿè®¡æ‰€æœ‰è¦é€çš„ä¹˜å®¢æ•°å’Œå·²åˆ°è¾¾çš„ä¹˜å®¢æ•°ï¼ŒäºŒè€…ç›¸ç­‰æ‰èƒ½ç»“æŸ</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isDone</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> done &amp; (arrivedRequests == needRequests.size());<br>    &#125;<br></code></pre></td></tr></table></figure><h2 id="hw7-1"><a href="#hw7-1" class="headerlink" title="hw7"></a>hw7</h2><ul><li>æ²¡ä»€ä¹ˆç‰¹åˆ«çš„bug</li></ul><h2 id="debugæ–¹æ³•"><a href="#debugæ–¹æ³•" class="headerlink" title="debugæ–¹æ³•"></a>debugæ–¹æ³•</h2><ul><li>å¦‚æœæœ‰ç²¾åŠ›æœ‰å…´è¶£ï¼Œæœ€å¥½è‡ªå·±æˆ–è€…ä¸åˆ«äººåˆä½œ&#x3D;&#x3D;æ­å»ºè¯„æµ‹æœº&#x3D;&#x3D;ã€‚ä»æ•°æ®çš„ç”Ÿæˆï¼Œåˆ°æ‰¹é‡è¿è¡Œæµ‹è¯•ç‚¹ï¼Œå†åˆ°è¯„æµ‹ç»“æœä¸æ€§èƒ½ï¼Œè‡ªå·±ä¸€ä¸ªäººè¿˜æ˜¯æœ‰äº›è´¹åŠ›çš„ï¼Œå¦‚æœæ­å»ºäº†ä¸€ä¸ªæ•°æ®å¤Ÿå¼ºï¼Œè¦†ç›–å…¨é¢ï¼Œå¹¶ä¸”èƒ½æ­£ç¡®è¯„æµ‹ï¼Œæ‰¹é‡è¿è¡Œçš„è¯„æµ‹æœºã€‚ç›¸ä¿¡æˆ‘ï¼Œä½ è‚¯å®šèƒ½æ‰¾å‡ºä½ çš„bugã€‚å½“ç„¶ï¼Œ<del>å¦‚æœä½ èƒ½è¦åˆ°åˆ«äººçš„è¯„æµ‹æœºï¼Œåäº«å…¶æˆä¹Ÿæ˜¯ä¸é”™çš„</del></li><li>åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­ï¼Œæœ¬äººæœ€æ“…é•¿çš„è¿˜æ˜¯&#x3D;&#x3D;printå¤§æ³•&#x3D;&#x3D;ï¼Œåœ¨å„ä¸ªå…³é”®èŠ‚ç‚¹ï¼Œå°†ä½ æ‰€éœ€è¦çš„ä¿¡æ¯ç»Ÿç»Ÿæ‰“å°å‡ºæ¥ï¼Œè¿™æ ·å¯ä»¥è½»æ¾åˆ¤æ–­<ul><li>æ•°æ®æ˜¯å¦æ­£ç¡®ï¼ŒçŠ¶æ€æ˜¯å¦æ­£ç¡®</li><li>åˆ†æ”¯è¿›å…¥æ˜¯å¦ç¬¦åˆé¢„æœŸ</li><li>çº¿ç¨‹æ˜¯å¦ç­‰å¾…ã€è¢«å”¤é†’ã€ç»“æŸ</li><li>â€¦â€¦</li></ul></li><li>å¦‚æœç¨‹åºæ— æ³•ç»“æŸæˆ–è€…æ­»é”äº†ï¼Œæˆ‘å»ºè®®ç”¨ç¿ç¿çš„è¾“å…¥ç±»ç»“åˆé‡å®šå‘è¾“å…¥ï¼Œç„¶å<strong>åœ¨IDEAé‡Œé¢è°ƒè¯•</strong>ï¼Œå¯ä»¥æŸ¥çœ‹å„ä¸ªçº¿ç¨‹çš„çŠ¶æ€ã€‚å…¶ä»–æƒ…å†µè¿˜æ˜¯å»ºè®®ç”¨è¯¾ç¨‹ç»„æä¾›çš„å®˜æ–¹è¾“å…¥åŒ…è¿è¡Œï¼Œæ¯•ç«ŸäºŒè€…è¡Œä¸ºå¯èƒ½ä¼šä¸ä¸€æ ·ã€‚</li><li>&#x3D;&#x3D;å¤šå’Œå®¤å‹ã€æœ‹å‹ã€åŒå­¦äº¤æµï¼Œåˆ«è‡ªå·±é—­é—¨é€ è½¦&#x3D;&#x3D;ï¼Œå¾ˆå¤šæ—¶å€™å¤§å®¶éƒ½åœ¨è¸©åŒæ ·çš„å‘æˆ–è€…ä½ è¸©çš„å‘åˆ«äººæ—©å°±è¸©è¿‡å•¦</li></ul><h1 id="å¿ƒå¾—ä½“ä¼š"><a href="#å¿ƒå¾—ä½“ä¼š" class="headerlink" title="å¿ƒå¾—ä½“ä¼š"></a>å¿ƒå¾—ä½“ä¼š</h1><ul><li>ä»æœ€åˆå¯¹å¤šçº¿ç¨‹ä¸€æ— æ‰€çŸ¥åˆ°ç°åœ¨å‹‰å¼ºèƒ½å†™ä¸ªç®€å•çš„å¤šçº¿ç¨‹ç¨‹åºï¼Œæˆ‘åœ¨ç¬¬äºŒå•å…ƒè¿˜æ˜¯å­¦ä¼šäº†å¾ˆå¤šæ–°çš„ä¸œè¥¿ï¼Œ<strong>å¯¹å¤šçº¿ç¨‹ç¼–ç¨‹ã€åŒæ­¥ä¸äº’æ–¥ï¼Œå¹¶å‘ã€æ•°æ®ç«äº‰</strong>ç­‰æœ‰äº†è¿›ä¸€æ­¥çš„æ›´æ·±çš„ç†è§£ã€‚</li><li>Unit2ä¹Ÿè®©æˆ‘å¯¹çº¿ç¨‹å®‰å…¨æœ‰äº†æ›´æ·±åˆ»çš„ç†è§£ï¼Œä»¥åçš„ä¸šåŠ¡æ–¹å‘æ¯«æ— ç–‘é—®å¤§éƒ¨åˆ†éƒ½æ˜¯å¤šçº¿ç¨‹çš„é—®é¢˜ï¼Œè¿™æ—¶å€™çº¿ç¨‹çš„å®‰å…¨ã€æ•°æ®è¯»å–çš„å®‰å…¨å°±å°¤ä¸ºé‡è¦ï¼Œå¿…é¡»è¦å¯¹å…±äº«èµ„æºçš„è¯»å†™è¿›è¡Œä¿æŠ¤ï¼Œé™¤äº†åŸºæœ¬çš„<code>synchronized</code>ä¸<code>notifyAll</code>ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç”¨è¯»å†™é”æ¥å®ç°æ›´é«˜çš„æ•ˆç‡ä¸æ€§èƒ½ã€‚å½“ç„¶ï¼Œè¿˜æœ‰æ›´å¤šæ›´é«˜æ·±çš„æ–¹æ³•ç­‰å¾…æˆ‘å»å­¦ä¹ </li><li>å°è±¡æœ€æ·±çš„è¿˜æ˜¯æœ¬å•å…ƒæ¯å‘¨äº”çš„é€šå®µdebugæ—¶åˆ»ï¼Œæˆ‘<strong>æ¸…æ¥šåœ°è®°å¾—</strong><ul><li>hw5çš„å‘¨äº”æˆ‘ä¸€ç›´deåˆ°ç¬¬äºŒå¤©æ—©ä¸Š4ç‚¹</li><li>hw6å‡ ä¹å æ®äº†æ•´ä¸ªæ¸…æ˜å‡æœŸï¼Œæœ€åä¹Ÿæ˜¯åœ¨ç¬¬ä¸‰å¤©å‡Œæ™¨2ç‚¹é€šè¿‡äº†ä¸­æµ‹</li><li>hw7æˆ‘å‘¨äº”æ™šä¸Šæ‰å¼€å§‹å†™ï¼Œç›´æ¥é€šå®µäº†ï¼Œåˆ°ç¬¬äºŒå¤©5ç‚¹é€šè¿‡ä¸­æµ‹ï¼Œæµ‘ç„¶ä¸çŸ¥å¤©å·²ç»äº®äº†</li></ul></li><li>æˆ‘ä¹Ÿåœ¨ç¤¾äº¤å¹³å°ä¸Šæ¯å‘¨å‘ä¸€ç¯‡å¸–å­ï¼Œå†™ä¸‹è‡ªå·±å¯¹OOçš„æŠ±æ€¨ã€å¯¹debugç—›è‹¦çš„å€¾è¯‰ã€å¯¹å‹åŠ›çš„å®£æ³„ï¼Œä¹Ÿå¾—åˆ°äº†å¾ˆå¤šå­¦é•¿å­¦å§çš„é¼“åŠ±ä¸æŒ‡å¯¼ï¼ˆç”šè‡³è¿˜æœ‰U2çŒªè„šï¼‰</li></ul><h1 id="é¸£è°¢â¤ï¸"><a href="#é¸£è°¢â¤ï¸" class="headerlink" title="é¸£è°¢â¤ï¸"></a>é¸£è°¢â¤ï¸</h1><ul><li><strong>æ„Ÿè°¢OOè¯¾ç¨‹ç»„çš„è€å¸ˆä»¥åŠå¯çˆ±çš„åŠ©æ•™ä»¬</strong></li><li><strong>æ„Ÿè°¢ä¸æˆ‘è®¨è®ºæ¶æ„ã€äº¤æµbugã€åˆ†äº«ç»éªŒçš„æœ‹å‹ä»¬</strong></li><li><strong>æ„Ÿè°¢ä¸€èµ·æ­å»ºè¯„æµ‹æœºçš„å®¤å‹å°å“¥å“¥</strong></li><li><strong>æ„Ÿè°¢ç»™äºˆæˆ‘æ¸©æš–ä¸é¼“åŠ±çš„å­¦é•¿å­¦å§ä»¬</strong></li><li><strong>æ„Ÿè°¢ä¸€è·¯å¥‹æ–—ã€é¡½å¼ºæ‹¼æçš„è‡ªå·±</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>OO</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OO</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ä¸ªäººå›¾åºŠæ­å»º</title>
    <link href="/2025/03/31/%E4%B8%AA%E4%BA%BA%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/"/>
    <url>/2025/03/31/%E4%B8%AA%E4%BA%BA%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯æœ¬äººé…ç½®ä¸ªäººå›¾åºŠçš„è¿‡ç¨‹ï¼Œå¸Œæœ›èƒ½å¯¹å„ä½æœ‰å¸®åŠ©</p>          </div><h1 id="ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä¸ªäººå›¾åºŠï¼Ÿ"><a href="#ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä¸ªäººå›¾åºŠï¼Ÿ" class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä¸ªäººå›¾åºŠï¼Ÿ"></a>ä¸ºä»€ä¹ˆéœ€è¦é…ç½®ä¸ªäººå›¾åºŠï¼Ÿ</h1><ul><li>å› ä¸ºæˆ‘çš„ä¸Šä¸€ç¯‡åšå®¢æœ‰ä¸¤å¼ å›¾ç‰‡æ€ä¹ˆéƒ½åŠ è½½ä¸å‡ºæ¥ï¼Œæˆ–è®¸æ˜¯å‘½åé—®é¢˜ï¼Ÿä½†å…¶ä»–å›¾ç‰‡ä¹Ÿæœ‰ä¸­æ–‡åçš„ï¼Œåˆæˆ–è®¸æ˜¯ä¸­é—´æœ‰ç©ºæ ¼ï¼Ÿæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œåæ­£æŠŠæˆ‘æƒ¹ç«äº†ï¼Œè€Œä¸”æˆ‘ä¹Ÿä¸æƒ³æ¯æ¬¡æ’å…¥å›¾ç‰‡æ‰‹åŠ¨ç¼–è¾‘å›¾ç‰‡åï¼Œå¤šéº»çƒ¦å•Šï¼ğŸ¤”</li><li>æœ‰ä¸ªäººå›¾åºŠåï¼Œä¸æ­¢åšå®¢ï¼Œå…¶ä»–éœ€è¦ç½‘ç»œå›¾ç‰‡çš„åœ°æ–¹ä¹Ÿå¯ä»¥ç”¨è‡ªå·±çš„å›¾åºŠäº†ï¼Œå¥½è€¶ğŸ˜€</li><li><del>æ²¡äº‹æ‰¾äº‹ï¼Œå–œæ¬¢æ£é¼“</del></li></ul><h2 id="æ–¹æ¡ˆä¼˜åŠ¿"><a href="#æ–¹æ¡ˆä¼˜åŠ¿" class="headerlink" title="æ–¹æ¡ˆä¼˜åŠ¿"></a>æ–¹æ¡ˆä¼˜åŠ¿</h2><p>å¥½ï¼Œä¸å•°å—¦äº†ï¼Œè¿›å…¥æ­£é¢˜ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯æ–¹æ¡ˆæ˜¯<code>GitHub + jsDelivr + PicGo </code></p><p>æœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</p><ul><li><strong>å…è´¹ï¼å…è´¹ï¼å…è´¹ï¼</strong>ï¼Œå…¶å®å°±æ˜¯ç©·ï¼Œæ²¡ç±³å„¿ç”¨æœåŠ¡å™¨ï¼Œå¥½åƒç”¨æœåŠ¡å™¨åªåšä¸€ä¸ªå›¾åºŠä¹Ÿduckä¸å¿…ğŸ« </li><li><strong>å¿«ï¼</strong>å¦‚æœç›´æ¥ç”¨<code>Github</code>ï¼Œé‚£ä¹ˆå›½å†…ç½‘ç»œåŠ è½½æ…¢æˆ–è€…å¾ˆå¯èƒ½åŠ è½½ä¸äº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦<code>jsDeliver</code>æ¥è¿›è¡ŒåŠ é€Ÿäº†ã€‚</li><li>æ­¤å¤–ï¼Œè¿˜éœ€è¦ä¸€ä¸ªæœ¬åœ°çš„å›¾åºŠç®¡ç†å™¨ï¼Œä½ æ€»ä¸èƒ½æ¯æ¬¡ä¿®æ”¹æœ¬åœ°å›¾ç‰‡æ–‡ä»¶å¤¹åæ‰‹åŠ¨Pushå§ï¼Œè¿™æ—¶å€™å°±å¾—è¯·å‡º<code>PicGo</code>äº†</li><li>è¯·çœ‹dsæ˜¯æ€ä¹ˆå¤¸å®ƒä»¬çš„</li></ul><p>è¿™ç§ç»„åˆæ˜¯<strong>ç›®å‰æœ€æµè¡Œä¸”å…è´¹çš„ä¸ªäººå›¾åºŠè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p><h3 id="1-GitHub-ä½œä¸ºå­˜å‚¨ç©ºé—´"><a href="#1-GitHub-ä½œä¸ºå­˜å‚¨ç©ºé—´" class="headerlink" title="1. GitHub ä½œä¸ºå­˜å‚¨ç©ºé—´"></a><strong>1. GitHub ä½œä¸ºå­˜å‚¨ç©ºé—´</strong></h3><ul><li><strong>å…è´¹</strong>ï¼šGitHub æä¾›<strong>å…è´¹çš„å­˜å‚¨ç©ºé—´</strong>ï¼ˆæ¯ä¸ªä»“åº“æœ€å¤§ 1GBï¼Œå•ä¸ªæ–‡ä»¶æœ€å¤§ 100MBï¼‰ã€‚</li><li><strong>ç¨³å®šå¯é </strong>ï¼šGitHub æ˜¯å…¨çƒæœ€å¤§çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œç¨³å®šæ€§é«˜ã€‚</li><li><strong>ç‰ˆæœ¬æ§åˆ¶</strong>ï¼šGitHub æ”¯æŒç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥éšæ—¶å›æ»šå›¾ç‰‡çš„å†å²ç‰ˆæœ¬ã€‚</li><li><strong>å¼€æºå±æ€§</strong>ï¼šGitHub ä»“åº“å¯ä»¥è®¾ç½®ä¸ºå…¬å¼€æˆ–ç§æœ‰ï¼Œæ–¹ä¾¿çµæ´»ã€‚</li></ul><h3 id="2-jsDelivr-ä½œä¸º-CDN-åŠ é€Ÿ"><a href="#2-jsDelivr-ä½œä¸º-CDN-åŠ é€Ÿ" class="headerlink" title="2. jsDelivr ä½œä¸º CDN åŠ é€Ÿ"></a><strong>2. jsDelivr ä½œä¸º CDN åŠ é€Ÿ</strong></h3><ul><li><strong>å…è´¹ CDN</strong>ï¼šjsDelivr æ˜¯ä¸€ä¸ªå…è´¹çš„ CDN æœåŠ¡ï¼Œå¯ä»¥åŠ é€Ÿ GitHub ä»“åº“ä¸­çš„æ–‡ä»¶åŠ è½½ã€‚</li><li><strong>å…¨çƒåŠ é€Ÿ</strong>ï¼šjsDelivr çš„èŠ‚ç‚¹åˆ†å¸ƒå…¨çƒï¼Œç¡®ä¿å›¾ç‰‡<strong>åŠ è½½é€Ÿåº¦å¿«</strong>ã€‚</li><li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šé€šè¿‡ jsDelivr å¯ä»¥ç›´æ¥è®¿é—® GitHub ä»“åº“ä¸­çš„å›¾ç‰‡ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</li></ul><h3 id="3-PicGo-ä½œä¸ºå›¾åºŠç®¡ç†å·¥å…·"><a href="#3-PicGo-ä½œä¸ºå›¾åºŠç®¡ç†å·¥å…·" class="headerlink" title="3. PicGo ä½œä¸ºå›¾åºŠç®¡ç†å·¥å…·"></a><strong>3. PicGo ä½œä¸ºå›¾åºŠç®¡ç†å·¥å…·</strong></h3><ul><li><strong>ä¾¿æ·ä¸Šä¼ </strong>ï¼šPicGo æ˜¯ä¸€æ¬¾å¼€æºçš„å›¾åºŠç®¡ç†å·¥å…·ï¼Œæ”¯æŒæ‹–æ‹½ä¸Šä¼ ã€å‰ªè´´æ¿ä¸Šä¼ ç­‰å¤šç§æ–¹å¼ã€‚</li><li><strong>å¤šå¹³å°æ”¯æŒ</strong>ï¼šPicGo æ”¯æŒ Windowsã€macOSã€Linux ç­‰æ“ä½œç³»ç»Ÿã€‚</li><li><strong>è‡ªåŠ¨ç”Ÿæˆé“¾æ¥</strong>ï¼šä¸Šä¼ å›¾ç‰‡åï¼ŒPicGo ä¼šè‡ªåŠ¨ç”Ÿæˆå›¾ç‰‡çš„ CDN é“¾æ¥ï¼Œæ–¹ä¾¿ç›´æ¥ä½¿ç”¨ã€‚</li><li><strong>æ’ä»¶æ‰©å±•</strong>ï¼šPicGo æ”¯æŒå¤šç§æ’ä»¶ï¼Œå¯ä»¥æ‰©å±•åŠŸèƒ½ï¼ˆå¦‚ GitHub å›¾åºŠæ’ä»¶ï¼‰ã€‚</li></ul><p>æ€ä¹ˆæ ·ï¼Œä¸èµ–å§ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ğŸ˜</p><hr><h1 id="ä¸‹è½½PicGo"><a href="#ä¸‹è½½PicGo" class="headerlink" title="ä¸‹è½½PicGo"></a>ä¸‹è½½PicGo</h1><ul><li>ç›´æ¥ä¸Šé“¾æ¥ï¼Œ<a href="https://github.com/Molunerfinn/PicGo/releases">ç‚¹å‡»ä¸‹è½½</a>ï¼Œä½ å¯ä»¥é€‰æ‹©Betaæµ‹è¯•ç‰ˆä½“éªŒä¸€äº›æ–°åŠŸèƒ½ï¼Œä¹Ÿå¯ä»¥è¿½æ±‚ç¨³å®šç‰ˆã€‚æ ¹æ®ä½ çš„ç³»ç»Ÿé€‰æ‹©å¯¹åº”çš„å³å¯ï¼Œæˆ‘æ˜¯x64_exe</li><li>æ­£å¸¸å®‰è£…åæ‰“å¼€ï¼Œå¯èƒ½é»˜è®¤æ˜¯é™é»˜å¯åŠ¨çš„ï¼Œéœ€è¦ä½ ç‚¹å‡»ç”µè„‘å³ä¸‹è§’çš„å›¾æ ‡æ‰“å¼€çª—å£</li><li>æ‰“å¼€åä¾æ¬¡ç‚¹å‡»<code>å›¾åºŠè®¾ç½®</code> -&gt; <code>Github</code>,ç„¶åæœ‰ä¸€ä¸ªé»˜è®¤çš„åº”è¯¥ï¼Œç‚¹å‡»ç¼–è¾‘ï¼Œç„¶åä½ ä¼šè¿›å…¥ä»¥ä¸‹é¡µé¢</li><li><strong>è¿™æ—¶å€™ä½ å°±å¯ä»¥å…ˆé…ç½®<code>Github</code>äº†ï¼Œå›å¤´å†æ¥</strong><ul><li>å›¾åºŠé…ç½®åï¼šè‡ªå·±éšä¾¿èµ·ä¸ªåå­—å“¦</li><li>è®¾å®šä»“åº“åï¼šä½ çš„<code>Github</code>å›¾åºŠä»“åº“åï¼Œä¹Ÿå¯ä»¥åŠ ä¸Šç”¨æˆ·å&#x2F;</li><li>åˆ†æ”¯ï¼šé»˜è®¤ä¸ºmaster,æˆ–è€…ä½ è‡ªå·±è®¾ç½®çš„åˆ†æ”¯</li><li>Toeknï¼šæŠŠç”Ÿæˆçš„Tokenç›´æ¥ç²˜è´´è¿‡æ¥</li><li>è®¾å®šå­˜å‚¨è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯ä½ ä»“åº“é‡Œæ”¾ç½®å›¾ç‰‡çš„è·¯å¾„ï¼Œå¯ä»¥æŒ‡å®šä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>images/</code>,è¿™æ ·ä¸Šä¼ çš„å›¾ç‰‡ä¼šæ”¾åˆ°ä½ ä»“åº“çš„è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹</li><li>è®¾å®šè‡ªå®šä¹‰åŸŸåï¼šå¦‚æœä½ ç”¨<code>jsDeliver</code>æœåŠ¡ï¼Œæ ¼å¼ä¸º<code>https://cdn.jsdelivr.net/gh/ç”¨æˆ·å/ä»“åº“å</code>ï¼Œæ¯”å¦‚æˆ‘çš„å°±æ˜¯<code>https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting</code></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/image-20250331180510405.png" alt="image-20250331180510405"></p><h1 id="Githubè®¾ç½®"><a href="#Githubè®¾ç½®" class="headerlink" title="Githubè®¾ç½®"></a>Githubè®¾ç½®</h1><h2 id="1-å»ºç«‹å›¾åºŠä»“åº“"><a href="#1-å»ºç«‹å›¾åºŠä»“åº“" class="headerlink" title="1. å»ºç«‹å›¾åºŠä»“åº“"></a>1. å»ºç«‹å›¾åºŠä»“åº“</h2><p>æ–°å»ºä¸€ä¸ªrepoï¼Œç¬¬ä¸€æ¬¡å¯ä»¥æ‰‹åŠ¨pushä¸€äº›å›¾ç‰‡ä¸Šå»ï¼Œæœ€ålike this<img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/image-20250331175917321.png" alt="image-20250331175917321"></p><h2 id="2-ç”Ÿæˆ-GitHub-Token"><a href="#2-ç”Ÿæˆ-GitHub-Token" class="headerlink" title="2. ç”Ÿæˆ GitHub Token"></a>2. ç”Ÿæˆ GitHub Token</h2><ol><li>åœ¨ GitHub å³ä¸Šè§’ç‚¹å‡»å¤´åƒï¼Œé€‰æ‹© <code>Settings</code>ã€‚</li><li>å·¦ä¾§èœå•é€‰æ‹© <code>Developer settings</code> &gt; <code>Personal access tokens</code> </li><li>è¿™æ—¶å€™ä½ ä¼šå‘ç°æœ‰ä¸¤ä¸ªé€‰é¡¹ï¼Œä¸€ä¸ªæ˜¯<code>Fine-grained</code>ï¼Œä¸€ä¸ªæ˜¯<code>classic</code>çš„ï¼Œé€‰ç¬¬ä¸€ä¸ªï¼Œå› ä¸ºç¬¬ä¸€ä¸ª<strong>æƒé™ç²’åº¦æ›´ç»†ï¼Œå®‰å…¨æ€§æ›´é«˜</strong></li><li>ç‚¹å‡» <code>Generate new token</code>ï¼Œåç§°ï¼Œä»‹ç»ï¼Œåˆ°æœŸæ—¶é—´ç­‰è‡ªå®šä¹‰</li><li>æ¥ä¸‹æ¥é€‰æ‹©<code>Only select repositories</code>,ç„¶åæŠŠä½ çš„å›¾åºŠä»“åº“å‹¾é€‰ä¸Šå³å¯</li><li><code>Repository permissions</code><strong>åªé€‰æ‹©ä¸€ä¸ª<code>Contents</code>å¯è¯»å¯å†™å³å¯</strong>ï¼Œè¿™æ ·å°±å¯ä»¥è®¿é—®ä½ å›¾åºŠä»“åº“çš„å›¾ç‰‡å¹¶ä¸Šä¼ äº†ï¼Œ<strong>å…¶ä»–çš„é€‰é¡¹æœ€å¥½ä¸è¦ç»™äºˆaccessï¼Œä¸ç„¶å¯èƒ½ä¼šé€ æˆéº»çƒ¦</strong>ï¼Œ<code>Account permission</code>ä¸éœ€è¦æ·»åŠ ï¼Œç„¶åç‚¹å‡»ç”Ÿæˆå³å¯</li><li>å¤åˆ¶ç”Ÿæˆçš„ Tokenï¼ˆ<strong>åªä¼šæ˜¾ç¤ºä¸€æ¬¡ï¼ŒåŠ¡å¿…ä¿å­˜å¥½</strong>ï¼‰ï¼Œå¡«å…¥åˆ°PicGoçš„é…ç½®ä¸­</li></ol><p>å—¯ï¼Œå½“ä½ æŒ‰éƒ¨å°±ç­å®Œæˆä¸Šé¢çš„æ­¥éª¤ï¼Œåº”è¯¥å°±å¯ä»¥äº†ï¼Œä½ å¯ä»¥ä¸Šä¼ ä¸€å¼ å›¾ç‰‡è¯•è¯•ï¼Œçœ‹çœ‹æ˜¯å¦æˆåŠŸ</p><h1 id="Typora"><a href="#Typora" class="headerlink" title="Typora"></a>Typora</h1><p>æœ€åè¯´ä¸€ä¸‹ï¼Œå¦‚æœä½ ä½¿ç”¨è¿™ä¸ªç¼–è¾‘å™¨çš„è¯ï¼Œå¯ä»¥é…ç½®ä¸€ä¸‹æ’å…¥å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ ï¼Œç‚¹å‡»åå¥½è®¾ç½®-å›¾åƒ</p><ul><li>æ’å…¥å›¾ç‰‡æ—¶é€‰æ‹©ä¸Šä¼ å›¾ç‰‡</li><li>ä¸Šä¼ æœåŠ¡é€‰æ‹©PicGo(app)</li><li>è·¯å¾„å¡«å†™ä½ å®‰è£…çš„è·¯å¾„ï¼Œæ³¨æ„è¦ç›´æ¥æŒ‡å®šä¸º.exe</li></ul><p><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/image-20250331182700964.png" alt="image-20250331182700964"></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li>é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œä½ å°±å¯ä»¥ä¸æ»‘åœ°åœ¨Typoraæ’å…¥å›¾ç‰‡äº†ï¼Œè¿˜ä¸ç”¨æ‹…å¿ƒå›¾ç‰‡ä¸¢å¤±ï¼Œåšå®¢ä¹Ÿå¯ä»¥ç›´æ¥é“¾æ¥ç½‘ç»œå›¾ç‰‡ï¼Œé€Ÿåº¦çš„è¯ç›¸å½“å¿«</li><li>å¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ğŸ˜ğŸ˜ğŸ˜</li></ul>]]></content>
    
    
    <categories>
      
      <category>çˆ±æ£é¼“</category>
      
    </categories>
    
    
    <tags>
      
      <tag>åšå®¢</tag>
      
      <tag>é…ç½®</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BUAA-OO-Unit1</title>
    <link href="/2025/03/22/BUAA-OO-Unit1/"/>
    <url>/2025/03/22/BUAA-OO-Unit1/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>è¿™æ˜¯2025å¹´OOç¬¬ä¸€å•å…ƒçš„æ€»ç»“åšå®¢</p>          </div><h1 id="åŸºäºåº¦é‡åˆ†æç¨‹åºç»“æ„"><a href="#åŸºäºåº¦é‡åˆ†æç¨‹åºç»“æ„" class="headerlink" title="åŸºäºåº¦é‡åˆ†æç¨‹åºç»“æ„"></a>åŸºäºåº¦é‡åˆ†æç¨‹åºç»“æ„</h1><h2 id="ç±»çš„è®¾è®¡è€ƒè™‘"><a href="#ç±»çš„è®¾è®¡è€ƒè™‘" class="headerlink" title="ç±»çš„è®¾è®¡è€ƒè™‘"></a>ç±»çš„è®¾è®¡è€ƒè™‘</h2><p>å…ˆæ”¾ä¸€å¼ ç±»å›¾</p><p><img src="/../img_post/hw3.svg"></p><p>æˆ‘é‡‡ç”¨äº†<code>poly-Mono</code>çš„æ ¸å¿ƒç»“æ„ï¼Œå³å°†å„å› å­ã€é¡¹ã€è¡¨è¾¾å¼éƒ½è½¬åŒ–ä¸ºå¤šé¡¹å¼Polyï¼Œè€Œå¤šé¡¹å¼æ˜¯ç”±ä¸€ä¸ªä¸ªçš„å•é¡¹å¼Monoæ‰€æ„æˆï¼Œç»è¿‡è¿­ä»£ä¹‹åï¼ŒMonoçš„åŸºæœ¬ç»“æ„ä¸º<br>$$<br>Mono &#x3D; a<em>x^b</em>\prod sin(Factor)^c*\prod cos(Factor)^d<br>$$<br>è‡³äºç±»çš„è®¾è®¡ï¼Œæˆ‘å€Ÿé‰´äº†OOpre hw7ä»¥åŠä¸Šæœºå®éªŒçš„æ¡†æ¶ï¼Œæ²¿è¢­äº†Parser Lexer Expr Termä»¥åŠè¯¸å¤šFactorç±»ï¼Œç„¶åæ ¹æ®<strong>å½’ä¸€åŒ–æ€æƒ³</strong>ä»¥åŠ<strong>è¿­ä»£éœ€æ±‚</strong>ï¼Œæ–°å¢äº†<code>DiyFunc</code> <code>NormalFunc</code> <code>Poly</code> <code>Mono</code>  <code>TriFactor</code> <code>DeriveFactor</code> ç­‰ç±»ã€‚</p><p>æˆ‘å°†æˆ‘æ‰€è®¾è®¡çš„ç±»åˆ†ä¸ºäº†å‡ ä¸ªpackageï¼Œå¤„ç†è¿‡ç¨‹å¤§è‡´å¦‚ä¸‹ï¼š</p><ol><li>é¦–å…ˆæ˜¯MainClassè¯»å…¥å­—ç¬¦ä¸²ï¼Œç„¶åé¦–å…ˆå…ˆå°†è‡ªå®šä¹‰å‡½æ•°åˆ†åˆ«æ”¾åˆ°Functionsçš„<code>DiyFunc</code>å’Œ<code>NormalFunc</code>ç±»è¿›è¡Œå¤„ç†ï¼Œè¿™æ˜¯ä¸¤ä¸ª<strong>é™æ€ç±»</strong>ï¼Œåˆ†åˆ«ç”¨äºè§£æé€’å½’å‡½æ•°å’Œæ™®é€šå‡½æ•°ï¼Œç„¶åå°†è§£æåçš„å‡½æ•°å­˜å‚¨åœ¨ç±»è‡ªèº«çš„é™æ€å±æ€§é‡Œé¢ï¼Œåé¢å¯ä»¥ç›´æ¥<strong>é€šè¿‡ç±»åè¿›è¡Œè°ƒç”¨ï¼Œè€Œæ— éœ€å®ä¾‹åŒ–å¯¹è±¡</strong></li><li>ç„¶åè¯»å…¥è¦åŒ–ç®€å±•å¼€çš„è¡¨è¾¾å¼ï¼Œé¦–å…ˆè°ƒç”¨Lexerè¿›è¡Œè¯æ³•åˆ†æï¼Œåˆ†æå®Œæ¯•åäº¤ç»™Parserè¿›è¡Œå¤„ç†ï¼Œ<strong>Parseré‡‡ç”¨é€’å½’ä¸‹é™æ³•ä¸€å±‚ä¸€å±‚åœ°è§£æè¡¨è¾¾å¼</strong>ï¼Œä»è¡¨è¾¾å¼åˆ°é¡¹å†åˆ°å› å­</li><li>è§£æå®Œè¡¨è¾¾å¼åï¼Œä¸‹é¢å°±è¦å°†å„ä¸ªå› å­æ‰€æ„æˆçš„é¡¹<strong>è¿›è¡Œå½’ä¸€åŒ–</strong>ï¼Œåœ¨æ¯ä¸€ä¸ªç±»é‡Œé¢éƒ½æœ‰ä¸€ä¸ª<code>toPoly()</code>æ–¹æ³•ï¼Œç”¨äºå°†æœ¬ç±»çš„å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ªå¤šé¡¹å¼</li><li>ç‰¹åˆ«åœ°ï¼Œåœ¨è½¬æ¢æ±‚å¯¼å› å­æ—¶ï¼Œæˆ‘æ˜¯ç›´æ¥å°†æ±‚å¯¼å› å­æ‹¬å·å†…çš„è¡¨è¾¾å¼è½¬æ¢ä¸ºå¤šé¡¹å¼ï¼Œç„¶åè°ƒç”¨å¤šé¡¹å¼çš„æ±‚å¯¼æ–¹æ³•ï¼Œå°†<strong>è¿”å›çš„å¤šé¡¹å¼å­˜å‚¨ä¸ºè¿™ä¸€ä¸ªæ±‚å¯¼å› å­çš„å±æ€§</strong></li><li>æœ€åï¼Œéå†å¤šé¡¹å¼çš„æ¯ä¸€ä¸ªå•é¡¹å¼ï¼Œæ‰“å°è¾“å‡º</li></ol><h2 id="åº¦é‡"><a href="#åº¦é‡" class="headerlink" title="åº¦é‡"></a>åº¦é‡</h2><h3 id="ç±»çš„å¤æ‚åº¦"><a href="#ç±»çš„å¤æ‚åº¦" class="headerlink" title="ç±»çš„å¤æ‚åº¦"></a>ç±»çš„å¤æ‚åº¦</h3><ul><li>WMC è¡¨ç¤ºä¸€ä¸ªç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„å¤æ‚åº¦ä¹‹å’Œã€‚é€šå¸¸ï¼Œæ¯ä¸ªæ–¹æ³•çš„å¤æ‚åº¦ç”¨ <strong>åœˆå¤æ‚åº¦ (Cyclomatic Complexity)</strong> æ¥è¡¡é‡ï¼ŒWMC è¶Šé«˜ï¼Œç±»çš„å¤æ‚åº¦è¶Šé«˜ï¼Œç»´æŠ¤å’Œæµ‹è¯•çš„éš¾åº¦ä¹Ÿè¶Šå¤§</li><li>OCavg åæ˜ äº†ç±»ä¸­æ–¹æ³•çš„å¹³å‡å¤æ‚åº¦ï¼Œå¦‚æœ OCavg è¾ƒé«˜ï¼Œè¯´æ˜ç±»ä¸­çš„æ–¹æ³•æ™®éè¾ƒå¤æ‚ï¼Œå¯èƒ½éœ€è¦é‡æ„ã€‚</li><li>OCmax åæ˜ äº†ç±»ä¸­æœ€å¤æ‚æ–¹æ³•çš„å¤æ‚åº¦ï¼Œå¦‚æœ OCmax è¿‡é«˜ï¼Œè¯´æ˜ç±»ä¸­å¯èƒ½å­˜åœ¨è¿‡äºå¤æ‚çš„æ–¹æ³•ï¼Œéœ€è¦é‡ç‚¹å…³æ³¨å’Œé‡æ„</li></ul><p>![](..&#x2F;img_post&#x2F;2025-03-22 152021.png)</p><p>åˆ†æç»“æœå¯çŸ¥ï¼Œ<code>DiyFunc</code>ç±»ã€<code>Lexer</code>ç±»å’Œ<code>Parser</code>ç±»å¤æ‚åº¦è¾ƒé«˜ï¼Œä¸ºä½å†…èšç±»ã€‚è¿™ä¸‰ä¸ªç±»åˆ†åˆ«ä¸ºé€’å½’å‡½æ•°ç±»ã€è¯æ³•åˆ†æç±»å’Œé€’å½’ä¸‹é™æ‰§è¡Œç±»ï¼Œå‡ä¸ºç¨‹åºè¿è¡Œæµç¨‹çš„ç›´æ¥ä½“ç°ï¼Œå› æ­¤å®ƒä»¬ä½œä¸ºä½å†…èšç±»æ˜¯å¯ä»¥ç†è§£çš„ã€‚åŒæ—¶ï¼Œå…¶å®ƒç±»è€¦åˆåº¦ä½ï¼Œå¯ä»¥è®¤ä¸ºæ•´ä»½ä»£ç çš„æŠ½è±¡åŒ–ç¨‹åº¦è¿˜ç®—æ¯”è¾ƒåˆé€‚ã€‚å½“ç„¶ï¼Œæˆ‘çš„<code>DiyFunc</code>ç±»è¿˜æ˜¯æ¯”è¾ƒâ€œç¬¨é‡â€çš„ï¼Œå› ä¸ºå¯¹äºä¸€ä¸ªå‚æ•°å’Œä¸¤ä¸ªå‚æ•°çš„é€’å½’å‡½æ•°ï¼Œæˆ‘å¹¶æ²¡æœ‰å°†å…¶ç»Ÿä¸€èµ·æ¥ï¼Œè€Œæ˜¯è®¾è®¡äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œrecurrence1å’Œrecurrence2ï¼Œè¿™æ ·çš„è®¾è®¡æ— ç–‘æ˜¯ä¸å¤ªå¥½çš„ï¼Œä½†æ˜¯æˆ‘åˆšå¼€å§‹å†™çš„æ—¶å€™æ€•å‡ºé”™ï¼Œä¹Ÿå°±åˆ†å¼€è®¾è®¡äº†ï¼Œåé¢ä¹Ÿæ²¡æœ‰æ•´æ”¹ğŸ« ã€‚å…¶å®è¿˜æ˜¯æœ‰æ”¹è¿›ç©ºé—´çš„ã€‚</p><h3 id="æ–¹æ³•çš„å¤æ‚åº¦"><a href="#æ–¹æ³•çš„å¤æ‚åº¦" class="headerlink" title="æ–¹æ³•çš„å¤æ‚åº¦"></a>æ–¹æ³•çš„å¤æ‚åº¦</h3><p>è¿™é‡Œé€‰äº†å¤æ‚åº¦çš„å‰å‡ ä½</p><p><img src="/../img_post/image-20250322155006492.png"></p><p>å…¶ä¸­ï¼ŒLexeråœ¨è§£æè¾“å…¥æ—¶ï¼Œæœ‰éå¸¸éå¸¸å¤šçš„åˆ†æ”¯åˆ¤æ–­ï¼Œå› æ­¤å¤æ‚åº¦å¼‚å¸¸åœ°é«˜ï¼Œè¿™ä¹Ÿæ˜¯åˆç†çš„ã€‚</p><p>ç„¶åMonoçš„toStringæ–¹æ³•æ˜¯å°†å•é¡¹å¼è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè¿™é‡Œé¢ç‰µæ‰¯åˆ°ä¸‰è§’å‡½æ•°åµŒå¥—è¡¨è¾¾å¼çš„è¯¸å¤šé—®é¢˜ï¼Œå› æ­¤å¤æ‚åº¦ä¹Ÿæ¯”è¾ƒé«˜</p><h3 id="ä»£ç è¡Œæ•°"><a href="#ä»£ç è¡Œæ•°" class="headerlink" title="ä»£ç è¡Œæ•°"></a>ä»£ç è¡Œæ•°</h3><p>![](..&#x2F;img_post&#x2F;2025-03-22 151812.png)</p><ul><li>ä¸‰æ¬¡è¿­ä»£ä¸‹æ¥ï¼Œæ€»å…±å¤§æ¦‚1000è¡Œä»£ç ï¼Œåº”è¯¥è¿˜ç®—å°‘çš„äº†ï¼Œå› ä¸ºæœ¬äººå¯¹äºå·æ€§èƒ½å·ä¼˜åŒ–ä¸å¤ªæ„Ÿå†’ï¼Œè€Œä¸”å¾ˆå¤šåœ°æ–¹è¿½æ±‚ç²¾ç®€ï¼Œæ‰€ä»¥ä»£ç é‡å°‘äº†äº›</li></ul><h1 id="æ¶æ„è®¾è®¡ä½“éªŒ"><a href="#æ¶æ„è®¾è®¡ä½“éªŒ" class="headerlink" title="æ¶æ„è®¾è®¡ä½“éªŒ"></a>æ¶æ„è®¾è®¡ä½“éªŒ</h1><ul><li>æœ¬äººæ¶æ„å€’æ˜¯è¿˜è¡Œï¼Œè‡³å°‘æ²¡ç»å†è¿‡é‡æ„ï¼Œä½†æ˜¯ä¾æ—§bugå¤šå¤šğŸ« </li></ul><h2 id="ç¬¬ä¸€æ¬¡è¿­ä»£"><a href="#ç¬¬ä¸€æ¬¡è¿­ä»£" class="headerlink" title="ç¬¬ä¸€æ¬¡è¿­ä»£"></a>ç¬¬ä¸€æ¬¡è¿­ä»£</h2><p>æœ¬äººåœ¨æµè§ˆäº†ä¸€äº›å­¦é•¿åšå®¢å’Œå®éªŒä»£ç åï¼Œæœæ–­é€‰æ‹©äº†<strong>é€’å½’ä¸‹é™æ³•+Poly-Monoç»“æ„</strong>ï¼Œå³æœ€åçš„æ•´ä¸ªå¼å­æ˜¯ä¸€ä¸ªå¤šé¡¹å¼Poly,å®ƒæœ‰è‹¥å¹²ä¸ªå•é¡¹å¼Monoç›¸åŠ å‡ç»„æˆï¼Œåœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­<br>$$<br>Mono &#x3D; a*x^b<br>$$</p><h2 id="ç¬¬äºŒæ¬¡è¿­ä»£"><a href="#ç¬¬äºŒæ¬¡è¿­ä»£" class="headerlink" title="ç¬¬äºŒæ¬¡è¿­ä»£"></a>ç¬¬äºŒæ¬¡è¿­ä»£</h2><p>ç¬¬äºŒæ¬¡è¿­ä»£å¼•å…¥äº†ä¸‰è§’å‡½æ•°å› å­å’Œè‡ªå®šä¹‰é€’å½’å‡½æ•°è¿™ä¸¤ä¸ªæ–°ç‰¹æ€§ï¼Œéš¾åº¦å¯è°“æ˜¯ç›´çº¿ä¸Šå‡ï¼Œæ€è€ƒè‰¯ä¹…åï¼Œæˆ‘å‘ç°ï¼Œä¾æ—§å¯ä»¥å°†å…¶ç»Ÿä¸€ä¸ºPoly-Monoç»“æ„ï¼Œåªæ˜¯Monoçš„ç»“æ„å¤æ‚äº†ä¸€äº›<br>$$<br>Mono &#x3D; a<em>x^b</em>\prod sin(Factor)^c<em>\prod cos(Factor)^d<br>$$<br>è¡¨ç°åœ¨ä»£ç ä¸Šå°±æ˜¯Monoç±»å¤šäº†ä¸€ä¸ªå±æ€§ï¼Œé‚£å°±æ˜¯<code>private ArrayList&lt;TriFactor&gt; triFactors = new ArrayList&lt;&gt;()</code>ï¼Œå› æ­¤ï¼Œåˆå¹¶åŒç±»é¡¹æ—¶ä¹Ÿå¸¦æ¥äº†æå¤§çš„éº»çƒ¦ï¼Œä¸¤ä¸ªå•é¡¹å¼å¯ä»¥åˆå¹¶çš„æ¡ä»¶å˜å¾—å¼‚å¸¸å¤æ‚ï¼Œéœ€è¦å¯¹åº”çš„ä¸‰è§’å‡½æ•°çš„å€¼ç›¸ç­‰ï¼Œè€Œæ€ä¹ˆåˆ¤æ–­å€¼ç›¸ç­‰å‘¢ï¼Ÿæ¯”å¦‚2</em>x^3 * sin(x+1) å’Œ 3*x^3 * sin(1+x)ï¼Œé‚£ä¹ˆåˆéœ€è¦è®¾ç½®ä¸‰è§’å‡½æ•°çš„ç±»çš„å€¼ç›¸ç­‰çš„åˆ¤æ–­æ–¹æ³•ï¼Œä½†ä¸‰è§’å‡½æ•°æ‹¬å·é‡Œå¯èƒ½æ˜¯ä»»ä½•è¡¨è¾¾å¼æˆ–è€…å› å­ï¼Œå› æ­¤ç†è®ºä¸Šä¹Ÿéœ€è¦é€’å½’ä¸‹é™åˆ¤æ–­ï¼Œä½†æ˜¯æˆ‘æ˜¯ç›´æ¥å¸¦è°ƒç”¨äº†toStringæ–¹æ³•å†åŠ ä¸Šsortæ–¹æ³•ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œå¯¹äºå¤§éƒ¨åˆ†ç®€å•çš„æƒ…å†µè¿˜æ˜¯èƒ½å¤Ÿæ‹¿æçš„ğŸ˜</p><h2 id="ç¬¬ä¸‰æ¬¡è¿­ä»£"><a href="#ç¬¬ä¸‰æ¬¡è¿­ä»£" class="headerlink" title="ç¬¬ä¸‰æ¬¡è¿­ä»£"></a>ç¬¬ä¸‰æ¬¡è¿­ä»£</h2><p>ç¬¬ä¸‰æ¬¡å¢åŠ äº†æ™®é€šå‡½æ•°å’Œæ±‚å¯¼å› å­ï¼Œæ™®é€šå‡½æ•°çš„å„ç§æ€æƒ³å’Œæ–¹æ³•åœ¨é€’å½’å‡½æ•°é‡Œå·²ç»å®ç°äº†ï¼Œé—®é¢˜ä¸å¤§ï¼Œæ±‚å¯¼å› å­çš„è¯æˆ‘æ˜¯é€‰æ‹©åœ¨Polyå’ŒMonoé‡Œæ±‚å¯¼ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMonoæ±‚å¯¼è¿”å›çš„åº”è¯¥æ˜¯ä¸€ä¸ªPolyï¼Œç„¶åæ ¹æ®ä¹˜æ³•æ³•åˆ™å’Œé“¾å¼æ³•åˆ™æ±‚å¯¼å³å¯ï¼Œè¿˜è¦å†™ä¸€ä¸‹ä¸‰è§’å‡½æ•°çš„æ±‚å¯¼ã€‚è¿™æ ·è®¾è®¡çš„å¥½å¤„æ˜¯<strong>åªéœ€è¦åœ¨ä¸‰ä¸ªç±»é‡Œé¢å†™æ±‚å¯¼æ–¹æ³•ï¼Œè€Œä¸æ˜¯æ¯ä¸€å±‚ç»“æ„å’Œæ¯ä¸€ç§å› å­éƒ½è¦å†™ï¼Œæ¯”è¾ƒç®€æ´</strong>ã€‚</p><h1 id="è‡ªå·±çš„bug"><a href="#è‡ªå·±çš„bug" class="headerlink" title="è‡ªå·±çš„bug"></a>è‡ªå·±çš„bug</h1><h2 id="ç¬¬ä¸€æ¬¡è¿­ä»£-1"><a href="#ç¬¬ä¸€æ¬¡è¿­ä»£-1" class="headerlink" title="ç¬¬ä¸€æ¬¡è¿­ä»£"></a>ç¬¬ä¸€æ¬¡è¿­ä»£</h2><p>æ˜¯çš„ï¼Œæˆ‘ç¬¬ä¸€æ¬¡éƒ½æœ‰bugï¼Œå¤§è‡´å°±æ˜¯è¿™æ ·ğŸ˜°</p><p><img src="/../img_post/image-20250322161658859.png"></p><h2 id="ç¬¬äºŒæ¬¡è¿­ä»£-1"><a href="#ç¬¬äºŒæ¬¡è¿­ä»£-1" class="headerlink" title="ç¬¬äºŒæ¬¡è¿­ä»£"></a>ç¬¬äºŒæ¬¡è¿­ä»£</h2><p><strong>è¿™æ¬¡è¿­ä»£ç›´æ¥å°±çˆ†äº†</strong></p><ul><li>é¦–å…ˆæ˜¯æˆ‘åœ¨ç¬¬ä¸€æ¬¡è¿­ä»£ä¸­ï¼Œå®ç°äº†æŠŠç¬¦å·ç›´æ¥è¯»å…¥æ•°å­—ä¸­ï¼Œæ¯”å¦‚æŒ‡æ•°çš„æ•°å­—ä»¥åŠä¹˜å·åé¢çš„æ•°å­—ï¼Œå› æ­¤æˆ‘è§£æåˆ°çš„ç¬¦å·éƒ½æ˜¯è¿ç®—ç¬¦ï¼Œä½†æ˜¯ç¬¬äºŒæ¬¡æœ‰å‡½æ•°è°ƒç”¨ï¼Œf()æ‹¬å·é‡Œçš„æ•°å­—å¦‚æœæœ‰ç¬¦å·ï¼Œé‚£ä¹ˆæˆ‘å°±ä¼šè§£æé”™ï¼Œå±äºæ˜¯æ²¡è€ƒè™‘åˆ°å§ï¼Œä¹Ÿæˆ–è®¸æ˜¯ç¬¬ä¸€æ¬¡è¿™æ ·è®¾è®¡çš„ä¸å¤ªåˆç†ï¼Œç¬¬ä¸€æ¬¡çš„è®¾è®¡å¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (expr.charAt(pos) == <span class="hljs-string">&#x27;+&#x27;</span>) &#123;<br>                <span class="hljs-keyword">if</span> (pos &gt; <span class="hljs-number">1</span> &amp;&amp; (expr.charAt(pos - <span class="hljs-number">1</span>) == <span class="hljs-string">&#x27;^&#x27;</span> || expr.charAt(pos - <span class="hljs-number">1</span>) == <span class="hljs-string">&#x27;*&#x27;</span>)) &#123;<br>                    pos++;<br>                    parseNumber(<span class="hljs-number">1</span>);<br>                &#125;<br>                <span class="hljs-keyword">else</span> &#123;<br>                    tokens.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Token</span>(Token.Type.OP, <span class="hljs-string">&quot;+&quot;</span>));<br>                    pos++;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (expr.charAt(pos) == <span class="hljs-string">&#x27;-&#x27;</span>) &#123;<br>                <span class="hljs-keyword">if</span> (pos &gt; <span class="hljs-number">1</span> &amp;&amp; expr.charAt(pos - <span class="hljs-number">1</span>) == <span class="hljs-string">&#x27;*&#x27;</span>) &#123;<br>                    pos++;<br>                    parseNumber(-<span class="hljs-number">1</span>);<br>                &#125;<br>                <span class="hljs-keyword">else</span> &#123;<br>                    tokens.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Token</span>(Token.Type.OP, <span class="hljs-string">&quot;-&quot;</span>));<br>                    pos++;<br>                &#125;<br>            &#125;<br></code></pre></td></tr></table></figure><ul><li>è¿˜æœ‰ä¸€ä¸ªå¤§çš„bugæ˜¯æˆ‘é€’å½’å‡½æ•°ä»£å…¥å‚æ•°æ—¶ï¼Œç›´æ¥å…ˆåä»£å…¥çš„ï¼Œå¦‚æœç¬¬ä¸€ä¸ªå®å‚é‡Œæœ‰ç¬¬äºŒä¸ªå½¢å‚ï¼Œé‚£ä¹ˆä¹Ÿä¼šè¢«æ›¿æ¢ï¼Œä¿®æ”¹åå¦‚ä¸‹ï¼š</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">return</span> func.replace(formPara1, <span class="hljs-string">&quot;$0&quot;</span>).replace(formPara2, <span class="hljs-string">&quot;$1&quot;</span>)<br>                    .replace(<span class="hljs-string">&quot;$0&quot;</span>, <span class="hljs-string">&quot;(&quot;</span> + para1 + <span class="hljs-string">&quot;)&quot;</span>).replace(<span class="hljs-string">&quot;$1&quot;</span>, <span class="hljs-string">&quot;(&quot;</span> + para2 + <span class="hljs-string">&quot;)&quot;</span>);<br></code></pre></td></tr></table></figure><h2 id="ç¬¬ä¸‰æ¬¡è¿­ä»£-1"><a href="#ç¬¬ä¸‰æ¬¡è¿­ä»£-1" class="headerlink" title="ç¬¬ä¸‰æ¬¡è¿­ä»£"></a>ç¬¬ä¸‰æ¬¡è¿­ä»£</h2><ul><li>ä¸»è¦å°±ä¸€ä¸ªï¼Œæ„Ÿè°¢zhenchçš„è¯„æµ‹æœºæµ‹å‡ºæ¥äº†ï¼Œå°±æ˜¯ç¬¬äºŒæ¬¡æˆ‘æ˜¯ç”¨é€—å·åˆ‡å‰²çš„å‡½æ•°å‚æ•°ï¼Œä½†æ˜¯ç¬¬ä¸‰æ¬¡è¿­ä»£ï¼Œå‡½æ•°è°ƒç”¨é‡Œè¿˜å¯èƒ½æœ‰å‡½æ•°è°ƒç”¨ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ç›²ç›®ç”¨é€—å·åˆ‡å‰²ï¼Œéœ€è¦è€ƒè™‘æ‹¬å·å±‚æ•°</li></ul><h1 id="å‘ç°åˆ«äººç¨‹åºbug"><a href="#å‘ç°åˆ«äººç¨‹åºbug" class="headerlink" title="å‘ç°åˆ«äººç¨‹åºbug"></a>å‘ç°åˆ«äººç¨‹åºbug</h1><ul><li>ä¸»è¦å°±æ˜¯ç”¨è‡ªå·±è¸©è¿‡çš„ä¸€äº›å‘æ¥æµ‹è¯•åˆ«äººçš„ä»£ç </li><li>æ„é€ ä¸€äº›å¡æ—¶é—´æˆ–è€…å†…å­˜çš„æ ·ä¾‹ï¼Œæ¥æµ‹è¯•ä¸€äº›å®ç°ä¸å¤Ÿæ•æ·çš„ä»£ç </li></ul><p>è¿™é‡Œä¸å¾—ä¸å°å°åæ§½ä¸€ä¸‹ï¼šæ„Ÿè§‰è¯¾ç¨‹ç»„çš„costå¡çš„å¾ˆä¸¥ï¼Œå¾ˆå¤šçš„æ•°æ®å…¶å®å¼€é”€å¹¶ä¸ç®—å¤§ï¼Œä½†æ˜¯å°±æ˜¯åˆ€ä¸äº†äººï¼Œæ„Ÿè§‰è¿™æ–¹é¢å¡çš„å¤ªä¸¥äº†ï¼Œäº’æµ‹çš„ä½“éªŒå¾ˆç³Ÿç³•ï¼Œæœ€åä¸å¾—å·²äº¤äº†ä¸€äº›001è¿™æ ·çš„æ°´æ•°æ®ä¸Šå»</p><h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><p>ä¸ªäººå¹¶æœªåšè¿‡åº¦çš„ä¼˜åŒ–ï¼Œä»…ä»…æ˜¯åœ¨è¾“å‡ºæ—¶ï¼ŒæŒ‡æ•°ä¸º0,1,ç³»æ•°ä¸º0ï¼Œ+-1çš„ç‰¹æ®Šæƒ…å†µç®€åŒ–äº†ä¸€ä¸‹è¾“å‡ºï¼Œçœ‹èµ·æ¥æ›´åŠ èˆ’é€‚ï¼Œè‡³äºè¿‡åº¦çš„å·æ€§èƒ½ï¼Œå·äºŒå€è§’å…¬å¼ã€å’Œå·®åŒ–ç§¯å…¬å¼ç­‰ï¼Œæˆ‘ä¸ªäººå¹¶ä¸æ„Ÿå†’ï¼Œä¹Ÿä¸è§‰å¾—æœ‰å¤šä¹ˆé«˜å¤§å°š</p><h1 id="å¿ƒå¾—ä½“ä¼š"><a href="#å¿ƒå¾—ä½“ä¼š" class="headerlink" title="å¿ƒå¾—ä½“ä¼š"></a>å¿ƒå¾—ä½“ä¼š</h1><ul><li>Unit1è¿˜æ˜¯å‹åŠ›å¾ˆå¤§çš„ï¼Œè‡³å°‘æˆ‘æ˜¯æ„Ÿåˆ°æ¯”è¾ƒåƒåŠ›çš„ï¼Œå°¤å…¶æ˜¯ç¬¬äºŒæ¬¡è¿­ä»£ï¼Œè®©å¤šå°‘æœ‹å‹ä»¬å‘¨äº”åŠå¤œï¼Œå‘¨å…­ç™½å¤©è¿˜åœ¨å¥‹æˆ˜ã€‚å½“ç„¶ï¼Œå¯èƒ½è¯¾ç¨‹ç»„çœ‹æˆ‘ä»¬ä¸Šå­¦æœŸåŸºæœ¬éƒ½å­¦äº†oopreï¼Œæ‰€ä»¥åŠ äº†äº›éš¾åº¦å§ğŸ« </li><li>ç¬¬ä¸€æ¬¡æœ€å¼€å§‹æ„Ÿè§‰æ— ä»ä¸‹æ‰‹ï¼Œåé¢æœæ–­å¼€å§‹å†™ï¼Œè¾¹å†™æ‹œå¹´æ€è€ƒï¼Œåé¢ä¹Ÿå°±æ˜æ‚Ÿäº†ï¼›ä½†æ˜¯ç¬¬äºŒæ¬¡è¿­ä»£æ„Ÿè§‰éš¾åº¦ä¸€ä¸‹ä¸Šå»äº†ï¼Œä¸‰è§’å‡½æ•°çš„å¼•å…¥è®©åˆå¹¶åŒç±»é¡¹å‡ºç°è®¸å¤šéš¾é¢˜ï¼Œé€’å½’å‡½æ•°ä¹Ÿæ˜¯å¾ˆæ£˜æ‰‹çš„ï¼Œæœ€åå¼ºæµ‹ç»“æœä¹Ÿæœ‰ä¸å°‘äººç›´æ¥å¯„æ‰ï¼Œæ¯”å¦‚æˆ‘ï¼›ç„¶åç¬¬ä¸‰æ¬¡è¿­ä»£ï¼Œæ„Ÿè§‰åˆå¤ªå®¹æ˜“äº†ä¸€ç‚¹å„¿ï¼Œä¸‰ä¸‹äº”é™¤äºŒå°±è§£å†³äº†ã€‚æ‰€ä»¥ï¼Œè¿™æ ·çš„éš¾åº¦æ¢¯åº¦è®¾è®¡æ˜¯å¦åˆç†ï¼Œè¿˜æ˜¯å€¼å¾—æ€è€ƒçš„ğŸ¤”</li><li>è¯´å½’è¯´ï¼Œè¿˜æ˜¯å¾ˆæ„Ÿè°¢è¯¾ç¨‹ç»„çš„ï¼Œè¿˜æ˜¯å¾ˆæ„Ÿè°¢Unit1çš„ï¼Œæ— è®ºæ˜¯é€’å½’ä¸‹é™æ³•çš„ç²¾å¦™è¿˜æ˜¯æ¶æ„è®¾è®¡çš„ç»éªŒï¼Œéƒ½è®©æˆ‘å—ç›Šè‰¯å¤šï¼Œä¹Ÿé”»ç‚¼äº†æˆ‘çš„debugèƒ½åŠ›å’ŒæŠ—å‹èƒ½åŠ›ã€‚é€’å½’ä¸‹é™æ³•çš„ç²¾å¦™æˆ–è®¸ç¼–è¯‘åŸç†è¯¾ç¨‹æˆ‘ä»¬è¿˜ä¼šæ„Ÿå—åˆ°</li></ul><h1 id="æ„è§å»ºè®®"><a href="#æ„è§å»ºè®®" class="headerlink" title="æ„è§å»ºè®®"></a>æ„è§å»ºè®®</h1><ul><li>åˆç†è®¾è®¡éš¾åº¦æ¢¯åº¦ï¼Œé¿å…å‡ºç°æŸä¸€æ¬¡è¿­ä»£è¿‡äºå›°éš¾æˆ–è€…è¿‡äºç®€å•çš„æƒ…å†µ</li><li>åˆç†è®¾è®¡äº’æµ‹çš„costé™åˆ¶ï¼Œè®©äº’æµ‹çš„ä½“éªŒèƒ½å¤Ÿæ›´å¥½ä¸€äº›</li></ul><p>UPDATEï¼š20225.3.31<br>æµ‹è¯•ä¸€ä¸‹æ–°å»ºçš„å›¾åºŠæ˜¯å¦æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/pzhwuhu/Image-Hosting/Posts%20insert/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202024-07-12%20145211.png"></p>]]></content>
    
    
    <categories>
      
      <category>OO</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OO</tag>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å›¾è®ºå¤ä¹ </title>
    <link href="/2024/12/22/%E5%9B%BE%E8%AE%BA%E5%A4%8D%E4%B9%A0/"/>
    <url>/2024/12/22/%E5%9B%BE%E8%AE%BA%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>å› ä¸ºåšå®¢æœ¬èº«çš„æ¸²æŸ“å¼•æ“å¯¹äºè®¸å¤šlatexå…¬å¼å¾ˆä¸å‹å¥½ï¼Œæ‰€ä»¥ç´¢æ€§å°†å¯¼å‡ºçš„pdfä¸Šä¼ äº†ï¼Œå¸Œæœ›å¤§å®¶æœ‰æ‰€æ”¶è·<span class="github-emoji" alias="smiley" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8">&#x1f603;</span></p><p>æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œï¼Œä¸€ä¸ªæµ…è‰²ï¼Œä¸€ä¸ªæ·±è‰²ï¼Œä½†æ˜¯æ·±è‰²çš„é‡Œé¢æ’å…¥çš„å›¾ç‰‡è¿˜æ˜¯æµ…è‰²çš„ï¼Œè¿™æ²¡åŠæ³•ï¼Œå°†å°±ä¸‹å§ï¼Œhhh<br><a href="https://pzhwuhu.github.io/Notes/%E5%9B%BE%E8%AE%BA%E5%A4%8D%E4%B9%A0-%E6%B7%B1%E8%89%B2.pdf">æ·±è‰²pdfé“¾æ¥ç‚¹è¿™é‡Œ</a></p><p><a href="https://pzhwuhu.github.io/Notes/%E5%9B%BE%E8%AE%BA%E5%A4%8D%E4%B9%A0-%E6%B5%85%E8%89%B2.pdf">æµ…è‰²pdfé“¾æ¥ç‚¹è¿™é‡Œ</a></p>]]></content>
    
    
    <categories>
      
      <category>ç¦»æ•£</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤ä¹ </tag>
      
      <tag>ç¦»æ•£</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P7è¯¾ä¸‹</title>
    <link href="/2024/12/15/P7%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/12/15/P7%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æ€ä¹ˆä¼šæœ‰è¿™ä¹ˆç¬¨çš„äººå•Šå•Šå•Šå•Šå•Š<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span></p><p>å¼±æµ‹é€šè¿‡åï¼Œdeäº†ä¸€å¤©ä¸­æµ‹bugï¼Œæœ€åä¸­æµ‹é€šè¿‡äº†ï¼Œä½†æ˜¯å¼±æµ‹çš„ä»£ç æ²¡æœ‰æ›´æ–°</p><p>è¿™ä¹Ÿå°±å¯¼è‡´æˆ‘è¯¾ä¸Šç”¨çš„æ˜¯æœ€å¼€å§‹çš„é‚£ç‰ˆä»£ç ï¼Œç”šè‡³è¿å†’é™©æµ‹è¯•éƒ½è¿‡ä¸å»ï¼Œä½†æ­¤æ—¶çš„æˆ‘<strong>æµ‘ç„¶ä¸çŸ¥</strong>ï¼Œä¾ç„¶ç”¨çªçœ¼æ³•debugï¼Œæœ€åé—æ†¾ç¦»åœºï¼Œå›æ¥æµ‹è¯•äº†åŠå¤©ï¼Œæ²¡å•¥é—®é¢˜ï¼Œæ‰¾ä¸å‡ºbugåï¼Œæˆ‘å½»åº•æ…Œäº†ï¼Œåé¢åˆæ‰“å¼€æäº¤è®°å½•ï¼Œæ‰å‘ç°å¼±æµ‹æäº¤é€šè¿‡åå°±æ²¡å†æ›´æ–°äº†,å¯„ï¼<span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span></p><p>ç™½ç™½æµªè´¹æ‰ä¸€æ¬¡ä¸Šæœºæœºä¼šï¼Œç”šè‡³ä¸çŸ¥é“è¯¾ä¸‹åˆ°åº•æœ‰æ— bugï¼Œæ€»å…±æœºä¼šä¹Ÿå°±åªæœ‰ä¸€æ¬¡äº†ï¼Œæ­¤æ—¶çš„æˆ‘ï¼Œå¾ˆéš¾å—ï¼Œå¿ƒé‡Œå¾ˆä¸æ˜¯æ»‹å‘³â€¦â€¦</p><h1 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h1><ul><li>æ‘†äº†æ‘†äº†ï¼Œè´´å‡ ä¸ªéå¸¸ä¼˜ç§€çš„P7åšå®¢ï¼Œå¯¹æˆ‘ä¸ªäººå¯å‘å¾ˆå¤§ï¼Œæˆ‘ä¹ŸåŸºæœ¬æ˜¯å­¦ä¹ çš„ä»–ä»¬çš„<ul><li><a href="https://lazyfish-lc.github.io/2024/11/21/BUAA-CO-P7/">2306 COä¹‹ç¥</a></li><li><a href="https://roife.github.io/posts/buaa-co-lab-p7/">roifeå­¦é•¿</a></li><li><a href="https://flyinglandlord.github.io/2021/12/15/BUAA-CO-2021/P7/P7%E8%AF%BE%E4%B8%8A&%E8%AF%BE%E4%B8%8B/">flyinglandlord</a></li></ul></li></ul><h1 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h1><ul><li>ç¥­ç¥–å¹¶ä¸æ˜¯å…¨éƒ¨ï¼Œåé¢çš„è·¯è¿˜å¾ˆé•¿ï¼Œç»§ç»­åŠ æ²¹å§ï¼Œå°‘å¹´ï¼ğŸ˜€</li></ul>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P6è¯¾ä¸‹</title>
    <link href="/2024/12/02/P6%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/12/02/P6%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P6è¯¾ä¸‹æµ‹è¯•çš„ç›¸å…³å†…å®¹<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><ul><li>emmmâ€¦â€¦ï¼Œæ„Ÿè§‰P6æ¯”è¾ƒå®¹æ˜“ï¼ŒåŠ ä¸€ä¸ªä¹˜æ³•å™¨ï¼Œå†åŠ ä¸€äº›æŒ‡ä»¤å³å¯ï¼Œè¿™é‡Œå°±æ‘†äº†~</li></ul>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P6è¯¾ä¸Š</title>
    <link href="/2024/11/25/P6%E8%AF%BE%E4%B8%8A/"/>
    <url>/2024/11/25/P6%E8%AF%BE%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P6è¯¾ä¸Šæµ‹è¯•çš„ç›¸å…³å†…å®¹<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™æ¬¡P6æŒ‚è¾½<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span></p><p>T1å¡äº†è€åŠå¤©æ‰Aæ‰,ç¡®å®ä¸éš¾ï¼Œä½†æ˜¯ç»†èŠ‚å’Œå°å‘ç‚¹æ¯”è¾ƒå¤šï¼Œè‡ªå·±ä¸€ä¸Šæ¥è¿˜æ˜¯å¤ªå¿ƒæ€¥äº†ï¼Œæ²¡æœ‰æŠŠæ¡å¥½ç»†èŠ‚ã€‚</p><p>æ™ƒäº†ä¸€çœ¼T2ï¼Œæ˜¯è®¿å­˜ï¼ŒæŒ‰ç…§ç»éªŒï¼Œæ¯”è¾ƒéš¾å—ï¼Œæœæ–­åˆ‡T3ï¼Œå¯æƒœçš„æ˜¯ï¼Œâ€œç»éªŒä¸»ä¹‰â€å¹¶ä¸æ€»æ˜¯å¯¹çš„ï¼Œè¿™æ¬¡T2å¾ˆå®¹æ˜“ï¼Œå¡æ—¶é—´å‘¨æœŸçš„åè€Œæ˜¯T3 çš„è·³è½¬ï¼Œè€Œæˆ‘æœ€åä¹Ÿå°±è¾“åœ¨äº†æœ€åä¸€ä¸ªç‚¹çš„TLEçš„ä¸Š</p><p><strong>2024.12.02 Updated</strong></p><p>è¿™æ¬¡T3æå…¶æŠ½è±¡ï¼Œæœ€ååˆšåšå®Œï¼Œå°±äº¤ä¸äº†äº†ï¼Œæœ¬åœ°è¿˜æ²¡æ¥å¾—åŠæµ‹è¯•ï¼Œä¼°è®¡è¿˜å¾—è°ƒä¸€ä¼šå„¿<span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span></p><p>é¡ºä¾¿åæ§½ä¸‹ä»Šå¤©çš„æœºæˆ¿ç”µè„‘å±å¹•æ˜¯19å¯¸çš„ï¼Œ14,40*900ï¼Œè·Ÿå¹³å¸¸æ¯”èµ·æ¥ï¼Œå°å¤ªå¤šäº†ï¼Œä¸è¿‡å…¶å®ä¹Ÿæ²¡å•¥<span class="github-emoji" alias="grinning" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8">&#x1f600;</span></p><h1 id="T1-mpm"><a href="#T1-mpm" class="headerlink" title="T1 mpm"></a>T1 mpm</h1><h2 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p>mpm rd, rs, rt</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs verilog">tmp1 = GRF(rs) + GRF(rt) <br>k = <span class="hljs-number">0</span><br><span class="hljs-keyword">for</span> i in <span class="hljs-number">32</span>â€¦â€¦<span class="hljs-number">0</span><br>tmp2 = <span class="hljs-number">1</span> &lt;&lt; i<br><span class="hljs-keyword">if</span>(tmp2 &gt; tmp1) k = i<br>endfor<br>GRF(rd) = k<br></code></pre></td></tr></table></figure><p>å…¶å®å°±æ˜¯æ±‚æœ€å°çš„å¤§äºtmp1çš„2çš„å¹‚</p><p><strong>å¿½ç•¥åŠ æ³•è¿‡ç¨‹ä¸­çš„æº¢å‡º</strong></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ç›´æ¥å¯¹ç€ç¿»è¯‘å·®ä¸å¤šï¼Œä¸è¿‡å‡ ä¸ªç»†èŠ‚éœ€è¦æ³¨æ„</p><ul><li><strong>tmp2 åº”è¯¥è‡³å°‘ä¸º33ä½</strong>ï¼Œå› ä¸ºtmp1 å¯èƒ½ä¸º0xffff_ffffï¼Œè¿™æ ·éœ€è¦0x1_0000_0000æ‰èƒ½å¤§äºtmp1ï¼Œè¿™ä¸€ç‚¹ä»å¾ªç¯ i in 32â€¦â€¦0ä¹Ÿå¯ä»¥çœ‹å‡º</li><li><strong>RTLè¯­è¨€ä¸­æ˜¯ä»32éå†åˆ°0</strong>ï¼Œè€Œæˆ‘ä»¬å¯èƒ½ä¹ æƒ¯çš„æ˜¯0åˆ°32ï¼Œè¿™æ ·çš„è¯æ— æ³•æ±‚å‡ºâ€œæœ€å°çš„â€ï¼Œå› ä¸ºå½“æ»¡è¶³æ¡ä»¶æ—¶ï¼Œ<strong>ä½ ç¼ºå°‘äº†ä¸€ä¸ªbreak</strong></li></ul><p>æ¯«æ— ç–‘é—®ï¼Œä¸¤ä¸ªå‘æˆ‘éƒ½è¸©äº†ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå‘æˆ‘å¼€å§‹è¿˜æŠŠtmp1ä¹Ÿæ”¹æˆ33ä½çš„äº†ï¼Œ<strong>è¿™æ ·å¯¼è‡´å¿½ç•¥æº¢å‡ºè¿™ä¸€æ“ä½œæ— æ³•å®ç°</strong>ï¼Œå¹¶ä¸”æˆ‘æœ€åæ‰å‘ç°è¿™ä¸ªé—®é¢˜<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span></p><p>è‡³äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¹Ÿå¥½åŠï¼Œå¦‚æœä½ æ˜¯32åˆ°0 çš„éå†ï¼Œé‚£æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œå¦‚æœä½ æ˜¯0åˆ°32 çš„éå†ï¼Œéœ€è¦åœ¨æ»¡è¶³æ¡ä»¶æ—¶ç›´æ¥æŠŠ i èµ‹å€¼ä¸º32å³å¯ï¼Œå› ä¸ºverilogä¸­æ²¡æœ‰breakè¯­å¥</p><h1 id="T1-2"><a href="#T1-2" class="headerlink" title="T1(2)"></a>T1(2)</h1><h2 id="é¢˜é¢-1"><a href="#é¢˜é¢-1" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p>å°±æ˜¯å°†GRF(rs) å¾ªç¯å³ç§»32æ¬¡çš„ç»“æœç›¸åŠ ï¼Œå°†GRF(rt) å¾ªç¯å³ç§»32æ¬¡çš„ç»“æœç›¸åŠ ï¼Œä¸¤è€…æ¯”è¾ƒï¼Œå‰è€…å°äºåè€…å°±èµ‹å€¼rd ä¸º-1ï¼Œ å¤§äºçš„è¯å°±èµ‹å€¼1ï¼Œç›¸ç­‰èµ‹å€¼0</p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>RTLè¯­è¨€æ˜¯è¯´</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog">res = x<br><span class="hljs-keyword">for</span> i from <span class="hljs-number">1</span> to <span class="hljs-number">31</span><br>    res = res + x[i-<span class="hljs-number">1</span>:<span class="hljs-number">0</span>] || x[<span class="hljs-number">31</span>:i]<br>    <br></code></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œä½å®½çš„ä¸­æ‹¬å·ä¸¤è¾¹ä¸èƒ½æœ‰å˜é‡ï¼Œå› æ­¤æ— æ³•ç›´æ¥ç¿»è¯‘RTLè¯­è¨€</p><p>è§£æ³•å¦‚ä¸‹,æœ€åæ¯”è¾ƒtmp3å’Œ4å°±å¥½</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs verilog">tmp1 = inA;<br>tmp2 = inB;<br>tmp3 = inA;<br>tmp4 = inB;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;<span class="hljs-number">32</span>;i=i+<span class="hljs-number">1</span>) <span class="hljs-keyword">begin</span><br>    tmp1 = &#123;tmp1[<span class="hljs-number">0</span>], tmp1[<span class="hljs-number">31</span>:<span class="hljs-number">1</span>]&#125;;<br>    tmp2 = &#123;tmp2[<span class="hljs-number">0</span>], tmp2[<span class="hljs-number">31</span>:<span class="hljs-number">1</span>]&#125;;<br>    tmp3 = tmp1;<br>    tmp4 = tmp2;<br><span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><h1 id="T2"><a href="#T2" class="headerlink" title="T2"></a>T2</h1><h2 id="é¢˜é¢-2"><a href="#é¢˜é¢-2" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p>æ²¡æœ‰è¯¦ç»†çš„RTLè¯­è¨€ï¼Œæˆ‘å°±æè¿°ä¸€ä¸‹å§</p><p>è·Ÿæ­£å¸¸çš„swå·®ä¸å¤šï¼Œä½†æ˜¯ high_1 &#x3D; GRF(rt)ä¸­æœ€é«˜ä½1 çš„ä½ç½®ï¼Œaddr &#x3D; base + offset + high_1 || 00ï¼Œ</p><p>æœ€åMem[addr[31:2] || 00] &#x3D; GRF(rt)ï¼Œå¤§è‡´æ˜¯è¿™æ ·</p><h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ„Ÿè§‰å®ç°èµ·æ¥ä¸éš¾ï¼ŒDMåŠ ä¸€ä¸ªè¾“å…¥ä¿¡å·å³å¯ï¼Œå¯æ‚²çš„æ˜¯æˆ‘å¹¶æ²¡æœ‰åšè¿™é“é¢˜</p><h1 id="T3"><a href="#T3" class="headerlink" title="T3"></a>T3</h1><h2 id="é¢˜é¢-3"><a href="#é¢˜é¢-3" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p>ä¼¼ä¹æ˜¯å«mplï¼Œä¸ç®¡äº†</p><p>å¤§è‡´æ˜¯è¯´</p><p>tmp &#x3D; GRF(rs) + GRF(rt)</p><p>å¦‚æœrs &#x3D;&#x3D; rtï¼Œå°±è·Ÿbeqä¸€æ ·è·³è½¬ï¼Œå¦åˆ™å¦‚æœrs rtå¥‡å¶æ€§ç›¸åŒï¼Œå°±è·³è½¬åˆ° tmp[31:2] || 00ï¼Œå¦‚æœéƒ½ä¸æ»¡è¶³å°±ä¸è·³</p><p><strong>æ— è®ºæ˜¯å¦è·³è½¬éƒ½è¦é“¾æ¥</strong></p><p><strong>æ³¨æ„æ¯”è¾ƒçš„æ˜¯rs  rt æœ¬èº«è¿™ä¸ªç¼–å·ï¼Œè€Œä¸æ˜¯å¯„å­˜å™¨çš„å€¼</strong></p><h2 id="æ€è·¯-3"><a href="#æ€è·¯-3" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ•´ä½“ä¸Šæ­å»ºèµ·æ¥ä¹Ÿä¸ç®—å¤ªéš¾ï¼ŒCMPï¼Œ NPCæ–°å¢ç«¯å£ï¼Œ åŠ ä¸€ç‚¹é€»è¾‘ï¼Œä¸éœ€è¦æ”¹åŸºæœ¬ä¸Šå°±å¯ä»¥å®ç°</p><p>ä½†æ˜¯ï¼Œä½ äº¤ä¸Šå»ï¼Œä¼šå‘ç°ä½ è¿‡äº†9ä¸ªç‚¹ï¼Œå‰©ä¸‹çš„é‚£ä¸ªç‚¹ä¼šå‘Šè¯‰ä½ ï¼Œ<strong>ä½ TLEäº†</strong></p><p>è¯¾ä¸‹æˆ‘åŸºæœ¬å·²ç»å…¨é€Ÿäº†ï¼Œåªç¼ºä¸€ä¸ªluiå¯ä»¥Eåˆ°Dçš„è½¬å‘ï¼Œæ‡’å¾—åŠ äº†ï¼Œåæ¥è¯æ˜ï¼ŒåŠ è¿™ä¸ªè¿˜æ˜¯ä¼šè¢«å¡</p><p>æ‰€ä»¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ<strong>å¦‚æœåªå°†æ–°æŒ‡ä»¤çš„Tuseè®¾ä¸º0ï¼Œå¹¶ä¸”ä¸å¯¹é˜»å¡å•å…ƒåŠ ç‚¹é€»è¾‘ï¼Œé‚£ä¹ˆä¸€å®šä¼šè¢«å¡</strong> <span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span><del>åŠ©æ•™åå</del></p><p>å…·ä½“æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å‘ç°<strong>å¹¶ä¸æ˜¯æ‰€æœ‰æƒ…å†µä¸‹è¿™æ¡æ–°æŒ‡ä»¤éƒ½éœ€è¦ä½¿ç”¨å¯„å­˜å™¨</strong>ï¼Œå½“ä¸”ä»…å½“ rs !&#x3D; rt &amp;&amp; rs[0] &#x3D;&#x3D; rt[0]çš„æƒ…å†µä¸‹æ‰éœ€è¦ä½¿ç”¨å¯„å­˜å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨é˜»å¡å•å…ƒåŠ ä¸€ä¸ªç‰¹åˆ¤,ä¸¾ä¸€ä¸ªä¾‹å­</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">assign</span> freeze_RS0_E2 = NewSign ? (D_A1 != D_A2 &amp;&amp; D_A1[<span class="hljs-number">0</span>] == D_A2[<span class="hljs-number">0</span>]) : åŸæ¥çš„é€»è¾‘<br></code></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><ul><li>å†³ç­–å¤±è¯¯äº†ï¼Œé»˜è®¤T2è®¿å­˜æ¶å¿ƒï¼Œç»“æœåå€’ç®€å•,è¿˜æ˜¯å»ºè®®å¤§å®¶æŠŠ3é“é¢˜éƒ½è¯»ä¸€è¯»ï¼Œæ€è€ƒä¸€ä¸‹ï¼Œå†åšå†³ç­–å§ï¼Œä¸è¦åƒæŸäººä¸€æ ·<span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span></li><li>T1å¤ªè¿‡ç€æ€¥ï¼Œç»†èŠ‚æ²¡æŠŠæ¡å¥½ï¼Œæµªè´¹å¤§é‡æ—¶é—´</li><li>T3å±å®æ²¡æƒ³åˆ°è¿™ä¹ˆå¡æ—¶é—´ï¼Œå› ä¸ºä¹‹å‰éƒ½æ˜¯è®¿å­˜ç±»Wçº§æ‰ç¡®å®šå†™å¯„å­˜å™¨å’Œå†™æ•°æ®ï¼Œæ‰€ä»¥æ— è„‘é˜»å¡2å‘¨æœŸå¡æ—¶é—´ï¼Œè¿™æ¬¡å±å®æ²¡æƒ³åˆ°è¿™ä¹ˆå¡ï¼Œæœ‰ç‚¹é˜´é—´äº†</li></ul><h2 id="ä¸‹æ¬¡åŠ æ²¹å§ğŸ« "><a href="#ä¸‹æ¬¡åŠ æ²¹å§ğŸ« " class="headerlink" title="ä¸‹æ¬¡åŠ æ²¹å§ğŸ« "></a>ä¸‹æ¬¡åŠ æ²¹å§ğŸ« </h2><h2 id="P7åŠ æ²¹-x1f60e"><a href="#P7åŠ æ²¹-x1f60e" class="headerlink" title="P7åŠ æ²¹ &#x1f60e;"></a>P7åŠ æ²¹ <span class="github-emoji" alias="sunglasses" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8">&#x1f60e;</span></h2>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Verilog</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P5è¯¾ä¸Š</title>
    <link href="/2024/11/18/P5%E8%AF%BE%E4%B8%8A/"/>
    <url>/2024/11/18/P5%E8%AF%BE%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P5è¯¾ä¸Šæµ‹è¯•çš„ç›¸å…³å†…å®¹<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>å®¹æˆ‘å…ˆBBå‡ å¥ï¼Œæé™æé™æé™æé™æé™æé™æé™æé™æé™æé™</p><p>ååˆ†ä¾¥å¹¸é€šè¿‡äº†P5è¯¾ä¸Šæµ‹è¯•ï¼Œæ²¡èƒ½åšå®ŒT2ï¼Œç•™ä¸‹äº›è®¸é—æ†¾å§ï¼Œä¸è¿‡ï¼Œå°±åƒjzyå“¥å“¥è¯´çš„é‚£æ ·â€œè¿‡äº†å°±å¥½<span class="github-emoji" alias="grin" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8">&#x1f601;</span>â€ï¼Œè¯¾ä¸Šå‡ºäº†å‡ å¤„çŠ¶å†µï¼Œæ›¾ä¸€åº¦ä»¥ä¸ºè¦å¯„ï¼Œæœ€å¥½ä¾¥å¹¸é€šè¿‡äº†â€¦â€¦è¯¾ä¸ŠçŠ¶å†µç•™åˆ°æœ€åå†è¯´å§ï¼Œå…ˆæ¥çœ‹çœ‹é¢˜ç›®</p><h1 id="å¿…çœ‹"><a href="#å¿…çœ‹" class="headerlink" title="å¿…çœ‹"></a>å¿…çœ‹</h1><div class="note note-danger">            <p>ä¸è¦ç›²ç›®é¡ºåºåšé¢˜ ï¼</p><p>ä¸è¦ç›²ç›®é¡ºåºåšé¢˜ ï¼</p><p>ä¸è¦ç›²ç›®é¡ºåºåšé¢˜ ï¼</p>          </div><p><strong>ä¸€èˆ¬æ¥è¯´ï¼Œä¼˜å…ˆçº§ï¼Œè®¡ç®— &gt; è·³è½¬ &gt; è®¿å­˜</strong></p><h1 id="T1-bmoal"><a href="#T1-bmoal" class="headerlink" title="T1 bmoal"></a>T1 bmoal</h1><h2 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><code>bmoal rs, offset</code></p><p>è‹¥ GRF(rs) ä¸­ 1 çš„ ä¸ªæ•°å¤§äº 0  çš„ä¸ªæ•°ï¼Œå°±å’Œ<code>beq</code>ä¸€æ ·è·³è½¬,å¹¶ä¸” é“¾æ¥ï¼Œä¹Ÿå°±æ˜¯ GRF(31) &lt;- PC + 8ï¼›å¦åˆ™ï¼Œå•¥ä¹Ÿä¸å¹²</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>è¿™æ˜¯ä¸€é“è·³è½¬ç±»çš„é¢˜ï¼Œéœ€è¦ä¿®æ”¹CmpOpä»¥åŠCMPå†…éƒ¨æ¯”è¾ƒé€»è¾‘ï¼ŒControlæ¨¡å—ï¼Œä»¥åŠæµæ°´çº¿å¯„å­˜å™¨</p><p>è‡³äºNPCå¯ä»¥å¤ç”¨beqçš„æ¥å£ï¼Œå› ä¸ºè·³è½¬æ–¹å¼ä¸€æ ·</p><p>å¯¹äºTuseï¼ŒTuse_rsè®¾ä¸º0ï¼ŒTuse_rtè®¾ä¸º3(é»˜è®¤å°±ä¸º3)å°±å¥½äº†ï¼ŒTnewçš„è¯1æˆ–è€…0éƒ½æ²¡å½±å“ï¼Œå…·ä½“è§P5è¯¾ä¸‹</p><p>å› ä¸ºæ˜¯å¦å†™31å·å¯„å­˜å™¨éœ€è¦æ ¹æ®æ¯”è¾ƒç»“æœæ¥åˆ¤æ–­<strong>è€Œæ— æ³•ç›´æ¥ç”±Controlè§£ç å¾—åˆ°</strong>ï¼Œå› æ­¤éœ€è¦å°†æ¯”è¾ƒç»“æœå¾€åä¼ é€’ï¼Œä¹Ÿå°±æ˜¯åŠ å…¥åé¢å„çº§çš„æµæ°´çº¿å¯„å­˜å™¨</p><p><strong>æ‰€ä»¥éœ€è¦åœ¨E M Wçº§å°†æ¯”è¾ƒç»“æœconditionåŠ å…¥åˆ°Controlæ¨¡å—ä¸­ï¼Œå†è¾“å‡ºRegWriteä¿¡å·</strong></p><p>å…·ä½“ä¸€ç‚¹å°±æ˜¯</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">case</span>(opcode)<br>newOp:<br>            <span class="hljs-keyword">begin</span><br>                newSign  = <span class="hljs-number">1&#x27;b1</span>;<br>                CmpOp    = <span class="hljs-number">2&#x27;b11</span>;<br>                AluOp    = <span class="hljs-number">4&#x27;b0101</span>;<span class="hljs-comment">//å’Œè¯¾ä¸‹jalä¸€æ ·</span><br>                A3       = <span class="hljs-number">5&#x27;d31</span>;<br>                Tuse_rs  = <span class="hljs-number">2&#x27;d0</span>;<br>                Tnew     = <span class="hljs-number">2&#x27;d1</span>;<br>                <span class="hljs-keyword">if</span>(condition) <span class="hljs-keyword">begin</span><br>                    RegWrite = <span class="hljs-number">1&#x27;b1</span>;<br>                <span class="hljs-keyword">end</span><br>            <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æ‰€ä»¥ï¼Œ<strong>å»ºè®®æå‰å‡†å¤‡å¥½ç›¸åº”çš„æ¥å£</strong>ï¼Œè¯¾ä¸Šä¸´æ—¶åŠ ä¼šéå¸¸éº»çƒ¦ï¼Œè€Œä¸”ç´§å¼ çš„æ¡ä»¶ä¸‹å¾ˆå¯èƒ½ä¼šå‡ºä¸€äº›å°bugï¼Œæå‰å‡†å¤‡å°†<code>CmpResult</code>æµæ°´è‡³åé¢çš„å¯„å­˜å™¨</p><h1 id="T2-basel"><a href="#T2-basel" class="headerlink" title="T2 basel"></a>T2 basel</h1><h2 id="é¢˜é¢-1"><a href="#é¢˜é¢-1" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p>lc base1, offset(base)</p><p>GRF(base)å’ŒGRF(base1)åˆ†åˆ«ä½œä¸ºåŸºåœ°å€ï¼Œoffsetä¸ºåç§»é‡ï¼Œä»å†…å­˜ä¸­å–å‡ºæ¥ä¸¤ä¸ªæ•°æ®ï¼Œåˆ†åˆ«ä¸ºdata1å’Œdata,å°†ä¸¤è€…çš„ä½äº”ä½ä½œä¸ºå¯„å­˜å™¨ç¼–å·</p><p>if(data1 &gt; data) GRF[data1[4:0]] &lt;- data1</p><p>else    GRF[data[4:0]] &lt;- data</p><p>éœ€è¦<strong>é­”æ”¹DMï¼Œç„¶ååœ¨Wçº§æ‰çŸ¥é“è¦å†™å“ªä¸ªå¯„å­˜å™¨</strong>ï¼Œæ¯”è¾ƒæŠ½è±¡ï¼Œ<strong>æš´åŠ›é˜»å¡å¯èƒ½ä¼šTLE</strong>ï¼Œéœ€è¦ä¼˜åŒ–ä¸€ä¸‹ï¼Œä¸å¤šè¯´äº†ï¼Œæ¯•ç«Ÿè€ƒåœºä¸Šæ²¡æ—¶é—´å•ƒäº†ï¼Œä¹Ÿæ— æ³•ç¡®å®šè‡ªå·±çš„æƒ³æ³•æ˜¯å¦æ­£ç¡®ï¼Œå°±ä¸è¯¯å¯¼å¤§å®¶äº†ã€‚</p><h1 id="T3-ae"><a href="#T3-ae" class="headerlink" title="T3 ae"></a>T3 ae</h1><h2 id="é¢˜é¢-2"><a href="#é¢˜é¢-2" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><code>ae rt, Imm_16</code></p><p><code>temp[15] = Imm[15] ^ Imm[14]</code></p><p>â€¦â€¦</p><p><code>temp[1] = Imm[1] ^ Imm[0]</code></p><p><code>temp[0] = Imm[0] ^ 0</code></p><p><code>GRF[rt]</code> &#x3D; <code>temp[15] || temp[14] || â€¦â€¦ || temp[0]</code> || <code>Imm_16</code></p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ²¡å•¥ç‰¹åˆ«çš„ï¼Œç›´æ¥è¿ç®—å°±è¡Œï¼Œè·Ÿaddå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯AluOpä»¥åŠå…·ä½“çš„è¿ç®—</p><h1 id="è¯¾ä¸Šå‡ºçŠ¶å†µ"><a href="#è¯¾ä¸Šå‡ºçŠ¶å†µ" class="headerlink" title="è¯¾ä¸Šå‡ºçŠ¶å†µ"></a>è¯¾ä¸Šå‡ºçŠ¶å†µ</h1><h2 id="ISEæ— æ³•ä»¿çœŸ"><a href="#ISEæ— æ³•ä»¿çœŸ" class="headerlink" title="ISEæ— æ³•ä»¿çœŸ"></a>ISEæ— æ³•ä»¿çœŸ</h2><ul><li>æŸä¸€æ¬¡ä»¿çœŸåå…³é—­ï¼Œä¿®æ”¹åå†æ¬¡ä»¿çœŸæ—¶å°±æ˜¾ç¤ºä»¿çœŸå·²ç»åœ¨è¿è¡Œï¼Œï¼Œæ— è¯­äº†ï¼Œç›´æ¥æ–°å»ºå·¥ç¨‹å†é‡æ–°å¯¼å…¥äº†</li><li>å®¤å‹è¯´å¯ä»¥ç›´æ¥åœ¨Projectæ ä¸‹Clearup project files</li></ul><h2 id="T3"><a href="#T3" class="headerlink" title="T3"></a>T3</h2><p>é¦–å…ˆä¸å¾—ä¸æ‰¿è®¤ï¼Œæœ¬äººè¯¾ä¸‹ç¡®å®æœ‰ä¸€äº›é—®é¢˜ï¼Œä½†æ˜¯æµ‹è¯•å´æµ‹ä¸å‡ºæ¥ï¼Œå…·ä½“ä¸€ç‚¹å°±æ˜¯ALUæ¨¡å—é‡Œå…¨ç”¨çš„éé˜»å¡èµ‹å€¼ï¼Œéé˜»å¡èµ‹å€¼æ˜¯åœ¨å—ç»“æŸæ—¶å¹¶å‘è¿›è¡Œçš„ï¼Œå¯¹äºç»“æœï¼Œä¼¼ä¹ä¹Ÿæ²¡å•¥é—®é¢˜ï¼Œä½†è¿™ä¹ŸåŸ‹ä¸‹äº†éšæ‚£</p><p>å…·ä½“ä¸€ç‚¹</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">always</span> @(*) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">case</span> (AluOp)<br>            <span class="hljs-number">4&#x27;b0000</span>: <span class="hljs-keyword">begin</span><br>                result &lt;= inA + inB;<br>            <span class="hljs-keyword">end</span> <br></code></pre></td></tr></table></figure><p>å¯¹äºæ–°æŒ‡ä»¤ï¼Œ<strong>æˆ‘å´é‡‡ç”¨çš„æ˜¯é˜»å¡èµ‹å€¼</strong>ï¼Œå…·ä½“å¦‚ä¸‹</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">always</span> @(*) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">case</span> (AluOp)<br>            <span class="hljs-number">4&#x27;b0000</span>: <span class="hljs-keyword">begin</span><br>                result &lt;= inA + inB;<br>            <span class="hljs-keyword">end</span><br>            <br>            newOp  : <span class="hljs-keyword">begin</span><br>            tmp1 = inB[<span class="hljs-number">15</span>:<span class="hljs-number">0</span>];<br>            tmp2 = <span class="hljs-number">16&#x27;b0</span>;<br>                <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>;i &lt; <span class="hljs-number">16</span>;i = i + <span class="hljs-number">1</span>) <span class="hljs-keyword">begin</span><br>                    tmp2[i] = tmp1[i] ^ tmp1[i-<span class="hljs-number">1</span>];<br>            <span class="hljs-keyword">end</span><br>                tmp2[<span class="hljs-number">0</span>] = tmp1[<span class="hljs-number">0</span>] ^ <span class="hljs-number">0</span>;<br>                result  = &#123;tmp2, tmp1&#125;;<br>            <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·ï¼Œæˆ‘æ¯æ¬¡æ‰§è¡Œæ–°æŒ‡ä»¤ï¼Œ<strong>resultä¼šè¾“å‡ºå‰ä¸€æ¡æŒ‡ä»¤çš„result</strong>ï¼Œæ— è®ºæˆ‘åæ¥æ€ä¹ˆæ”¹ï¼Œéƒ½æ˜¯è¿™æ ·ï¼ŒæœŸé—´è¿›è¡Œäº†æ— æ•°æ”¹é€ ï¼Œæ— æ•°æµ‹è¯•ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºæŠŠtmp1, tmp2æ•´æˆ32ä½çš„ï¼Œå†æˆ–ä¸€ä¸‹ï¼Œèµ‹ç»™resultï¼Œä½†è¿˜æ˜¯ä¸å¯¹ï¼Œä½†æ˜¯tmp1. tmp2å„è‡ªåˆ†åˆ«æ˜¯å¯¹çš„ï¼Œè¿™æˆ‘å°±æ¼ç«äº†ï¼Œåˆå‚»çœ‹äº†åŠå¤©ï¼Œæœ€ååˆæ•´äº†ä¸€ä¸ªtmp3,å…ˆtmp3 &#x3D; tmp1 | tmp2,å†result &#x3D; tmp3;å¯æƒœï¼Œtmp3åœ¨æ³¢å½¢å›¾é‡Œå¯¹äº†ï¼Œä½†æ˜¯resultè¿˜æ˜¯ä¹‹å‰é‚£æ¡æŒ‡ä»¤çš„å€¼ã€‚</p><p>è¿™æ—¶å€™å·²ç»å¿«åˆ°å…«ç‚¹äº†ï¼Œå¯æˆ‘è¿˜åœ¨åšæœ€ç®€å•çš„è®¡ç®—é¢˜ï¼Œå‡ ä¹å¿«è¦å´©æºƒæ—¶ï¼Œæˆ‘æ³¨æ„åˆ°äº† <code>=</code> å’Œ <code>&lt;=</code>,è¿™é‡Œåº”è¯¥é˜»å¡èµ‹å€¼å•Šï¼Œä½†æˆ‘å‰é¢éƒ½ç”¨çš„éé˜»å¡èµ‹å€¼ï¼Œä¹Ÿæ²¡é”™å•Šï¼ŒåŠä¿¡åŠç–‘ä¸­ï¼Œæˆ‘æŠŠæœ€åä¸€å¥æ”¹ä¸º</p><p>result &lt;&#x3D; tmp3;</p><p>ä¸€ä»¿çœŸï¼Œå¯¹äº†ï¼Œè‰¹ï¼Œè‡³äºä½ é—®æˆ‘ä¸ºä»€ä¹ˆæœ€åä¸€å¥æ”¹æˆéé˜»å¡èµ‹å€¼å°±å¯¹äº†ï¼Œæˆ‘åªèƒ½è¯´ï¼šç»å…¸<code>verilog</code>æŠ½è±¡æ—¥å¸¸ï¼Œä¸è¿‡<strong>æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯å…¨éƒ¨ç”¨é˜»å¡èµ‹å€¼</strong>ï¼Œä½†è¯¾ä¸Šä¹Ÿæ²¡æ—¶é—´ç»†æƒ³äº†<span class="github-emoji" alias="thinking" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f914.png?v8">&#x1f914;</span>ã€‚</p><p>åˆ°å¤´æ¥è¿˜æ˜¯è¯¾ä¸‹ç•™ä¸‹çš„éšæ‚£<span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span>å”‰å”‰ï¼Œè€Œä¸”æ˜¯æµ‹ä¸å‡ºæ¥çš„é‚£ç§ï¼Œè‡³äºä¸ºä»€ä¹ˆè¿™é‡Œä¼šå†™éé˜»å¡èµ‹å€¼å‘¢ï¼Ÿæˆ‘ç›´æ¥copyçš„P4çš„ALUï¼Œå½“æ—¶ä¸ºä»€ä¹ˆéé˜»å¡å‘¢ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå¯èƒ½å°±ä¸€æ—¶æ•²é”™äº†ã€‚ã€‚ï¼ˆè¯è¯´æˆ‘P4è¯¾ä¸Šå’‹æ²¡æœ‰è¿™ä¸ªé—®é¢˜<span class="github-emoji" alias="thinking" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f914.png?v8">&#x1f914;</span>æŠ½è±¡bugï¼ŒæŠ½è±¡verilogï¼ŒæŠ½è±¡ISE<span class="github-emoji" alias="innocent" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f607.png?v8">&#x1f607;</span>ï¼‰</p><h2 id="T1"><a href="#T1" class="headerlink" title="T1"></a>T1</h2><p>åˆšæ•´å®ŒT3,å·²ç»å…«ç‚¹å¤šäº†ï¼Œå›å¤´æ¥è§£T1ï¼Œæ˜¯æ¡ä»¶è·³è½¬ï¼Œä¸”æ¡ä»¶é“¾æ¥ï¼Œæˆ‘æå‰å‡†å¤‡äº†ç›¸å…³æ¥å£ï¼Œç›´æ¥è¿ä¸Šï¼Œè°ƒäº†ä¸€ä¼šå„¿ä¹‹åï¼Œæœ¬åœ°æµ‹è¯•æ²¡é—®é¢˜äº†ï¼Œæ­¤æ—¶æ˜¯20:33ï¼Œæˆ‘äº¤ä¸Šå»äº†ï¼Œæ­£å½“æˆ‘å–äº†å£æ°´å‡†å¤‡äº¤å·æ—¶ï¼Œå‡ºç°äº†ä¸€ä¸ªçº¢è‰²çš„<code>Wrong Answer</code>ï¼Œæˆ‘ä¸€ç‚¹å¼€ï¼Œå‘ç°10 ä¸ªç‚¹è¿‡äº†8ä¸ªï¼Œè¿˜æœ‰ä¸¤ä¸ªåœ¨è¯¥è·³è½¬çš„åœ°æ–¹å¹¶æ²¡æœ‰è·³è½¬ï¼Œè¿™ä¸‹éº»çƒ¦äº†ï¼Œå› ä¸º10ä¸ªç‚¹è¿‡äº†8ä¸ªï¼Œè¯´æ˜ä½ çš„ä»£ç åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ²¡é—®é¢˜ï¼Œè¿™å°±è¯´æ˜ä½ å¾ˆéš¾è‡ªå·±æ„é€ æ•°æ®å¡å‡ºbugï¼Œåªèƒ½çªçœ¼çœ‹ä»£ç debugäº†ï¼Œæˆ‘æ˜¯è¿™æ ·çš„<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span></p><p>äºæ˜¯å›å¤´æ£€æŸ¥æˆ‘çš„ä»£ç ï¼Œæˆ‘çš„Cmpä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> D_CMP(<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] data1,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] data2,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">1</span>:<span class="hljs-number">0</span>] CmpOp,<br>    <span class="hljs-keyword">output</span> <span class="hljs-keyword">reg</span> out<br>    );<br>    <span class="hljs-keyword">reg</span> [<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] num1;<br>    <span class="hljs-keyword">integer</span> i;<br>    <span class="hljs-keyword">always</span> @(*) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">if</span> (CmpOp == <span class="hljs-number">2&#x27;b00</span>) <span class="hljs-keyword">begin</span><br>            out = (data1 == data2);<br>        <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CmpOp == <span class="hljs-number">2&#x27;b01</span>) <span class="hljs-keyword">begin</span><br>            out = (data1 != data2);<br>        <span class="hljs-keyword">end</span> <br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CmpOp == <span class="hljs-number">2&#x27;b10</span>) <span class="hljs-keyword">begin</span><br>            num1 = <span class="hljs-number">5&#x27;d0</span>;<br>            <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">32</span>;i=i+<span class="hljs-number">1</span>) <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">if</span>(data1[i]) num1 = num1 + <span class="hljs-number">5&#x27;d1</span>;<br>            <span class="hljs-keyword">end</span><br>            out = (num1 &gt; <span class="hljs-number">5&#x27;d16</span>) ? <span class="hljs-number">1&#x27;b1</span> : <span class="hljs-number">1&#x27;b0</span>;<br>        <span class="hljs-keyword">end</span> <br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>            out = <span class="hljs-number">1&#x27;b0</span>;<br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br> <br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><p>çœ‹äº†ä¸€ä¼šå„¿ï¼Œå‘ç°num1å¯èƒ½ä¸º32å•Šï¼Œ5ä½åªèƒ½è¡¨ç¤º0~31å•Šï¼Œè‰¹ï¼Œäºæ˜¯æŠŠæ‰€æœ‰çš„5ä½éƒ½æ”¹æˆ6ä½äº†ï¼Œè¿™ä¸‹çªƒå–œäº†ï¼Œä»¥ä¸ºå¯ä»¥èµ°äº†ï¼Œç»“æœäº¤ä¸Šå»ï¼Œè¿˜æ˜¯WAï¼Œæ­¤æ—¶å·²ç»å¿«20:45äº†ï¼Œè¯´å®è¯ï¼Œå¿ƒé‡ŒçœŸæ€¥äº†<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span>ä½†è¿™é¢˜ä¹Ÿä¸éš¾å•Š<span class="github-emoji" alias="broken_heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f494.png?v8">&#x1f494;</span>äºæ˜¯æˆ‘åå¤å¯¹ç…§RTTLè¯­è¨€ï¼Œåšäº†å¦‚ä¸‹ä¿®æ”¹ï¼Œäº¤ä¸Šå»Aäº†</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">reg</span> [<span class="hljs-number">4</span>:<span class="hljs-number">0</span>] num1, num0;<br><span class="hljs-keyword">integer</span> i;<br><br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (CmpOp == <span class="hljs-number">2&#x27;b10</span>) <span class="hljs-keyword">begin</span><br>            num1 = <span class="hljs-number">6&#x27;d0</span>;<br>        num0 = <span class="hljs-number">6&#x27;d0</span>;<br>            <span class="hljs-keyword">for</span>(i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">32</span>;i=i+<span class="hljs-number">1</span>) <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">if</span>(data1[i]) num1 = num1 + <span class="hljs-number">6&#x27;d1</span>;<br>            <span class="hljs-keyword">end</span><br>      <span class="hljs-comment">//out = (num1 &gt; 6&#x27;d16) ? 1&#x27;b1 : 1&#x27;b0;</span><br>    num0 = <span class="hljs-number">6&#x27;d32</span> - num1;<br>    out = (num1 &gt; num0) ? <span class="hljs-number">1&#x27;b1</span> : <span class="hljs-number">1&#x27;b0</span>;<br>        <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>æ³¨é‡Šæ‰çš„æ˜¯ä¹‹å‰çš„å†™æ³•ï¼Œæ”¹ä¹‹åäº¤ä¸Šå»Aäº†ï¼Œ<strong>æˆ‘è¶£ï¼Œå¤©ä¸äº¡æˆ‘å•Š</strong>  <span class="github-emoji" alias="grin" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8">&#x1f601;</span></p><p>å›æ¥å’Œä¸¤ä¸ªå®¤å‹è®¨è®ºï¼Œæµ‹è¯•äº†åŠå¤©ï¼Œä¹Ÿä¸çŸ¥é“å“ªæœ‰é—®é¢˜ï¼Œå®¤å‹è¯´æˆ‘å¯èƒ½å†™çš„æ˜¯num1 &gt; 5â€™d16ï¼Œ16è¿™é‡Œå¿˜è®°æ”¹äº†ï¼Œä½†æ˜¯æˆ‘ä»¬æµ‹è¯•å‘ç°ï¼Œå†™5â€˜d16é—®é¢˜ä¹Ÿä¸å¤§ï¼Œverilogæ¯”è¾ƒæ—¶ä¼šæŠŠ6â€™ &gt; 5â€™è¿™æ ·çš„æ¯”è¾ƒå¼å³è¾¹æ‰©å±•</p><p>chatgptä½œå¦‚ä¸‹å›ç­”ï¼š</p><p><img src="/../img_post/p5_3.png"></p><p>æ ‡å‡†å¦‚ä¸‹ï¼š</p><p><img src="/../img_post/p5_1.png"></p><p>æœ€åä¹Ÿæ²¡ææ‡‚å“ªå‡ºé—®é¢˜äº†ï¼Œï¼Œå“ï¼Œ<code>verilog</code>å°±è¿™æ ·ï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œè®©äººæ‘¸ä¸ç€å¤´è„‘ï¼Œå†æ¯”å¦‚æå…¶æŠ½è±¡çš„ç¬¦å·æ³•åˆ™ç­‰ç­‰ï¼Œæ­é…ä¸Šä½¿ç”¨èˆ’é€‚åº¦å‡ ä¹ä¸º0çš„ISEï¼Œä¸€ä¸ªå­—ï¼Œç»ï¼</p><p>ä¸å¤šè¯´äº†ï¼Œè¯´åˆ°åº•è¿˜æ˜¯è‡ªèº«èƒ½åŠ›æœ‰æ¬ ç¼ºï¼Œæ¥ä¸‹æ¥å°±æ˜¯P6äº†ï¼ŒåŠ æ²¹å§<span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span></p>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Verilog</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P5è¯¾ä¸‹</title>
    <link href="/2024/11/18/P5%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/11/18/P5%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>P5çš„å·¥ç¨‹é‡çœŸçš„å¾ˆå¤§ï¼Œ<strong>å»ºè®®ä¸è¦ç›²ç›®å¼€å§‹</strong>ï¼Œä¸Šæ¥å°±æ•²ä»£ç ï¼Œè€Œæ˜¯å…ˆè§„åˆ’å¥½è‡ªå·±çš„è®¾è®¡ï¼Œç¡®å®šæ¶æ„ï¼Œå‘½åè§„èŒƒï¼Œè¿™æ ·æ­å»ºèµ·æ¥å°±å®¹æ˜“å¤šäº†ï¼Œåœ¨å¼€å§‹P5ä¹‹å‰ï¼Œä½ å¾—å®Œæˆä»¥ä¸‹å·¥ä½œ</p><ul><li>é˜…è¯»å®ŒP5æ•™ç¨‹</li><li>é˜…è¯»ç†è§£å®Œç›¸åº”çš„æµæ°´çº¿CPUè®¾è®¡çš„PPTæˆ–è€…é»‘ä¹¦çš„ç›¸å…³ç« èŠ‚</li><li>å¤šçœ‹å‡ ä½å­¦é•¿çš„åšå®¢ï¼Œç¡®å®šå¥½è‡ªå·±çš„æ¶æ„</li><li>å®Œæˆè‰å›¾è®¾è®¡ï¼Œæˆ–è€…ç›´æ¥ç”¨åˆ«äººçš„æˆ–è€…ä¹¦ä¸Šçš„ï¼Œä½†ä¸€å®šè¦æ¸…æ¥šè‡ªå·±çš„æ•´ä½“è®¾è®¡</li></ul><div class="note note-danger">            <ul><li>å¯èƒ½è€å¸ˆPPTä¸Šçš„è®¾è®¡å›¾å¹¶ä¸å®Œæ•´ï¼Œæ²¡æœ‰å¿…è¦çš„è½¬å‘çº¿è·¯ï¼Œ<strong>è‡ªå·±æ³¨æ„è¾¨åˆ«</strong></li><li>å¦‚æœä½ æ‡’å¾—è‡ªå·±è®¾è®¡æˆ–è€…æ‰¾æ­£ç¡®çš„è®¾è®¡å›¾ï¼Œä¸‹é¢è¿™ä»½æˆ‘è‡ªå·±çš„è®¾è®¡å›¾æˆ–è®¸èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©</li><li>åœ¨é˜…è¯»ä¸‹æ–‡ä¹‹å‰ï¼Œä½ å¾—è‡³å°‘å®Œæˆä¸Šæ–‡æåˆ°çš„å¿…å¤‡å·¥ä½œçš„å‰ä¸¤ç‚¹</li></ul>          </div><h1 id="è®¾è®¡è¦ç‚¹"><a href="#è®¾è®¡è¦ç‚¹" class="headerlink" title="è®¾è®¡è¦ç‚¹"></a>è®¾è®¡è¦ç‚¹</h1><p>ä¸‹é¢æ˜¯æˆ‘ç”¨<code>logisim</code>è®¾è®¡çš„ä¸€ä»½æ¶æ„è‰å›¾ï¼Œç›´æ¥åœ¨P3ä¸Šé¢æ”¹çš„ï¼Œæ²¡é‚£ä¹ˆç¾è§‚ï¼Œæœ‰äº›ç»†èŠ‚ä¹Ÿæ²¡æœ‰ï¼Œå¤§å®¶çœ‹æ¸…æ¥šç»“æ„å’Œé€»è¾‘å°±å¥½</p><p><strong>æˆ‘çš„è®¾è®¡æ˜¯åˆ†å¸ƒå¼è¯‘ç ï¼Œä½†æ˜¯éœ€è¦å°†Dçº§äº§ç”Ÿçš„Tnewä¿¡å·æµæ°´è‡³E Mçº§</strong>ï¼Œ<strong>é€šè¿‡ATæ³•åˆ¤æ–­å†²çª</strong></p><p><strong><img src="/../img_post/p5_2.png"></strong></p><p>åœ¨P5æˆ‘ä»¬å°†æŒ‡ä»¤çš„æ‰§è¡Œåˆ†ä¸ºäº†äº”ä¸ªé˜¶æ®µ</p><ul><li>Fçº§å–æŒ‡ä»¤</li><li>Dçº§å–å¯„å­˜å™¨çš„å€¼ï¼Œè¿›è¡Œè·³è½¬åˆ¤æ–­ï¼Œå¹¶ä¸”æ ¹æ®åˆ¤æ–­ç»“æœå†³å®šNPC</li><li>Eçº§è¿›è¡ŒALUè¿ç®—</li><li>Mçº§å¯¹DMè¿›è¡Œå­˜å–</li><li>Wçº§å†™å¯„å­˜å™¨</li></ul><p><strong>æ¯ä¸ªé˜¶æ®µçš„ä¸€äº›çŠ¶æ€ä¿¡æ¯å’Œæ•°æ®éƒ½é€šè¿‡æµæ°´çº¿å¯„å­˜å™¨ä¼ é€’ç»™ä¸‹ä¸€ä¸ªé˜¶æ®µ</strong>ï¼Œä»è€Œç»§ç»­æ‰§è¡Œè¯¥æŒ‡ä»¤</p><p>é‚£ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨Wçº§æ‰èƒ½å†™å…¥å¯„å­˜å™¨ï¼Œä½†æ­¤æ—¶åœ¨D E Mçº§çš„æŒ‡ä»¤åˆéœ€è¦å¯„å­˜å™¨çš„å€¼æ¥è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œå¦‚æœæ˜¯åŒä¸€ä¸ªå¯„å­˜å™¨ï¼Œé‚£ä¹ˆå°±å‘ç”Ÿäº†æ•°æ®å†²çªï¼Œæ€ä¹ˆè§£å†³å‘¢ï¼Ÿ<strong>å°±æ˜¯é‡‡ç”¨è½¬å‘æˆ–è€…é˜»å¡</strong></p><h2 id="è½¬å‘"><a href="#è½¬å‘" class="headerlink" title="è½¬å‘"></a>è½¬å‘</h2><p>è¯•æƒ³ä¸€ä¸‹ä¸‹é¢è¿™ä¸€æ®µä»£ç </p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog">add $<span class="hljs-number">4</span>, $<span class="hljs-number">2</span>, $<span class="hljs-number">3</span><br>lw $<span class="hljs-number">5</span>, <span class="hljs-number">0</span>($<span class="hljs-number">4</span>)<br>sw $<span class="hljs-number">5</span>, <span class="hljs-number">0</span>($<span class="hljs-number">6</span>)<br>add $<span class="hljs-number">6</span>, $<span class="hljs-number">5</span>, $<span class="hljs-number">0</span><br></code></pre></td></tr></table></figure><p>lw åœ¨Dçº§æ—¶ä»GRFä¸­å–å‡º4å·å¯„å­˜å™¨çš„å€¼ï¼Œä½†æ˜¯è¿™æ—¶å€™addæŒ‡ä»¤åœ¨Eçº§ï¼Œ4å·å¯„å­˜å™¨çš„å€¼è¿˜æœªæ›´æ–°ï¼Œæˆ‘ä»¬å–åˆ°çš„å¹¶ä¸æ˜¯ä¸€ä¸ªæ­£ç¡®çš„å¯„å­˜å™¨çš„å€¼ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬ä¸å¦¨æƒ³æƒ³ï¼Œå¯¹äºlwæŒ‡ä»¤ï¼Œæˆ‘ä»¬åœ¨Dçº§çœŸçš„éœ€è¦4å·å¯„å­˜å™¨çš„æ­£ç¡®å€¼å—ï¼Ÿå¹¶ä¸éœ€è¦ï¼Œå› ä¸ºåœ¨Eçº§<code>lw</code>æŒ‡ä»¤æ‰ä¼šå‚ä¸è¿ç®—ï¼Œæ‰€ä»¥æˆ‘ä»¬<strong>çœŸæ­£éœ€è¦4å·å¯„å­˜å™¨çš„å€¼æ˜¯åœ¨Eçº§</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Tnew_rs</code> &#x3D; 1,æ­¤æ—¶addæŒ‡ä»¤åœ¨Mçº§ï¼Œè™½ç„¶æ­¤æ—¶æˆ‘ä»¬lwæŒ‡ä»¤å¾—åˆ°çš„å€¼å¹¶éæ­£ç¡®ï¼Œä½†çœŸæ­£æ­£ç¡®çš„å€¼å·²ç»äº§ç”Ÿäº†ï¼Œå°±åœ¨<code>AluOut</code>é‡Œé¢ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬å°†Mçº§<code>AluOut</code>çš„å€¼ç»™ALUçš„ç¬¬ä¸€ä¸ªè¾“å…¥inA,è¿™æ ·inAçš„å€¼å°±<strong>å¾—åˆ°äº†çŸ«æ­£</strong></p><p>ä¸Šé¢å°±æ˜¯è½¬å‘çš„åˆ†æè¿‡ç¨‹ï¼Œè¿™ç»„æ•°æ®è¿˜æœ‰ä¸å°‘å…¶ä»–çš„è½¬å‘æƒ…å†µï¼Œè¯·è‡ªè¡Œåˆ†ææ¸…æ¥š</p><p>åŒæ—¶ï¼Œç”±äºbeqæŒ‡ä»¤çš„åˆ¤æ–­åœ¨Dçº§ï¼Œæˆ‘ä»¬æ­¤æ—¶å¿…é¡»è¦å¾—åˆ°æ­£ç¡®çš„å¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿå°±æ˜¯<code>Tuse</code>ä¸º0</p><p>æ€»çš„æ¥çœ‹ï¼Œè½¬å‘çº¿è·¯è‡³å°‘è¦æœ‰è¿™ä¹ˆå‡ æ¡</p><p><em>Måˆ°Dï¼ŒWåˆ°D, Måˆ°Eï¼ŒWåˆ°Eï¼ŒWåˆ°M</em>(<strong>æœ‰è€å¸ˆçš„PPTé‡Œæ²¡æœ‰è¿™ä¸ªçº¿è·¯</strong>)</p><p>Wåˆ°Då…¶å®å°±æ˜¯æ‰€è°“çš„å†…éƒ¨è½¬å‘ï¼Œä½†å…¶å®æŠŠGRFçœ‹æˆä¸¤ä¸ªéƒ¨ä»¶çš„è¯ï¼Œä¹Ÿå°±æ²¡æœ‰å†…éƒ¨è½¬å‘è¿™ä¸€è¯´äº†</p><h2 id="é˜»å¡"><a href="#é˜»å¡" class="headerlink" title="é˜»å¡"></a>é˜»å¡</h2><p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¦å¾—åˆ°æ­£ç¡®å¯„å­˜å™¨çš„å€¼çš„æ—¶å€™ï¼Œè¿™ä¸ªå€¼å·²ç»äº§ç”Ÿäº†ï¼Œå°±åœ¨æŸä¸ªæµæ°´çº¿å¯„å­˜å™¨é‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è½¬å‘ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªå€¼æ²¡æœ‰äº§ç”Ÿå‘¢ï¼Ÿ</p><p>æ¯”å¦‚è¯´<code>add</code>åé¢è·Ÿä¸€ä¸ª<code>beq</code>æŒ‡ä»¤ï¼Œ<code>beq</code>åœ¨Dçº§å°±éœ€è¦å¾—åˆ°æ­£ç¡®å¯„å­˜å™¨çš„å€¼ï¼Œä½†æ­¤æ—¶Eçº§çš„addè¿˜æ²¡æœ‰æ­£ç¡®çš„å€¼ï¼ˆè¯¾ç¨‹ç»„è¦æ±‚å¿…é¡»ä»æµæ°´çº¿å¯„å­˜å™¨åé¢è½¬å‘ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥Eçº§ALUçš„ç»“æœï¼‰</p><p>å¾ˆé—æ†¾ï¼Œæˆ‘ä»¬è¿™æ—¶å€™åªèƒ½å¤Ÿæš‚åœåé¢çš„æµæ°´çº¿ï¼Œç›´åˆ°æ­£ç¡®çš„å¯„å­˜å™¨çš„å€¼äº§ç”Ÿï¼Œè¿™å°±æ˜¯é˜»å¡</p><p>å…·ä½“çš„è¯´ï¼Œæˆ‘ä»¬åªéœ€è¦å°†DEçº§æµæ°´çº¿å¯„å­˜å™¨çš„æŒ‡ä»¤è®¾ä¸º0ï¼ŒåŒæ—¶ä¿æŒIFUé‡Œçš„PCä¸å˜ï¼ŒFçº§çš„æŒ‡ä»¤ä¸å˜ï¼ŒFDæµæ°´çº¿å¯„å­˜å™¨ä¸å˜ï¼Œè¿™æ ·ç­‰æ•ˆäºåœ¨<code>add</code>å’Œ<code>beq</code>ä¹‹é—´æ’å…¥äº†ä¸€ä¸ª<code>nop</code>æŒ‡ä»¤ï¼Œé˜»å¡ä¹‹åMçº§å°±å¯ä»¥å‘Dçº§è½¬å‘æ­£ç¡®çš„æ•°æ®äº†</p><h2 id="ç»¼åˆ"><a href="#ç»¼åˆ" class="headerlink" title="ç»¼åˆ"></a>ç»¼åˆ</h2><h3 id="Tä¿¡å·"><a href="#Tä¿¡å·" class="headerlink" title="Tä¿¡å·"></a>Tä¿¡å·</h3><ul><li><code>Tuse</code>ï¼šæŒ‡ä»¤è¿›å…¥ <strong>D çº§</strong>åï¼Œå…¶åçš„æŸä¸ªåŠŸèƒ½éƒ¨ä»¶<strong>å†</strong>ç»è¿‡å¤šå°‘æ—¶é’Ÿå‘¨æœŸå°±<strong>å¿…é¡»</strong>è¦ä½¿ç”¨å¯„å­˜å™¨å€¼ã€‚å¯¹äºæœ‰ä¸¤ä¸ªæ“ä½œæ•°çš„æŒ‡ä»¤ï¼Œå…¶<strong>æ¯ä¸ªæ“ä½œæ•°çš„ Tuse å€¼å¯èƒ½ä¸ç­‰</strong>ï¼ˆå¦‚ store å‹æŒ‡ä»¤ rsã€rt çš„ Tuse åˆ†åˆ«ä¸º 1 å’Œ 2 ï¼‰ã€‚</li><li>Tnewï¼šä½äº <strong>E çº§åŠå…¶åå„çº§</strong>çš„æŒ‡ä»¤ï¼Œå†ç»è¿‡å¤šå°‘å‘¨æœŸå°±èƒ½å¤Ÿ<strong>äº§ç”Ÿè¦å†™å…¥å¯„å­˜å™¨çš„ç»“æœ</strong>ã€‚åœ¨æˆ‘ä»¬ç›®å‰çš„ CPU ä¸­ï¼ŒW çº§çš„æŒ‡ä»¤Tnew æ’ä¸º 0ï¼›å¯¹äºåŒä¸€æ¡æŒ‡ä»¤ï¼ŒTnew_next &#x3D; max(Tnew_now - 1, 0),æœ¬è¡¨æ ¼ä¸­æˆ‘ä»¬åˆ†æDçº§çš„Tnew,å¹¶è®©Tnewéšç€æµæ°´çº¿ä¼ é€’å¹¶é€’å‡,xè¡¨ç¤ºä¸éœ€è¦ä½¿ç”¨å¯„å­˜å™¨ï¼Œä»£ç ä¸­è®¾ç½®ä¸º3å³å¯</li></ul><table><thead><tr><th>æŒ‡ä»¤åˆ†ç±»</th><th><code>Tuse_rs</code></th><th><code>Tuse_rt</code></th><th><code>Tnew</code></th></tr></thead><tbody><tr><td>calc_R</td><td>1</td><td>1</td><td>2</td></tr><tr><td>calc_I</td><td>1</td><td>x</td><td>2</td></tr><tr><td>load</td><td>1</td><td>x</td><td>3</td></tr><tr><td>store</td><td>1</td><td>2</td><td>0</td></tr><tr><td>branch</td><td>0</td><td>0</td><td>0</td></tr><tr><td>Jal</td><td>x</td><td>x</td><td>2</td></tr><tr><td>Jr</td><td>0</td><td>x</td><td>0</td></tr></tbody></table><h3 id="å†²çªæ§åˆ¶å•å…ƒCU"><a href="#å†²çªæ§åˆ¶å•å…ƒCU" class="headerlink" title="å†²çªæ§åˆ¶å•å…ƒCU"></a>å†²çªæ§åˆ¶å•å…ƒCU</h3><p>Tuse &lt; Tnewæ—¶å¿…é¡»è¦é˜»å¡<code>Freeze</code>ï¼ŒTuse&gt;Tnewæ—¶è½¬å‘<code>Forward</code>å³å¯</p><table><thead><tr><th><code>Tuse</code>&#x2F;<code>Tnew</code></th><th><code>Tnew_E</code></th><th><code>Tnew_E</code></th><th><code>Tnew_E</code></th><th><code>Tnew_M</code></th><th><code>Tnew_M</code></th><th><code>Tnew_W</code></th></tr></thead><tbody><tr><td><code>Tuse</code></td><td><code>2</code></td><td><code>1</code></td><td><code>0</code></td><td><code>1</code></td><td><code>0</code></td><td><code>0</code></td></tr><tr><td><code>0</code></td><td>Freeze</td><td>Freeze</td><td>Forward</td><td>Freeze</td><td>Forward</td><td>Forward</td></tr><tr><td><code>1</code></td><td>Freeze</td><td>Forward</td><td>Forward</td><td>Forward</td><td>Forward</td><td>Forward</td></tr><tr><td><code>2</code></td><td>Forward</td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>å› æ­¤æˆ‘ä»¬éœ€è¦è®¾ç½®å¥½æ¯æ¡æŒ‡ä»¤çš„<code>Tnew</code>å’Œ<code>Tuse</code>ï¼Œå†æ ¹æ®<code>RegWrite</code>ç­‰ä¿¡å·ä»¥åŠå¯„å­˜å™¨ç¼–å·æ˜¯å¦ç›¸ç­‰æ¥åˆ¤æ–­è½¬å‘æˆ–è€…é˜»å¡é€»è¾‘,å½“<code>Tnew</code> &gt; <code>Tuse</code>çš„æ—¶å€™æˆ‘ä»¬å°±å¿…é¡»è¦é˜»å¡äº†</p><p><strong>åŒæ—¶å¿…é¡»å¯¹0å·å¯„å­˜å™¨è¿›è¡Œåˆ¤æ–­</strong>ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•å¯¹0å·å¯„å­˜å™¨è¿›è¡Œå†™å…¥</p><p>ä¸‹é¢æ”¾ä¸€ä¸ªCUæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯å†²çªå¤„ç†æ¨¡å—çš„ä»£ç ç‰‡æ®µ</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs verilog"> <span class="hljs-comment">//freeze module</span><br> <span class="hljs-keyword">wire</span> freeze_rs0_E2, freeze_rs0_E1, freeze_rs0_M1, freeze_rs1_E2,<br>      freeze_rt0_E2, freeze_rt0_E1, freeze_rt0_M1, freeze_rt1_E2;<br><span class="hljs-comment">//freeze_rs0_E2è¡¨ç¤ºDçº§è¦ä½¿ç”¨å¯„å­˜å™¨ï¼Œä½†æ˜¯Eçº§çš„æŒ‡ä»¤è¿˜éœ€è¦2ä¸ªå‘¨æœŸæ‰èƒ½å¾—åˆ°å¯„å­˜å™¨çš„æ­£ç¡®å€¼ï¼Œå¦‚lw + beq</span><br> <span class="hljs-keyword">assign</span> freeze_rs0_E2 = (Tuse_rs == <span class="hljs-number">2&#x27;d0</span>) &amp; (Tnew_E == <span class="hljs-number">2&#x27;d2</span>) &amp; E_RegWrite &amp; (D_A1 == E_A3) &amp; (E_A3 &gt; <span class="hljs-number">5&#x27;d0</span>);<br> <span class="hljs-comment">//â€¦â€¦â€¦â€¦waiting for you to finish</span><br><br> <span class="hljs-keyword">assign</span> freeze = freeze_rs0_E2 | freeze_rs0_E1 | freeze_rs0_M1 | freeze_rs1_E2 |<br>                 freeze_rt0_E2 | freeze_rt0_E1 | freeze_rt0_M1 | freeze_rt1_E2 ;<br><br><br> <span class="hljs-comment">//forward module</span><br> <span class="hljs-comment">//D_RD1</span><br> <span class="hljs-keyword">wire</span> M_to_D_RD1, W_to_D_RD1;<span class="hljs-comment">//M Wçº§å‘Dçº§RD1çš„è½¬å‘</span><br> <span class="hljs-keyword">assign</span> M_to_D_RD1 = (D_A1 == M_A3  &amp;&amp; M_RegWrite &gt; <span class="hljs-number">1&#x27;d0</span> &amp;&amp; M_A3 &gt; <span class="hljs-number">5&#x27;d0</span> &amp;&amp; Tnew_M == <span class="hljs-number">2&#x27;d0</span>);<br> <span class="hljs-keyword">assign</span> W_to_D_RD1 = (D_A1 == W_A3  &amp;&amp; W_RegWrite &gt; <span class="hljs-number">1&#x27;d0</span> &amp;&amp; W_A3 &gt; <span class="hljs-number">5&#x27;d0</span>);<br><br> <span class="hljs-keyword">assign</span> D_Sel_RD1 = M_to_D_RD1 ? <span class="hljs-number">2&#x27;b01</span> :<br>                    W_to_D_RD1 ? <span class="hljs-number">2&#x27;b10</span> : <span class="hljs-number">2&#x27;b00</span>;<br><br> <span class="hljs-comment">//â€¦â€¦â€¦â€¦waiting for you to finish</span><br> <br></code></pre></td></tr></table></figure><p>è§£å†³å®Œè½¬å‘é˜»å¡åï¼ŒP5çš„é‡å¤§å·¥ç¨‹å·²ç»å®Œæˆï¼Œå…¶ä»–çš„å°±ç…§ç€ç”µè·¯å›¾è¿çº¿å³å¯ï¼Œè¿™é‡Œæƒ³è¯´è¯´jal</p><h2 id="jal"><a href="#jal" class="headerlink" title="jal"></a>jal</h2><p>ä¹çœ‹<code>jal</code>ï¼Œä¼¼ä¹Dçº§è§£ç ä¹‹åæˆ‘ä»¬å°±çŸ¥é“äº†PC+8çš„å€¼ï¼Œä¹Ÿå°±æ˜¯è¯´<code>Tnew</code>ä¸º0ï¼Œä½†äº‹å®å¦‚æ­¤å—ï¼Ÿ</p><p>åœ¨ä¸å°‘äººè®¾è®¡ä¸­ï¼Œ<code>jal</code>çš„PCæ˜¯æµæ°´åˆ°Wçº§æ‰å†™å…¥å¯„å­˜å™¨çš„ï¼Œè¿™æ—¶å€™ï¼Œæ­£ç¡®çš„<code>Tnew</code>åº”è¯¥ä¸º3,è¿™æ ·çš„è®¾è®¡æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½å› æ­¤<strong>é€ æˆä¸å¿…è¦çš„é˜»å¡ï¼Œå¯¼è‡´CPUè·‘ä¸å¿«</strong></p><p>æˆ‘ä»¬ä»”ç»†æ€è€ƒï¼Œç¡®ç¡®å®å®Dçº§è§£ç ä¹‹åæˆ‘ä»¬å°±çŸ¥é“äº†PC+8çš„å€¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å¢åŠ è½¬å‘çº¿è·¯äº†ï¼Œå®ç°E, M, Wçº§PC+8å€¼çš„è½¬å‘ï¼Œè¿™æ ·ç¡®å®ä¹Ÿå¯ä»¥</p><p>ä½†æˆ‘ä»¬é‡‡ç”¨å½’ä¸€åŒ–çš„æ€æƒ³ï¼Œè¿™æ ·å¹¶ä¸å¥½ï¼Œå¹¶ä¸èƒ½ç³»ç»Ÿåœ°è§£å†³è¯¥é—®é¢˜ï¼Œè€Œæ˜¯é‡‡å–äº†ç±»ä¼¼ç‰¹åˆ¤çš„å½¢å¼ï¼Œ<strong>æˆ‘ä»¬æ€»å¾—å°è¯•ä¸‹æ›´ä¼˜é›…çš„åšæ³•å§</strong></p><p>æˆ‘è‡ªå·±æ‘¸ç´¢å‡ºæ¥çš„ä¸€ç§æ–¹æ³•æ˜¯å°†Eçº§çš„PCè¿åˆ°ALUé‡Œé¢ï¼ŒALUè¾“å‡ºPC+8ï¼Œä¹Ÿå°±æ˜¯è®©<code>jal</code>æŸç§å½¢å¼ä¸Šä¹Ÿæˆäº†è¿ç®—ç±»æŒ‡ä»¤,çœ‹RTLè¯­è¨€ï¼Œä¸ä¹Ÿç±»ä¼¼ä¹ˆï¼Ÿ</p><p>è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯æˆ‘ä»¬æ— éœ€å¯¹CUæ¨¡å—è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œåªéœ€è¦åƒå…¶ä»–è¿ç®—æŒ‡ä»¤ä¸€æ ·å°†<code>jal</code>çš„<code>Tnew</code>è®¾ç½®ä¸º2ï¼ŒA3è®¾ç½®ä¸º31ï¼Œå³å¯ï¼Œæ­¤æ—¶è¦è½¬å‘çš„æ•°æ®ï¼ˆPC+8)å·²ç»åœ¨<code>AluOut</code>ä¸­äº†,<strong>è¿™æ ·ä¾¿è·å¾—äº†æ›´å¥½çš„ç»Ÿä¸€æ€§ã€å½’ä¸€æ€§</strong></p><p>æœ‰åŒå­¦è¯´è¿™æ ·æ— æ³•å®ç°Eåˆ°Dçº§çš„è½¬å‘å•Šï¼Œä»”ç»†æƒ³æƒ³ï¼Œå¯¹äº<code>jal</code>ï¼Œæˆ‘ä»¬éœ€è¦Eåˆ°Dçš„è½¬å‘ä¹ˆï¼Ÿ<strong>å¹¶ä¸éœ€è¦</strong></p><p>å› ä¸ºè€ƒè™‘å»¶è¿Ÿæ§½ï¼Œå½“<code>jal</code>åœ¨Eçº§æ—¶,å®ƒçš„åä¸€æ¡æŒ‡ä»¤ä¹Ÿå°±æ˜¯Dçº§çš„æŒ‡ä»¤ä¸ä¼šæ˜¯<code>beq</code>æŒ‡ä»¤ï¼Œè¿™æ ·çš„æµ‹è¯•æ•°æ®æ˜¯éæ³•çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸ä¼šè¿ç€è·³</p><p>é‚£ä¹ˆå¯¹äºå…¶ä»–çš„éåˆ†æ”¯æŒ‡ä»¤ï¼ŒDçº§å¹¶ä¸éœ€è¦å¯„å­˜å™¨ï¼Œè¿™æ ·å°±ä¸éœ€è¦è½¬å‘äº†</p><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><p><strong>è¯¾ä¸‹çš„æµ‹è¯•æ•°æ®ä»…ä¾›å‚è€ƒï¼Œå¯¹äº†ä¹Ÿè¦è‡ªå·±æµ‹ä¸€æµ‹å¼ºä¸€ç‚¹çš„æ•°æ®</strong>ï¼Œé¿å…æŠŠè¯¾ä¸‹çš„bugç•™åˆ°è¯¾ä¸Šï¼Œé‚£æ ·å°±æ¯”è¾ƒéš¾å—äº†</p><p>å› æ­¤ï¼Œå¦‚æœå¯¹è‡ªå·±çš„è®¾è®¡æ²¡æœ‰ä¿¡å¿ƒï¼Œå¯ä»¥å¤šå¤šæ„é€ æ•°æ®æˆ–è€…ç”¨åˆ«äººçš„æ•°æ®ç‹ ç‹ æµ‹è¯•ï¼Œä¸ç•™bug</p><p>å¯¹äºå¥†ä½¬ï¼Œå¯ä»¥æŒ‰ç…§æ•™ç¨‹çš„æ–¹å¼è‡ªè¡Œæ„é€ æ•°æ®ç”Ÿæˆå™¨ï¼Œå¦‚æœæ‡’å¾—æŠ˜è…¾æˆ‘è¿™é‡Œåˆ†äº«ä¸€äº›æˆ‘çš„<a href="https://bhpan.buaa.edu.cn/link/AA9C30ED17AB7F415BB0C9C1D86D6894EA">æµ‹è¯•æ•°æ®</a></p><p>æµ‹è¯•æ ·ä¾‹æ¥è‡ªäºæˆ‘é­”æ”¹çš„å­¦é•¿çš„æ•°æ®ç”Ÿæˆå™¨ï¼ŒåŒæ—¶ä¿®å¤äº†ä¸€äº›æºä»£ç ï¼Œè®©ç”Ÿæˆçš„æ•°æ®æ›´åˆç†ï¼Œå†²çªæ›´å¤šï¼Œæµ‹è¯•æ•°æ®ä¸­æœ‰<code>j</code>æŒ‡ä»¤ï¼Œè‡ªå·±åŠ ä¸€ä¸‹ï¼Œå¾ˆå®¹æ˜“</p><p><strong>Marsé…ç½®åœ¨å‰é¢çš„æ–‡ç« å·²ç»è¯´è¿‡äº†ï¼Œè¿™é‡Œåˆ«å¿˜äº†å¼€å»¶æ—¶æ§½å™¢</strong><span class="github-emoji" alias="grin" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8">&#x1f601;</span></p><p>åŒæ—¶æ•°æ®è¾ƒå¤šï¼Œå»ºè®®æ­é…è¯„æµ‹æœºä½¿ç”¨ï¼Œ<strong>æ¯å¹´éƒ½æœ‰å¥†ä½¬å‘å¸ƒè¯„æµ‹æœºï¼Œå¤§å®¶å¤šå¤šå…³æ³¨</strong>ï¼Œè¿™é‡Œä¹Ÿè´´ä¸€ä¸ª<a href="https://bhpan.buaa.edu.cn/link/AA5D9DC67428B04FD9AB80ED843D195B66"><code>lcy</code>åŒå­¦å†™çš„è¯„æµ‹æœº</a>ï¼Œéå¸¸å¥½ç”¨ï¼Œå†æ¬¡æ„Ÿè°¢<span class="github-emoji" alias="heart" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2764.png?v8">&#x2764;</span>ã€‚ç›¸å…³çš„æºç æˆ‘å·²ç»ä¿®æ”¹å¥½äº†ï¼Œå¤§å®¶<strong>åªéœ€è¦ä¿®æ”¹</strong><code>config.json</code>ä¸­çš„<code>CPU</code> å’Œ<code>MIPS</code>çš„è·¯å¾„å³å¯ï¼Œåˆ†åˆ«å¯¹åº”è¦æµ‹è¯•çš„CPUæ–‡ä»¶å¤¹ï¼Œä»¥åŠæµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹ï¼Œæµ‹è¯•ç»“æœåœ¨tmpæ–‡ä»¶å¤¹ä¸‹ï¼Œæˆ‘ä¿®æ”¹ä¸ºäº†æœ‰ä¸åŒæ‰ä¼šç”Ÿæˆ.htmlæ–‡ä»¶ï¼Œå¯ä»¥æŒ‰éœ€æ±‚ä¿®æ”¹æºç ï¼Œç„¶åè¿è¡Œmain.pyå³å¯ï¼ˆå¦‚æœåˆšå¼€å§‹æ— è¾“å‡ºï¼Œç­‰ä¸€ä¼šå„¿æˆ–è€…å¤šè¯•å‡ æ¬¡å°±å¥½äº†ï¼Œç¥å¥‡<span class="github-emoji" alias="laughing" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8">&#x1f606;</span>)</p>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Verilog</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P4è¯¾ä¸Š</title>
    <link href="/2024/11/11/P4%E8%AF%BE%E4%B8%8A/"/>
    <url>/2024/11/11/P4%E8%AF%BE%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P4è¯¾ä¸Šæµ‹è¯•çš„ç›¸å…³å†…å®¹<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><h1 id="T1-SWMM"><a href="#T1-SWMM" class="headerlink" title="T1 SWMM"></a>T1 SWMM</h1><h2 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><strong>swmm rt, offset(base)</strong></p><p><code>addr = offset + base</code></p><p>å¦‚æœ<code>GRF[$rt]</code> ä¸ºå¶æ•°ï¼Œåˆ™å°†<code>GRF[$rt]</code> å­˜åˆ°<code>Memory[ addr[31:2] | 00 ]</code>,å¦åˆ™å­˜åˆ°<code>Memory[ addr[29:0] || 00 ]</code></p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å…¶å®å’Œswå¤§å·®ä¸å·®ï¼Œä½†æ˜¯éœ€è¦<strong>å¢åŠ DMå†™å…¥åœ°å€çš„é€‰æ‹©å™¨</strong>ï¼Œå¯¹äºæˆ‘çš„è®¾è®¡ï¼Œæˆ‘æ¯ä¸€æ¡æ–°æŒ‡ä»¤éƒ½ä¼šæœ‰ä¸€ä¸ª<strong>æ–°ä¿¡å·newSign</strong>ï¼Œå½“ä¸”ä»…å½“æ‰§è¡Œè¯¥æŒ‡ä»¤æ—¶ï¼Œè¯¥ä¿¡å·ä¸º1ï¼Œä»¥ä¾¿äºå°†æ–°æŒ‡ä»¤ä¸åŸæ¥çš„æŒ‡ä»¤åˆ†éš”å¼€ï¼Œäº’ä¸å½±å“ï¼Œå…·ä½“è§<strong>P3è¯¾ä¸Šæ˜“é”™ç‚¹ä¸­çš„å®ç°</strong></p><p>å¯¹äºæœ¬é¢˜ï¼Œåªéœ€è¦åœ¨é¡¶å±‚æ¨¡å—åŠ ä¸€ä¸ª<code>MUX</code>ï¼Œç›´æ¥<code>assign</code> <code>DM_WA</code> &#x3D; <code>(newSign == 1&#39;b1)</code> ? <strong>(</strong><code>GRF_RD2[0] == 1&#39;b1</code> ? <code>&#123; AluOut[29:0], 2&#39;b00&#125;</code> : <code>&#123; AluOut[31:2], 2&#39;b00&#125;</code><strong>)</strong> : <code>AluOut</code></p><p>è¿™æ ·å°±ä¸ä¼šä¸åŸæ¥çš„æŒ‡ä»¤å†²çª</p><h1 id="T2-ES"><a href="#T2-ES" class="headerlink" title="T2 ES"></a>T2 ES</h1><h2 id="é¢˜é¢-1"><a href="#é¢˜é¢-1" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><strong>es rs, rt, Imm</strong></p><p><code>AluOut = GRF[$rs] - GRF[$rt]</code> </p><p><strong>beqçš„å˜ä½“</strong>ï¼Œå‡æ³•å¦‚æœä¸æº¢å‡ºï¼Œå°±å°†ç»“æœå­˜åˆ°<code>$rt</code>,å¦‚æœæº¢å‡ºäº†ï¼Œ<strong>å°±è·Ÿbeqä¸€æ ·è·³è½¬</strong></p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p><strong>æ€ä¹ˆåˆ¤æ–­æº¢å‡º</strong>ï¼Œå°±ä¸èµ˜è¿°äº†ï¼ŒæŒ‡ä»¤é›†ç¬¬ä¸€æ¡addä¸­æœ‰è¯¦ç»†æè¿°ï¼Œè¯¾ä¸Šæè¿°ä¹Ÿæ˜“æ‡‚</p><p>æˆ‘æ–°å¢äº†ä¸€ä½ALUçš„è¾“å‡ºä¿¡å·<code>new_branch</code>ï¼Œè¿æ¥åˆ°<code>NPCæ¨¡å—</code>ï¼Œå½“ä¸”ä»…å½“æ˜¯è¯¥æŒ‡ä»¤ä¸”æ»¡è¶³è·³è½¬æ¡ä»¶æ—¶ç½®ä¸º1ï¼ŒNPCä¸­åªè¦è¯¥ä¿¡å·ä¸º1å°±è·³è½¬</p><p>åŒæ—¶ï¼Œ<strong>GRFçš„å†™ä½¿èƒ½ä¹Ÿéœ€è¦æ”¹å˜</strong>ï¼Œè·ŸT1å·®ä¸å¤šï¼ŒnewSignä¸º0æ—¶ï¼Œç›´æ¥å°†Controllerçš„RegWriteè¿è¿‡å»ï¼Œå¦åˆ™å°±åˆ¤æ–­<code>new_branch</code>,ä¸º0çš„è¯å°±å¯ä»¥å†™å…¥ï¼Œç›´æ¥å°†å‡æ³•ç»“æœå†™å…¥å³å¯ã€‚</p><p><strong>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¿…é¡»å…ˆåˆ¤æ–­newSignï¼Œå†åˆ¤æ–­new_branch</strong></p><p>æˆ‘è¿™ä¹ˆåšæœ‰ç‚¹éº»çƒ¦ï¼Œæ–°å¢ä¿¡å·ï¼Œè¿çº¿ä¸å°‘ï¼ŒåŠ¡å¿…å°å¿ƒå°å¿ƒå†ä»”ç»†ï¼Œæˆ‘å°±å› ä¸ºä¸¤ä¸ªä½çº§é”™è¯¯è°ƒäº†å¥½ä¸€ä¼šå„¿</p><h1 id="T3-IBS"><a href="#T3-IBS" class="headerlink" title="T3 IBS"></a>T3 IBS</h1><h2 id="é¢˜é¢-2"><a href="#é¢˜é¢-2" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><strong>ibs rs, rt, rd</strong></p><p>å¦‚æœ<code>GRF[$rt]</code> æ˜¯å¯¹ç§°çš„ï¼Œå³[0] &#x3D;&#x3D; [31],[1] &#x3D;&#x3D; [30]â€¦â€¦é‚£ä¹ˆå°±å°†<code>GRF[$rs]</code><strong>æŒ‰ä½å–å</strong>åå†™å…¥<code>$rd</code>,å¦åˆ™ç›´æ¥å°†<code>GRF[$rs]</code>å†™å…¥<code>$rt</code></p><p><strong>æ³¨æ„ä¸¤ç§æ¡ä»¶ä¸‹å†™å…¥çš„å¯„å­˜å™¨ä¸åŒ</strong></p><h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ–°å¢ä¸€ä½è¿ç®—ï¼Œç”¨<code>forå¾ªç¯</code>åˆ¤æ–­æ˜¯å¦å¯¹ç§°ï¼Œæ ¹æ®åˆ¤æ–­ç»“æœå†³å®šALUçš„è¾“å‡º</p><p>åŒæ—¶è·ŸT2ä¸€æ ·ï¼Œ<strong>æ–°å¢ä¸€ä½ALUçš„è¾“å‡ºä¿¡å·</strong>ï¼Œå°±å«ALU_newå§ï¼Œ<strong>å½“ä¸”ä»…å½“æ˜¯è¯¥æŒ‡ä»¤ä¸”æ»¡è¶³å¯¹ç§°æ¡ä»¶æ—¶ç½®ä¸º1</strong>ï¼Œæ ¹æ®å®ƒæ¥åˆ¤æ–­æ–°æŒ‡ä»¤æ¡ä»¶ä¸‹çš„å¯„å­˜å™¨å†™å…¥åœ°å€ï¼Œæˆ‘æ˜¯ç›´æ¥åœ¨åŸæ¥<code>GRF_WA_MUX</code>åæ–°å¢ä¸€ä¸ªMUXï¼Œå¦‚æœALU_newä¸º1ï¼Œåˆ™é€‰æ‹©$rd,å…¶ä»–æƒ…å†µä¸ºåŸæ¥çš„MUXè¾“å‡ºï¼Œè¿™æ ·æ”¹åŠ¨ä¸ç®—å¤ªå¤§</p><h1 id="å†™åœ¨åé¢"><a href="#å†™åœ¨åé¢" class="headerlink" title="å†™åœ¨åé¢"></a>å†™åœ¨åé¢</h1><p>è¿™æ˜¯ç¬¬äºŒæ¬¡P4çš„è¯¾ä¸Šæµ‹è¯•ï¼Œæƒ³çœ‹ç¬¬ä¸€æ¬¡çš„åŒå­¦å¯ä»¥å»å…¶ä»–çš„åšå®¢å‘€<span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span></p><p>ä»è¿™å‡ å‘¨çœ‹æ¥ï¼Œç¬¬ä¸€æ¬¡çš„P3,P4,P5æŒ‚çš„äººå¯éƒ½ä¸å°‘å•Šï¼Œå”‰å”‰ï¼Œå¤±è¯¯æœºä¼šæ€»å…±æœ‰3æ¬¡ï¼Œå†·é™ä¸€å‘¨ï¼Œæ”¾ç¼“èŠ‚å¥ï¼Œè®©è‡ªå·±è½»æ¾ä¸€ä¸‹ï¼Œä¹Ÿæœªå°æ˜¯ä¸€ä»¶åäº‹ã€‚<br>æœ¬äººå› ä¸ºP3æŒ‚äº†ï¼Œè¿™å‘¨å°±è¿˜æ¯”è¾ƒè½»æ¾ï¼Œå› ä¸ºä¸ç”¨æ­P5ï¼Œè€Œæœ‰äº›æœ‹å‹å°±å¾ˆç´§å¼ äº†ï¼Œæé™ä¸€ä¸¤å¤©æ­P5ï¼Œè¿˜è¦é¢å¯¹ä¸€å †bugï¼Œè¯¾ä¸Šå¯èƒ½ä¸€ç›´åœ¨deè¯¾ä¸‹çš„bugï¼Œå› ä¸ºè¯¾ä¸‹çš„å¼±æµ‹å®åœ¨æ˜¯å¤ªå¼±äº†ï¼Œå¯¼è‡´å¾ˆæœ‰å¯èƒ½é—ç•™Bugåˆ°è¯¾ä¸Šã€‚è€Œæˆ‘è¿™å‘¨å‘¢ï¼Œè¿˜å’Œå®¤å‹æ‰“äº†å‡ æ¬¡æ¸¸æˆï¼Œéšä¾¿å¤ä¹ äº†ä¸€ä¸‹æ•°åˆ†ï¼Œä¹Ÿç»ˆäºæœ‰æ—¶é—´åœ¨æ“åœºä¸Šæ¼«æ— ç›®çš„åœ°é—²é€›ï¼ŒçœŸåˆ‡ä½“ä¼šåˆ°ç”Ÿæ´»çš„ä¹è¶£ã€‚P5ä¹Ÿæœ‰ä¸­æµ‹å¯ä»¥ä¾èµ–ï¼Œä¸ç”¨å¤ªè¿‡ç„¦è™‘ï¼Œä¹Ÿä¸ç”¨å˜æˆè®¡ç»„çš„å½¢çŠ¶äº†ã€‚</p><div class="note note-info">            <p>æ€»çš„æ¥çœ‹ï¼ŒæŒ‚ä¸€æ¬¡ç¼“ç¼“èŠ‚å¥ä¸ä¸€å®šæ˜¯ä»¶åäº‹ã€‚ğŸ« <br>ä¸‹å‘¨å°±æ˜¯P5äº†ï¼ŒåŠ æ²¹ï¼Œå¤§å®¶ä¸€èµ·åŠ æ²¹å‘€<span class="github-emoji" alias="grinning" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8">&#x1f600;</span> <span class="github-emoji" alias="grinning" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8">&#x1f600;</span> <span class="github-emoji" alias="grinning" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f600.png?v8">&#x1f600;</span></p>          </div>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Verilog</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P4è¯¾ä¸‹</title>
    <link href="/2024/11/11/P4%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/11/11/P4%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>P4è¯¾ä¸‹å…¶å®å°±åªéœ€è¦å¯¹ç€P3çš„ç”µè·¯ç¿»è¯‘å³å¯ï¼Œå…·ä½“çš„å®ç°å°±ä¸å¤šè¯´äº†ï¼Œè¿™é‡Œ<strong>åªè®²è®²ä¸€äº›ç»†èŠ‚å’Œå¯ä¼˜åŒ–çš„åœ°æ–¹</strong></p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><h2 id="é¡¶å±‚æ¨¡å—"><a href="#é¡¶å±‚æ¨¡å—" class="headerlink" title="é¡¶å±‚æ¨¡å—"></a>é¡¶å±‚æ¨¡å—</h2><p>æˆ‘ä»¬è¦å°½é‡è®©é¡¶å±‚æ¨¡å—åªèµ·åˆ°è¿çº¿çš„ä½œç”¨ï¼Œæœ€å¤šæœ‰ä¸€äº›å¤šè·¯é€‰æ‹©å™¨ï¼Œå°†å…·ä½“çš„å®ç°ç»†èŠ‚æ”¾åˆ°æ¨¡å—å½“ä¸­å»</p><p>å¯¹äºå¤–éƒ¨çš„è¿çº¿ï¼Œæ— è®ºæ¨¡å—outputçš„è§„æ ¼æ˜¯regè¿˜æ˜¯wireï¼Œ<strong>å¤–éƒ¨çš„æ¥çº¿éƒ½å¾—å®šä¹‰ä¸ºwire</strong>ï¼Œæˆ–è€…ä½ å°±å°†wireå‹å˜é‡æƒ³è±¡ä¸ºä¸€æ ¹æ ¹å…·ä½“çš„å¯¼çº¿<span class="github-emoji" alias="grin" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f601.png?v8">&#x1f601;</span></p><p><strong>åŒæ—¶ä¸€å®šè¦å»ºç«‹ä¸€å¥—è‡ªå·±çš„å‘½åè§„èŒƒï¼Œåˆ°äº†P5ä½ å°±çŸ¥é“è¿™æœ‰å¤šä¹ˆé‡è¦äº†</strong></p><h2 id="NPC"><a href="#NPC" class="headerlink" title="NPC"></a>NPC</h2><p>å¯¹äºNPCæ¨¡å—çš„è·³è½¬åˆ¤æ–­ï¼Œä¸€å®šè¦åšåˆ°ä¸é‡ä¸æ¼ï¼Œæ¯”å¦‚è¯´branchä¸º1ï¼Œä½†ä¸ç›¸ç­‰æ—¶æ˜¯å¦æœ‰èµ‹å€¼ï¼Œè´´ä¸Šæˆ‘çš„ä»£ç </p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">assign</span> pc4 = pc + <span class="hljs-number">32&#x27;h0000_0004</span>;<br><span class="hljs-keyword">wire</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] tmp1, tmp2;<br><span class="hljs-keyword">assign</span> tmp1 = pc4 + &#123;&#123;<span class="hljs-number">14</span>&#123;offset_16[<span class="hljs-number">15</span>]&#125;&#125;, offset_16, <span class="hljs-number">2&#x27;b00</span>&#125;;<br><span class="hljs-keyword">assign</span> tmp2 = &#123;pc[<span class="hljs-number">31</span>:<span class="hljs-number">28</span>], Imm_26, <span class="hljs-number">2&#x27;b00</span>&#125;;<br><span class="hljs-keyword">always</span> @(*) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">if</span>(jump) <span class="hljs-keyword">begin</span><br>            <span class="hljs-keyword">if</span>(jSrc) <span class="hljs-keyword">begin</span><br>                npc = rs;<span class="hljs-comment">//jrè·³è½¬</span><br>            <span class="hljs-keyword">end</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                npc = tmp2;<span class="hljs-comment">//j or jalè·³è½¬</span><br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>            <span class="hljs-keyword">if</span>(branch) <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">if</span>(zero) <span class="hljs-keyword">begin</span><br>                    npc = tmp1;<span class="hljs-comment">//beqè·³è½¬</span><br>                <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                    npc = pc4;<span class="hljs-comment">//beqä¸è·³è½¬</span><br>                <span class="hljs-keyword">end</span><br>            <span class="hljs-keyword">end</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                npc = pc4;<span class="hljs-comment">//éè·³è½¬æŒ‡ä»¤</span><br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨assignå®ç°</p><h2 id="Controller"><a href="#Controller" class="headerlink" title="Controller"></a>Controller</h2><p>æ•™ç¨‹ä¸­æœ‰ä¸¤ç§å®ç°æ–¹æ³•ï¼Œæˆ‘é‡‡å–äº†æ¯”è¾ƒç›´è§‚ä½†æ˜¯ç é‡æ›´å¤§çš„æ–¹å¼ï¼Œå¦‚ä¸‹</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">case</span> (opcode)<br>            <span class="hljs-number">6&#x27;b000000</span>:<br>            <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">case</span> (funct)<br>                    addFunct: <span class="hljs-keyword">begin</span><br>                        RegWrite = <span class="hljs-number">1&#x27;b1</span>;<br>                        DmWrite = <span class="hljs-number">1&#x27;b0</span>;<br>                        RegAddSrc = <span class="hljs-number">2&#x27;b01</span>;<br>                        RegWDSrc = <span class="hljs-number">2&#x27;b00</span>;<br>                        AluOp = <span class="hljs-number">4&#x27;b0000</span>;<br>                        AluSrc = <span class="hljs-number">1&#x27;b0</span>;<br>                        SignExt = <span class="hljs-number">1&#x27;b0</span>;<br>                        branch = <span class="hljs-number">1&#x27;b0</span>;<br>                        IfJump = <span class="hljs-number">1&#x27;b0</span>;<br>                    <span class="hljs-keyword">end</span> <br>                   ......<br></code></pre></td></tr></table></figure><p>è¿™ä¸ªå°±çœ‹ä¸ªäººé€‰æ‹©äº†</p><h2 id="P4è¯¾ä¸Šå‡†å¤‡"><a href="#P4è¯¾ä¸Šå‡†å¤‡" class="headerlink" title="P4è¯¾ä¸Šå‡†å¤‡"></a>P4è¯¾ä¸Šå‡†å¤‡</h2><h3 id="æ–°æŒ‡ä»¤ä¿¡å·"><a href="#æ–°æŒ‡ä»¤ä¿¡å·" class="headerlink" title="æ–°æŒ‡ä»¤ä¿¡å·"></a>æ–°æŒ‡ä»¤ä¿¡å·</h3><p>å¯¹ä¸æ–°çš„æŒ‡ä»¤ï¼Œå¯ä»¥é¢„ç•™ä¸€ä¸ªä¿¡å·çš„æ¥å£ï¼Œæå‰åœ¨Controlleræ¨¡å—é‡Œå‡†å¤‡ä¸€ä¸ªæ–°ä¿¡å·<code>NewSign</code>ï¼Œå…·ä½“å®ç°çœ‹ä»¥ä¸‹ä»£ç </p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">parameter</span>   addFunct = <span class="hljs-number">6&#x27;b100000</span>,<br>              subFunct = <span class="hljs-number">6&#x27;b100010</span>,<br>              <span class="hljs-comment">//I</span><br>              oriOp    = <span class="hljs-number">6&#x27;b001101</span>,<br>              luiOp    = <span class="hljs-number">6&#x27;b001111</span>,<br>              lwOp     = <span class="hljs-number">6&#x27;b100011</span>,<br>              swOp     = <span class="hljs-number">6&#x27;b101011</span>,<br>              beqOp    = <span class="hljs-number">6&#x27;b000100</span>,<br>              <span class="hljs-comment">//J</span><br>              jOp      = <span class="hljs-number">6&#x27;b000010</span>,<br>              jrFunct  = <span class="hljs-number">6&#x27;b001000</span>,<br>              jalOp    = <span class="hljs-number">6&#x27;b000011</span>,<br>              <span class="hljs-comment">//new</span><br>              newOp    = <span class="hljs-number">6&#x27;b111111</span>,<br>              newFunct = <span class="hljs-number">6&#x27;b111111</span>;<br>    <br>    <span class="hljs-keyword">always</span> @(*) <span class="hljs-keyword">begin</span><br>        NewSign = <span class="hljs-number">1&#x27;b0</span>;<br>        <span class="hljs-keyword">case</span> (opcode)<br>            <span class="hljs-number">6&#x27;b000000</span>:<br>            <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">case</span> (funct)<br>                    addFunct: <span class="hljs-keyword">begin</span><br>                        RegWrite = <span class="hljs-number">1&#x27;b1</span>;<br>                        DmWrite = <span class="hljs-number">1&#x27;b0</span>;<br>                        RegAddSrc = <span class="hljs-number">2&#x27;b01</span>;<br>                        RegWDSrc = <span class="hljs-number">2&#x27;b00</span>;<br>                        AluOp = <span class="hljs-number">4&#x27;b0000</span>;<br>                        AluSrc = <span class="hljs-number">1&#x27;b0</span>;<br>                        SignExt = <span class="hljs-number">1&#x27;b0</span>;<br>                        branch = <span class="hljs-number">1&#x27;b0</span>;<br>                        IfJump = <span class="hljs-number">1&#x27;b0</span>;<br>                    <span class="hljs-keyword">end</span> <br>                    <br>                    newFunct: <span class="hljs-keyword">begin</span><br>                        RegWrite = <span class="hljs-number">1&#x27;b0</span>;<br>                        DmWrite = <span class="hljs-number">1&#x27;b0</span>;<br>                        RegAddSrc = <span class="hljs-number">2&#x27;b00</span>;<br>                        RegWDSrc = <span class="hljs-number">2&#x27;b00</span>;<br>                        AluOp = <span class="hljs-number">4&#x27;b0000</span>;<br>                        AluSrc = <span class="hljs-number">1&#x27;b0</span>;<br>                        SignExt = <span class="hljs-number">1&#x27;b0</span>;<br>                        branch = <span class="hljs-number">1&#x27;b0</span>;<br>                        IfJump = <span class="hljs-number">1&#x27;b0</span>;<br>                        JumpSrc = <span class="hljs-number">1&#x27;b0</span>;<br>                        NewSign = <span class="hljs-number">1&#x27;b1</span>;<br>                    <span class="hljs-keyword">end</span><br></code></pre></td></tr></table></figure><p><strong>è¯¾ä¸Šåªéœ€è¦æ”¹newOpä»¥åŠå¯¹åº”çš„æ§åˆ¶ä¿¡å·å³å¯</strong>ï¼ŒåŒæ—¶æ¯æ¬¡caseå‰<code>NewSign = 1&#39;b0</code>ï¼ˆ18è¡Œï¼‰è¿™æ ·å°±ä¸ç”¨æ¯ä¸€æ¡å…¶ä»–æŒ‡ä»¤éƒ½èµ‹å€¼äº†ï¼ŒåŒæ—¶é¡¶å±‚æ¨¡å—ä¹Ÿæå‰è¿æ¥å¥½è¿™ä¸ªä¿¡å·</p><h3 id="ALUæ¨¡å—"><a href="#ALUæ¨¡å—" class="headerlink" title="ALUæ¨¡å—"></a>ALUæ¨¡å—</h3><ul><li>è€ƒè™‘åˆ°æœ‰äº›é¢˜ç›®å¯èƒ½æ¶‰åŠPCï¼Œæ¯”å¦‚ä¸PCæ¯”è¾ƒä¹‹ç±»çš„ï¼Œå¯ä»¥æå‰å°†PCæ¥åˆ°ALUè¾“å…¥ï¼Œè¦ç”¨æ—¶ç›´æ¥å–</li><li>æœ‰äº›æ–°æŒ‡ä»¤å¯èƒ½ä¸¤ç§æƒ…å†µçš„è¡Œä¸ºå®Œå…¨ä¸åŒï¼Œ<strong>è¿™æ—¶æ— æ³•ä»Controllerç›´æ¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„æ§åˆ¶ä¿¡å·çš„æœ€ç»ˆå–å€¼</strong>ï¼Œéœ€è¦æ ¹æ®ALUè¿ç®—ç»“æœæ¥åˆ¤æ–­ï¼Œå¯ä»¥æå‰é¢„ç•™ä¸€ä¸ªæ–°çš„<code>output</code>è¾“å‡ºnewï¼Œåé¢æ ¹æ®newä¿¡å·æ¥æ§åˆ¶ä¸€äº›æ¨¡å—ã€‚ä¾‹å­è§P4è¯¾ä¸ŠT2ï¼Œä¸€ç§æƒ…å†µåªéœ€è¦å†™å…¥å¯„å­˜å™¨ï¼Œå¦ä¸€ç§æƒ…å†µåªéœ€è¦è·³è½¬ï¼Œå®Œå…¨ä¸åŒã€‚</li><li>å¯ä»¥æå‰å°†ä¸Šä¸€ç‚¹çš„newä¿¡å·è¿æ¥åˆ°å¯èƒ½çš„æ¨¡å—ï¼Œå¦‚<code>GRFã€NPC</code>ï¼Œå…ˆä¸ç®¡ï¼Œåˆ°æ—¶å€™ç‰¹åˆ¤å³å¯</li></ul><h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p><strong>åšè¯¾ä¸‹æ—¶å¯ä»¥æå‰çœ‹çœ‹è¯¾ä¸ŠåŠ æŒ‡ä»¤çš„æ¨¡å¼ï¼Œæå‰å‡†å¤‡ä¸€äº›å¿…è¦çš„æ¥å£å’Œè¿çº¿ï¼Œåˆ°æ—¶å€™è¯¾ä¸Šåªéœ€è¦ç¨å¾®ä¿®æ”¹ï¼ŒåŠ å‡ è¡Œä»£ç å³å¯</strong></p><h1 id="è¯¾ä¸‹æµ‹è¯•"><a href="#è¯¾ä¸‹æµ‹è¯•" class="headerlink" title="è¯¾ä¸‹æµ‹è¯•"></a>è¯¾ä¸‹æµ‹è¯•</h1><div class="note note-info">            <p><strong>æ¯å¹´éƒ½æœ‰ä¼šå¥†ä½¬åœ¨è®¨è®ºåŒºæˆ–è€…æ°´ç¾¤å‘è¯„æµ‹æœºå’Œæµ‹è¯•æ•°æ®ç”Ÿæˆå™¨ï¼Œå¤§å®¶å¤šå¤šå…³æ³¨</strong></p>          </div><p>å¦‚æœæ²¡ä»€ä¹ˆæ•°æ®çš„è¯å¯ä»¥è¯•è¯•ä¸‹é¢è¿™ä¸ªæ•°æ®ï¼Œç”¨çš„æ˜¯å­¦é•¿çš„é­”æ”¹MARSï¼Œ<a href="https://github.com/Toby-Shi-cloud/Mars-with-BUAA-CO-extension">é“¾æ¥åœ¨è¿™é‡Œ</a></p><p>å¯ä»¥ç›´æ¥è¾“å‡ºGRF\DMçš„å†™å…¥ä¿¡æ¯ï¼Œä¸è‡ªå·±çš„å¯¹æ‹å³å¯ï¼Œæ³¨æ„åœ¨Settingsä¸‹å‹¾é€‰<code>Ignore Arithmetic Overflow</code>ä»¥åŠ<code>Output Log level 1</code>,å¹¶åœ¨<code>Memory Configuration</code>ä¸‹é€‰æ‹©<code>large text</code>ï¼Œè¿™æ ·å¯ä»¥ä¸€æ¬¡è¿è¡Œ4000å¤šè¡Œ<code>mips</code>ä»£ç </p><p>åŒæ—¶<code>testbench</code>æ—¶é’Ÿå‘¨æœŸè¦å‡å°ï¼Œæˆ‘å‡å°åˆ°äº†<code>always #0.15 clk = ~clk;</code></p><p>æµ‹è¯•æ•°æ®å¦‚ä¸‹ï¼ˆæ²¡æœ‰å¯¹<code>jrè·³è½¬31å·ä»¥å¤–å¯„å­˜å™¨</code>çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ï¼‰</p><hr><div class="note note-info">            <p>Update: 2025.11.12</p><p>ä»Šå¤©æœ‰åŒå­¦è·Ÿæˆ‘åæ˜ æ•°æ®å¤ªé•¿ç›´æ¥å¤åˆ¶ä¼šå¯¼è‡´æµè§ˆå™¨å¡æ­»ï¼Œå“ˆå“ˆå“ˆç¡®å®ï¼Œæ²¡è€ƒè™‘åˆ°è¿™ä¸ªDOMç›¸å…³çš„é—®é¢˜ï¼Œæˆ‘æŠŠæ•°æ®ä¸Šä¼ åˆ°è¿™é‡Œäº†ï¼Œ<a href="https://pzhwuhu.github.io/Notes/CO_P4_testfile.txt">é“¾æ¥åœ¨æ­¤</a>ï¼Œ<strong>è¯·å¤§å®¶æœ‰éœ€è¦ctrl+sä¸‹è½½ æˆ–è€…é¼ æ ‡å³é”®å¦å­˜ä¸º</strong>ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œå¯ä»¥åœ¨è¯„è®ºåŒºsay thanks (doge)</p>          </div><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs routeros">lui <span class="hljs-variable">$23</span>, 58778<br>sw <span class="hljs-variable">$11</span>, 3004(<span class="hljs-variable">$0</span>)<br>lui <span class="hljs-variable">$8</span>, 36882<br>sub <span class="hljs-variable">$16</span>, <span class="hljs-variable">$0</span>, <span class="hljs-variable">$18</span><br>nop<br>ori <span class="hljs-variable">$2</span>, <span class="hljs-variable">$25</span>, 39090<br><span class="hljs-built_in">add</span> <span class="hljs-variable">$6</span>, <span class="hljs-variable">$24</span>, <span class="hljs-variable">$17</span><br>beq <span class="hljs-variable">$11</span>, <span class="hljs-variable">$15</span>, label_508<br>label_508_back:<br>j label_561<br>label_561_back:<br>ori <span class="hljs-variable">$14</span>, <span class="hljs-variable">$0</span>, 1110<br>j label_337<br>label_337_back:<br><span class="hljs-built_in">add</span> <span class="hljs-variable">$18</span>, <span class="hljs-variable">$2</span>, <span class="hljs-variable">$3</span><br>nop<br>lw <span class="hljs-variable">$19</span>, 8808(<span class="hljs-variable">$0</span>)<br>ori <span class="hljs-variable">$15</span>, <span class="hljs-variable">$0</span>, 56195<br>j label_678<br>label_678_back:<br>lui <span class="hljs-variable">$14</span>, 42089<br>nop<br>sw <span class="hljs-variable">$7</span>, 11968(<span class="hljs-variable">$0</span>)<br>lui <span class="hljs-variable">$21</span>, 5507<br>lui <span class="hljs-variable">$15</span>, 5025<br>sub <span class="hljs-variable">$15</span>, <span class="hljs-variable">$22</span>, <span class="hljs-variable">$23</span><br>sub <span class="hljs-variable">$25</span>, <span class="hljs-variable">$15</span>, <span class="hljs-variable">$17</span><br>nop<br>jal label_852<br>label_852_back:<br>nop<br>j label_422<br>label_422_back:<br>nop<br>sw <span class="hljs-variable">$8</span>, 5060(<span class="hljs-variable">$0</span>)<br>lui <span class="hljs-variable">$16</span>, 896<br>lui <span class="hljs-variable">$17</span>, 49975<br><span class="hljs-built_in">add</span> <span class="hljs-variable">$11</span>, <span class="hljs-variable">$5</span>, <span class="hljs-variable">$21</span><br><span class="hljs-built_in">add</span> <span class="hljs-variable">$8</span>, <span class="hljs-variable">$24</span>, <span class="hljs-variable">$23</span><br>sw <span class="hljs-variable">$8</span>, 564(<span class="hljs-variable">$0</span>)<br>sub <span class="hljs-variable">$5</span>, <span class="hljs-variable">$8</span>, <span class="hljs-variable">$23</span><br>sw <span class="hljs-variable">$3</span>, 10960(<span class="hljs-variable">$0</span>)<br>j label_672<br>label_672_back:<br>ori <span class="hljs-variable">$15</span>, <span class="hljs-variable">$10</span>, 5713<br>ori <span class="hljs-variable">$13</span>, <span class="hljs-variable">$6</span>, 53986<br>lui <span class="hljs-variable">$15</span>, 50874<br>sub <span class="hljs-variable">$11</span>, <span class="hljs-variable">$25</span>, <span class="hljs-variable">$7</span><br>lui <span class="hljs-variable">$17</span>, 34811<br>nop<br>sub <span class="hljs-variable">$19</span>, <span class="hljs-variable">$23</span>, <span class="hljs-variable">$18</span><br>jal label_232<br>label_232_back:<br>nop<br>sub <span class="hljs-variable">$11</span>, <span class="hljs-variable">$15</span>, <span class="hljs-variable">$23</span><br><span class="hljs-built_in">add</span> <span class="hljs-variable">$17</span>, <span class="hljs-variable">$21</span>, <span class="hljs-variable">$5</span><br>jal label_281<br>label_281_back:<br>lui <span class="hljs-variable">$21</span>, 8699<br>ori <span class="hljs-variable">$12</span>, <span class="hljs-variable">$16</span>, 59274<br><span class="hljs-built_in">add</span> <span class="hljs-variable">$13</span>, <span class="hljs-variable">$13</span>, <span class="hljs-variable">$10</span><br>nop<br>nop<br>========================<br>========================<br>========================<br></code></pre></td></tr></table></figure><ul><li><strong>åé¢çš„çœç•¥äº†ï¼Œè¯·ä¸‹è½½æºæ–‡ä»¶æŸ¥çœ‹</strong></li></ul>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BUAA-OOpreè¯¾ç¨‹æ€»ç»“</title>
    <link href="/2024/11/09/OOpre%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/"/>
    <url>/2024/11/09/OOpre%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/</url>
    
    <content type="html"><![CDATA[<p>æˆ‘å¤ªçˆ±OOPå•¦ï¼Œéå¸¸ä¸é”™çš„ä¸€æ¬¡ä½“éªŒï¼Œå¥½æƒ³ç»§ç»­è¿­ä»£ï¼Œä½†æ˜¯è®¡ç»„è®©æˆ‘å–˜ä¸è¿‡æ°”æ¥æ <span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span><span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span><span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span><br><img src="/../img_post/oop.png"></p><h1 id="æœ€ç»ˆæ¶æ„"><a href="#æœ€ç»ˆæ¶æ„" class="headerlink" title="æœ€ç»ˆæ¶æ„"></a>æœ€ç»ˆæ¶æ„</h1><p><img src="/../img_post/oop1.png"></p><p>æˆ‘çš„æ•´ä¸ªæ¶æ„ä¸­<strong>ç±»</strong>çš„ä¸ªæ•°å¹¶ä¸å¤šï¼Œä»…åœ¨å‰å‡ æ¬¡è¿­ä»£ç»™<code>Bottle</code>å’Œ<code>Equipment</code> å¢åŠ äº†å‡ ä¸ªå­ç±»ï¼Œå¹¶æ²¡æœ‰å¯¹æˆ˜æ–—ã€å‰¯æœ¬ç­‰æ“ä½œå¢åŠ æ–°çš„ç±»æˆ–è€…æ¥å£ï¼Œè€Œæ˜¯å…¨éƒ¨é›†æˆåœ¨äº†<code>Adventure</code>ç±»ä¸­,å¯èƒ½å®ç°ä¸Šç®€å•ï¼Œä½†æ˜¯è¿™æ ·å¯¼è‡´æˆ‘çš„<code>Adventure</code>ç±»è¿‡äºè‡ƒè‚¿ï¼Œå…¶ä¸‹çš„å­æ–¹æ³•è¿‡å¤š</p><p><img src="/../img_post/oop2.png"></p><p>è¿™æ ·<strong>ä¸åˆ©äºè°ƒè¯•å’Œå¢é‡å¼€å‘ä»¥åŠç±»å’Œæ–¹æ³•çš„å¤ç”¨ï¼Œ</strong>å½’æ ¹ç»“åº•è¿˜æ˜¯æœ‰ç‚¹æ‡’ï¼Œæ‡’å¾—æŠ˜è…¾ï¼Œç›´æ¥åœ¨<code>Adventure</code>ç±»ä¸‹å†™ä¸€ä¸ªæ–¹æ³•å¾—äº†ğŸ« </p><p><strong>ä»¥åè¿˜æ˜¯è¦å¤šå¤šæ”¹è¿›</strong></p><h2 id="è¿­ä»£è°ƒæ•´"><a href="#è¿­ä»£è°ƒæ•´" class="headerlink" title="è¿­ä»£è°ƒæ•´"></a>è¿­ä»£è°ƒæ•´</h2><p>ç»™<code>Mainclass</code>ä¸­çš„æ¯ä¸€ç§æ“ä½œå¢åŠ å¯¹åº”çš„caseæ–¹æ³•ï¼Œä¼ ç›¸åº”çš„å‚æ•°è¿›å»ã€‚è¿™æ ·ä½¿å¾—æ•´ä½“ç»“æ„è¾ƒä¸ºæ¸…æ™°ï¼Œ<del>ä¹Ÿä¸ä¼šè¶…è¿‡æ–¹æ³•çš„è¡Œæ•°</del></p><p><img src="/../img_post/oop3.png"></p><h1 id="ä½¿ç”¨Junitçš„å¿ƒå¾—ä½“ä¼š"><a href="#ä½¿ç”¨Junitçš„å¿ƒå¾—ä½“ä¼š" class="headerlink" title="ä½¿ç”¨Junitçš„å¿ƒå¾—ä½“ä¼š"></a>ä½¿ç”¨Junitçš„å¿ƒå¾—ä½“ä¼š</h1><ul><li>ä½¿ç”¨<code>Junit</code>å¯ä»¥å¾ˆæ–¹ä¾¿å¿«æ·åœ°è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œä»è€ŒçŸ¥é“ä¸€ä¸ªæ–¹æ³•æ˜¯å¦æ­£ç¡®æ‰§è¡Œï¼Œè¿™æ ·å¯ä»¥è®©æˆ‘ä»¬åœ¨æ•´ä½“è¿è¡Œæµ‹è¯•ä¹‹å‰ï¼Œå…ˆå¯¹å„ä¸ªå•å…ƒè¿›è¡Œå……åˆ†æµ‹è¯•ï¼Œå¾ˆæœ‰æ•ˆåœ°é™ä½äº†æµ‹è¯•çš„éš¾åº¦ã€‚</li><li>åŒä¸€ç±»æ–¹æ³•å¯ä»¥copyä¸€äº›è¯­å¥ï¼Œæ¯”å¦‚æµ‹è¯•<code>Bottle</code>ç±»çš„è®¸å¤šæ–¹æ³•ï¼Œéƒ½éœ€è¦æˆ‘ä»¬å…ˆå®ä¾‹åŒ–ä¸€ä¸ªé¥¼å­ï¼Œè¿™æ—¶å€™å°±å¯ä»¥<strong>å†™ä¸€ä¸ªé€šç”¨çš„æ¨¡ç‰ˆ</strong>ï¼Œä»è€ŒèŠ‚çœæ—¶é—´</li><li>ä¸åŒçš„ç±»æµ‹è¯•æœ‰å…ˆåé¡ºåºï¼Œåº”è¯¥<strong>å…ˆæµ‹è¯•</strong>åŸºæœ¬çš„ç‹¬ç«‹çš„æ–¹æ³•ï¼Œå†æµ‹è¯•éœ€è¦è°ƒç”¨è¯¥æ–¹æ³•çš„æ–¹æ³•ã€‚</li></ul><h1 id="OOpreå¿ƒå¾—ä½“ä¼š"><a href="#OOpreå¿ƒå¾—ä½“ä¼š" class="headerlink" title="OOpreå¿ƒå¾—ä½“ä¼š"></a>OOpreå¿ƒå¾—ä½“ä¼š</h1><p>åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ç»å†äº†ä»é¢å‘è¿‡ç¨‹ç¼–ç¨‹ï¼ˆPOPï¼‰åˆ°é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆOOPï¼‰çš„è½¬å˜ã€‚è¿™ä¸€è½¬å˜è®©æˆ‘å¯¹ç¼–ç¨‹æœ‰äº†æ›´æ·±çš„ç†è§£ã€‚</p><ul><li>ä»å‰æˆ‘ä»¬å†™Cè¯­è¨€ç¨‹åºï¼Œé€šå¸¸ä¼šæ³¨é‡è¿‡ç¨‹ï¼Œä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—æŒ‰é¡ºåºæ‰§è¡Œçš„æ­¥éª¤ã€‚ç¨‹åºé€šå¸¸æ˜¯å›´ç»•â€œåšä»€ä¹ˆã€æ€ä¹ˆåšâ€æ¥è®¾è®¡çš„ï¼Œä¸»è¦é€šè¿‡å‡½æ•°æ¥ç»„ç»‡ä»£ç </li><li>ä½†æ˜¯OOPè¦æ±‚æˆ‘ä»¬æŠŠ<strong>é—®é¢˜æŠ½è±¡æˆå…·æœ‰å±æ€§å’Œè¡Œä¸ºï¼ˆæ–¹æ³•ï¼‰çš„å¯¹è±¡ï¼Œå¹¶è®©è¿™äº›å¯¹è±¡ä¹‹é—´è¿›è¡Œäº¤äº’</strong>ã€‚è¿™ç§æ–¹å¼æ›´åŠ è´´è¿‘æˆ‘ä»¬å¯¹ç°å®ä¸–ç•Œçš„è®¤çŸ¥ï¼Œæˆ‘ä»¬æ‰€è¦è§£å†³çš„é—®é¢˜ä¹Ÿæ›´åŠ åˆ‡åˆå®é™…ï¼Œæ¯”å¦‚æŒ‡å¯¼ä¹¦ä¸­çš„å® ç‰©åº—ã€è¿­ä»£ä¸­çš„ç±»ä¼¼åŸç¥çš„å†’é™©è€…æ¸¸æˆï¼Œéƒ½å¾ˆè´´è¿‘æˆ‘ä»¬çš„ç”Ÿæ´»</li><li>ä»é¢å‘è¿‡ç¨‹è½¬å‘é¢å‘å¯¹è±¡æ—¶ï¼Œ<strong>æœ€å¤§çš„æŒ‘æˆ˜æ˜¯è¦å­¦ä¼šå°†é—®é¢˜æŠ½è±¡ä¸ºä¸€ä¸ªæ¨¡å‹</strong>ï¼Œè€Œä¸æ˜¯ç®€å•åœ°æŒ‰é¡ºåºç¼–å†™ä»£ç ã€‚ï¼ˆ<em>æœ¬è¯¾ç¨‹ä¸­è¿™ä¸€ç‚¹æŒ‡å¯¼ä¹¦å·²ç»å¸®æˆ‘ä»¬å®Œæˆäº†</em>ï¼‰è¿™ç§æŠ½è±¡èƒ½åŠ›çš„æå‡å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç»„ç»‡ä»£ç çš„ç»“æ„ï¼Œæœ‰ä¸€ä¸ªå…¨å±€çš„æŒæ¡ï¼Œå¹¶æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œå¯æ‰©å±•æ€§</li><li>é¢å‘å¯¹è±¡ç¼–ç¨‹çœŸæ­£è®©æˆ‘æ„Ÿå—åˆ°<strong>â€œæ¨¡å—åŒ–â€çš„å¨åŠ›</strong>ã€‚å½“é¡¹ç›®è§„æ¨¡å˜å¤§æ—¶ï¼Œé¢å‘å¯¹è±¡çš„è®¾è®¡æ–¹å¼ä½¿å¾—æ•´ä¸ªç³»ç»Ÿæ›´å®¹æ˜“ç†è§£å’Œæ‰©å±•ï¼ŒåŒæ—¶ï¼Œç”±äº<strong>å°è£…æ€§çš„æé«˜</strong>ï¼Œå¯¹è±¡å†…éƒ¨çš„ä¿®æ”¹å¯¹å¤–éƒ¨ä»£ç å½±å“è¾ƒå°ï¼Œä»£ç çš„å¯ç»´æŠ¤æ€§ä¹Ÿå¤§å¤§æå‡</li></ul><h1 id="å»ºè®®"><a href="#å»ºè®®" class="headerlink" title="å»ºè®®"></a>å»ºè®®</h1><ul><li>å¸Œæœ›èƒ½å¤ŸæŒ‡å¯¼ä¹¦çš„çŸ¥è¯†è®²è§£ä¸é¢˜ç›®åˆ†éš”å¼€ï¼Œä»è€Œæ›´åŠ æ¸…æ™°</li><li>æŒ‡å¯¼ä¹¦ä¸­ï¼Œå¯¹äºä¸€äº›æ¯”è¾ƒç»•çš„æ–‡å­—è¡¨è¿°ï¼Œå¸Œæœ›èƒ½å¤Ÿæä¾›ä¸€äº›ä¾‹å­æ¥å…·ä½“è¯´æ˜ï¼Œæœ‰æ—¶å€™çº¯æ–‡å­—ç¡®å®æœ‰ç‚¹æŠ½è±¡</li></ul>]]></content>
    
    
    <categories>
      
      <category>OO</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OOpre</tag>
      
      <tag>æ€»ç»“</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P3è¯¾ä¸Šæ˜“é”™ç‚¹</title>
    <link href="/2024/11/04/P3%E8%AF%BE%E4%B8%8A%E6%8A%80%E5%B7%A7/"/>
    <url>/2024/11/04/P3%E8%AF%BE%E4%B8%8A%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P3è¯¾ä¸Šæ·»åŠ æŒ‡ä»¤çš„å¸¸è§å‘ç‚¹å’Œå°æŠ€å·§</p>          </div><h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>åšäº†ä¸¤æ¬¡P3ï¼Œè¿™æ¬¡è¾ƒä¸ºé¡ºåˆ©ï¼Œ40minå°±æ•´å®Œäº†ï¼Œä»ä¸Šå‘¨æŒ‚æ‰P3åˆ°ç°åœ¨ï¼Œæœ¬äººå‘ç°äº†ä¸å°‘å¤§å®¶å…±æ€§çš„é—®é¢˜æˆ–è€…å«æ˜“é”™ç‚¹ï¼Œä¹Ÿæœ‰ä¸€äº›ä¸ªäººçš„ç»éªŒä¸æŠ€å·§ï¼Œå†™åœ¨è¿™é‡Œï¼Œå¸Œæœ›ä¸‹ä¸€å±Š çš„æœ‹å‹ä»¬èƒ½å¤Ÿæ›´åŠ é¡ºåˆ©åœ°é€šè¿‡P3ğŸ˜ğŸ˜(â—â€™â—¡â€™â—)</p><p>æœ¬äººè¯¾ä¸‹é‡æ„ç‰ˆå¦‚ä¸‹ï¼š<img src="/../img_post/p3_4.png"></p><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><h2 id="æ˜“é”™ç‚¹æ€»ç»“"><a href="#æ˜“é”™ç‚¹æ€»ç»“" class="headerlink" title="æ˜“é”™ç‚¹æ€»ç»“"></a>æ˜“é”™ç‚¹æ€»ç»“</h2><p>å…¶å®å¤§å®¶æ·»åŠ æŒ‡ä»¤æˆ–è®¸å¹¶ä¸æˆé—®é¢˜ï¼Œä½†æ˜¯å¯èƒ½ä¼šå‡ºç°å“ªäº›é—®é¢˜å‘¢ï¼ŸåŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>1.è¾“å‡ºä¿¡å·å€¼éšæ„æ›´æ”¹</li><li>2.æ·»åŠ æŒ‡ä»¤å½±å“äº†å·²æœ‰æŒ‡ä»¤</li><li>3.æ²¡æœ‰é¢„ç•™å……è¶³ç©ºé—´å’Œä¿¡å·ç«¯å£ï¼Œå¯¼è‡´æ·»åŠ æŒ‡ä»¤éº»çƒ¦ã€è€—æ—¶é•¿ï¼Œä¹Ÿå°±å®¹æ˜“äº§ç”Ÿé—®é¢˜</li><li>4.è¯¾ä¸‹å……åˆ†æµ‹è¯•ï¼Œè£¸äº¤ä¸€å‘ï¼Œå¯¹äº†å‡ ä¸ªç‚¹çš„è¯å°±ä¸è¦æ€€ç–‘è¯¾ä¸‹çš„bugäº†</li></ul><p>é’ˆå¯¹å‰ä¸‰ä¸ªé—®é¢˜ï¼Œæˆ‘åˆ†åˆ«ç»™å‡ºé”™è¯¯ç¤ºèŒƒå’Œæ”¹è¿›æ–¹æ³•</p><h2 id="é—®é¢˜1"><a href="#é—®é¢˜1" class="headerlink" title="é—®é¢˜1"></a>é—®é¢˜1</h2><p>å‚è€ƒæˆ‘ä¹‹å‰è¯¾ä¸Šçš„è®¾è®¡ï¼Œ<img src="/../img_post/p3_0.png"></p><p><code>Reg_Addr</code>æ˜¯ç›´æ¥è¿æ¥åˆ°è¾“å‡ºä¿¡å·çš„ï¼Œè¡¨ç¤ºå¯„å­˜å™¨å†™å…¥åœ°å€ï¼Œå¦‚æœä½ åœ¨ç«¯å£å’Œè¿™ä¸ªTunnelä¹‹é—´å¯¹ä¿¡å·åšäº†å¤„ç†ï¼Œé‚£ä¼šé€ æˆæœ¬åœ°è¿è¡Œæ­£ç¡®ï¼Œä½†æ˜¯äº¤ä¸Šå»è¾“å‡ºé”™è¯¯ï¼Œä¸”debugå¾ˆå›°éš¾</p><ul><li><strong>è§£å†³</strong>ï¼šå°±æ˜¯å°†è¿™ç§è¾“å‡ºä¿¡å·ç›´æ¥æ¥åœ¨ç«¯å£ä¸Šï¼Œåƒè¿™æ ·,è¿™æ ·ï¼Œä½ åœ¨æ›´æ”¹ä¿¡å·ï¼Œæ¯”å¦‚GRF_WAæ—¶ï¼Œå°±ç›´æ¥åœ¨Tunnelå‰é¢æ”¹ï¼Œå¦‚å›¾çº¢è‰²ç®­å¤´å¤„ï¼ŒåŠ MUXä¹‹ç±»çš„</li></ul><p><img src="/../img_post/p3_6.png"></p><h2 id="é—®é¢˜2"><a href="#é—®é¢˜2" class="headerlink" title="é—®é¢˜2"></a>é—®é¢˜2</h2><p>è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„é—®é¢˜ï¼Œæˆ‘ä»¥ç¬¬äºŒæ¬¡è¯¾ä¸Šçš„ä¸€ä¸ªé¢˜ä¸ºä¾‹ï¼Œæ¥è¯´ä¸€è¯´</p><p>ç¬¬äºŒæ¬¡P3è¯¾ä¸Šç¬¬ä¸€é¢˜ä¸ºBAæŒ‡ä»¤ï¼ŒRTLè¯­è¨€å¦‚ä¸‹ï¼š</p><p><code>ba rs, rt, offset</code></p><p><code>ans &lt;- GRF(rs) ^ GRF(rt) </code>(æŒ‰ä½å¼‚æˆ–)</p><p>if <code>ans &lt; 0x10000</code> then</p><p>â€‹<code>PC &lt;- PC +4 + sign_extend(ans[15:0] || 00)</code></p><p>else </p><p>â€‹<code>PC &lt;- PC +4 + sign_extend(offset[15:0] || 00)</code></p><p>è¿™å…¶å®å°±æ˜¯<code>beq</code>æŒ‡ä»¤çš„å˜ä½“ï¼Œå¯¹äº<code>beq</code>æŒ‡ä»¤ï¼Œæˆ‘æ˜¯branchä¿¡å·ç½®1åŒæ—¶åˆ¤æ–­ALUç›¸å‡ç»“æœæ˜¯å¦ä¸º0æ¥å†³å®šæ˜¯å¦è·³è½¬ï¼Œå…·ä½“çš„è·³è½¬åœ¨NPCæ¨¡å—å®ç°,å¯¹äºæ­¤é¢˜å‘ç°åªè¦è¯¥æŒ‡ä»¤æ‰§è¡Œï¼Œå°±ä¸€å®šä¼šè·³è½¬ï¼ŒåŒæ—¶ALUæ¨¡å—éœ€è¦æ‰§è¡Œå¼‚æˆ–è¿ç®—ï¼Œä¹Ÿæ— æ³•ç›´æ¥ç”¨zeroä¿¡å·ï¼Œæ‰€ä»¥æˆ‘<strong>é€‰æ‹©äº†æ–°è¾“å‡ºä¸€ä¸ªä¿¡å·ï¼Œå°±å«new</strong>ï¼ˆäº‹å®ä¸Šæå‰é¢„ç•™äº†ç«¯å£ï¼Œè§Controlleræ¨¡å—ï¼‰ï¼Œåªè¦è¯¥æŒ‡ä»¤ï¼Œåˆ™newä¸º1ï¼ŒæŠŠnewä¸ä¹‹å‰çš„æœ€ç»ˆè·³è½¬ä¿¡å·æˆ–ä¸€ä¸‹ï¼Œè¿åˆ°NPCæ¨¡å—ï¼Œå³å¯</p><p>æ¥ç€çœ‹çœ‹è·³è½¬åœ°å€ï¼Œå¯ä»¥ç›´æ¥åœ¨NPCè¾“å…¥ç«¯å£å‰åŠ ä¸€ä¸ªMUXï¼Œæ ¹æ®åˆ¤æ–­æ¡ä»¶é€‰ä¸€ä¸ªè¿›å»ï¼Œå°±æ˜¯è¿™æ ·![](..&#x2F;img_post&#x2F;p3_7 (2).png)</p><p><strong>çœ‹èµ·æ¥ä¼¼ä¹æ²¡å•¥é—®é¢˜ï¼Œä½†è¿™æ ·æ˜¯é”™çš„ï¼ï¼ï¼</strong>ï¼Œå› ä¸ºä½ æŠŠä¹‹å‰æ­£å¸¸è·³è½¬<code>beq</code>çš„è·³è½¬åœ°å€ä¹Ÿæ”¹äº†ï¼Œå›å¤´æƒ³ä¸€æƒ³ï¼Œæˆ‘ä»¬<strong>åªéœ€è¦åœ¨æ‰§è¡Œè¿™æ¡æ–°æŒ‡ä»¤æ—¶è¿™æ ·é€‰æ‹©ï¼Œå¯¹äºå…¶ä»–çš„æŒ‡ä»¤ï¼Œç”¨ä¹‹å‰çš„Tunnelå°±å¥½äº†</strong>ï¼Œæƒ³åˆ°è¿™é‡Œåï¼Œå®ç°å°±å¾ˆç®€å•äº†ï¼Œ<strong>å¯¹äºæ¯ä¸€æ¡æ–°æŒ‡ä»¤ï¼Œå¦‚æœéœ€è¦æ”¹å˜ä¹‹å‰è¾“å…¥è¾“å‡ºçš„ç«¯å£ï¼Œåˆ™åŠ ä¸€ä¸ªMUXï¼Œç¡®ä¿åªå¯¹æ–°æŒ‡ä»¤ä½œç”¨ï¼ŒåŒæ—¶æ–°å¢ä¸€ä¸ªè¾“å‡ºä¿¡å·ä½œä¸ºMUXçš„é€‰æ‹©ä¿¡å·,ç”±äºæ–°ä¿¡å·newåªåœ¨æ–°ä¿¡å·æ—¶ä¸º1ï¼Œè¿™æ ·å°±ä¿è¯äº†åŸæ¥æŒ‡ä»¤çš„æ­£ç¡®æ€§</strong><br>![](..&#x2F;img_post&#x2F;p3_7 (1).png)</p><h2 id="é—®é¢˜3"><a href="#é—®é¢˜3" class="headerlink" title="é—®é¢˜3"></a>é—®é¢˜3</h2><p>æˆ‘ä¹‹å‰æ˜¯è¿™æ ·è®¾è®¡çš„ï¼Œè¯¾ä¸Šä¿®æ”¹æ•°æ®é€šè·¯ï¼ŒæŠŠæˆ‘ç´¯çš„å¤Ÿå‘›ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¸€äº›å¾ˆå°çš„åœ°æ–¹åŠ ä¸€äº›MUXï¼Œé‚£ç®€ç›´äº†(â”¬â”¬ï¹â”¬â”¬)ï¼Œæ•´ä¸ªç”µè·¯è¿çº¿å¾ˆå¤æ‚ï¼Œä¹Ÿå®¹æ˜“çŠ¯é”™<br><img src="/../img_post/p3_5.png"></p><p>å› æ­¤ï¼Œæˆ‘å¯¹ç”µè·¯è¿›è¡Œäº†é‡æ„ï¼Œå¢åŠ äº†å¾ˆå¤šçš„Tunnelï¼Œä¹Ÿæ‰©å¤§äº†ç©ºé—´ï¼Œè¿™æ ·å¢æ·»é€šè·¯æ—¶æ›´åŠ æ–¹ä¾¿ï¼ŒåŒæ—¶Controlleré¢„ç•™äº†ä¸€ä¸ªæ–°çš„ä¿¡å·ï¼Œåˆ°æ—¶å€™æŠŠæŒ‡ä»¤åœ¨é‡Œé¢è¿èµ·æ¥ï¼Œç›´æ¥å°±èƒ½ç”¨,çœ‹èµ·æ¥ä¹Ÿæ›´åŠ ç®€æ´ï¼Œå¯èƒ½æ²¡é‚£ä¹ˆç›´è§‚åªæ˜¯ã€‚</p><p><img src="/../img_post/p3_4.png"></p><h1 id="ç¢ç¢å¿µ"><a href="#ç¢ç¢å¿µ" class="headerlink" title="ç¢ç¢å¿µ"></a>ç¢ç¢å¿µ</h1><p>å“ˆå“ˆå“ˆï¼Œé—®ç­”æ—¶åŠ©æ•™è¿˜é—®æˆ‘CPUç”»çš„æ€ä¹ˆè¿™ä¹ˆå¥½çœ‹ï¼Œå˜»å˜»ğŸ˜ğŸ˜ğŸ˜†ğŸ˜†ï¼Œ<code>Logisim</code>å¯ä»¥ç›´æ¥ç¼–è¾‘å­ç”µè·¯å¤–è§‚ã€å½¢çŠ¶ã€é¢œè‰²ï¼Œå¤§å®¶è‡ªè¡Œæœç´¢å­¦ä¹ å³å¯ï¼Œç¡®å®å¥½çœ‹å¾ˆå¤š<del>é¢œç‹—æ¥äº†</del></p><p>P3æŒ‚äº†ï¼Œå”‰å”‰ï¼Œä½†å›å¤´ä¸€æƒ³ï¼Œä¹Ÿæ²¡å•¥ï¼Œä»Šæ™šP4ä¼¼ä¹éš¾åº¦ä¸å°ï¼Œæ„Ÿè§‰å¾ˆå¤šäººæ²¡å‡ºæ¥ï¼Œå¦‚æœæˆ‘ä»Šæ™šåšP4ï¼Œè¯´ä¸å®šä¹ŸæŒ‚ï¼Œä¸‹æ¬¡å…´è®¸èƒ½ç®€å•ç‚¹ï¼ï¼Ÿï¼ˆ<del>æœªç»</del>ï¼‰ï¼Œä¸çŸ¥é“ï¼Œå…¨é¢å‡†å¤‡å§ã€‚</p><p>æœ€åé€å¤§å®¶ä¸€å¥è¯ï¼š</p><p><strong>è¯·ä¸è¦ç›¸ä¿¡èƒœåˆ©å°±åƒå±±å¡ä¸Šçš„è’²å…¬è‹±ä¸€æ ·å”¾æ‰‹å¯å¾—ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œä¸–ä¸Šæ€»æœ‰ç¾å¥½å€¼å¾—è‡ªå·±å…¨åŠ›ä»¥èµ´ï¼Œå“ªæ€•ç²‰èº«ç¢éª¨</strong></p><p>ğŸ˜ŠğŸ˜ŠğŸ˜Š</p>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Logisim</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P3è¯¾ä¸‹</title>
    <link href="/2024/11/04/P3%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/11/04/P3%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="CPUè®¾è®¡éƒ¨åˆ†"><a href="#CPUè®¾è®¡éƒ¨åˆ†" class="headerlink" title="CPUè®¾è®¡éƒ¨åˆ†"></a>CPUè®¾è®¡éƒ¨åˆ†</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>æœ¬æ¬¡ç¬”è€…ç”¨<code>logisim</code>æ­å»ºäº†ä¸€ä¸ªå•å‘¨æœŸ<code>CPU</code>ï¼Œèƒ½å¤Ÿå¤„ç†9æ¡æŒ‡ä»¤ï¼Œåˆ†åˆ«ä¸º<code>add</code> <code>sub</code> <code>ori</code> <code>lw</code> <code>sw</code> <code>beq</code> <code>lui</code> <code>nop</code>ï¼Œé‡‡ç”¨æ¨¡å—åŒ–å’Œå±‚æ¬¡åŒ–è®¾è®¡ï¼Œè®©ç»“æ„æ›´åŠ æ¸…æ™°æ˜äº†ã€‚æ‰€è®¾è®¡çš„æ¨¡å—å¦‚ä¸‹ï¼š</p><ul><li><code>IFU</code> å–æŒ‡ä»¤å•å…ƒï¼Œé€šè¿‡<code>PC</code>çš„å€¼æ¥ç¡®å®šå½“å‰è¦æ‰§è¡Œçš„æŒ‡ä»¤</li><li><code>GRF</code> é€šç”¨å¯„å­˜å™¨ç»„ï¼Œé€šè¿‡è¯¥æ¨¡å—å®ç°å¯¹32ä¸ªé€šç”¨å¯„å­˜å™¨çš„è¯»å’Œå†™</li><li><code>ALU</code> ç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒ</li><li><code>DM</code> æ•°æ®å­˜å‚¨å™¨ï¼Œé€šè¿‡<code>RAM</code>å®ç°</li><li><code>NPC</code> è®¡ç®—Next_PC</li><li><code>Controller</code> æ§åˆ¶å™¨ï¼Œè§£æ<code>funct</code> å’Œ<code>op</code> ä»è€Œå°†ç›¸åº”çš„æ§åˆ¶ä¿¡å·ç½®0ã€1</li><li>æœ€ç»ˆæ•ˆæœå¦‚å›¾ï¼š</li></ul><p><img src="/../img_post/p3_4.png"></p><h2 id="æ•°æ®é€šè·¯éƒ¨ä»¶"><a href="#æ•°æ®é€šè·¯éƒ¨ä»¶" class="headerlink" title="æ•°æ®é€šè·¯éƒ¨ä»¶"></a>æ•°æ®é€šè·¯éƒ¨ä»¶</h2><h3 id="IFUï¼šæŒ‡ä»¤å•å…ƒ"><a href="#IFUï¼šæŒ‡ä»¤å•å…ƒ" class="headerlink" title="IFUï¼šæŒ‡ä»¤å•å…ƒ"></a>IFUï¼šæŒ‡ä»¤å•å…ƒ</h3><p>è¯¥æ¨¡å—åŒ…å«<code>PC</code> å’Œ <code>IM</code>ä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸ºç¨‹åºè®¡æ•°å™¨å’ŒæŒ‡ä»¤å­˜å‚¨å™¨ã€‚</p><ul><li>PCç”¨å¯„å­˜å™¨ç›´æ¥å®ç°ï¼Œåº”å…·æœ‰å¼‚æ­¥å¤ä½åŠŸèƒ½ï¼Œå¤ä½å€¼ä¸ºèµ·å§‹åœ°å€ï¼Œåœ°å€èŒƒå›´ä¸º0x00003000 ~ 0x00006FFF</li><li>IMç”¨<code>ROM</code>å®ç°ï¼Œå®¹é‡ä¸º <strong>4096 * 32 bit</strong>. <code>ROM</code>çš„0ä½ç½®å¯¹åº” <code>PC</code> ä¸º 0x00003000çš„æŒ‡ä»¤</li><li>ä¸éš¾å‘ç° ROM å®é™…åœ°å€å®½åº¦ä»…éœ€ 12 ä½ï¼Œè¿™æ˜¯å› ä¸ºæ¯ä¸€æ¡ç¨‹åºå 32ä½ï¼Œå³4byteï¼Œæ¯æ¬¡åœ°å€æ”¹å˜æ˜¯ä»¥4byteä¸ºæœ€å°å•ä½è¿›è¡Œçš„</li></ul><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>clk</code></td><td>I</td><td>1</td><td>æ—¶é’Ÿä¿¡å·</td></tr><tr><td><code>reset</code></td><td>I</td><td>1</td><td>å¼‚æ­¥å¤ä½ä¿¡å·</td></tr><tr><td><code>Next_PC</code></td><td>I</td><td>32</td><td>ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€</td></tr><tr><td><code>Instr</code></td><td>O</td><td>32</td><td>æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„ç¼–ç </td></tr><tr><td><code>PC</code></td><td>O</td><td>32</td><td>å½“å‰æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€</td></tr></tbody></table><h3 id="GRF-é€šç”¨å¯„å­˜å™¨å †"><a href="#GRF-é€šç”¨å¯„å­˜å™¨å †" class="headerlink" title="GRF:é€šç”¨å¯„å­˜å™¨å †"></a>GRF:é€šç”¨å¯„å­˜å™¨å †</h3><p>è¯¥æ¨¡å—P1è¯¾ä¸‹å·²ç»å®ç°äº†ï¼Œç›´æ¥ç”¨å³å¯ï¼Œcopy copy ï¼ï¼ˆDMXè®°å¾—å¼€ä¸‰æ€å™¢ï¼<span class="github-emoji" alias="sweat_smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8">&#x1f605;</span>)</p><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>RA1</code></td><td>I</td><td>5</td><td>1_è¯»å–çš„å¯„å­˜å™¨ç¼–å·</td></tr><tr><td><code>RA2</code></td><td>I</td><td>5</td><td>2_è¯»å–çš„å¯„å­˜å™¨ç¼–å·</td></tr><tr><td><code>WE</code></td><td>I</td><td>1</td><td>å¯„å­˜å™¨å†™å…¥ä½¿èƒ½ç«¯</td></tr><tr><td><code>WA</code></td><td>I</td><td>5</td><td>å†™å…¥çš„å¯„å­˜å™¨ç¼–å·</td></tr><tr><td><code>WD</code></td><td>I</td><td>32</td><td>å†™å…¥å¯„å­˜å™¨çš„æ•°æ®</td></tr><tr><td><code>reset</code></td><td>I</td><td>1</td><td>å¼‚æ­¥å¤ä½</td></tr><tr><td><code>clk</code></td><td>I</td><td>1</td><td>æ—¶é’Ÿä¿¡å·</td></tr><tr><td><code>RD1</code></td><td>O</td><td>32</td><td>1_è¯»å–çš„å¯„å­˜å™¨æ•°æ®</td></tr><tr><td><code>RD2</code></td><td>O</td><td>32</td><td>2_è¯»å–çš„å¯„å­˜å™¨æ•°æ®</td></tr></tbody></table><h3 id="ALU-ç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒ"><a href="#ALU-ç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒ" class="headerlink" title="ALU:ç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒ"></a>ALU:ç®—æœ¯é€»è¾‘è¿ç®—å•å…ƒ</h3><h4 id="ç«¯å£å®šä¹‰"><a href="#ç«¯å£å®šä¹‰" class="headerlink" title="ç«¯å£å®šä¹‰"></a>ç«¯å£å®šä¹‰</h4><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>inA</code></td><td>I</td><td>32</td><td>æ“ä½œæ•°1</td></tr><tr><td><code>inB</code></td><td>I</td><td>32</td><td>æ“ä½œæ•°2</td></tr><tr><td><code>AluCtrol</code></td><td>I</td><td>4</td><td>è¿ç®—ç±»å‹</td></tr><tr><td><code>result</code></td><td>O</td><td>32</td><td>è¿ç®—ç»“æœ</td></tr><tr><td><code>zero</code></td><td>O</td><td>1</td><td>ç»“æœæ˜¯å¦ä¸º0</td></tr></tbody></table><h4 id="è¿ç®—ç¼–ç "><a href="#è¿ç®—ç¼–ç " class="headerlink" title="è¿ç®—ç¼–ç "></a>è¿ç®—ç¼–ç </h4><table><thead><tr><th>ç¼–ç </th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>0000</td><td>A + B</td></tr><tr><td>0001</td><td>A - B</td></tr><tr><td>0010</td><td>A &amp; B</td></tr><tr><td>0011</td><td>A or B</td></tr><tr><td>0100</td><td>åŠ è½½ç«‹å³æ•°è‡³é«˜ä½</td></tr><tr><td></td><td></td></tr></tbody></table><h3 id="DMï¼šæ•°æ®å­˜å‚¨å™¨"><a href="#DMï¼šæ•°æ®å­˜å‚¨å™¨" class="headerlink" title="DMï¼šæ•°æ®å­˜å‚¨å™¨"></a>DMï¼šæ•°æ®å­˜å‚¨å™¨</h3><ul><li>ä½¿ç”¨<code>RAM</code>å®ç°ï¼Œå®¹é‡ä¸º <strong>3072 * 32 bit</strong></li><li>ä½¿ç”¨å¼‚æ­¥å¤ä½åŠŸèƒ½ï¼Œå¤ä½å€¼ä¸º0</li><li><code>RAM</code>åº”ä½¿ç”¨åŒç«¯å£æ¨¡å¼</li></ul><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>clk</code></td><td>I</td><td>1</td><td>æ—¶é’Ÿä¿¡å·</td></tr><tr><td><code>reset</code></td><td>I</td><td>1</td><td>å¼‚æ­¥å¤ä½ä¿¡å·</td></tr><tr><td><code>address</code></td><td>I</td><td>32</td><td>å†…å­˜åœ°å€</td></tr><tr><td><code>WD</code></td><td>I</td><td>32</td><td>å†™å…¥çš„æ•°æ®</td></tr><tr><td><code>WE</code></td><td>I</td><td>1</td><td>å†™å…¥ä½¿èƒ½</td></tr><tr><td><code>RD</code></td><td>O</td><td>32</td><td>è¯»å‡ºçš„æ•°æ®</td></tr></tbody></table><h3 id="EXTï¼šæ‰©å±•å•å…ƒ"><a href="#EXTï¼šæ‰©å±•å•å…ƒ" class="headerlink" title="EXTï¼šæ‰©å±•å•å…ƒ"></a>EXTï¼šæ‰©å±•å•å…ƒ</h3><p>ç›´æ¥ä½¿ç”¨<code>logisim</code>è‡ªå¸¦çš„<code>extender</code>å³å¯ï¼Œä½†æ˜¯æ³¨æ„æ—¢æœ‰ç¬¦å·æ‰©å±•åˆæœ‰0æ‰©å±•ï¼ˆsuch as ori)</p><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>in</code></td><td>I</td><td>16</td><td>å¾…æ‰©å±•çš„ä¿¡å·</td></tr><tr><td><code>ExtOp</code></td><td>I</td><td>1</td><td>æ‰©å±•æ–¹å¼é€‰æ‹©ä¿¡å·ï¼ˆä¸º0åˆ™0æ‰©å±•ï¼‰</td></tr><tr><td><code>Out</code></td><td>O</td><td>32</td><td>æ‰©å±•çš„ç»“æœ</td></tr></tbody></table><h3 id="NPCï¼šæŒ‡ä»¤åœ°å€å•å…ƒ"><a href="#NPCï¼šæŒ‡ä»¤åœ°å€å•å…ƒ" class="headerlink" title="NPCï¼šæŒ‡ä»¤åœ°å€å•å…ƒ"></a>NPCï¼šæŒ‡ä»¤åœ°å€å•å…ƒ</h3><p><code>Next_PC</code>ä¸€å…±æœ‰ 3 ç§æƒ…å†µï¼Œåˆ†åˆ«ä¸º PC + 4ã€PC + 4 + <code>offest </code>&lt;&lt; 2 (<code>beq</code> æŒ‡ä»¤) ã€<code>Imm</code>26 -&gt; <code>Imm</code>32(j æŒ‡ä»¤)ï¼Œç«¯å£å®šä¹‰å¦‚ä¸‹</p><table><thead><tr><th>ä¿¡å·å</th><th>æ–¹å‘</th><th>ä½å®½</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>PC</code></td><td>I</td><td>32</td><td>å½“å‰æŒ‡ä»¤åœ°å€</td></tr><tr><td><code>offest</code></td><td>I</td><td>16</td><td><code>beq</code>æŒ‡ä»¤çš„ç›¸å¯¹åç§»é‡</td></tr><tr><td><code>Imm</code></td><td>I</td><td>16</td><td>jæŒ‡ä»¤çš„26ä½è·³è½¬åœ°å€</td></tr><tr><td><code>branch</code></td><td>I</td><td>1</td><td>æ˜¯å¦åˆ†æ”¯ï¼ˆ<code>beq</code>)</td></tr><tr><td><code>if_j</code></td><td>I</td><td>1</td><td>æ˜¯å¦jè·³è½¬</td></tr><tr><td><code>Next_PC</code></td><td>O</td><td>32</td><td>ä¸‹ä¸€æ¡æŒ‡ä»¤çš„åœ°å€</td></tr></tbody></table><h2 id="æ§åˆ¶å™¨è®¾è®¡"><a href="#æ§åˆ¶å™¨è®¾è®¡" class="headerlink" title="æ§åˆ¶å™¨è®¾è®¡"></a>æ§åˆ¶å™¨è®¾è®¡</h2><h3 id="ä¸é€»è¾‘æ¨¡å—"><a href="#ä¸é€»è¾‘æ¨¡å—" class="headerlink" title="ä¸é€»è¾‘æ¨¡å—"></a>ä¸é€»è¾‘æ¨¡å—</h3><p>å…ˆæ ¹æ®æŒ‡ä»¤çš„<code>opcode</code> å’Œ <code>funct</code> æ¥ç¡®å®šå…·ä½“çš„æŒ‡ä»¤ç±»å‹ï¼Œè§ä¸‹è¡¨RæŒ‡ä»¤ç±»å‹</p><table><thead><tr><th>Rå‹æŒ‡ä»¤</th><th>Opcode</th><th>Rs</th><th>Rt</th><th>Rd</th><th>Shamt</th><th>Funct</th></tr></thead><tbody><tr><td>add rd rs rt</td><td>000000</td><td>rs</td><td>rt</td><td>rd</td><td>XXXXX</td><td>100000</td></tr><tr><td>sub rd rs rt</td><td>000000</td><td>rs</td><td>rt</td><td>rd</td><td>XXXXX</td><td>100010</td></tr></tbody></table><p>å†æ¥çœ‹çœ‹Iå‹æŒ‡ä»¤ï¼š</p><table><thead><tr><th>Iå‹æŒ‡ä»¤</th><th>Opcode</th><th>Rs</th><th>Rt</th><th>16 bits offest</th></tr></thead><tbody><tr><td>ori rt rs Imm</td><td>001101</td><td>rs</td><td>rt</td><td>Imm16</td></tr><tr><td>lui rt Imm</td><td>001111</td><td>rs</td><td>rt</td><td>Imm16</td></tr><tr><td>lw rt Imm(rs)</td><td>100011</td><td>rs</td><td>rt</td><td>Imm16</td></tr><tr><td>sw rt Imm(rs)</td><td>101011</td><td>rs</td><td>rt</td><td>Imm16</td></tr><tr><td>beq rs rt Imm</td><td>000100</td><td>rs</td><td>rt</td><td>Imm16</td></tr></tbody></table><p>JæŒ‡ä»¤ï¼š</p><table><thead><tr><th>Jå‹æŒ‡ä»¤</th><th>Opcode</th><th>address</th></tr></thead><tbody><tr><td>J target</td><td>000010</td><td>target_26bit</td></tr><tr><td>Jr <code>$rs</code></td><td>000000(<code>funct:</code> 001000)</td><td>$rs</td></tr><tr><td>Jal target</td><td>000011</td><td>target_26bit &amp; $ra &#x3D; PC+4</td></tr></tbody></table><p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åŠ å…¥å…¶ä»–çš„æŒ‡ä»¤æ¥æ‰©å±•åŠŸèƒ½ï¼Œæœ‰äº†ä¸Šè¡¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥è®¾è®¡ä¸é€»è¾‘æ¨¡å—äº†â€¦â€¦</p><h3 id="æˆ–é€»è¾‘æ¨¡å—"><a href="#æˆ–é€»è¾‘æ¨¡å—" class="headerlink" title="æˆ–é€»è¾‘æ¨¡å—"></a>æˆ–é€»è¾‘æ¨¡å—</h3><p>åœ¨è¿™éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è¦æ ¹æ®ä¸é€»è¾‘è¾“å‡ºçš„å…·ä½“æŒ‡ä»¤æ¥æŒ‡å®šå„ä¸ªæ§åˆ¶ä¿¡å·çš„é«˜ä½ç”µå¹³ï¼Œä»¥æ­¤æ¥å®ç°å¯¹æ•´ä¸ªç”µè·¯çš„æ§åˆ¶ã€‚ä¸æ­¤åŒæ—¶ï¼Œè¿™éƒ¨åˆ†è¦æ±‚æˆ‘ä»¬å°†å„æ¡æŒ‡ä»¤çš„æ‰§è¡Œè¿‡ç¨‹è°™ç†Ÿäºå¿ƒã€‚</p><h4 id="æ€»æ§ä¿¡å·è¯´æ˜"><a href="#æ€»æ§ä¿¡å·è¯´æ˜" class="headerlink" title="æ€»æ§ä¿¡å·è¯´æ˜"></a>æ€»æ§ä¿¡å·è¯´æ˜</h4><table><thead><tr><th>ä¿¡å·</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Reg_Write</code></td><td>å¯„å­˜å™¨æ–‡ä»¶å†™å…¥ä½¿èƒ½ç«¯</td></tr><tr><td><code>DM_Write</code></td><td>å†…å­˜åŒºåŸŸå†™å…¥ä½¿èƒ½ç«¯</td></tr><tr><td><code>Reg_Dst</code></td><td>å†³å®šè¢«å†™å…¥å¯„å­˜å™¨åœ¨æŒ‡ä»¤ä¸­çš„ä½ç½®ï¼Œ0ä¸ºIå‹ï¼Œ1ä¸ºRå‹</td></tr><tr><td><code>MemtoReg</code></td><td>å†³å®šå†™å…¥å¯„å­˜å™¨çš„æ˜¯Aluç»“æœè¿˜æ˜¯DMå–å‡ºçš„æ•°æ®ï¼ˆif 1 :DM)</td></tr><tr><td><code>Alu_Op</code></td><td>å†³å®šAluè¿ç®—æ–¹å¼ï¼Œè§Aluè¡¨</td></tr><tr><td><code>Alu_Src</code></td><td>å†³å®šAlu ç¬¬äºŒä¸ªè¿ç®—æ•°ä¸º å¯„å­˜å™¨è¿˜æ˜¯ç«‹å³æ•°ï¼Œ0ä¸ºå¯„å­˜å™¨</td></tr><tr><td><code>Ext_Ctrl</code></td><td>å†³å®šæ‰©å±•æ–¹å¼ï¼Œ0è¡¨ç¤º0æ‰©å±•ï¼Œ1ä¸ºç¬¦å·æ‰©å±•</td></tr><tr><td><code>Branch</code></td><td>æ˜¯å¦åˆ†æ”¯ï¼Œ1 as åˆ†æ”¯</td></tr><tr><td><code>If_Jump</code></td><td>æ˜¯å¦è·³è½¬ï¼Œ1 as ä¸ºè·³è½¬</td></tr></tbody></table><h4 id="æŒ‡ä»¤å¯¹åº”çš„æ§åˆ¶ä¿¡å·"><a href="#æŒ‡ä»¤å¯¹åº”çš„æ§åˆ¶ä¿¡å·" class="headerlink" title="æŒ‡ä»¤å¯¹åº”çš„æ§åˆ¶ä¿¡å·"></a>æŒ‡ä»¤å¯¹åº”çš„æ§åˆ¶ä¿¡å·</h4><table><thead><tr><th>æŒ‡ä»¤</th><th><code>Reg_Write</code></th><th><code>DM_Write</code></th><th><code>Reg_Dst</code></th><th><code>MemtoReg</code></th><th><code>Alu_Op</code></th><th><code>Alu_Src</code></th><th><code>Ext_Ctrl</code></th><th><code>Branch</code></th><th><code>If_Jump</code></th></tr></thead><tbody><tr><td>add</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0000</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>sub</td><td>1</td><td>0</td><td>1</td><td>0</td><td>0001</td><td>0</td><td>0</td><td>0</td><td>0</td></tr><tr><td>ori</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0011</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>lui</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0100</td><td>1</td><td>0</td><td>0</td><td>0</td></tr><tr><td>lw</td><td>1</td><td>0</td><td>0</td><td>1</td><td>0000</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>sw</td><td>0</td><td>1</td><td>0</td><td>0</td><td>0000</td><td>1</td><td>1</td><td>0</td><td>0</td></tr><tr><td>beq</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0001</td><td>0</td><td>1</td><td>1</td><td>0</td></tr><tr><td>J</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0000</td><td>x</td><td>0</td><td>0</td><td>1</td></tr><tr><td>Jr</td><td>0</td><td>0</td><td>0</td><td>0</td><td>0101</td><td>0</td><td>0</td><td>0</td><td>1</td></tr><tr><td>Jal</td><td>1</td><td>0</td><td>0</td><td>0</td><td>0000</td><td>1</td><td>0</td><td>0</td><td>1</td></tr></tbody></table><h1 id="æ€è€ƒé¢˜"><a href="#æ€è€ƒé¢˜" class="headerlink" title="æ€è€ƒé¢˜"></a>æ€è€ƒé¢˜</h1><ol><li><p>ä¸Šé¢æˆ‘ä»¬ä»‹ç»äº†é€šè¿‡ FSM ç†è§£å•å‘¨æœŸ CPU çš„åŸºæœ¬æ–¹æ³•ã€‚è¯·å¤§å®¶æŒ‡å‡ºå•å‘¨æœŸ CPU æ‰€ç”¨åˆ°çš„æ¨¡å—ä¸­ï¼Œå“ªäº›å‘æŒ¥çŠ¶æ€å­˜å‚¨åŠŸèƒ½ï¼Œå“ªäº›å‘æŒ¥çŠ¶æ€è½¬ç§»åŠŸèƒ½ã€‚</p><ul><li>çŠ¶æ€å­˜å‚¨ï¼šIFUã€DMã€GRF</li><li>çŠ¶æ€è½¬ç§»ï¼šNPCã€Controller</li></ul></li><li><p>ç°åœ¨æˆ‘ä»¬çš„æ¨¡å—ä¸­ IM ä½¿ç”¨ ROMï¼Œ DM ä½¿ç”¨ RAMï¼Œ GRF ä½¿ç”¨ Registerï¼Œè¿™ç§åšæ³•åˆç†å—ï¼Ÿ è¯·ç»™å‡ºåˆ†æï¼Œè‹¥æœ‰æ”¹è¿›æ„è§ä¹Ÿè¯·ä¸€å¹¶ç»™å‡ºã€‚</p><ul><li>åˆç†ï¼Œå› ä¸ºIMä¸­çš„æŒ‡ä»¤æ˜¯åªéœ€è¦è¢«è¯»å–è§£æçš„ï¼Œä½¿ç”¨ROMåªæœ‰è¯»å–åŠŸèƒ½ï¼›è€ŒDMæ˜¯æ•°æ®å­˜å‚¨å™¨ï¼Œéœ€è¦è¯»å‡ºå’Œå†™å…¥ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨RAMï¼ŒåŒæ—¶ä¸èƒ½ç”¨å¯„å­˜å™¨ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦çš„å†…å­˜é‡éå¸¸çš„å¤§ï¼Œæœ‰é™çš„Registeræ— æ³•æ»¡è¶³ï¼›è€ŒGRFç”¨å¯„å­˜å™¨å †å®ç°åˆ™å¯ä»¥å®ç°é«˜é€Ÿçš„è¯»å†™ï¼ŒåŒæ—¶ä¸ALUçš„è¾“å…¥ç›¸è¿ï¼Œé€æ“ä½œæ•°æˆ–è€…å­˜å‚¨ä¸­é—´å˜é‡ï¼Œä½¿ç”¨å¯„å­˜å™¨å¿«é€Ÿè¯»å†™è¾ƒåˆç†ã€‚</li></ul></li><li><p>åœ¨ä¸Šè¿°æç¤ºçš„æ¨¡å—ä¹‹å¤–ï¼Œä½ æ˜¯å¦åœ¨å®é™…å®ç°æ—¶è®¾è®¡äº†å…¶ä»–çš„æ¨¡å—ï¼Ÿå¦‚æœæ˜¯çš„è¯ï¼Œè¯·ç»™å‡ºä»‹ç»å’Œè®¾è®¡çš„æ€è·¯ã€‚</p><ul><li>æˆ‘åªå¢åŠ äº†ä¸€ä¸ªNPCæ¨¡å—ï¼Œå› ä¸ºè‡ªè¡Œå¢åŠ äº†JæŒ‡ä»¤ï¼ŒPCçš„è®¡ç®—æ–¹å¼æœ‰ PC + 4, PC + 4 + offset&lt;&lt;2 , labelï¼Œç”šè‡³å¦‚æœåŠ å…¥jræŒ‡ä»¤çš„è¯ï¼Œè¿˜ä¼šç›´æ¥èµ‹å€¼ä¸ºå¯„å­˜å™¨çš„å€¼ï¼Œè€ƒè™‘åˆ°åç»­æ‰©å±•é—®é¢˜ï¼Œå¼•å…¥NPCæ¨¡å—</li></ul></li><li><p>äº‹å®ä¸Šï¼Œå®ç° <code>nop</code> ç©ºæŒ‡ä»¤ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å°†å®ƒåŠ å…¥æ§åˆ¶ä¿¡å·çœŸå€¼è¡¨ï¼Œä¸ºä»€ä¹ˆï¼Ÿ</p><ul><li>å› ä¸º<code>nop</code>æŒ‡ä»¤ç›¸å½“äº<code>sll $0, $0, 0</code>,å¯¹åº”çš„æ“ä½œç ä¸º0x0000_0000,å› ä¸º0ç§»åŠ¨0ä½è¿˜æ˜¯0ï¼Œï¼Œå¹¶ä¸”0å·å¯„å­˜å™¨ä¸èƒ½å†™å…¥ï¼Œæ‰€ä»¥æ— éœ€åŠ å…¥æ§åˆ¶ä¿¡å·è¡¨ã€‚åŒæ—¶è¯¥æŒ‡ä»¤æœ‰æ—¶è¢«ç”¨äºç©ºå¾ªç¯ï¼Œæœ‰æ—¶è¢«ç¼–è¯‘å™¨ç”¨äºä¸ä½“ç³»ç»“æ„ç›¸å…³çš„ç¼–è¯‘ä¼˜åŒ–ã€‚</li></ul></li><li><p>é˜…è¯» Pre çš„ <a href="http://cscore.buaa.edu.cn/tutorial/mips/mips-6/mips6-1/">â€œMIPS æŒ‡ä»¤é›†åŠæ±‡ç¼–è¯­è¨€â€</a> ä¸€èŠ‚ä¸­ç»™å‡ºçš„æµ‹è¯•æ ·ä¾‹ï¼Œè¯„ä»·å…¶å¼ºåº¦ï¼ˆå¯ä»å„ä¸ªæŒ‡ä»¤çš„è¦†ç›–æƒ…å†µï¼Œå•ä¸€æŒ‡ä»¤å„ç§è¡Œä¸ºçš„è¦†ç›–æƒ…å†µç­‰æ–¹é¢åˆ†æï¼‰ï¼Œå¹¶æŒ‡å‡ºå…·ä½“çš„ä¸è¶³ä¹‹å¤„ã€‚</p><ul><li>æ•°æ®å¼ºåº¦ä¸å¤Ÿï¼Œæ²¡æœ‰æ¶‰åŠintè¾¹ç•Œé™„è¿‘çš„è¾ƒå¤§çš„æ•°æ®çš„æµ‹è¯•ï¼Œæ²¡æœ‰è¦†ç›–è¾¹ç•Œæƒ…å†µ</li><li>åªæµ‹è¯•äº†å°‘æ•°å¯„å­˜å™¨ï¼Œå¹¶æœªå¯¹æ‰€æœ‰å¯„å­˜å™¨çš„è¯»å†™è¿›è¡Œæµ‹è¯•ï¼Œè™½ç„¶æœ‰äº›å¯„å­˜å™¨å®é™…ä¸Šå¹¶ä¸éœ€è¦è¯»å†™ï¼Œå¦‚1å·å¯„å­˜å™¨</li><li>è·³è½¬èŒƒå›´ä¸å¤Ÿï¼Œæ²¡æœ‰æµ‹è¯•å‘å‰è·³è½¬ã€æœ¬è¡Œè·³è½¬ï¼Œä¹Ÿæ²¡æœ‰æµ‹è¯•åµŒå¥—è·³è½¬ã€å¾ªç¯è·³è½¬ç­‰ç‰¹æ®Šæƒ…å†µ</li></ul></li></ol><h1 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h1><h2 id="å¿…çœ‹"><a href="#å¿…çœ‹" class="headerlink" title="å¿…çœ‹"></a>å¿…çœ‹</h2><div class="note note-info">            <p><strong>æ¯å¹´éƒ½æœ‰å¥†ä½¬å‘å¸ƒè¯„æµ‹æœºï¼Œå¤§å®¶å¤šå¤šå…³æ³¨</strong><br>è¿™é‡Œæä¾›å‡ ä¸ªå·¥å…·ï¼Œå¯¹äºæ‡’å¾—æŠ˜è…¾ä»¥åŠæ²¡æœ‰ç§‘å­¦ä¸Šç½‘å·¥å…·çš„åŒå­¦ï¼Œç›´æ¥ç‚¹å‡»ä¸‹é¢çš„é“¾æ¥ä¸‹è½½å³å¯ï¼Œç®€å•çš„é…ç½®æ–¹æ³•æˆ‘ä¼šè®²</p>          </div><p><a href="https://bhpan.buaa.edu.cn/link/AA9CBB652F65F647ECB6C5F5C44B4732E8">æˆ‘æ˜¯é“¾æ¥ï¼Œå¿«ç‚¹æˆ‘</a></p><h2 id="å·¥å…·"><a href="#å·¥å…·" class="headerlink" title="å·¥å…·"></a>å·¥å…·</h2><h3 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h3><p>ä¸€ä¸ªæ˜¯é­”æ”¹MARSï¼Œèƒ½ç›´æ¥è¾“å‡ºå¯„å­˜å™¨å’Œå†…å­˜çš„å†™å…¥æƒ…å†µï¼Œä¸<code>$display</code>ä¸€è‡´ï¼Œæ¥è‡ª<code>Toby-Shi</code>å­¦é•¿,<a href="https://github.com/Toby-Shi-cloud/Mars-with-BUAA-CO-extension">é“¾æ¥åœ¨è¿™é‡Œ</a></p><p>å¦ä¸€ä¸ªæ˜¯<code>logisimçš„debugå·¥å…·</code>ï¼Œä¸€ä¸ªæ˜¯æ¢é’ˆå¯ä»¥ç›´æ¥æ ¹æ®æŒ‡ä»¤ç æ˜¾ç¤ºå½“å‰çš„æŒ‡ä»¤è¯­è¨€ï¼Œå¦ä¸€ä¸ªå¯„å­˜å™¨å †å¯ä»¥ç›´æ¥æŸ¥çœ‹å„ä¸ªå¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹ã€‚</p><h3 id="é…ç½®æ–¹æ³•"><a href="#é…ç½®æ–¹æ³•" class="headerlink" title="é…ç½®æ–¹æ³•"></a>é…ç½®æ–¹æ³•</h3><h4 id="é­”æ”¹MARS"><a href="#é­”æ”¹MARS" class="headerlink" title="é­”æ”¹MARS"></a>é­”æ”¹MARS</h4><p><strong>æ³¨æ„</strong>åœ¨Settingsä¸‹å‹¾é€‰<code>Ignore Arithmetic Overflow</code>ä»¥åŠ<code>Output Log level 1</code>,å¹¶åœ¨<code>Memory Configuration</code>ä¸‹é€‰æ‹©<code>large text</code>ï¼Œè¿™æ ·å¯ä»¥ä¸€æ¬¡è¿è¡Œ4000å¤šè¡Œ<code>mips</code>ä»£ç (å¦‚æœç”¨ä¸åˆ°è¿™ä¹ˆå¤§çš„æµ‹è¯•æ•°æ®ä¹Ÿå¯ä»¥é€‰ç¬¬äºŒä¸ª)</p><h4 id="logisim-debugè¾…åŠ©å·¥å…·"><a href="#logisim-debugè¾…åŠ©å·¥å…·" class="headerlink" title="logisim debugè¾…åŠ©å·¥å…·"></a>logisim debugè¾…åŠ©å·¥å…·</h4><div class="note note-success">            <p>ä»¥ä¸‹å†…å®¹æ¥æºäºè®¨è®ºåŒºåŠ©æ•™å¸–å­</p><p><strong>å·¥å…·æ•´åˆ &amp;&amp; ä¸»é¢˜å¸–ä½œè€…ï¼šå¾ä¿Šè±ªåŠ©æ•™</strong></p>          </div><p>ä¸‹è½½å·¥å…·åŒ…ï¼Œç„¶ååœ¨ Logisim ä¸­ç‚¹å‡» Project - Load Library - JAR Libraryï¼Œé€‰æ‹©åˆšåˆšä¸‹è½½çš„ jar åŒ…ï¼Œå¦‚å›¾</p><p><img src="/../img_post/p3_8.png"></p><div class="note note-info">            <p>ç„¶ååœ¨å·¦ä¾§å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªå…ƒä»¶ï¼Œå…¶ä¸­å¯„å­˜å™¨å † <code>RegisterFile</code> æ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥ç›´æ¥çœ‹åˆ°å¯„å­˜å™¨çš„å€¼ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¯¹å¯„å­˜å™¨çš„å€¼è¿›è¡Œç¼–è¾‘ï¼ŒåŒå­¦ä»¬åœ¨è°ƒè¯•çš„æ—¶å€™å¯ä»¥ç”¨å®ƒæ›¿æ¢è‡ªå·±çš„å¯„å­˜å™¨å †æ¥æ–¹ä¾¿åœ°è§‚å¯Ÿå¯„å­˜å™¨çŠ¶æ€</p>          </div><p>ç«¯å£å®šä¹‰å¦‚ä¸‹ï¼š</p><ul><li>RA1: 5 ä½è¯»å¯„å­˜å™¨ç¼–å· 1</li><li>RA2: 5 ä½è¯»å¯„å­˜å™¨ç¼–å· 2</li><li>WA: 5 ä½å†™å¯„å­˜å™¨ç¼–å·</li><li>WD: 32 ä½å†™å…¥å€¼</li><li>WE: 1 ä½å†™ä½¿èƒ½</li><li>RD1: 32 ä½è¯»å‡ºå€¼ 1</li><li>RD2: 32 ä½è¯»å‡ºå€¼ 2</li><li>clkï¼ˆå›¾ä¸­æœªæ ‡å‡ºï¼Œä¸‰è§’å½¢é‚£ä¸ªï¼‰ï¼š1 ä½æ—¶é’Ÿä¿¡å·</li></ul><p><img src="/../img_post/p3_10.jpg"></p><div class="note note-info">            <p>Mips Probe æ•ˆæœå¦‚ä¸‹ï¼Œå¯ä»¥ç›´æ¥å°† 32 ä½ MIPS æœºå™¨ç ç¿»è¯‘ä¸ºæ±‡ç¼–æŒ‡ä»¤ï¼Œæ”¯æŒæœ¬è¯¾ç¨‹è¯¾ä¸‹ç”¨åˆ°çš„å…¨éƒ¨æŒ‡ä»¤åŠä¸€äº›å…¶å®ƒæŒ‡ä»¤ï¼ŒåŒå­¦ä»¬å¯ä»¥åœ¨è°ƒè¯•æ—¶ä½¿ç”¨æ¥æŸ¥çœ‹æœºå™¨ç å¯¹åº”çš„æ±‡ç¼–æŒ‡ä»¤</p>          </div><p><img src="/../img_post/p3_9.jpg"></p><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><div class="note note-danger">            <ul><li><strong>è¯¥å·¥å…·çš„å¯¼å…¥ä¼šå¯¼è‡´æµ‹è¯„é”™è¯¯ï¼ï¼ï¼å› æ­¤å¼ºçƒˆå»ºè®®å¤§å®¶å°†ç”µè·¯å¤åˆ¶ä¸€ä»½æ¥å¯¼å…¥ä¸Šè¿°åº“è¿›è¡Œè°ƒè¯•</strong></li><li><strong>è¯¾ä¸Šä¸ä¼šæä¾›è¯¥å·¥å…·</strong></li></ul>          </div>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P3è¯¾ä¸Š</title>
    <link href="/2024/11/01/P3%E8%AF%BE%E4%B8%8A/"/>
    <url>/2024/11/01/P3%E8%AF%BE%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P3è¯¾ä¸Šæµ‹è¯•çš„ç›¸å…³å†…å®¹<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><h1 id="å†™åœ¨å‰é¢"><a href="#å†™åœ¨å‰é¢" class="headerlink" title="å†™åœ¨å‰é¢"></a>å†™åœ¨å‰é¢</h1><p>å”‰å”‰ï¼ŒP3å°±æŒ‚äº†ï¼Œå½“å¤´ä¸€æ£’å•Š <span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span> ï¼ï¹ï¼œ</p><p>åˆšè¿‡P4è¯¾ä¸‹ï¼Œæƒ³ç€å†™ä¸€ç¯‡åšå®¢æ¥è®°å½•ä¸‹æŒ‚P3çš„æ„Ÿå—ä»¥åŠä¸€äº›è¡€ä¸æ³ªçš„ç»éªŒæ•™è®­ï¼Œå¸Œæœ›<code>generations to come</code> ä¸è¦é‡è¹ˆè¦†è¾™å‘€ <span class="github-emoji" alias="sweat_smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8">&#x1f605;</span></p><p>ä¸è¿‡ç¡®å®P3è¯¾ä¸Šæœ‰ä¸€å®šçš„å‹åŠ›ï¼Œæœ€åå»¶é•¿äº†åŠå°æ—¶ï¼Œä¸è¿‡æœ¬äººå€’æ˜¯ä¸€é¢˜æ²¡è¿‡ï¼Œèœåˆ°å®¶äº†ğŸ˜­ï¼Œæƒ³çœ‹è¯¾ä¸Šå¿ƒè·¯å†ç¨‹ï¼ˆç¬¬ä¸€è§†è§’ç ´é˜²ï¼‰çš„ç›´æ¥è·³è½¬åé¢å³å¯</p><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><h2 id="CWP"><a href="#CWP" class="headerlink" title="CWP"></a>CWP</h2><p>æŒ‡ä»¤æ ¼å¼ä¸ºCWP rs, rt, Imm_16</p><p>å¤§è‡´æ˜¯è¯´è¦å°†<code>Imm_16</code>ç¬¦å·æ‰©å±•åå·¦ç§»ä¸¤ä½ä¸å½“å‰PCå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ<code>Imm_16</code>å¤§äºPCï¼Œåˆ™å°†<strong>åŸæ¥çš„</strong><code>Imm_16</code>å­˜åˆ°rs,å¦åˆ™å­˜åˆ°rtï¼ˆä¹Ÿå¯èƒ½åè¿‡æ¥ï¼Œä¸å¤ªè®°å¾—äº†ï¼‰</p><p>è®©æˆ‘ä»¬æ¥æ€è€ƒæœ¬é¢˜ä¸­å“ªäº›åœ°æ–¹éœ€è¦æ›´æ”¹ï¼Œé¦–å…ˆæ˜¯ALUæ¨¡å—çš„ç¬¬ä¸€ä¸ªè¾“å…¥inAå‰åŠ ä¸€ä¸ªå¤šè·¯é€‰æ‹©å™¨ï¼Œè¦æŠŠPCä½œä¸ºè¾“å…¥ï¼ŒåŒæ—¶GRFæ¨¡å—çš„å†™å…¥åœ°å€å’Œå†™å…¥æ•°æ®å‡éœ€è¦åŠ ä¸€ä¸ªå¤šè·¯é€‰æ‹©å™¨ã€‚å› ä¸ºä¹‹å‰è¯¾ä¸‹çš„æŒ‡ä»¤å‡ä¸æ¶‰åŠå¯¹rså¯„å­˜å™¨çš„å†™å…¥ï¼Œæ‰€ä»¥å†™å…¥åœ°å€å‰å¾—åŠ ã€‚æ•´ä½“æ€è·¯æ²¡ä»€ä¹ˆå›°éš¾ï¼Œä½†æ˜¯å¦‚æœä½ ä¹‹å‰æ²¡æœ‰é¢„ç•™æ¥å£ï¼Œä»¥åŠLogiismç”µè·¯å¾ˆç´§å‡‘çš„è¯ï¼Œä½ å¯èƒ½ä¼šæ”¹çš„æ¯”è¾ƒåƒåŠ›ï¼Œåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ QAQ</p><p>è‡³äºåˆ¤æ–­æ¡ä»¶çš„è¯ï¼Œå¯ä»¥åœ¨ALUé‡Œå®ç°å¹¶ä¸”æ²¿ç”¨ä¹‹å‰beqçš„zeroç«¯å£ï¼Œå½“ç„¶å¯¹äºæœ¬æŒ‡ä»¤ï¼Œéœ€è¦åœ¨Controlleræ¨¡å—æ–°åŠ ä¸€ä¸ªè¾“å‡ºä¿¡å·ã€‚</p><h2 id="BGC"><a href="#BGC" class="headerlink" title="BGC"></a>BGC</h2><p>æŒ‡ä»¤æ ¼å¼ä¸ºBGC rs, rt, Imm_16</p><p>å¤§è‡´æ˜¯è¯´å°†GR[rs]å’ŒGRF[rt] 32ä½çš„æ¯ä¸¤ä½è½¬æ¢ä¸ºå¯¹åº”çš„æ ¼é›·ç ï¼Œå¹¶æ¯”è¾ƒäºŒè€…è½¬æ¢åçš„32ä½æ•°ä¸­ 1 çš„ä¸ªæ•°ï¼Œå¦‚æœä¸€ä¸ªå¤§äºå¦ä¸€ä¸ªï¼Œåˆ™æŒ‰ç…§<code>offset_16</code>è·³è½¬</p><p>æ ¼é›·ç è½¬æ¢ï¼š00-0001-0110-1111-10</p><p>å¦‚æœæ²¡ä»€ä¹ˆæ€è·¯å¯ä»¥è®¾è®¡ä¸€ä¸ª2bitçš„æ ¼é›·ç è½¬æ¢ç¨‹åºï¼Œå†æš´åŠ›è§£å†³ï¼Œæœ€ååˆ«å¿˜äº†<code>bit adder</code>è¿™ä¸ªå…ƒä»¶ï¼Œå¯ä»¥ç›´æ¥ç»Ÿè®¡å…¶ä¸­1çš„ä¸ªæ•°</p><p>å½“ç„¶ï¼Œå¯ä»¥å‘ç°ï¼Œæ ¼é›·ç è½¬æ¢å…¶å®å°±æ˜¯ï¼š<strong>é€»è¾‘å³ç§»ä¸€ä½å†ä¸åŸæ•°å¼‚æˆ–</strong>ï¼Œå…¶å®ç›´æ¥çœŸå€¼è¡¨æ‰“è¡¨ä¹ŸæŒºå®¹æ˜“</p><p>å¤ç”¨beqçš„è·³è½¬å³å¯ï¼Œ<strong>æ³¨æ„å¯¹è·³è½¬ä¿¡å·çš„åˆ¤æ–­</strong></p><h2 id="LWSO"><a href="#LWSO" class="headerlink" title="LWSO"></a>LWSO</h2><p>æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘è¯¾ä¸Šæ²¡æƒ³ï¼Œï¼Œè¯·ç§»æ­¥å…¶ä»–å¤§ä½¬çš„åšå®¢ (âÂ´â—¡&#96;â)</p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é’ˆå¯¹æˆ‘è¯¾ä¸Šå‡ºçš„é—®é¢˜ä»¥åŠè¯¾ä¸‹æ¥å‘ç°çš„é—®é¢˜åŠåæ€ï¼Œæ€»ç»“äº†å‡ ç‚¹ä¾›åæ¥çš„å­¦å¼Ÿå­¦å¦¹å€Ÿé‰´ï¼Œå¸Œæœ›ä½ ä»¬ä¸è¦é‡è¹ˆè¦†è¾™äº†<span class="github-emoji" alias="sunglasses" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60e.png?v8">&#x1f60e;</span></p><ul><li>è¯¾ä¸‹å……åˆ†æµ‹è¯•ï¼Œä¸åŒå­¦å¯¹æ‹ï¼Œä¿è¯ä¸ç•™bug</li><li>é¢„ç•™æ¥å£ç»™æ–°çš„æŒ‡ä»¤å’Œæ–°çš„ä¿¡å·ï¼Œæ¯”å¦‚ç›´æ¥æ·»åŠ ä¸€ä¸ªNewä¿¡å·åœ¨è¯¾ä¸‹çš„Controlleré‡Œé¢ï¼Œä½†å…ˆä¸è¿æ¥</li><li>æ¨¡å—é—´ï¼Œç«¯å£å¤„ï¼Œç•™å‡ºé€‚å½“çš„è·ç¦»ï¼Œä¸è¦åƒæˆ‘ä¸€æ ·åŠ MUXæ—¶æ‰‹å¿™è„šä¹±ï¼Œä¸€ä¸ªåé¢ä¾‹å­å¦‚ä¸‹ï¼š<img src="/../img_post/p3_1.png"></li><li><strong>è¯¾ç¨‹ç»„è¦æ±‚è¾“å‡ºçš„é‚£äº›ä¸ªä¿¡å·å¯¹åº”çš„Tunnelï¼Œä¸€å®šè¦æ£€æŸ¥æ˜¯å¦æ˜¯æœ€ç»ˆçš„æ­£ç¡®ä¿¡å·ï¼Œ</strong>ä¸è¦åœ¨Tunnelå’Œç«¯å£é—´æ›´æ”¹ä¿¡å·ï¼Œè¿™æ ·ä¼šå¯¼è‡´æœ¬åœ°è¿è¡Œæ­£ç¡®ä½†è¾“å‡ºé”™è¯¯ï¼Œå¾ˆéš¾debug,å› ä¸ºè¯¾ç¨‹ç»„ä¸ºäº†è¯„æµ‹ï¼Œä¼šè®©ä½ æŠŠç›¸å…³ä¿¡å·è¾“å‡ºå‡ºå»ï¼Œåƒè¿™æ ·ï¼š<img src="/../img_post/p3_2.png"></li><li>å¦‚æœä½ åƒä¸Šé¢è¯´çš„é‚£æ ·åšäº†ï¼Œä¼šå‡ºé—®é¢˜ï¼Œ<strong>å…·ä½“æƒ…å†µ</strong>è§æˆ‘çš„å¿ƒè·¯å†ç¨‹-ç¬¬äºŒå¤©éƒ¨åˆ†debugå‘ç°çš„æ¯›ç—…ï¼Œåæ¥å‘ç°ä¸å°‘åŒå­¦éƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¸Œæœ›åæ¥äººèƒ½å¤Ÿå¼•ä»¥ä¸ºæˆ’ï¼Œè¿™éƒ½æ˜¯å­¦é•¿å­¦å§äº²è‡ªè¸©çš„å‘å•Š Îµ&#x3D;(Â´Î¿ï½€*)))å”‰<br><strong>åé¢æ•™æ</strong>å¦‚ä¸‹ï¼š<img src="/../img_post/p3_0.png"><br><strong>æœ€åï¼Œå¦‚æœä½ å¯¹æˆ‘å‡ºçš„bugæ„Ÿå…´è¶£å¹¶ä¸”æƒ³çŸ¥é“æˆ‘è¯¾ä¸Šæœ‰å¤šéš¾å—çš„è¯ï¼Œè¯·æ¥ç€å¾€ä¸‹çœ‹</strong></li></ul><h1 id="å¿ƒè·¯å†ç¨‹"><a href="#å¿ƒè·¯å†ç¨‹" class="headerlink" title="å¿ƒè·¯å†ç¨‹"></a>å¿ƒè·¯å†ç¨‹</h1><h2 id="è¯¾ä¸Š"><a href="#è¯¾ä¸Š" class="headerlink" title="è¯¾ä¸Š"></a>è¯¾ä¸Š</h2><p>ä½ èƒ½çŸ¥é“æˆ‘T1è°ƒäº†åŠå¤©ï¼Œæœ¬åœ°å„ç§æµ‹è¯•å„ç§æ²¡é—®é¢˜ï¼ŒåŠ ä¸Šå»æ­»æ´»ä¸å¯¹çš„æ„Ÿå—å˜›<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span>éº»çƒ¦çš„æ˜¯ï¼Œè¯„æµ‹æœºå¹¶ä¸ä¼šåœ¨å‡ºé”™çš„åœ°æ–¹ç«‹é©¬æŠ¥é”™ï¼Œè€Œæ˜¯ä¼šåœ¨åé¢å‡ æ¡æŒ‡ä»¤çš„æŸä¸€æ¡æŠ¥é”™ï¼Œè€Œæˆ‘çš„åˆ™æ˜¯ä¸€æ¡lwæŒ‡ä»¤ã€‚å½“æ—¶ç¿»è¯‘å‡ºæ¥äººéƒ½è’™äº†ï¼Œæˆ‘è¯¾ä¸‹æµ‹è¯•äº†é‚£ä¹ˆå¤šæ•°æ®ï¼Œæ€ä¹ˆèƒ½æœ‰é—®é¢˜å‘¢ï¼Ÿè€Œä¸”æˆ‘è£¸äº¤ä¸€å‘å¯¹äº†2ä¸ªç‚¹ï¼Œæ²¡é—®é¢˜å‘€ï¼Œäºæ˜¯æˆ‘è¿”å›å»æ£€æŸ¥è¯¾ä¸Šçš„é€šè·¯ï¼Œä¸€é€šæµ‹è¯•ä¸‹æ¥ï¼Œæ‰¾ä¸å‡ºä»»ä½•é—®é¢˜ï¼Œå„ç§æ•°æ®éƒ½æµ‹å®Œäº†ï¼Œæˆ‘å·²ç»ç­‹ç–²åŠ›ç«­äº†ï¼Œæ­¤æ—¶å·²å¿«åˆ°8ç‚¹ï¼Œè€Œæˆ‘ç¬¬ä¸€é¢˜è¿˜æ²¡è¿‡ï¼Œï¼Œçœ‹çœ‹å‘¨å›´çš„åŒå­¦ï¼Œæˆ‘çŸ¥é“ï¼Œè¿™æ¬¡æœ‰ç‚¹æ‚¬ï¼›äºæ˜¯æˆ‘æ£€æŸ¥è¯¾ä¸‹å»äº†ï¼Œæ£€æŸ¥ä¸€ç•ªåˆæ£€æŸ¥æµ‹è¯•è¯¾ä¸Šï¼Œåœ¨è¿™æ ·çš„åå¤ä¸­è¿·å¤±äº†è‡ªæˆ‘ï¼Œåˆè¿‡äº†15minï¼Œè¿™ä¸‹æˆ‘å½»åº•æ…Œç¥äº†ï¼Œæœ¬åœ°æµ‹è¯•æ²¡æœ‰é—®é¢˜å•Šï¼Œäº¤ä¸Šå»å°±æ˜¯ä¸å¯¹ï¼Œèƒ½æœ‰ä»€ä¹ˆåŠæ³•å‘¢ï¼Ÿä¸çŸ¥é“æœ‰æ²¡æœ‰äººèƒ½æ„Ÿå—åˆ°æˆ‘çš„ç»æœ›â‰¡(â–”ï¹â–”)â‰¡</p><p>äºæ˜¯ï¼Œæˆ‘è¯šæƒ¶è¯šæåœ°æ‰“å¼€äº†ç¬¬äºŒé¢˜ï¼Œä¸€çœ‹æ„Ÿè§‰ç›´æ¥å°†32ä½æ¯ä¸¤ä½è½¬æ¢ä¸ºæ ¼é›·ç ï¼Œå¥½éº»çƒ¦ï¼Œä¹Ÿä¸æƒ³æ–°å»ºæ¨¡å—ï¼Œäºæ˜¯å¼€å§‹å†¥æ€è‹¦æƒ³ï¼Œè¯•å›¾æ‰“å¼€ä»€ä¹ˆæ–°æ€è·¯ï¼ŒæœŸé—´è¿˜ç„äº†ä¸€çœ¼ç¬¬ä¸‰é¢˜ï¼Œæ„Ÿè§‰å¾ˆå¤æ‚ï¼Œä¸€çœ‹å°±ä¸æƒ³åšã€‚</p><p>ç»ˆäºåˆ°äº†8ç‚¹åŠï¼Œä¸€äº‹æ— æˆçš„æˆ‘å†³å®šå¼€å§‹æ‘†çƒ‚ï¼Œæ€è€ƒäººç”Ÿï¼Œæˆ‘è¶´åœ¨æ¡Œä¸Šï¼Œè„‘å­æƒ³çš„ä»€ä¹ˆå‘¢ï¼Ÿ<span class="github-emoji" alias="thinking" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f914.png?v8">&#x1f914;</span>æ˜¯ä»Preä»¥æ¥çš„æŠ«è†æ–©æ£˜å—ï¼Ÿæ˜¯P3è¯¾ä¸‹æµ‹è¯•å¯¹æ‹çš„æ¬¢ä¹å—ï¼Ÿæ˜¯æ ¡åº†æ—¶åœ¨æ‘Šä½ä¸Šç©æ¸¸æˆçš„æ¿€æƒ…å—ï¼Ÿè¿˜æ˜¯æ¥6ç³»å……å®ç¹å¿™çš„æ¯ä¸€å¤©å‘¢ï¼Ÿæˆ‘ä¸çŸ¥é“ï¼Œæˆ‘çš„è„‘å­ä¸€ç‰‡ç©ºç™½ã€‚æœŸé—´è¿˜çœ‹åˆ°zlråŠ©æ•™ggçœ‹äº†ä¸€çœ¼æˆ‘ï¼Œåˆçœ‹äº†ä¸€çœ¼å¹³æ¿ï¼Œä¸çŸ¥é“ä»–åˆå¯¹æˆ‘æœ‰ä½•æ„Ÿæƒ³å‘¢ï¼Ÿ</p><p>æ—¶é—´å¾ˆå¿«æ¥åˆ°äº†8.58ï¼Œæˆ‘ä¸€çœ‹ï¼Œå¤§éƒ¨åˆ†äººè·Ÿæˆ‘ä¸€æ ·ï¼Œè¢«ç¡¬æ§åœ¨äº†æ–°åŒ—åœ°ä¸‹çš„æœºæˆ¿é‡Œï¼Œåªæœ‰å°‘æ•°å¯¥å¯¥çš„å‡ ä¸ªåº§ä½æ˜¯ç©ºçš„ï¼Œè¯´å®è¯ï¼Œæˆ‘çš„å¿ƒé‡Œç«Ÿç„¶æ„Ÿåˆ°ä¸€ä¸æ…°è—‰ï¼Œè¿˜æœ‰è¿™ä¹ˆå¤šäººä¹Ÿæ²¡è¿‡å•Šï¼ˆbuhsi)</p><p>ä½†æ˜¯ï¼Œè€ƒè¯•å»¶è¿Ÿäº†åŠå°æ—¶ï¼ŒæœŸé—´æœ‰ä¸€éƒ¨åˆ†äººåšå‡ºæ¥äº†èµ°äº†ï¼Œä¹Ÿæœ‰ä¸€äº›äººåƒæˆ‘ä¸€æ ·ç•™åˆ°äº†æœ€åï¼Œä¹ç‚¹åŠèµ°å‡ºæœºæˆ¿ï¼Œçœ‹åˆ°åŒè¡Œçš„äººä¹Ÿæ˜¯å‚å¤´ä¸§æ°”ï¼Œå¤§å®¶å¿ƒé‡Œéƒ½å¾ˆä¸æ˜¯æ»‹å‘³<span class="github-emoji" alias="upside_down_face" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f643.png?v8">&#x1f643;</span></p><h2 id="ç¬¬äºŒå¤©"><a href="#ç¬¬äºŒå¤©" class="headerlink" title="ç¬¬äºŒå¤©"></a>ç¬¬äºŒå¤©</h2><p>å›åˆ°å¯å®¤åï¼Œæˆ‘æœ›ç€è¯¾ä¸‹çš„ç”µè·¯ï¼Œè„‘å­é‡Œä¸€ç‰‡èŒ«ç„¶ï¼Œä¸€ç§æ— åŠ›æ„Ÿè£¹æŒŸç€æˆ‘ï¼Œè®©æˆ‘è¯´ä¸å‡ºè¯æ¥ï¼ŒæœŸé—´çœ‹äº†ç´«ç‰å“¥å“¥çš„é¢˜è§£ï¼Œä¹Ÿçœ‹äº†æ°´ç¾¤é‡Œå¤§ä¼™çš„è®¨è®ºï¼Œè¿˜æ‰¾äº²çˆ±çš„åŠ©æ•™zjyggå€¾è¯‰äº†ä¸€ç•ªï¼Œä½†å¿ƒé‡Œä¾æ—§éš¾è¿‡ã€‚</p><p>ä¸ŠåºŠåï¼Œå¾ˆå¿«ç¡ç€äº†ï¼Œç¬¬äºŒå¤©ç‰©ç†è¯¾ï¼Œæˆ‘å’Œvachï¼ˆå®¤å‹ï¼‰ååœ¨ä¸€èµ·ï¼Œè°ˆè®ºç€P3ï¼Œæ‰å‘ç°ä»–ä¹Ÿæ²¡è¿‡ï¼Œå·ç¬‘</p><p><span class="github-emoji" alias="nerd_face" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f913.png?v8">&#x1f913;</span> ,æˆ‘æ‰“å¼€P3è¯¾ä¸‹ï¼Œå‡†å¤‡é‡æ„ä¸€ç•ªï¼Œæ¯•ç«Ÿè¯¾ä¸ŠåŠ é€šè·¯åŠ çš„éš¾å—ï¼Œå°±åœ¨æˆ‘ç»™GRFçš„å†™å…¥åœ°å€åŠ ä¸€ä¸ªæ ‡ç­¾çš„æ—¶å€™ï¼Œæˆ‘<strong>çŒ›åœ°æ„è¯†åˆ°äº†è‡ªå·±çš„è¯¾ä¸Šbug</strong>ï¼Œè§ä¸‹å›¾</p><p><img src="/../img_post/p3_0.png"></p><p>æˆ‘è¯¾ä¸Šæ˜¯ç›´æ¥æŠŠå¤šè·¯é€‰æ‹©å™¨åŠ åœ¨äº†çº¢è‰²ä½ç½®ï¼Œä½†æ˜¯æˆ‘çš„<strong>å¯„å­˜å™¨å†™å…¥åœ°å€çš„<code>Tunnel</code>è¿˜æ˜¯æ¥åœ¨äº†åŸæ¥çš„è“è‰²ä½ç½®</strong>ï¼Œä¹Ÿå°±å¯¼è‡´äº†è¾“å‡ºåœ°å€çš„é—®é¢˜ã€‚æ›´ææ€–çš„æ˜¯ï¼Œæˆ‘è¯¾ä¸Šdebugæ˜¯ç›´æ¥æ¥äº†probeåœ¨GRFçš„WAå‰é¢ï¼Œå®Œå…¨æ²¡æœ‰ç®¡Reg_Addrçš„è¾“å‡ºé—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘æœ¬åœ°æµ‹è¯•æ¯«æ— é—®é¢˜ï¼Œäº¤ä¸Šå»æŠ¥é”™å¥‡å¥‡æ€ªæ€ªçš„åŸå› ï¼Œå“<span class="github-emoji" alias="scream" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f631.png?v8">&#x1f631;</span></p><p>åˆ°è¿™é‡Œï¼Œæˆ‘çœŸæƒ³ç©¿è¶Šå›å»è¯¾ä¸Šæ”¹æ‰è¿™ä¸ªbug,ä½†æ—¶é—´æ— æ³•å€’æµï¼Œå“ã€‚é‚£ä¸ªæ—¶åˆ»ï¼Œæˆ‘çœŸæ­£çŸ¥é“äº†ä»€ä¹ˆå«<strong>æ¬²å“­æ— æ³ª</strong></p><p>ä¸­åˆå»ç»™ç©ºå¤©æ¯ç¯®çƒèµ›å½“å¿—æ„¿è€…ï¼Œè®°åˆ†å‘˜ï¼Œæ²‰æµ¸åœ¨äº†æ¯”èµ›é‡Œï¼Œå¿˜æ‰äº†æ˜¨æ™šçš„æ‚²ç—›ï¼Œä¹Ÿæ„Ÿè°¢è¿™ä¸ªå¿—æ„¿æ´»åŠ¨ï¼Œè®©æˆ‘æˆåŠŸèµ°äº†å‡ºæ¥ï¼Œ<strong>å¿˜æ‰çƒ¦æ¼ï¼Œç¬‘å¯¹ç”Ÿæ´»</strong><span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span></p>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Logisim</tag>
      
      <tag>CPU</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P2è¯¾ä¸Š</title>
    <link href="/2024/10/22/P2%E8%AF%BE%E4%B8%8A/"/>
    <url>/2024/10/22/P2%E8%AF%BE%E4%B8%8A/</url>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>é€šè¿‡é˜…è¯»æœ¬æ–‡ï¼Œä½ å¯ä»¥å¤§è‡´äº†è§£BUAA 2024ç§‹å­£ P2è¯¾ä¸Šæµ‹è¯•çš„ç›¸å…³å†…å®¹<br>æœ¬æ¬¡ä¸»è¦è€ƒå¯ŸMIPSæ±‡ç¼–ï¼Œç¬¬ä¸€é¢˜å¾ˆeasyï¼ŒäºŒä¸‰é¢˜éƒ½ç»™äº†Cä»£ç ï¼Œç›´æ¥ç¿»è¯‘å³å¯ã€‚<br>é¢˜ç›®æ¯å¹´éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œé¢˜é¢ä»…é å›å¿†ï¼Œé¢˜æ„æè¿°å¯èƒ½ä¸åŸé¢˜æœ‰ä¸€å®šå·®å¼‚</p>          </div><h1 id="P2-Q1ï¼ˆMooncake"><a href="#P2-Q1ï¼ˆMooncake" class="headerlink" title="P2_Q1ï¼ˆMooncake)"></a>P2_Q1ï¼ˆMooncake)</h1><h2 id="å¤§æ„"><a href="#å¤§æ„" class="headerlink" title="å¤§æ„"></a>å¤§æ„</h2><p>ä¸­ç§‹ä¹‹é™…ï¼Œå°ç­é•¿ä¸ºåŒå­¦ä»¬æ¬æœˆé¥¼ã€‚å°ç­ N ä¸ªäººï¼Œæœ€å°‘æ¬ L ä¸ªæœˆé¥¼ï¼Œ æœ€å¤šæ¬ R ä¸ªæœˆé¥¼ã€‚æ¬æ¥æœˆé¥¼åï¼Œæ¯äººæ‹¿ä¸€ä¸ªï¼Œç›´åˆ°å‰©ä¸‹çš„æ•°é‡ &lt; Nï¼Œå¹¶å°†å‰©ä¸‹çš„æœˆé¥¼è¿˜å›å»ã€‚è¦å®ç°æ¯ä¸ªäººæ‹¿åˆ°å°½å¯èƒ½å¤šçš„æœˆé¥¼ï¼Œå¹¶å‡å°‘è¿˜å›å»çš„è´Ÿæ‹…ï¼Œè¯·ä½ è®¡ç®—æ‹¿å¤šå°‘ä¸ªæœˆé¥¼ ï¼ˆç”¨Kè¡¨ç¤ºï¼‰åˆé€‚ï¼Œè¾“å‡ºæ¯ä¸ªäºº<strong>æ‹¿å®Œå‰©ä¸‹çš„</strong>æœˆé¥¼æ•°ã€‚</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>çº¯æ•°å­¦é¢˜ï¼Œè¯»æ‡‚é¢˜æ„åï¼Œç›´æ¥ç”¨ R &#x2F; Nï¼Œå†å°†ç»“æœä¹˜ N ï¼Œç»“æœç”¨ x è¡¨ç¤ºï¼Œé‚£ä¹ˆæ­¤æ—¶ x å°±æ˜¯ä¿è¯æ¯ä¸ªäººæ‹¿åˆ°å°½å¯èƒ½å¤šçš„æœˆé¥¼çš„æ€»æœˆé¥¼æ•°ï¼Œä¾‹å¦‚ï¼šn &#x3D; 10, R &#x3D; 36ï¼Œåˆ™x&#x3D;30ã€‚æ­¤æ—¶ä¾¿å¾—åˆ°äº†ç†æƒ³æƒ…å†µä¸‹æ‹¿çš„æœˆé¥¼æ•°Kï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªæœ€å°å€¼ L é™åˆ¶ï¼Œå¹¶æ³¨æ„è¦è¾“å‡ºåŒå­¦ä»¬æ‹¿å‰©ä¸‹çš„æœˆé¥¼æ•°ï¼Œè€Œä¸æ˜¯Kï¼Œæ•…ç›´æ¥è¾“å‡º x &lt; L ? L-x : 0ã€‚ç„¶åç¿»è¯‘ã€‚</p><h1 id="P2-Q2"><a href="#P2-Q2" class="headerlink" title="P2_Q2"></a>P2_Q2</h1><h2 id="å¤§æ„-1"><a href="#å¤§æ„-1" class="headerlink" title="å¤§æ„"></a>å¤§æ„</h2><p>åˆ©ç”¨æ¬§æ‹‰ç­›åˆ¤æ–­ä¸€ä¸ªè¾“å…¥çš„æ•°næ˜¯å¦ä¸ºè´¨æ•°ã€‚å¤§ä½¬ä»¬è¯´ä»£ç ç»™çš„æ˜¯æ¬§å¼ç­›ï¼Œæˆ‘ä¸å¤ªæ‡‚ï¼ˆé€ƒï¼‰<span class="github-emoji" alias="sob" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f62d.png?v8">&#x1f62d;</span></p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æ²¡æœ‰æ€è·¯ï¼Œå¯¹ç€Cä»£ç ç¿»è¯‘å³å¯ï¼Œä¹Ÿæ²¡æœ‰å‡½æ•°ï¼Œæ— éœ€ç»´æŠ¤å˜é‡ï¼Œç»†å¿ƒç‚¹ï¼Œé—®é¢˜ä¸å¤§<span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span></p><h1 id="P3-Q3"><a href="#P3-Q3" class="headerlink" title="P3_Q3"></a>P3_Q3</h1><h2 id="å¤§æ„-2"><a href="#å¤§æ„-2" class="headerlink" title="å¤§æ„"></a>å¤§æ„</h2><p>è¿™é“é¢˜é¢˜é¢å¾ˆé•¿ï¼Œæœ‰ç‚¹éº»çƒ¦ï¼Œæˆ‘æ²¡çœ‹ï¼Œæ—¢ç„¶ç»™äº†Cä»£ç ï¼Œ<del>ç›´æ¥è‚‰ç¼–å°±å¥½äº†</del> ğŸ˜</p><p>å¬åˆ«äººè¯´æ˜¯è¾“å‡ºåœ¨ä¸€ä¸ªæœ‰å‘å›¾ä¸­ä»ç»™å®šå‡ºå‘ç‚¹å‡ºå‘å¯åˆ°è¾¾çš„å‡ºåº¦ä¸º0çš„ç‚¹çš„ä¸ªæ•°ï¼Œå‡å¦‚å‡ºå‘ç‚¹å‡ºåº¦ä¸º0åˆ™ç›´æ¥è¾“å‡º0</p><h2 id="æ€è·¯-2"><a href="#æ€è·¯-2" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>ç›´æ¥å¯¹ç€è‚‰ç¼–ï¼Œç„¶åå¯ä»¥<strong>å°è£…</strong>å‡ ä¸ªå¸¸ç”¨çš„å‡½æ•°ä¸ºå®ï¼Œæ¯”å¦‚<code>getInt</code> <code>putInt</code> <code>getIndex</code> <code>exit</code> â€¦â€¦ï¼ˆè¿™å‡ ä¸ªå®å¾ˆå¸¸ç”¨ï¼Œ<del>ç”šè‡³å¯ä»¥å¼€è€ƒå‰æ•²ä¸Šå»</del>ï¼‰ä½¿ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ï¼Œä¹Ÿåˆ©äºæ•´ä½“ä»£ç çš„ç¾è§‚ä¸è°ƒè¯•ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œ<strong>å°½é‡é¿å…åœ¨å®ä¸­ä½¿ç”¨å¯„å­˜å™¨</strong>ï¼Œä»¥æ­¤æ¥é¿å…å¯èƒ½çš„éº»çƒ¦ï¼Œé™¤éè¿«ä¸å¾—å·²ï¼ˆå¦‚$a0, $v0ç­‰ï¼‰,å¦‚æœä½¿ç”¨äº†å¯„å­˜å™¨ï¼Œéœ€<strong>æ³¨æ„ä¸Šä¸‹æ–‡</strong>æœ‰æ— å¯¹å¯„å­˜å™¨å€¼çš„ç»´æŠ¤æˆ–è€…å‹æ ¹è¿™ä¸ªå¯„å­˜å™¨å°±æ˜¯éšæ‰‹ç”¨éšæ‰‹èµ‹å€¼çš„ï¼ˆè¿™æ ·å¹¶ä¸è¢«æå€¡ï¼‰ã€‚</p><p>å¯¹äºæœ¬é¢˜ï¼Œæ¯æ¬¡é€’å½’å‰åï¼Œç»´æŠ¤å¥½ <code>$ra</code> å¯„å­˜å™¨ä»¥åŠ<code>u</code> <code>i</code> çš„å€¼å³å¯ï¼Œå»ºè®®ç¼–å†™ã€è°ƒç”¨å®<code>push</code> <code>pop</code></p><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæœ¬æ¬¡Q3æ¥è‡ªæˆ‘ä»¬äº²çˆ±çš„åŠ©æ•™ zygg ï¼Œä¸Šæ¬¡ä¸Šæœºåæˆ‘è¿˜é—®è¿‡ä»–è°å‡ºé¢˜è¿™ä¸ªäº‹æ¥ç€ï¼ˆ<del>æœªç»</del>ï¼‰<span class="github-emoji" alias="laughing" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8">&#x1f606;</span>,ä»–è·Ÿæˆ‘è¯´ä½ ä¸‹æ¬¡ä¸Šæœºå°±èƒ½åˆè§ç«¯å€ªäº†ã€‚</p><p>P2ä¹‹åå°±æ˜¯P3â€”â€”å•å‘¨æœŸCPUçš„logisimå®ç°äº†ï¼ŒåŠ æ²¹ï¼</p>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>mips</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>çƒ­åŠ›å­¦åŸºç¡€å¤ä¹ </title>
    <link href="/2024/10/20/%E7%83%AD%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80%E5%A4%8D%E4%B9%A0/"/>
    <url>/2024/10/20/%E7%83%AD%E5%8A%9B%E5%AD%A6%E5%9F%BA%E7%A1%80%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="åŸºæœ¬å®šä¹‰"><a href="#åŸºæœ¬å®šä¹‰" class="headerlink" title="åŸºæœ¬å®šä¹‰"></a>åŸºæœ¬å®šä¹‰</h1><h2 id="çƒ­åŠ›å­¦ç¬¬é›¶å®šå¾‹"><a href="#çƒ­åŠ›å­¦ç¬¬é›¶å®šå¾‹" class="headerlink" title="çƒ­åŠ›å­¦ç¬¬é›¶å®šå¾‹"></a>çƒ­åŠ›å­¦ç¬¬é›¶å®šå¾‹</h2><ul><li>å†…å®¹ï¼šå¦‚æœä¸¤ä¸ªç‰©ä½“éƒ½ä¸å¤„äºç¡®å®šçŠ¶æ€çš„ç¬¬ä¸‰ç‰©ä½“å¤„äºçƒ­å¹³è¡¡ï¼Œåˆ™è¯¥ä¸¤ä¸ªç‰©ä½“å½¼æ­¤å¤„äºçƒ­å¹³è¡¡</li><li>å®è§‚æ€§è´¨ï¼šå¤„äºåŒä¸€çƒ­å¹³è¡¡çŠ¶æ€çš„æ‰€æœ‰ç‰©ä½“éƒ½å…·æœ‰<strong>å…±åŒ</strong>çš„å®è§‚æ€§è´¨ï¼Œæˆ‘ä»¬ç”¨<strong>æ¸©åº¦</strong>æ¥è¡¨å¾è¿™ä¸€å®è§‚æ€§è´¨</li></ul><h2 id="çƒ­åŠ›å­¦è¿‡ç¨‹"><a href="#çƒ­åŠ›å­¦è¿‡ç¨‹" class="headerlink" title="çƒ­åŠ›å­¦è¿‡ç¨‹"></a>çƒ­åŠ›å­¦è¿‡ç¨‹</h2><ul><li>ç³»ç»Ÿï¼šåœ¨çƒ­åŠ›å­¦ä¸­ï¼ŒæŠŠæ‰€ç ”ç©¶çš„ç‰©ä½“æˆ–ç‰©ä½“ç»„å«åšçƒ­åŠ›å­¦ç³»ç»Ÿ(thermodynamic system),ç®€ç§°ç³»ç»Ÿ(system)</li><li>å‡†é™æ€è¿‡ç¨‹ï¼šå‡†é™æ€è¿‡ç¨‹æ˜¯æ— é™ç¼“æ…¢çš„çŠ¶æ€å˜åŒ–è¿‡ç¨‹ï¼Œåœ¨è¿‡ç¨‹è¿›è¡Œçš„æ¯ä¸€ æ­¥ç¡®ä¿ç³»ç»Ÿçš„çŠ¶æ€å‡<strong>å¯è§†ä¸ºå¹³è¡¡æ€</strong></li><li>çƒ­åŠ›å­¦çš„ç ”ç©¶æ˜¯<strong>ä»¥å‡†é™æ€è¿‡ç¨‹çš„ç ”ç©¶ä¸ºåŸºç¡€</strong>çš„</li></ul><h2 id="åŠŸ-èƒ½é‡-å†…èƒ½"><a href="#åŠŸ-èƒ½é‡-å†…èƒ½" class="headerlink" title="åŠŸ   èƒ½é‡   å†…èƒ½"></a>åŠŸ   èƒ½é‡   å†…èƒ½</h2><ul><li>å¼•å…¥ï¼š<br><img src="/../img_post/physics_1.png"><br>è®¾æœ‰ä¸€æ°”ç¼¸ï¼Œå…¶ä¸­æ°”ä½“çš„å‹å¼ºä¸ºp, æ´»å¡çš„é¢ç§¯ä¸ºSï¼Œæ´»å¡ä¸æ°”ç¼¸é—´æ— æ‘©æ“¦ï¼Œä¸ºäº†ç»´æŒæ°”ä½“æ—¶æ—¶å¤„åœ¨å¹³è¡¡æ€ï¼Œå¤–ç•Œå’Œæ°”ä½“å¯¹æ´»å¡çš„å‹åŠ›å¿…é¡»ç›¸ç­‰.å½“æ´»å¡ç¼“æ…¢ç§»åŠ¨ä¸€å¾®å°è·ç¦»dl æ—¶ï¼Œåœ¨è¿™ä¸€å¾®å°çš„å˜åŒ–è¿‡ç¨‹ä¸­ï¼Œå¯è®¤ä¸ºå‹å¼ºp å¤„å¤„å‡åŒ€ä¸”å¤§å°ä¸å˜ï¼Œåœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œæ°”ä½“æ‰€åšçš„åŠŸä¸º<br>$$<br>dA &#x3D; pSdl &#x3D; pdV<br>$$</li><li>å¼ä¸­dV æ˜¯æ°”ä½“ä½“ç§¯çš„å¾®å°å¢é‡.<em>åœ¨æ°”ä½“è†¨èƒ€æ—¶, dVæ˜¯æ­£çš„ï¼ŒdAä¹Ÿæ˜¯æ­£çš„</em>ï¼Œè¡¨ç¤ºç³»ç»Ÿå¯¹å¤–åšåŠŸï¼›<em>åœ¨æ°”ä½“è¢«å‹ç¼©æ—¶ï¼ŒdV æ˜¯è´Ÿçš„ï¼ŒdA ä¹Ÿæ˜¯è´Ÿçš„</em>ï¼Œè¡¨ç¤ºç³»ç»Ÿåšè´ŸåŠŸï¼Œå³å¤–ç•Œå¯¹ç³»ç»ŸåšåŠŸ.</li><li><strong>æ³¨æ„</strong>ï¼šè¿™é‡Œçš„dAä¸æˆ‘ä»¬é«˜ä¸­å®šä¹‰çš„ä¸åŒï¼Œåæ­£æˆ‘ä»¬é«˜ä¸­è¯´çš„æ˜¯<em>å¤–ç•Œå¯¹æ°”ä½“åšçš„åŠŸ</em>ï¼Œä¹Ÿå°±æ˜¯æŠŠå¯¹è±¡è°ƒè½¬äº†ï¼Œæ³¨æ„åŒºåˆ«</li><li>åšåŠŸæ˜¯ç³»ç»Ÿä¸å¤–ç•Œç›¸äº’ä½œç”¨çš„ä¸€ç§æ–¹å¼ï¼Œä¹Ÿæ˜¯ä¸¤è€…çš„èƒ½é‡äº¤æ¢çš„ ä¸€ç§æ–¹å¼.è¿™ç§èƒ½é‡äº¤æ¢çš„æ–¹å¼æ˜¯é€šè¿‡<strong>å®è§‚çš„æœ‰è§„åˆ™è¿</strong>åŠ¨(å¦‚æœºæ¢°è¿åŠ¨ã€ç”µæµç­‰) æ¥å®Œæˆçš„.è€Œçƒ­ä¼ é€’å’ŒåšåŠŸä¸åŒï¼Œè¿™ç§äº¤æ¢èƒ½é‡çš„æ–¹å¼æ˜¯é€šè¿‡<strong>åˆ†å­çš„æ— è§„åˆ™è¿åŠ¨</strong>æ¥å®Œæˆ</li><li>çƒ­åŠ›å­¦ç³»ç»Ÿå…·æœ‰ä¸€å®šçš„èƒ½é‡ï¼Œå«åšçƒ­åŠ›å­¦ç³»ç»Ÿçš„â€œå†…èƒ½â€.ä¸Šè¿°å®éªŒäº‹å®è¡¨æ˜ï¼š<strong>å†…èƒ½çš„æ”¹å˜é‡åªå†³å®šäºåˆæœ«çŠ¶æ€ï¼Œè€Œä¸æ‰€ç»å†çš„è¿‡ç¨‹æ— å…³</strong>.æ¢å¥è¯è¯´ï¼Œå†…èƒ½æ˜¯ç³»ç»ŸçŠ¶æ€çš„å•å€¼å‡½æ•°.</li></ul><h2 id="çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹"><a href="#çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹" class="headerlink" title="çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹"></a>çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹</h2><p>å¦‚æœæœ‰ ä¸€ç³»ç»Ÿï¼Œå¤–ç•Œå¯¹å®ƒä¼ é€’çš„çƒ­é‡ä¸ºQ, ç³»ç»Ÿä»å†…èƒ½ä¸ºEâ‚ çš„åˆæ€æ”¹å˜åˆ°å†…èƒ½ä¸ºEâ‚‚ çš„ æœ«æ€ï¼ŒåŒæ—¶ç³»ç»Ÿå¯¹å¤–åšåŠŸä¸ºA, é‚£ä¹ˆ,ä¸è®ºè¿‡ç¨‹å¦‚ä½•ï¼Œæ€»æœ‰<br>$$<br>Q &#x3D; E_{2} - E_{1} + A\tag{6-2}<br>$$<br>ä¸Šå¼çš„<strong>æ„ä¹‰</strong>å°±æ˜¯ï¼šå¤–ç•Œå¯¹ç³»ç»Ÿä¼ é€’çš„çƒ­é‡ï¼Œ<em>ä¸€éƒ¨åˆ†ä½¿ç³»ç»Ÿçš„å†…èƒ½å¢åŠ ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºç³»ç»Ÿå¯¹å¤–åšåŠŸ</em></p><h1 id="çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹çš„åº”ç”¨"><a href="#çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹çš„åº”ç”¨" class="headerlink" title="çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹çš„åº”ç”¨"></a>çƒ­åŠ›å­¦ç¬¬ä¸€å®šå¾‹çš„åº”ç”¨</h1><h2 id="ç­‰å®¹è¿‡ç¨‹"><a href="#ç­‰å®¹è¿‡ç¨‹" class="headerlink" title="ç­‰å®¹è¿‡ç¨‹"></a>ç­‰å®¹è¿‡ç¨‹</h2><p>ç­‰å®¹è¿‡ç¨‹çš„ç‰¹å¾æ˜¯æ°”ä½“çš„ä½“ç§¯ä¿æŒä¸å˜ï¼Œå³Vä¸ºå¸¸é‡ï¼ŒdV&#x3D;0ï¼Œç›¸åº”åœ°ï¼Œä¹Ÿå°±æœ‰dA &#x3D; 0.ï¼Œæ‰€ä»¥ï¼Œ<strong>å¤–ç•Œä¼ é€’ç»™æ°”ä½“çš„çƒ­é‡å…¨éƒ¨ç”¨æ¥å¢åŠ æ°”ä½“çš„å†…èƒ½</strong></p><ul><li><p>æ‘©å°”å®šå®¹çƒ­å®¹ï¼š</p><ul><li>å®šä¹‰ï¼šæ°”ä½“çš„æ‘©å°”å®šå®¹çƒ­å®¹,<strong>æ˜¯æŒ‡1 mol æ°”ä½“åœ¨ä½“ç§¯ä¸å˜çš„æ¡ä»¶ä¸‹ï¼Œæ¸©åº¦æ”¹å˜1K(æˆ–1â„ƒ)æ‰€å¸æ”¶æˆ–æ”¾å‡ºçš„çƒ­é‡</strong>ï¼ŒCv,mè¡¨ç¤ºï¼Œæ‰€ä»¥<br>$$<br> dE &#x3D; \frac mM C_{v,m} dT \tag{6-7}<br>$$</li><li>åº”ç”¨ï¼šåº”è¯¥æ³¨æ„ï¼Œä¸Šå¼æ˜¯è®¡ç®—è¿‡ç¨‹ä¸­<strong>ç†æƒ³æ°”ä½“å†…èƒ½å˜åŒ–çš„é€šç”¨å…¬å¼</strong>ï¼Œ<em>ä¸ä»…ä»…é€‚ç”¨äºç­‰å®¹è¿‡ç¨‹</em>ï¼ï¼ï¼</li><li>è®¡ç®—ï¼šç”±ä¸Šä¸€ç« æ¨å¯¼çš„å†…èƒ½å…¬å¼<br>$$<br>E &#x3D; \frac mM \frac i 2 R T<br>$$<br>ä¸¤è¾¹å¾®åˆ†ä¹‹åä¸ä¸Šå¼æ¯”è¾ƒå¯å¾—<br>$$<br>C_{v,m} &#x3D; \frac i 2 R \tag{6-8}<br>$$</li><li>ä¸Šå¼è¯´æ˜ï¼šç†æƒ³æ°”ä½“çš„æ‘©å°”å®šå®¹çƒ­å®¹æ˜¯ä¸€ä¸ª<strong>åªä¸åˆ†å­çš„è‡ªç”±åº¦æœ‰å…³çš„é‡</strong>ï¼Œå®ƒä¸æ°”ä½“çš„æ¸©åº¦æ— å…³</li></ul></li></ul><h2 id="ç­‰å‹è¿‡ç¨‹"><a href="#ç­‰å‹è¿‡ç¨‹" class="headerlink" title="ç­‰å‹è¿‡ç¨‹"></a>ç­‰å‹è¿‡ç¨‹</h2><p>æ³¨ï¼šä»¥å¸çƒ­è†¨èƒ€ä¸ºä¾‹</p><ul><li><p>ç­‰å‹è¿‡ç¨‹åšçš„åŠŸï¼ˆè‡ªå·±æƒ³è±¡p-Vå›¾ï¼‰<br>$$<br>A &#x3D; p(V_{2}-V_{1})&#x3D;\frac mM R (T_{2}-T_{1})\tag{6-10b}<br>$$</p></li><li><p>å¸çƒ­<br>$$<br>Q &#x3D; \Delta E + A &#x3D;E_{2}-E_{1} +\frac mM R (T_{2}-T_{1})\tag{6-11}<br>$$</p></li><li><p>å¯è§ï¼šæ°”ä½“åœ¨ç­‰å‹è†¨èƒ€è¿‡ç¨‹ä¸­ï¼Œ<strong>æ‰€å¸æ”¶çš„çƒ­é‡ä¸€éƒ¨åˆ†ç”¨æ¥å¢åŠ å†…èƒ½ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºæ°”ä½“å¯¹å¤–åšåŠŸ</strong>ï¼›æ°”ä½“åœ¨ç­‰å‹å‹ç¼©è¿‡ç¨‹ä¸­ï¼Œå¤–ç•Œå¯¹æ°”ä½“åšåŠŸï¼ŒåŒæ—¶å†…èƒ½å‡å°ï¼Œæ”¾å‡º çƒ­é‡.</p></li><li><p>å®šä¹‰ï¼šæˆ‘ä»¬æŠŠ1 molæ°”ä½“åœ¨å‹å¼ºä¸å˜çš„æ¡ä»¶ä¸‹ï¼Œæ¸©åº¦æ”¹å˜1K æ‰€éœ€è¦çš„çƒ­é‡å«åšæ°” ä½“çš„<em>æ‘©å°”å®šå‹çƒ­å®¹</em>ï¼š<br>$$<br>C_{p,m} &#x3D; \frac{\delta Q_{p}}{\frac mM dT}<br>$$</p></li><li><p>è®¡ç®—ï¼šæ ¹æ®å…¬å¼6-2,6-7ä»¥åŠ6-11ä»¥åŠä»¥ä¸Šå®šä¹‰ï¼Œå¯å¾—<em>è¿ˆè€¶å…¬å¼</em><br>$$<br>C_{p,m} &#x3D; C_{v,m}+R\tag{6-12}<br>$$</p></li><li><p>ç†è§£ï¼šæ ¹æ®å®šä¹‰ï¼Œç­‰å‹è¿‡ç¨‹<em>æ‰€å¸æ”¶çš„çƒ­é‡ä¸€éƒ¨åˆ†ç”¨æ¥å¢åŠ å†…èƒ½ï¼Œå¦ä¸€éƒ¨åˆ†ç”¨äºæ°”ä½“å¯¹å¤–åšåŠŸ</em>ï¼Œè€Œ<em>ç­‰å®¹è¿‡ç¨‹å¸æ”¶çš„çƒ­é‡å…¨éƒ¨ç”¨æ¥å¢åŠ å†…èƒ½</em>ï¼Œæ‰€ä»¥æ‘©å°”å®šå‹çƒ­å®¹å¤§äºæ‘©å°”å®šå®¹çƒ­å®¹ä¹Ÿå¾ˆå¥½ç†è§£</p></li><li><p>æ‘©å°”çƒ­å®¹æ¯”ï¼šç”±å…¬å¼6-8å’Œ6-12å¯ä»¥å¾—å‡º<br>$$<br>C_{p,m}&#x3D;\frac{i+2}2R \tag{6-13}<br>$$<br>æˆ‘ä»¬æŠŠäºŒè€…ä¹‹æ¯”å«åš<strong>æ‘©å°”çƒ­å®¹æ¯”</strong>,ç”¨Î³è¡¨ç¤º,è¯¥å€¼åªä¸<strong>æ°”ä½“åˆ†å­çš„è‡ªç”±åº¦æœ‰å…³ï¼Œ è€Œä¸æ°”ä½“æ¸©åº¦æ— å…³</strong>.<br>$$<br>\gamma &#x3D; \frac{C_{p,m}}{C_{v,m}}&#x3D;\frac{i+2}i \tag{6-14}<br>$$</p></li></ul><h2 id="ç­‰æ¸©è¿‡ç¨‹"><a href="#ç­‰æ¸©è¿‡ç¨‹" class="headerlink" title="ç­‰æ¸©è¿‡ç¨‹"></a>ç­‰æ¸©è¿‡ç¨‹</h2><ul><li><p>ç‰¹ç‚¹ï¼šæ¸©åº¦ä¸å˜ï¼Œå†…èƒ½ä¸å˜</p></li><li><p>å·æ‡’ï¼šç”±äºä¹¦ä¸Šåªæœ‰ä¸€é¡µä»‹ç»ç­‰æ¸©è¿‡ç¨‹ï¼Œè€Œä¸”æ¯”è¾ƒç²¾ç®€ï¼Œæ•…ç›´æ¥é™„ä¸Šå›¾ç‰‡(<del>å…¶å®æ˜¯å·æ‡’</del> â€‹ <span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span>)</p></li></ul><p><img src="/../img_post/physics_3.png"></p><h2 id="ç»çƒ­è¿‡ç¨‹"><a href="#ç»çƒ­è¿‡ç¨‹" class="headerlink" title="ç»çƒ­è¿‡ç¨‹"></a>ç»çƒ­è¿‡ç¨‹</h2><p><img src="/../img_post/physics_2.png"></p>]]></content>
    
    
    <categories>
      
      <category>ç‰©ç†</category>
      
    </categories>
    
    
    <tags>
      
      <tag>å¤ä¹ </tag>
      
      <tag>ç‰©ç†</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>åŒ—èˆªè®¡ç»„-P1è¯¾ä¸‹</title>
    <link href="/2024/10/06/P1%E8%AF%BE%E4%B8%8B/"/>
    <url>/2024/10/06/P1%E8%AF%BE%E4%B8%8B/</url>
    
    <content type="html"><![CDATA[<p>å°±æ˜¯å†™ç¯‡åšå®¢è®°å½•ä¸‹è‡ªå·±çš„åšé¢˜è¿‡ç¨‹&amp;å¿ƒå¾—ï¼Œå¹¶éé¢˜è§£ï¼Œå¦‚æœå¯»æ±‚é€Ÿé€šé¢˜è§£çš„æœ‹å‹å¯ä»¥ç§»æ­¥è®¨è®ºåŒºæˆ–è€…å…¶ä»–dalaoçš„åšå®¢å“Ÿ <span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span></p><h1 id="Q1-Splitter"><a href="#Q1-Splitter" class="headerlink" title="Q1 Splitter"></a>Q1 Splitter</h1><p>é¢˜é¢ï¼šä½¿ç”¨ Verilog æ­å»ºä¸€ä¸ª 32ä½  Splitter , ç»™å®šä¸€ä¸ª 32ä½ çš„äºŒè¿›åˆ¶æ•°ä½œä¸ºè¾“å…¥ï¼Œå°†å…¶åˆ’åˆ†ä¸º å››ä¸ª 8ä½ çš„äºŒè¿›åˆ¶æ•°ä½œä¸ºè¾“å‡º<br>çº¯å¤ä¹ é¢˜ï¼Œå°±æ˜¯æŒ‰éƒ¨å°±ç­åœ°å°†inputçš„ å››ä¸ª 8ä½ äºŒè¿›åˆ¶æ•°ä½œä¸º å››ä¸ª è¾“å‡ºçš„é©±åŠ¨å³å¯<br>å¯æ‚²çš„æ˜¯ï¼Œæœ¬äººç¬¬ä¸€éç«Ÿç„¶æŠŠ 32 ä½çš„ Inputå†™æˆäº†input æ•°ç»„ <span class="github-emoji" alias="point_down" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f447.png?v8">&#x1f447;</span></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs verilog"># wrong<br><span class="hljs-keyword">input</span> A [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>],<br># correct<br><span class="hljs-keyword">input</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] Aï¼Œ<br></code></pre></td></tr></table></figure><p>æœç„¶ï¼Œè¿˜æ˜¯å¤ªä¹…ä¸å†™verilogï¼Œç”Ÿç–äº†ï¼ˆ<del>å…¶å®å°±æ˜¯èœ</del>ï¼‰<span class="github-emoji" alias="cry" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f622.png?v8">&#x1f622;</span></p><h1 id="Q2-ALU"><a href="#Q2-ALU" class="headerlink" title="Q2 ALU"></a>Q2 ALU</h1><h2 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>ä½¿ç”¨ Verilog æ­å»ºä¸€ä¸ª 32 ä½å…­è¿ç®— ALU å¹¶æäº¤ã€‚å…·ä½“æ¨¡å—ç«¯å£å®šä¹‰å¦‚ä¸‹ï¼šï¼ˆçœ‹åˆ°è¿™ä¸ªè¡¨æ ¼æ‰å‘ç°æˆ‘Q1çš„å¼±æ™ºé”™è¯¯ä¼¼ä¹å°±æ˜¯å› ä¸ºé¢˜ç›®çš„æè¿°æ˜¯A [31:0] (<del>ç–¯ç‹‚æ‰¾å€Ÿå£</del>) <span class="github-emoji" alias="stuck_out_tongue_closed_eyes" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f61d.png?v8">&#x1f61d;</span></p><p><img src="/../img_post/p1_1.png" alt=" "></p><p>æ¨¡å—åŠŸèƒ½å¦‚ä¸‹ï¼š</p><p><img src="/../img_post/p1_2.png" alt=" "></p><h2 id="çŸ¥è¯†å¤ä¹ ï¼š"><a href="#çŸ¥è¯†å¤ä¹ ï¼š" class="headerlink" title="çŸ¥è¯†å¤ä¹ ï¼š"></a>çŸ¥è¯†å¤ä¹ ï¼š</h2><p>åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å¤ä¹ é€»è¾‘å³ç§»å’Œç®—æœ¯å³ç§»çš„åŒºåˆ«ï¼š</p><p>é€»è¾‘å³ç§»ä¸è€ƒè™‘ç¬¦å·ä½ï¼Œå³ç§»ä¸€ä½ï¼Œå·¦è¾¹è¡¥é›¶å³å¯ã€‚</p><p>ç®—æœ¯å³ç§»éœ€è¦è€ƒè™‘ç¬¦å·ä½ï¼Œå³ç§»ä¸€ä½ï¼Œè‹¥ç¬¦å·ä½ä¸º 1 ï¼Œåœ¨å·¦è¾¹è¡¥ 1 ï¼›å¦åˆ™ï¼Œè¡¥ 0 ã€‚</p><p>ä¾‹å¦‚ï¼Œ8 ä½äºŒè¿›åˆ¶æ•° 10111101 åˆ†åˆ«å³ç§»2ä½ã€‚</p><ul><li>é€»è¾‘å³ç§»ç»“æœä¸º<strong>00</strong>101111</li><li>ç®—æœ¯å³ç§»ç»“æœä¸º<strong>11</strong>101111</li></ul><p><strong>æç¤º</strong>ï¼šå¯ä»¥å›Preä¸­çš„<a href="http://cscore.buaa.edu.cn/tutorial/verilog/verilog-3/verilog-3-7/">è¿™ä¸€å°èŠ‚</a>å¥½å¥½å¤ä¹ äº†ï¼Œæ³¨æ„**$signed()**çš„ç”¨æ³•</p><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>å…¶ä»–çš„æ²¡ä»€ä¹ˆè¯´çš„ï¼Œç…§æ¬åŠŸèƒ½æè¿°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æœ€åä¸€ä¸ªop, <strong>Aæœ‰ç¬¦å·</strong> ï¼ŒBæ— ç¬¦å·</p><p>å¦‚æœç›´æ¥ä¸‰ç›®è¿ç®—ç¬¦åŠ $signed(A) &gt;&gt;&gt; B,åˆ™æ ¹æ®ç¬¦å·åŸåˆ™ï¼ˆæœ€å¤–å±‚ç¡®å®šï¼Œå‘å†…ä¼ æ’­ï¼‰ï¼Œä¼šæŠŠç»“æœå˜ä¸ºæ— ç¬¦å·æ•°ï¼Œè¿™æ˜¾ç„¶è¾¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœ</p><p>å› æ­¤ï¼Œé‡‡å–Preä¸­çš„ä¸€ç§æ¨èæ–¹æ¡ˆâ€œå¯¹äºå¤æ‚çš„è¡¨è¾¾å¼é¿å…ä½¿ç”¨ <code>$signed()</code> ï¼Œå¦‚æœå¸Œæœ›ä½¿ç”¨ <code>$signed()</code> å¯ä»¥å°†è¿™ä¸€éƒ¨åˆ†æŠ½ç¦»å‡ºæ¥å•ç‹¬ä½œä¸ºä¸€ä¸ªå˜é‡â€</p><p>æ„å³å•ç‹¬å®šä¹‰ä¸€ä¸ªwireå‹å˜é‡ä½œä¸º$signed(A) &gt;&gt;&gt; B</p><p>æ³¨æ„åˆ°è¿™ç‚¹åï¼Œæœ¬é¢˜åº”è¯¥æ²¡ä»€ä¹ˆéš¾åº¦äº†ï¼Œæœ€åï¼Œè´´ä¸Šä¿ºçš„ä»£ç </p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> alu (<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] A,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] B,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] ALUOp,<br>    <span class="hljs-keyword">output</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] C<br>);<br>    <span class="hljs-keyword">wire</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] tmp;<br>    <span class="hljs-keyword">assign</span> tmp =  <span class="hljs-built_in">$signed</span>(A) &gt;&gt;&gt; B;<br>    <span class="hljs-keyword">assign</span> C = (ALUOp == <span class="hljs-number">3&#x27;b000</span>) ? (A + B) :<br>               (ALUOp == <span class="hljs-number">3&#x27;b001</span>) ? (A - B) :<br>               (ALUOp == <span class="hljs-number">3&#x27;b010</span>) ? (A &amp; B) :<br>               (ALUOp == <span class="hljs-number">3&#x27;b011</span>) ? (A | B) :<br>               (ALUOp == <span class="hljs-number">3&#x27;b100</span>) ? (A &gt;&gt; B) :<br>               (ALUOp == <span class="hljs-number">3&#x27;b101</span>) ? tmp :<br>                <span class="hljs-number">0</span>;<br>    <br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><p><strong>ç»“è¯­</strong></p><p>æœ¬è’Ÿè’»åªåšäº†ä¸¤é“ç›®å‰ï¼Œå…ˆä¸Šä¼ åˆ°åšå®¢ä¸»è¦æ˜¯æµ‹è¯•ä¸€ä¸‹ä»£ç å—çš„é£æ ¼è®¾ç½®æ˜¯å¦æˆåŠŸä»¥åŠå…¶ä»–åŠŸèƒ½ï¼Œåç»­è¿˜ä¼šæ›´æ–°æœ¬ç¯‡ <span class="github-emoji" alias="yum" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60b.png?v8">&#x1f60b;</span></p><hr><p><strong>updated: 10.10</strong></p><h1 id="Q3-EXT"><a href="#Q3-EXT" class="headerlink" title="Q3 EXT"></a>Q3 EXT</h1><h2 id="é¢˜é¢"><a href="#é¢˜é¢" class="headerlink" title="é¢˜é¢"></a>é¢˜é¢</h2><p><img src="/../img_post/p1_3.png"></p><h2 id="æ³¨æ„"><a href="#æ³¨æ„" class="headerlink" title="æ³¨æ„"></a>æ³¨æ„</h2><p>verilogä¸­å˜é‡ä½å®½ä»¥åŠè¿›åˆ¶çš„å®šä¹‰ä¸å¯å·æ‡’ï¼Œå¦åˆ™é»˜è®¤ä¸º10è¿›åˆ¶ï¼Œ32ä½ã€‚</p><p>æœ¬é¢˜ç›´æ¥æ ¹æ®EOpè¿›è¡Œä½æ‹¼æ¥å³å¯ï¼Œç¬¦å·ä½æ‰©å±•ç›´æ¥æ‹¼æ¥â€œ16ä¸ªæœ€é«˜ä½â€ï¼Œé›¶æ‰©å±•ç›´æ¥æ‹¼æ¥0å³å¯ï¼Œ<strong>éœ€æ³¨æ„ 0 è¦å†™åš 16â€™b0</strong>ï¼Œå¦åˆ™é»˜è®¤ä¸º32ä½çš„ï¼Œè´´ä¸€ä¸‹æœ¬äººçš„ä»£ç </p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ{16â€™b0} ä¹Ÿå¯ä»¥å†™æˆ {16{1â€™b0}} ï¼Œåªæ˜¯çœ‹èµ·æ¥æœ‰ç‚¹â€œè‡ƒè‚¿â€ <span class="github-emoji" alias="thinking" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f914.png?v8">&#x1f914;</span></p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> ext (<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">15</span>:<span class="hljs-number">0</span>] imm,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">1</span>:<span class="hljs-number">0</span>] Eop,<br>    <span class="hljs-keyword">output</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] ext<br>);<br>    <span class="hljs-keyword">assign</span> ext = (Eop == <span class="hljs-number">2&#x27;b00</span>) ? &#123;&#123;<span class="hljs-number">16</span>&#123;imm[<span class="hljs-number">15</span>]&#125;&#125;, imm&#125; :<br>                 (Eop == <span class="hljs-number">2&#x27;b01</span>) ? &#123;<span class="hljs-number">16&#x27;b0</span>, imm&#125; : <br>                 (Eop == <span class="hljs-number">2&#x27;b10</span>) ? &#123;imm, <span class="hljs-number">16&#x27;b0</span>&#125; :<br>                 (Eop == <span class="hljs-number">2&#x27;b11</span>) ? &#123;&#123;<span class="hljs-number">14</span>&#123;imm[<span class="hljs-number">15</span>]&#125;&#125;, imm, <span class="hljs-number">2&#x27;b0</span>&#125; :<br>                         <span class="hljs-number">32&#x27;b0</span>;<br>    <br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h1 id="Q4-Gray"><a href="#Q4-Gray" class="headerlink" title="Q4 Gray"></a>Q4 Gray</h1><h2 id="é¢˜ç›®-1"><a href="#é¢˜ç›®-1" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p>å°±æ˜¯è®¾è®¡ä¸€ä¸ªæ ¼é›·ç è®¡æ•°å™¨ï¼Œå…·å¤‡åŒæ­¥å¤ä½åŠŸèƒ½å’Œä½¿èƒ½ç«¯ï¼Œéœ€è¦äº†è§£æ ¼é›·ç çš„åŒå­¦å¯ä»¥<a href="https://metaso.cn/search/8532650087478169600?q=%E6%A0%BC%E9%9B%B7%E7%A0%81&bs=8532650003386961920">ç‚¹å‡»æˆ‘</a>ï¼Œé¡ºä¾¿ç»™å„ä½æ¨èä¸€ä¸‹<a href="https://metaso.cn/">ç§˜å¡”æœç´¢</a>æ¯”è¾ƒå¥½ç”¨çš„æœç´¢å¼•æ“ï¼Œå¯ä»¥æœè®ºæ–‡ï¼ˆé€‰æ‹©â€œå­¦æœ¯â€æœç´¢æ¨¡å¼ï¼‰ï¼Œæœ€è¿‘ä¹Ÿæä¾›äº†æœç´¢å›¾ç‰‡åŠŸèƒ½ï¼Œæ— å¹¿å‘Šï¼Œåœ¨æ¯æ¬¡æœç´¢ä¸‹æ–¹è¿˜ä¼šæœ‰ç›¸å…³å‚è€ƒæ–‡çŒ®ï¼Œå¯ä»¥ç‚¹å‡»è·³è½¬ï¼Œè¶…ä¸°å¯Œã€‚like this:</p><p><img src="/../img_post/metaso.png"></p><p>æ­¥å…¥æ­£é¢˜ï¼Œç›´æ¥é™„ä¸Šé¢˜ç›®è¯´æ˜</p><p><img src="/../img_post/p1_4_2.png"></p><hr><p>é¢˜ç›®è¿˜è´´å¿ƒåœ°é™„ä¸Šäº†æ ¼é›·ç è½¬æ¢è¡¨ï¼Œä»¥åŠæ³¢å½¢å›¾ï¼ˆ<del>è™½ç„¶æˆ‘æ²¡æœ‰å†™testbench</del>ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œå„ä½è¿˜æ˜¯è¦å°½é‡å†™ä¸€å†™tbçš„ <span class="github-emoji" alias="smile" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png?v8">&#x1f604;</span>)</p><p><img src="/../img_post/p1_4.png"></p><p>ä¸ªäººæ„Ÿè§‰æ²¡å•¥å¥½è¯´çš„ï¼Œç›´æ¥å†™å°±æ˜¯äº†ï¼Œé™„ä¸Šä»£ç </p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> gray (<br>    <span class="hljs-keyword">input</span> Clk,<br>    <span class="hljs-keyword">input</span> Reset,<br>    <span class="hljs-keyword">input</span> En,<br>    <span class="hljs-keyword">output</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] Output,<br>    <span class="hljs-keyword">output</span> Overflow<br>);<br>    <span class="hljs-keyword">reg</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] code = <span class="hljs-number">3&#x27;b0</span>;<br>    <span class="hljs-keyword">reg</span> over = <span class="hljs-number">1&#x27;b0</span>;<br>    <span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> Clk) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">if</span>(Reset)<span class="hljs-keyword">begin</span><br>            code &lt;= <span class="hljs-number">3&#x27;b0</span>;<br>            over &lt;= <span class="hljs-number">1&#x27;b0</span>;<br>        <span class="hljs-keyword">end</span><br><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>            <span class="hljs-keyword">if</span>(En)<span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">if</span>(code == <span class="hljs-number">3&#x27;b111</span>)<span class="hljs-keyword">begin</span><br>                    over &lt;= <span class="hljs-number">1&#x27;b1</span>;<br>                <span class="hljs-keyword">end</span><br>                code &lt;= code + <span class="hljs-number">3&#x27;b1</span>;<br>            <span class="hljs-keyword">end</span><br><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                code &lt;= code;<br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br><br>        <span class="hljs-keyword">assign</span> Output = (code == <span class="hljs-number">3&#x27;b000</span>) ? <span class="hljs-number">3&#x27;b000</span> :<br>                        (code == <span class="hljs-number">3&#x27;b001</span>) ? <span class="hljs-number">3&#x27;b001</span> :<br>                        (code == <span class="hljs-number">3&#x27;b010</span>) ? <span class="hljs-number">3&#x27;b011</span> :<br>                        (code == <span class="hljs-number">3&#x27;b011</span>) ? <span class="hljs-number">3&#x27;b010</span> :<br>                        (code == <span class="hljs-number">3&#x27;b100</span>) ? <span class="hljs-number">3&#x27;b110</span> :<br>                        (code == <span class="hljs-number">3&#x27;b101</span>) ? <span class="hljs-number">3&#x27;b111</span> :<br>                        (code == <span class="hljs-number">3&#x27;b110</span>) ? <span class="hljs-number">3&#x27;b101</span> :<br>                        (code == <span class="hljs-number">3&#x27;b111</span>) ? <span class="hljs-number">3&#x27;b100</span> :<br>                        <span class="hljs-number">3&#x27;b000</span>;<br>        <span class="hljs-keyword">assign</span> Overflow = over;<br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h1 id="Q5-Expr"><a href="#Q5-Expr" class="headerlink" title="Q5 Expr"></a>Q5 Expr</h1><h2 id="é¢˜ç›®-2"><a href="#é¢˜ç›®-2" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><img src="/../img_post/p1_5.png"></p><p><img src="/../img_post/p1_5_2.png"></p><h2 id="æ€è·¯-1"><a href="#æ€è·¯-1" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>é¢˜ç›®æ˜¯å‡ å¤©å‰å†™çš„ï¼Œ<del>å¿˜äº†ï¼ˆbushi)</del>ğŸ˜¢</p><hr><p>å®šä¹‰æœ‰ç‚¹é€’å½’çš„å‘³é“emmmâ€¦â€¦<br>â€œå•ä¸ªæ•°å­—[0-9]æ˜¯Fï¼› b. å¦‚æœ<strong>X</strong>æ˜¯Fï¼Œ<strong>Y</strong>æ˜¯Fï¼Œ<strong>X+Y</strong>ä¹Ÿæ˜¯Fï¼› c. å¦‚æœ<strong>X</strong>æ˜¯Fï¼Œ<strong>Y</strong>æ˜¯Fï¼Œ<strong>X*Y</strong>ä¹Ÿæ˜¯Fâ€</p><p>è™½ç„¶é¢˜ç›®æ²¡æœ‰æ˜è¯´ï¼Œä½†æ ¹æ®é¢˜ç›®æè¿°â€œæ¯ä¸ªæ—¶é’Ÿä¸Šå‡æ²¿ï¼ŒçŠ¶æ€æœºä» in ä¸­è¯»å…¥ä¸€ä¸ªASCIIç¼–ç çš„å­—ç¬¦ã€‚å‡è®¾è¯»å…¥çš„ç¬¬iä¸ªå­—ç¬¦ä¸ºciï¼Œåˆ™ç¬¬nä¸ªæ—¶é’Ÿä¸Šå‡æ²¿æ—¶ï¼Œå¯ä»¥æ‹¼å‡ºä¸€ä¸ªå­—ç¬¦ä¸²: s&#x3D;c1c2â€¦.cn  æˆ‘ä»¬éœ€è¦ä½ æ­¤æ—¶åˆ¤æ–­ s æ˜¯å¦ç¬¦åˆè¡¨è¾¾å¼Fçš„å®šä¹‰â€ä»¥åŠæ³¢å½¢å›¾ï¼Œå¤§è‡´å¯ä»¥ç¡®å®šçŠ¶æ€æœºç±»å‹ï¼šMooreå‹çŠ¶æ€æœº<br>è¯»æ‡‚é¢˜ç›®æ„æ€åï¼Œå…¶å®æ­£ç¡®çŠ¶æ€å°±æ˜¯ç±»ä¼¼ 1 + 2 * 3 + 7 * 9 ,å³ï¼š<br><strong>å¿…é¡»å…ˆè¾“å…¥ä¸€ä¸ªæ•°å­—ï¼Œç„¶åæ¥ç€è¾“å…¥ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œè¿ç»­çš„æ•°å­—æˆ–è€…è¿ç®—ç¬¦éƒ½ç›´æ¥passæ‰ï¼Œåˆæ³•çŠ¶æ€è¦ä¹ˆæ˜¯ä¸€ä¸ªæ•°å­—è¦ä¹ˆæ˜¯ï¼ˆæ•°å­—ï¼‰ï¼ˆè¿ç®—ç¬¦ï¼‰ï¼ˆæ•°å­—ï¼‰</strong>ã€‚æ•…è®¾è®¡5ç§çŠ¶æ€ï¼Œåˆ†åˆ«ä¸ºï¼š</p><table><thead><tr><th>çŠ¶æ€</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>state_0</td><td>ç©ºçŠ¶æ€ï¼Œåˆå§‹çŠ¶æ€</td></tr><tr><td>state_1</td><td>é”™è¯¯çŠ¶æ€ï¼Œå½“éæ³•è¾“å…¥åä¸€ç›´ä¿æŒæ­¤çŠ¶æ€ï¼Œé™¤éreset</td></tr><tr><td>state_2</td><td>åªè¾“å…¥äº†ä¸€ä¸ªæ•°å­—</td></tr><tr><td>state_3</td><td>åç¼€è¾“å…¥ä¸ºï¼ˆæ•°å­—ï¼‰ï¼ˆè¿ç®—ç¬¦ï¼‰</td></tr><tr><td>state_4</td><td>åç¼€è¾“å…¥ä¸ºï¼ˆæ•°å­—ï¼‰ï¼ˆè¿ç®—ç¬¦ï¼‰ï¼ˆæ•°å­—ï¼‰</td></tr></tbody></table><p>åæ¥å‘ç°ä¼¼ä¹state_2 å’Œ state_4 å¯ä»¥åˆå¹¶ï¼Œéƒ½è¡Œ<br>ä»£ç ï¼š</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> expr (<br>    <span class="hljs-keyword">input</span> clk,<br>    <span class="hljs-keyword">input</span> clr,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] in,<br>    <span class="hljs-keyword">output</span> out<br>);<br>    <span class="hljs-keyword">reg</span> [<span class="hljs-number">2</span>:<span class="hljs-number">0</span>] state = <span class="hljs-number">3&#x27;b0</span>;<br>    <span class="hljs-keyword">parameter</span> state_0 = <span class="hljs-number">3&#x27;b000</span>,<br>              state_1 = <span class="hljs-number">3&#x27;b001</span>,<br>              state_2 = <span class="hljs-number">3&#x27;b010</span>,<br>              state_3 = <span class="hljs-number">3&#x27;b011</span>,<br>              state_4 = <span class="hljs-number">3&#x27;b100</span>;<br><br>    <span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">posedge</span> clr) <span class="hljs-keyword">begin</span><br>            <span class="hljs-keyword">if</span>(clr) <span class="hljs-keyword">begin</span><br>                state &lt;= state_0;<br>            <span class="hljs-keyword">end</span><br><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                <span class="hljs-keyword">case</span> (state)<br>                    state_0: <span class="hljs-keyword">begin</span><br>                        <span class="hljs-keyword">if</span>(in &gt; <span class="hljs-number">6&#x27;d47</span> &amp;&amp; in &lt; <span class="hljs-number">6&#x27;d58</span>)<span class="hljs-keyword">begin</span><br>                            state &lt;= state_2;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span> <span class="hljs-comment">//first input must be number</span><br>                            state &lt;= state_1;<br>                        <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">end</span><br><br>                    state_1: <span class="hljs-keyword">begin</span><br>                            state &lt;= state_1;<br>                    <span class="hljs-keyword">end</span><br><br>                    state_2: <span class="hljs-keyword">begin</span><br>                        <span class="hljs-keyword">if</span>(in == <span class="hljs-number">6&#x27;d42</span> || in == <span class="hljs-number">6&#x27;d43</span>)<span class="hljs-keyword">begin</span><br>                            state &lt;= state_3;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                            state &lt;= state_1;<br>                        <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">end</span><br><br>                    state_3: <span class="hljs-keyword">begin</span><br>                        <span class="hljs-keyword">if</span>(in &gt; <span class="hljs-number">6&#x27;d47</span> &amp;&amp; in &lt; <span class="hljs-number">6&#x27;d58</span>) <span class="hljs-keyword">begin</span><br>                            state &lt;= state_4;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                            state &lt;= state_1;<br>                        <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">end</span><br><br>                    state_4: <span class="hljs-keyword">begin</span><br>                        <span class="hljs-keyword">if</span>(in == <span class="hljs-number">6&#x27;d42</span> || in == <span class="hljs-number">6&#x27;d43</span>) <span class="hljs-keyword">begin</span><br>                            state &lt;= state_3;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                            state &lt;= state_1;<br>                        <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">end</span><br><br>                    <span class="hljs-keyword">default</span>: state &lt;= state_0;<br>                <span class="hljs-keyword">endcase</span><br>            <span class="hljs-keyword">end</span><br>        <span class="hljs-keyword">end</span>    <br>                <br>    <span class="hljs-keyword">assign</span> out = (state == state_4) ? <span class="hljs-number">1&#x27;b1</span> :<br> (state == state_2) ? <span class="hljs-number">1&#x27;b1</span> : <span class="hljs-number">1&#x27;b0</span>;<br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><h1 id="Q6-BlockChecker"><a href="#Q6-BlockChecker" class="headerlink" title="Q6 BlockChecker"></a>Q6 BlockChecker</h1><h2 id="æœ¬é¢˜ä¸ºé™„åŠ é¢˜ï¼Œé€šè¿‡ä¸å¦ä¸è®¡å…¥P1è¯¾ä¸‹é€šè¿‡æ¡ä»¶"><a href="#æœ¬é¢˜ä¸ºé™„åŠ é¢˜ï¼Œé€šè¿‡ä¸å¦ä¸è®¡å…¥P1è¯¾ä¸‹é€šè¿‡æ¡ä»¶" class="headerlink" title="æœ¬é¢˜ä¸ºé™„åŠ é¢˜ï¼Œé€šè¿‡ä¸å¦ä¸è®¡å…¥P1è¯¾ä¸‹é€šè¿‡æ¡ä»¶"></a>æœ¬é¢˜ä¸ºé™„åŠ é¢˜ï¼Œé€šè¿‡ä¸å¦ä¸è®¡å…¥P1è¯¾ä¸‹é€šè¿‡æ¡ä»¶</h2><h2 id="é¢˜ç›®-3"><a href="#é¢˜ç›®-3" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h2><p><img src="/../img_post/p1_6.png"></p><p><img src="/../img_post/p1_6_2.png"></p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>å…¶å®å°±æ˜¯æŠŠä¹‹å‰æ•°æ®ç»“æ„çš„ä¸€é“æ‹¬å·åŒ¹é…é¢˜é­”æ”¹äº†ï¼Œ<strong>æ ¸å¿ƒæ€è·¯å·®ä¸å¤šï¼Œé€šè¿‡ä¸€ä¸ªflagæ¥æ ‡å¿—åŒ¹é…çŠ¶æ€ï¼Œè¯»å…¥ Beginï¼ˆå·¦æ‹¬å·ï¼‰æ—¶ flag åŠ  1 ï¼ŒEndï¼ˆå³æ‹¬å·ï¼‰æ—¶flag - 1ï¼Œæœ€ååˆ¤æ–­ flag æ˜¯å¦ä¸º 0 æ¥è¿›è¡Œè¾“å‡º</strong>ï¼Œ<strong>åŒæ—¶å¦‚æœè¾“å…¥ begin ä¹‹åï¼Œä¸è¾“å…¥ç©ºæ ¼ï¼Œè€Œæ˜¯è¾“å…¥å…¶ä»–å­—ç¬¦ï¼Œåˆ™åº”è¯¥æŠŠflagç›¸åº”åœ°åŠ ï¼ˆå‡ï¼‰å›å»ã€‚</strong><br><strong>å€¼å¾—æ³¨æ„çš„æ˜¯</strong>ï¼šæœ¬é¢˜æ˜¯ä¸€é“æœ¬é¢˜ä¾æ—§æ˜¯ Moore çŠ¶æ€æœºï¼Œå› ä¸ºè§‚å¯Ÿæ³¢å½¢è¾“å‡º result åªåœ¨ clk ä¸Šå‡æ²¿å˜åŒ– ï¼</p><p>å¯¹äºè¾“å…¥ï¼Œå¦‚æœæœªåŒ¹é…çš„ end å‡ºç°åœ¨äº† begin å‰é¢ï¼Œ åˆ™è¾“å…¥å·²ç»éæ³•ï¼Œæ­¤åä¸ç®¡è¾“å…¥å¦‚ä½•ï¼Œéƒ½è¾“å‡º 0 ï¼ˆé™¤éresetï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¾¿å¯ä»¥è®¾ç½®ä¸€ä¸ªå•ç‹¬çš„çŠ¶æ€æ¥ä¿å­˜è¿™ä¸€çŠ¶æ€ï¼Œ å½“flag &lt; 0 æ—¶ç›´æ¥å°±â€œé”â€åœ¨è¿™ä¸ªçŠ¶æ€é‡Œã€‚</p><p>åŒæ—¶ï¼Œé¼“åŠ±å¤§å®¶<strong>ä½¿ç”¨parameter</strong> æ¥å£°æ˜_çŠ¶æ€_è¿™ä¸€å¸¸é‡ã€‚</p><p>å¤šçš„æ‡’å¾—è¯´äº†ï¼Œä»£ç é‡Œæœ‰æ³¨é‡Šï¼Œç›´æ¥ä¸Šä»£ç ğŸ˜ğŸ˜ğŸ˜</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">module</span> BlockChecker (<br>    <span class="hljs-keyword">input</span> clk,<br>    <span class="hljs-keyword">input</span> reset,<br>    <span class="hljs-keyword">input</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] in,<br>    <span class="hljs-keyword">output</span> result<br>);<br>    <span class="hljs-keyword">reg</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] state = <span class="hljs-number">4&#x27;b0001</span>; <span class="hljs-comment">//store status</span><br>    <span class="hljs-keyword">reg</span> [<span class="hljs-number">31</span>:<span class="hljs-number">0</span>] match = <span class="hljs-number">32&#x27;b0</span>; <span class="hljs-comment">//store if_match</span><br><br>    <span class="hljs-keyword">parameter</span> st_0 = <span class="hljs-number">4&#x27;b0000</span>, <span class="hljs-comment">//null or initial</span><br>              st_1 = <span class="hljs-number">4&#x27;b0001</span>, <span class="hljs-comment">//input &quot; &quot;</span><br>              st_2 = <span class="hljs-number">4&#x27;b0010</span>, <span class="hljs-comment">//input &quot;b&quot;</span><br>              st_3 = <span class="hljs-number">4&#x27;b0011</span>, <span class="hljs-comment">//input &quot;be&quot;</span><br>              st_4 = <span class="hljs-number">4&#x27;b0100</span>, <span class="hljs-comment">//input &quot;beg&quot;</span><br>              st_5 = <span class="hljs-number">4&#x27;b0101</span>, <span class="hljs-comment">//input &quot;begi&quot;</span><br>              st_6 = <span class="hljs-number">4&#x27;b0110</span>, <span class="hljs-comment">//input &quot;begin&quot;</span><br>              st_7 = <span class="hljs-number">4&#x27;b0111</span>, <span class="hljs-comment">//input other words,such as &quot;hello&quot;</span><br>              st_8 = <span class="hljs-number">4&#x27;b1000</span>, <span class="hljs-comment">//input &quot;e&quot;</span><br>              st_9 = <span class="hljs-number">4&#x27;b1001</span>, <span class="hljs-comment">//input &quot;en&quot;</span><br>             st_10 = <span class="hljs-number">4&#x27;b1010</span>; <span class="hljs-comment">//input &quot;end&quot;</span><br>    <br>    <span class="hljs-keyword">always</span> @(<span class="hljs-keyword">posedge</span> clk <span class="hljs-keyword">or</span> <span class="hljs-keyword">posedge</span> reset) <span class="hljs-keyword">begin</span><br>        <span class="hljs-keyword">if</span>(reset) <span class="hljs-keyword">begin</span><br>            state &lt;= st_1;<br>            match &lt;= <span class="hljs-number">32&#x27;b0</span>;<br>        <span class="hljs-keyword">end</span><br>        <br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>            <span class="hljs-keyword">case</span> (state)<br>                st_0: <span class="hljs-keyword">begin</span><br>                    state &lt;= st_0;<br>                <span class="hljs-keyword">end</span><br><br>                st_1: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">$signed</span> (match) &lt; <span class="hljs-built_in">$signed</span>(<span class="hljs-number">32&#x27;b0</span>)) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_0;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                            <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;b&quot;</span> || in == <span class="hljs-string">&quot;B&quot;</span>) <span class="hljs-keyword">begin</span><br>                            state &lt;= st_2;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;e&quot;</span> || in == <span class="hljs-string">&quot;E&quot;</span>) <span class="hljs-keyword">begin</span><br>                            state &lt;= st_8;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                            state &lt;= st_1;<br>                        <span class="hljs-keyword">end</span><br>                        <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                            state &lt;= st_7;<br>                        <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">end</span><br>                    <br>                <span class="hljs-keyword">end</span><br><br>                st_2: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;e&quot;</span> || in == <span class="hljs-string">&quot;E&quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_3;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_3: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;g&quot;</span> || in == <span class="hljs-string">&quot;G&quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_4;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_4: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;i&quot;</span> || in == <span class="hljs-string">&quot;I&quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_5;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_5: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;n&quot;</span> || in == <span class="hljs-string">&quot;N&quot;</span>) <span class="hljs-keyword">begin</span><br>                        match &lt;= match + <span class="hljs-number">32&#x27;b1</span>;<br>                        state &lt;= st_6;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_6: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        match &lt;= match - <span class="hljs-number">32&#x27;b1</span>;<br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_7: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_8: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;n&quot;</span> || in == <span class="hljs-string">&quot;N&quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_9;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_9: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot;d&quot;</span> || in == <span class="hljs-string">&quot;D&quot;</span>) <span class="hljs-keyword">begin</span><br>                        match &lt;= match - <span class="hljs-number">32&#x27;b1</span>;<br>                        state &lt;= st_10;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>)<span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                st_10: <span class="hljs-keyword">begin</span><br>                    <span class="hljs-keyword">if</span>(in == <span class="hljs-string">&quot; &quot;</span>) <span class="hljs-keyword">begin</span><br>                        state &lt;= st_1;<br>                    <span class="hljs-keyword">end</span><br>                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span><br>                        match &lt;= match + <span class="hljs-number">32&#x27;b1</span>;<br>                        state &lt;= st_7;<br>                    <span class="hljs-keyword">end</span><br>                <span class="hljs-keyword">end</span><br><br>                <span class="hljs-keyword">default</span>: state &lt;= st_0;<br><br>            <span class="hljs-keyword">endcase</span><br>        <span class="hljs-keyword">end</span><br>    <span class="hljs-keyword">end</span><br>    <br>    <span class="hljs-keyword">assign</span> result = (match == <span class="hljs-number">32&#x27;b0</span>) ? <span class="hljs-number">1&#x27;b1</span> : <span class="hljs-number">1&#x27;b0</span>;<br><br><span class="hljs-keyword">endmodule</span><br></code></pre></td></tr></table></figure><p>æœ€åæä¸€å˜´ï¼Œæœ¬äººä¸€å¼€å§‹ä¸çŸ¥é“verilogä¸­å¯ä»¥ç›´æ¥åŒå¼•å·åŠ å­—æ¯ï¼Œlike â€œAâ€,æ¥è¡¨ç¤ºå­—æ¯çš„aciiç ï¼Œï¼Œä¹Ÿå®šä¹‰äº†ä¸€å †asciiå¸¸é‡ï¼Œæ‚²!ğŸ˜­ğŸ˜­ğŸ˜­</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs verilog"><span class="hljs-keyword">parameter</span> in_b = <span class="hljs-number">8&#x27;d66</span>, in_B = <span class="hljs-number">8&#x27;d98</span>,<br>          in_d = <span class="hljs-number">8&#x27;d68</span>, in_D = <span class="hljs-number">8&#x27;d100</span>,<br>          in_e = <span class="hljs-number">8&#x27;d69</span>, in_E = <span class="hljs-number">8&#x27;d101</span>,<br>          in_g = <span class="hljs-number">8&#x27;d71</span>, in_G = <span class="hljs-number">8&#x27;d103</span>,<br>          in_i = <span class="hljs-number">8&#x27;d73</span>, in_I = <span class="hljs-number">8&#x27;d105</span>,<br>          in_n = <span class="hljs-number">8&#x27;d78</span>, in_N = <span class="hljs-number">8&#x27;d110</span>,<br>          in_space = <span class="hljs-number">8&#x27;d32</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>CO</category>
      
      <category>å®éªŒ</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CO</tag>
      
      <tag>Verilog</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>My fist blog</title>
    <link href="/2024/10/05/My-fist-blog/"/>
    <url>/2024/10/05/My-fist-blog/</url>
    
    <content type="html"><![CDATA[<h1 id="è¿‡ç¨‹"><a href="#è¿‡ç¨‹" class="headerlink" title="è¿‡ç¨‹"></a>è¿‡ç¨‹</h1><p>ç»è¿‡äº†å¤§æ¦‚ä¸€å¤©çš„åŠªåŠ›ï¼Œ<strong>ä¸ªäººåšå®¢ç»ˆäºæ­å»ºå¥½äº†ï¼</strong><del>è™½ç„¶å¾ˆç®€é™‹ï¼ˆåç»­ä¼šä¸æ–­å®Œå–„ï¼‰</del> é‡‡ç”¨çš„æ˜¯hexoæ¶æ„å’Œfluidä¸»é¢˜<br>è¿™ä¸€å¤©ä¸‹æ¥ï¼Œä¹Ÿä¸å®¹æ˜“å•Šï¼Œèµ°äº†ä¸å°‘å¼¯è·¯ï¼Œè¸©äº†å¾ˆå¤šå‘ï¼Œä¸æ–­åœ°ä¸Šç½‘æŸ¥é˜…èµ„æ–™ï¼Œä¹Ÿæœ‰å¾ˆå¤šè‡ªå·±æ‘¸ç´¢çš„åœ°æ–¹ï¼Œç£•ç£•ç»Šç»Šçš„è¿‡ç¨‹ä¸­ä¹Ÿæœ‰ä¸å°‘æ”¶è·ã€‚</p><h1 id="æ„Ÿæƒ³"><a href="#æ„Ÿæƒ³" class="headerlink" title="æ„Ÿæƒ³"></a>æ„Ÿæƒ³</h1><h2 id="è¿˜å¥½æœ‰ä¸ªå›½åº†å‡è®©æˆ‘æœ‰æ—¶é—´èŠ±ä¸€æ•´å¤©æ­å»ºåšå®¢ï¼ˆå…¶å®æ˜¯æš‘å‡çº¯ç©å»äº†ï¼‰"><a href="#è¿˜å¥½æœ‰ä¸ªå›½åº†å‡è®©æˆ‘æœ‰æ—¶é—´èŠ±ä¸€æ•´å¤©æ­å»ºåšå®¢ï¼ˆå…¶å®æ˜¯æš‘å‡çº¯ç©å»äº†ï¼‰" class="headerlink" title="è¿˜å¥½æœ‰ä¸ªå›½åº†å‡è®©æˆ‘æœ‰æ—¶é—´èŠ±ä¸€æ•´å¤©æ­å»ºåšå®¢ï¼ˆå…¶å®æ˜¯æš‘å‡çº¯ç©å»äº†ï¼‰"></a>è¿˜å¥½æœ‰ä¸ªå›½åº†å‡è®©æˆ‘æœ‰æ—¶é—´èŠ±ä¸€æ•´å¤©æ­å»ºåšå®¢<del>ï¼ˆå…¶å®æ˜¯æš‘å‡çº¯ç©å»äº†ï¼‰</del></h2><h2 id="æ¥ä¸‹æ¥è¿˜éœ€è¦å­¦ä¹ çš„åœ°æ–¹"><a href="#æ¥ä¸‹æ¥è¿˜éœ€è¦å­¦ä¹ çš„åœ°æ–¹" class="headerlink" title="æ¥ä¸‹æ¥è¿˜éœ€è¦å­¦ä¹ çš„åœ°æ–¹"></a>æ¥ä¸‹æ¥è¿˜éœ€è¦å­¦ä¹ çš„åœ°æ–¹</h2><ul><li>äº†è§£gitçš„ç”¨æ³•</li><li>å°è¯•å°†fluidä¸»é¢˜çš„ä»£ç å—ä¿®æ”¹ä¸ºMacé£æ ¼<del>çº¯ç²¹æ˜¯ä¸ºäº†è£…</del></li><li>å†™ç‰©ç†ç¬”è®°å¹¶ä¸Šä¼ åšå®¢</li><li>å†™P1è¯¾ä¸‹å¹¶å†™ä¸€ç¯‡å¿ƒå¾—</li></ul><h1 id="é¸£è°¢"><a href="#é¸£è°¢" class="headerlink" title="é¸£è°¢"></a>é¸£è°¢</h1><ol><li><a href="https://hexo.fluid-dev.com/docs/start/">Fluidä¸»é¢˜å®˜æ–¹ä»‹ç»æ–‡æ¡£</a> å…¨ä¸­æ–‡æ–‡æ¡£</li><li><a href="https://zhuanlan.zhihu.com/p/371995929">çŸ¥ä¹å¤§ç¥çš„åšå®¢æ­å»ºæŒ‡å—</a> æ‰‹æŠŠæ‰‹æ•™å­¦</li><li>å„ä½å­¦é•¿å­¦å§ï¼Œæ­£æ˜¯çœ‹äº†ä½ ä»¬çš„åšå®¢ï¼Œæ‰æƒ³å»ºä¸€ä¸ªè‡ªå·±çš„ï¼Œmotivationäº†ç®—æ˜¯</li></ol>]]></content>
    
    
    <categories>
      
      <category>æ—¥å¸¸</category>
      
    </categories>
    
    
    <tags>
      
      <tag>-ç¢ç¢å¿µ</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
